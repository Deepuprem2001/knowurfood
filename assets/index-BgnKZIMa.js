var o7=Object.defineProperty;var c7=(n,t,e)=>t in n?o7(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var lt=(n,t,e)=>c7(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();function Nw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var v_={exports:{}},td={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wC;function l7(){if(wC)return td;wC=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return td.Fragment=t,td.jsx=e,td.jsxs=e,td}var bC;function u7(){return bC||(bC=1,v_.exports=l7()),v_.exports}var P=u7(),__={exports:{}},ed={},x_={exports:{}},w_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EC;function h7(){return EC||(EC=1,function(n){function t(K,ct){var yt=K.length;K.push(ct);t:for(;0<yt;){var et=yt-1>>>1,V=K[et];if(0<i(V,ct))K[et]=ct,K[yt]=V,yt=et;else break t}}function e(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ct=K[0],yt=K.pop();if(yt!==ct){K[0]=yt;t:for(var et=0,V=K.length,q=V>>>1;et<q;){var ot=2*(et+1)-1,nt=K[ot],pt=ot+1,Tt=K[pt];if(0>i(nt,yt))pt<V&&0>i(Tt,nt)?(K[et]=Tt,K[pt]=yt,et=pt):(K[et]=nt,K[ot]=yt,et=ot);else if(pt<V&&0>i(Tt,yt))K[et]=Tt,K[pt]=yt,et=pt;else break t}}return ct}function i(K,ct){var yt=K.sortIndex-ct.sortIndex;return yt!==0?yt:K.id-ct.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],h=[],d=1,g=null,m=3,y=!1,x=!1,b=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function k(K){for(var ct=e(h);ct!==null;){if(ct.callback===null)r(h);else if(ct.startTime<=K)r(h),ct.sortIndex=ct.expirationTime,t(l,ct);else break;ct=e(h)}}function N(K){if(b=!1,k(K),!x)if(e(l)!==null)x=!0,j||(j=!0,G());else{var ct=e(h);ct!==null&&xt(N,ct.startTime-K)}}var j=!1,O=-1,C=5,M=-1;function B(){return E?!0:!(n.unstable_now()-M<C)}function H(){if(E=!1,j){var K=n.unstable_now();M=K;var ct=!0;try{t:{x=!1,b&&(b=!1,T(O),O=-1),y=!0;var yt=m;try{e:{for(k(K),g=e(l);g!==null&&!(g.expirationTime>K&&B());){var et=g.callback;if(typeof et=="function"){g.callback=null,m=g.priorityLevel;var V=et(g.expirationTime<=K);if(K=n.unstable_now(),typeof V=="function"){g.callback=V,k(K),ct=!0;break e}g===e(l)&&r(l),k(K)}else r(l);g=e(l)}if(g!==null)ct=!0;else{var q=e(h);q!==null&&xt(N,q.startTime-K),ct=!1}}break t}finally{g=null,m=yt,y=!1}ct=void 0}}finally{ct?G():j=!1}}}var G;if(typeof R=="function")G=function(){R(H)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,_t=U.port2;U.port1.onmessage=H,G=function(){_t.postMessage(null)}}else G=function(){S(H,0)};function xt(K,ct){O=S(function(){K(n.unstable_now())},ct)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(K){switch(m){case 1:case 2:case 3:var ct=3;break;default:ct=m}var yt=m;m=ct;try{return K()}finally{m=yt}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(K,ct){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var yt=m;m=K;try{return ct()}finally{m=yt}},n.unstable_scheduleCallback=function(K,ct,yt){var et=n.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?et+yt:et):yt=et,K){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=yt+V,K={id:d++,callback:ct,priorityLevel:K,startTime:yt,expirationTime:V,sortIndex:-1},yt>et?(K.sortIndex=yt,t(h,K),e(l)===null&&K===e(h)&&(b?(T(O),O=-1):b=!0,xt(N,yt-et))):(K.sortIndex=V,t(l,K),x||y||(x=!0,j||(j=!0,G()))),K},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(K){var ct=m;return function(){var yt=m;m=ct;try{return K.apply(this,arguments)}finally{m=yt}}}}(w_)),w_}var AC;function f7(){return AC||(AC=1,x_.exports=h7()),x_.exports}var b_={exports:{}},te={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC;function d7(){if(TC)return te;TC=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function m(V){return V===null||typeof V!="object"?null:(V=g&&V[g]||V["@@iterator"],typeof V=="function"?V:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function E(V,q,ot){this.props=V,this.context=q,this.refs=b,this.updater=ot||y}E.prototype.isReactComponent={},E.prototype.setState=function(V,q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,q,"setState")},E.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function S(){}S.prototype=E.prototype;function T(V,q,ot){this.props=V,this.context=q,this.refs=b,this.updater=ot||y}var R=T.prototype=new S;R.constructor=T,x(R,E.prototype),R.isPureReactComponent=!0;var k=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function O(V,q,ot,nt,pt,Tt){return ot=Tt.ref,{$$typeof:n,type:V,key:q,ref:ot!==void 0?ot:null,props:Tt}}function C(V,q){return O(V.type,q,void 0,void 0,void 0,V.props)}function M(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function B(V){var q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ot){return q[ot]})}var H=/\/+/g;function G(V,q){return typeof V=="object"&&V!==null&&V.key!=null?B(""+V.key):q.toString(36)}function U(){}function _t(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(U,U):(V.status="pending",V.then(function(q){V.status==="pending"&&(V.status="fulfilled",V.value=q)},function(q){V.status==="pending"&&(V.status="rejected",V.reason=q)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function xt(V,q,ot,nt,pt){var Tt=typeof V;(Tt==="undefined"||Tt==="boolean")&&(V=null);var At=!1;if(V===null)At=!0;else switch(Tt){case"bigint":case"string":case"number":At=!0;break;case"object":switch(V.$$typeof){case n:case t:At=!0;break;case d:return At=V._init,xt(At(V._payload),q,ot,nt,pt)}}if(At)return pt=pt(V),At=nt===""?"."+G(V,0):nt,k(pt)?(ot="",At!=null&&(ot=At.replace(H,"$&/")+"/"),xt(pt,q,ot,"",function(Pt){return Pt})):pt!=null&&(M(pt)&&(pt=C(pt,ot+(pt.key==null||V&&V.key===pt.key?"":(""+pt.key).replace(H,"$&/")+"/")+At)),q.push(pt)),1;At=0;var Jt=nt===""?".":nt+":";if(k(V))for(var Bt=0;Bt<V.length;Bt++)nt=V[Bt],Tt=Jt+G(nt,Bt),At+=xt(nt,q,ot,Tt,pt);else if(Bt=m(V),typeof Bt=="function")for(V=Bt.call(V),Bt=0;!(nt=V.next()).done;)nt=nt.value,Tt=Jt+G(nt,Bt++),At+=xt(nt,q,ot,Tt,pt);else if(Tt==="object"){if(typeof V.then=="function")return xt(_t(V),q,ot,nt,pt);throw q=String(V),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return At}function K(V,q,ot){if(V==null)return V;var nt=[],pt=0;return xt(V,nt,"","",function(Tt){return q.call(ot,Tt,pt++)}),nt}function ct(V){if(V._status===-1){var q=V._result;q=q(),q.then(function(ot){(V._status===0||V._status===-1)&&(V._status=1,V._result=ot)},function(ot){(V._status===0||V._status===-1)&&(V._status=2,V._result=ot)}),V._status===-1&&(V._status=0,V._result=q)}if(V._status===1)return V._result.default;throw V._result}var yt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function et(){}return te.Children={map:K,forEach:function(V,q,ot){K(V,function(){q.apply(this,arguments)},ot)},count:function(V){var q=0;return K(V,function(){q++}),q},toArray:function(V){return K(V,function(q){return q})||[]},only:function(V){if(!M(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},te.Component=E,te.Fragment=e,te.Profiler=i,te.PureComponent=T,te.StrictMode=r,te.Suspense=l,te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,te.__COMPILER_RUNTIME={__proto__:null,c:function(V){return N.H.useMemoCache(V)}},te.cache=function(V){return function(){return V.apply(null,arguments)}},te.cloneElement=function(V,q,ot){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var nt=x({},V.props),pt=V.key,Tt=void 0;if(q!=null)for(At in q.ref!==void 0&&(Tt=void 0),q.key!==void 0&&(pt=""+q.key),q)!j.call(q,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&q.ref===void 0||(nt[At]=q[At]);var At=arguments.length-2;if(At===1)nt.children=ot;else if(1<At){for(var Jt=Array(At),Bt=0;Bt<At;Bt++)Jt[Bt]=arguments[Bt+2];nt.children=Jt}return O(V.type,pt,void 0,void 0,Tt,nt)},te.createContext=function(V){return V={$$typeof:a,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:s,_context:V},V},te.createElement=function(V,q,ot){var nt,pt={},Tt=null;if(q!=null)for(nt in q.key!==void 0&&(Tt=""+q.key),q)j.call(q,nt)&&nt!=="key"&&nt!=="__self"&&nt!=="__source"&&(pt[nt]=q[nt]);var At=arguments.length-2;if(At===1)pt.children=ot;else if(1<At){for(var Jt=Array(At),Bt=0;Bt<At;Bt++)Jt[Bt]=arguments[Bt+2];pt.children=Jt}if(V&&V.defaultProps)for(nt in At=V.defaultProps,At)pt[nt]===void 0&&(pt[nt]=At[nt]);return O(V,Tt,void 0,void 0,null,pt)},te.createRef=function(){return{current:null}},te.forwardRef=function(V){return{$$typeof:o,render:V}},te.isValidElement=M,te.lazy=function(V){return{$$typeof:d,_payload:{_status:-1,_result:V},_init:ct}},te.memo=function(V,q){return{$$typeof:h,type:V,compare:q===void 0?null:q}},te.startTransition=function(V){var q=N.T,ot={};N.T=ot;try{var nt=V(),pt=N.S;pt!==null&&pt(ot,nt),typeof nt=="object"&&nt!==null&&typeof nt.then=="function"&&nt.then(et,yt)}catch(Tt){yt(Tt)}finally{N.T=q}},te.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},te.use=function(V){return N.H.use(V)},te.useActionState=function(V,q,ot){return N.H.useActionState(V,q,ot)},te.useCallback=function(V,q){return N.H.useCallback(V,q)},te.useContext=function(V){return N.H.useContext(V)},te.useDebugValue=function(){},te.useDeferredValue=function(V,q){return N.H.useDeferredValue(V,q)},te.useEffect=function(V,q,ot){var nt=N.H;if(typeof ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return nt.useEffect(V,q)},te.useId=function(){return N.H.useId()},te.useImperativeHandle=function(V,q,ot){return N.H.useImperativeHandle(V,q,ot)},te.useInsertionEffect=function(V,q){return N.H.useInsertionEffect(V,q)},te.useLayoutEffect=function(V,q){return N.H.useLayoutEffect(V,q)},te.useMemo=function(V,q){return N.H.useMemo(V,q)},te.useOptimistic=function(V,q){return N.H.useOptimistic(V,q)},te.useReducer=function(V,q,ot){return N.H.useReducer(V,q,ot)},te.useRef=function(V){return N.H.useRef(V)},te.useState=function(V){return N.H.useState(V)},te.useSyncExternalStore=function(V,q,ot){return N.H.useSyncExternalStore(V,q,ot)},te.useTransition=function(){return N.H.useTransition()},te.version="19.1.0",te}var SC;function Pw(){return SC||(SC=1,b_.exports=d7()),b_.exports}var E_={exports:{}},Ar={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CC;function g7(){if(CC)return Ar;CC=1;var n=Pw();function t(l){var h="https://react.dev/errors/"+l;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,h,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:l,containerInfo:h,implementation:d}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,h){if(l==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ar.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ar.createPortal=function(l,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(l,h,null,d)},Ar.flushSync=function(l){var h=a.T,d=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=h,r.p=d,r.d.f()}},Ar.preconnect=function(l,h){typeof l=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(l,h))},Ar.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Ar.preinit=function(l,h){if(typeof l=="string"&&h&&typeof h.as=="string"){var d=h.as,g=o(d,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?r.d.S(l,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:m,fetchPriority:y}):d==="script"&&r.d.X(l,{crossOrigin:g,integrity:m,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ar.preinitModule=function(l,h){if(typeof l=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=o(h.as,h.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(l)},Ar.preload=function(l,h){if(typeof l=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,g=o(d,h.crossOrigin);r.d.L(l,d,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ar.preloadModule=function(l,h){if(typeof l=="string")if(h){var d=o(h.as,h.crossOrigin);r.d.m(l,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(l)},Ar.requestFormReset=function(l){r.d.r(l)},Ar.unstable_batchedUpdates=function(l,h){return l(h)},Ar.useFormState=function(l,h,d){return a.H.useFormState(l,h,d)},Ar.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ar.version="19.1.0",Ar}var IC;function I4(){if(IC)return E_.exports;IC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),E_.exports=g7(),E_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RC;function p7(){if(RC)return ed;RC=1;var n=f7(),t=Pw(),e=I4();function r(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function s(c){var u=c,f=c;if(c.alternate)for(;u.return;)u=u.return;else{c=u;do u=c,(u.flags&4098)!==0&&(f=u.return),c=u.return;while(c)}return u.tag===3?f:null}function a(c){if(c.tag===13){var u=c.memoizedState;if(u===null&&(c=c.alternate,c!==null&&(u=c.memoizedState)),u!==null)return u.dehydrated}return null}function o(c){if(s(c)!==c)throw Error(r(188))}function l(c){var u=c.alternate;if(!u){if(u=s(c),u===null)throw Error(r(188));return u!==c?null:c}for(var f=c,p=u;;){var _=f.return;if(_===null)break;var w=_.alternate;if(w===null){if(p=_.return,p!==null){f=p;continue}break}if(_.child===w.child){for(w=_.child;w;){if(w===f)return o(_),c;if(w===p)return o(_),u;w=w.sibling}throw Error(r(188))}if(f.return!==p.return)f=_,p=w;else{for(var D=!1,L=_.child;L;){if(L===f){D=!0,f=_,p=w;break}if(L===p){D=!0,p=_,f=w;break}L=L.sibling}if(!D){for(L=w.child;L;){if(L===f){D=!0,f=w,p=_;break}if(L===p){D=!0,p=w,f=_;break}L=L.sibling}if(!D)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?c:u}function h(c){var u=c.tag;if(u===5||u===26||u===27||u===6)return c;for(c=c.child;c!==null;){if(u=h(c),u!==null)return u;c=c.sibling}return null}var d=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),R=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function G(c){return c===null||typeof c!="object"?null:(c=H&&c[H]||c["@@iterator"],typeof c=="function"?c:null)}var U=Symbol.for("react.client.reference");function _t(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===U?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case x:return"Fragment";case E:return"Profiler";case b:return"StrictMode";case N:return"Suspense";case j:return"SuspenseList";case M:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case y:return"Portal";case R:return(c.displayName||"Context")+".Provider";case T:return(c._context.displayName||"Context")+".Consumer";case k:var u=c.render;return c=c.displayName,c||(c=u.displayName||u.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case O:return u=c.displayName||null,u!==null?u:_t(c.type)||"Memo";case C:u=c._payload,c=c._init;try{return _t(c(u))}catch{}}return null}var xt=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},et=[],V=-1;function q(c){return{current:c}}function ot(c){0>V||(c.current=et[V],et[V]=null,V--)}function nt(c,u){V++,et[V]=c.current,c.current=u}var pt=q(null),Tt=q(null),At=q(null),Jt=q(null);function Bt(c,u){switch(nt(At,u),nt(Tt,c),nt(pt,null),u.nodeType){case 9:case 11:c=(c=u.documentElement)&&(c=c.namespaceURI)?KS(c):0;break;default:if(c=u.tagName,u=u.namespaceURI)u=KS(u),c=$S(u,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}ot(pt),nt(pt,c)}function Pt(){ot(pt),ot(Tt),ot(At)}function zt(c){c.memoizedState!==null&&nt(Jt,c);var u=pt.current,f=$S(u,c.type);u!==f&&(nt(Tt,c),nt(pt,f))}function Zt(c){Tt.current===c&&(ot(pt),ot(Tt)),Jt.current===c&&(ot(Jt),Kf._currentValue=yt)}var Ge=Object.prototype.hasOwnProperty,Ye=n.unstable_scheduleCallback,en=n.unstable_cancelCallback,ri=n.unstable_shouldYield,Rt=n.unstable_requestPaint,Ot=n.unstable_now,wt=n.unstable_getCurrentPriorityLevel,kt=n.unstable_ImmediatePriority,vt=n.unstable_UserBlockingPriority,Wt=n.unstable_NormalPriority,Qt=n.unstable_LowPriority,Qe=n.unstable_IdlePriority,cn=n.log,Jn=n.unstable_setDisableYieldValue,ye=null,oe=null;function wr(c){if(typeof cn=="function"&&Jn(c),oe&&typeof oe.setStrictMode=="function")try{oe.setStrictMode(ye,c)}catch{}}var br=Math.clz32?Math.clz32:ic,s0=Math.log,xy=Math.LN2;function ic(c){return c>>>=0,c===0?32:31-(s0(c)/xy|0)|0}var sc=256,ac=4194304;function Hi(c){var u=c&42;if(u!==0)return u;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function jl(c,u,f){var p=c.pendingLanes;if(p===0)return 0;var _=0,w=c.suspendedLanes,D=c.pingedLanes;c=c.warmLanes;var L=p&134217727;return L!==0?(p=L&~w,p!==0?_=Hi(p):(D&=L,D!==0?_=Hi(D):f||(f=L&~c,f!==0&&(_=Hi(f))))):(L=p&~w,L!==0?_=Hi(L):D!==0?_=Hi(D):f||(f=p&~c,f!==0&&(_=Hi(f)))),_===0?0:u!==0&&u!==_&&(u&w)===0&&(w=_&-_,f=u&-u,w>=f||w===32&&(f&4194048)!==0)?u:_}function oc(c,u){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&u)===0}function Xh(c,u){switch(c){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kh(){var c=sc;return sc<<=1,(sc&4194048)===0&&(sc=256),c}function $h(){var c=ac;return ac<<=1,(ac&62914560)===0&&(ac=4194304),c}function Ks(c){for(var u=[],f=0;31>f;f++)u.push(c);return u}function $s(c,u){c.pendingLanes|=u,u!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Qh(c,u,f,p,_,w){var D=c.pendingLanes;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=f,c.entangledLanes&=f,c.errorRecoveryDisabledLanes&=f,c.shellSuspendCounter=0;var L=c.entanglements,W=c.expirationTimes,J=c.hiddenUpdates;for(f=D&~f;0<f;){var ht=31-br(f),gt=1<<ht;L[ht]=0,W[ht]=-1;var it=J[ht];if(it!==null)for(J[ht]=null,ht=0;ht<it.length;ht++){var st=it[ht];st!==null&&(st.lane&=-536870913)}f&=~gt}p!==0&&os(c,p,0),w!==0&&_===0&&c.tag!==0&&(c.suspendedLanes|=w&~(D&~u))}function os(c,u,f){c.pendingLanes|=u,c.suspendedLanes&=~u;var p=31-br(u);c.entangledLanes|=u,c.entanglements[p]=c.entanglements[p]|1073741824|f&4194090}function Zh(c,u){var f=c.entangledLanes|=u;for(c=c.entanglements;f;){var p=31-br(f),_=1<<p;_&u|c[p]&u&&(c[p]|=u),f&=~_}}function Ba(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function zl(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function Fa(){var c=ct.p;return c!==0?c:(c=window.event,c===void 0?32:pC(c.type))}function a0(c,u){var f=ct.p;try{return ct.p=c,u()}finally{ct.p=f}}var nn=Math.random().toString(36).slice(2),Fn="__reactFiber$"+nn,On="__reactProps$"+nn,_i="__reactContainer$"+nn,Jh="__reactEvents$"+nn,wy="__reactListeners$"+nn,Ua="__reactHandles$"+nn,o0="__reactResources$"+nn,cc="__reactMarker$"+nn;function ja(c){delete c[Fn],delete c[On],delete c[Jh],delete c[wy],delete c[Ua]}function Qs(c){var u=c[Fn];if(u)return u;for(var f=c.parentNode;f;){if(u=f[_i]||f[Fn]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(c=tC(c);c!==null;){if(f=c[Fn])return f;c=tC(c)}return u}c=f,f=c.parentNode}return null}function cs(c){if(c=c[Fn]||c[_i]){var u=c.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return c}return null}function ls(c){var u=c.tag;if(u===5||u===26||u===27||u===6)return c.stateNode;throw Error(r(33))}function kr(c){var u=c[o0];return u||(u=c[o0]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function bn(c){c[cc]=!0}var tf=new Set,Hl={};function Gi(c,u){Zs(c,u),Zs(c+"Capture",u)}function Zs(c,u){for(Hl[c]=u,c=0;c<u.length;c++)tf.add(u[c])}var c0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),l0={},lc={};function u0(c){return Ge.call(lc,c)?!0:Ge.call(l0,c)?!1:c0.test(c)?lc[c]=!0:(l0[c]=!0,!1)}function za(c,u,f){if(u0(u))if(f===null)c.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":c.removeAttribute(u);return;case"boolean":var p=u.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){c.removeAttribute(u);return}}c.setAttribute(u,""+f)}}function us(c,u,f){if(f===null)c.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(u);return}c.setAttribute(u,""+f)}}function hr(c,u,f,p){if(p===null)c.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttributeNS(u,f,""+p)}}var uc,h0;function Js(c){if(uc===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);uc=u&&u[1]||"",h0=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+uc+c+h0}var Gl=!1;function Wl(c,u){if(!c||Gl)return"";Gl=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(u){var gt=function(){throw Error()};if(Object.defineProperty(gt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(gt,[])}catch(st){var it=st}Reflect.construct(c,[],gt)}else{try{gt.call()}catch(st){it=st}c.call(gt.prototype)}}else{try{throw Error()}catch(st){it=st}(gt=c())&&typeof gt.catch=="function"&&gt.catch(function(){})}}catch(st){if(st&&it&&typeof st.stack=="string")return[st.stack,it.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=p.DetermineComponentFrameRoot(),D=w[0],L=w[1];if(D&&L){var W=D.split(`
`),J=L.split(`
`);for(_=p=0;p<W.length&&!W[p].includes("DetermineComponentFrameRoot");)p++;for(;_<J.length&&!J[_].includes("DetermineComponentFrameRoot");)_++;if(p===W.length||_===J.length)for(p=W.length-1,_=J.length-1;1<=p&&0<=_&&W[p]!==J[_];)_--;for(;1<=p&&0<=_;p--,_--)if(W[p]!==J[_]){if(p!==1||_!==1)do if(p--,_--,0>_||W[p]!==J[_]){var ht=`
`+W[p].replace(" at new "," at ");return c.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",c.displayName)),ht}while(1<=p&&0<=_);break}}}finally{Gl=!1,Error.prepareStackTrace=f}return(f=c?c.displayName||c.name:"")?Js(f):""}function ef(c){switch(c.tag){case 26:case 27:case 5:return Js(c.type);case 16:return Js("Lazy");case 13:return Js("Suspense");case 19:return Js("SuspenseList");case 0:case 15:return Wl(c.type,!1);case 11:return Wl(c.type.render,!1);case 1:return Wl(c.type,!0);case 31:return Js("Activity");default:return""}}function ql(c){try{var u="";do u+=ef(c),c=c.return;while(c);return u}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Lr(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function nf(c){var u=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function by(c){var u=nf(c)?"checked":"value",f=Object.getOwnPropertyDescriptor(c.constructor.prototype,u),p=""+c[u];if(!c.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var _=f.get,w=f.set;return Object.defineProperty(c,u,{configurable:!0,get:function(){return _.call(this)},set:function(D){p=""+D,w.call(this,D)}}),Object.defineProperty(c,u,{enumerable:f.enumerable}),{getValue:function(){return p},setValue:function(D){p=""+D},stopTracking:function(){c._valueTracker=null,delete c[u]}}}}function Yl(c){c._valueTracker||(c._valueTracker=by(c))}function rf(c){if(!c)return!1;var u=c._valueTracker;if(!u)return!0;var f=u.getValue(),p="";return c&&(p=nf(c)?c.checked?"true":"false":c.value),c=p,c!==f?(u.setValue(c),!0):!1}function hc(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Ey=/[\n"\\]/g;function Mn(c){return c.replace(Ey,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function ii(c,u,f,p,_,w,D,L){c.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?c.type=D:c.removeAttribute("type"),u!=null?D==="number"?(u===0&&c.value===""||c.value!=u)&&(c.value=""+Lr(u)):c.value!==""+Lr(u)&&(c.value=""+Lr(u)):D!=="submit"&&D!=="reset"||c.removeAttribute("value"),u!=null?Ha(c,D,Lr(u)):f!=null?Ha(c,D,Lr(f)):p!=null&&c.removeAttribute("value"),_==null&&w!=null&&(c.defaultChecked=!!w),_!=null&&(c.checked=_&&typeof _!="function"&&typeof _!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?c.name=""+Lr(L):c.removeAttribute("name")}function fc(c,u,f,p,_,w,D,L){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(c.type=w),u!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||u!=null))return;f=f!=null?""+Lr(f):"",u=u!=null?""+Lr(u):f,L||u===c.value||(c.value=u),c.defaultValue=u}p=p??_,p=typeof p!="function"&&typeof p!="symbol"&&!!p,c.checked=L?c.checked:!!p,c.defaultChecked=!!p,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(c.name=D)}function Ha(c,u,f){u==="number"&&hc(c.ownerDocument)===c||c.defaultValue===""+f||(c.defaultValue=""+f)}function ta(c,u,f,p){if(c=c.options,u){u={};for(var _=0;_<f.length;_++)u["$"+f[_]]=!0;for(f=0;f<c.length;f++)_=u.hasOwnProperty("$"+c[f].value),c[f].selected!==_&&(c[f].selected=_),_&&p&&(c[f].defaultSelected=!0)}else{for(f=""+Lr(f),u=null,_=0;_<c.length;_++){if(c[_].value===f){c[_].selected=!0,p&&(c[_].defaultSelected=!0);return}u!==null||c[_].disabled||(u=c[_])}u!==null&&(u.selected=!0)}}function Be(c,u,f){if(u!=null&&(u=""+Lr(u),u!==c.value&&(c.value=u),f==null)){c.defaultValue!==u&&(c.defaultValue=u);return}c.defaultValue=f!=null?""+Lr(f):""}function dc(c,u,f,p){if(u==null){if(p!=null){if(f!=null)throw Error(r(92));if(xt(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),u=f}f=Lr(u),c.defaultValue=f,p=c.textContent,p===f&&p!==""&&p!==null&&(c.value=p)}function xi(c,u){if(u){var f=c.firstChild;if(f&&f===c.lastChild&&f.nodeType===3){f.nodeValue=u;return}}c.textContent=u}var gc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function f0(c,u,f){var p=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?c.setProperty(u,""):u==="float"?c.cssFloat="":c[u]="":p?c.setProperty(u,f):typeof f!="number"||f===0||gc.has(u)?u==="float"?c.cssFloat=f:c[u]=(""+f).trim():c[u]=f+"px"}function sf(c,u,f){if(u!=null&&typeof u!="object")throw Error(r(62));if(c=c.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||u!=null&&u.hasOwnProperty(p)||(p.indexOf("--")===0?c.setProperty(p,""):p==="float"?c.cssFloat="":c[p]="");for(var _ in u)p=u[_],u.hasOwnProperty(_)&&f[_]!==p&&f0(c,_,p)}else for(var w in u)u.hasOwnProperty(w)&&f0(c,w,u[w])}function af(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ay=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ty=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xl(c){return Ty.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var ea=null;function wi(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var na=null,ra=null;function of(c){var u=cs(c);if(u&&(c=u.stateNode)){var f=c[On]||null;t:switch(c=u.stateNode,u.type){case"input":if(ii(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=c;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Mn(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var p=f[u];if(p!==c&&p.form===c.form){var _=p[On]||null;if(!_)throw Error(r(90));ii(p,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(u=0;u<f.length;u++)p=f[u],p.form===c.form&&rf(p)}break t;case"textarea":Be(c,f.value,f.defaultValue);break t;case"select":u=f.value,u!=null&&ta(c,!!f.multiple,u,!1)}}}var hs=!1;function d0(c,u,f){if(hs)return c(u,f);hs=!0;try{var p=c(u);return p}finally{if(hs=!1,(na!==null||ra!==null)&&(ap(),na&&(u=na,c=ra,ra=na=null,of(u),c)))for(u=0;u<c.length;u++)of(c[u])}}function pc(c,u){var f=c.stateNode;if(f===null)return null;var p=f[On]||null;if(p===null)return null;f=p[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(c=c.type,p=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!p;break t;default:c=!1}if(c)return null;if(f&&typeof f!="function")throw Error(r(231,u,typeof f));return f}var Wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bi=!1;if(Wi)try{var mc={};Object.defineProperty(mc,"passive",{get:function(){bi=!0}}),window.addEventListener("test",mc,mc),window.removeEventListener("test",mc,mc)}catch{bi=!1}var fs=null,Ga=null,ia=null;function cf(){if(ia)return ia;var c,u=Ga,f=u.length,p,_="value"in fs?fs.value:fs.textContent,w=_.length;for(c=0;c<f&&u[c]===_[c];c++);var D=f-c;for(p=1;p<=D&&u[f-p]===_[w-p];p++);return ia=_.slice(c,1<p?1-p:void 0)}function ds(c){var u=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&u===13&&(c=13)):c=u,c===10&&(c=13),32<=c||c===13?c:0}function gs(){return!0}function lf(){return!1}function tr(c){function u(f,p,_,w,D){this._reactName=f,this._targetInst=_,this.type=p,this.nativeEvent=w,this.target=D,this.currentTarget=null;for(var L in c)c.hasOwnProperty(L)&&(f=c[L],this[L]=f?f(w):w[L]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?gs:lf,this.isPropagationStopped=lf,this}return d(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=gs)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=gs)},persist:function(){},isPersistent:gs}),u}var Se={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kl=tr(Se),yc=d({},Se,{view:0,detail:0}),g0=tr(yc),$l,Ql,ps,vc=d({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wc,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==ps&&(ps&&c.type==="mousemove"?($l=c.screenX-ps.screenX,Ql=c.screenY-ps.screenY):Ql=$l=0,ps=c),$l)},movementY:function(c){return"movementY"in c?c.movementY:Ql}}),Ei=tr(vc),p0=d({},vc,{dataTransfer:0}),Sy=tr(p0),_c=d({},yc,{relatedTarget:0}),Zl=tr(_c),uf=d({},Se,{animationName:0,elapsedTime:0,pseudoElement:0}),Jl=tr(uf),m0=d({},Se,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),tu=tr(m0),Cy=d({},Se,{data:0}),hf=tr(Cy),xc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},v0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ff(c){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(c):(c=v0[c])?!!u[c]:!1}function wc(){return ff}var _0=d({},yc,{key:function(c){if(c.key){var u=xc[c.key]||c.key;if(u!=="Unidentified")return u}return c.type==="keypress"?(c=ds(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?y0[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wc,charCode:function(c){return c.type==="keypress"?ds(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?ds(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),eu=tr(_0),x0=d({},vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),df=tr(x0),sa=d({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wc}),w0=tr(sa),b0=d({},Se,{propertyName:0,elapsedTime:0,pseudoElement:0}),E0=tr(b0),A0=d({},vc,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),nu=tr(A0),Vr=d({},Se,{newState:0,oldState:0}),T0=tr(Vr),S0=[9,13,27,32],ms=Wi&&"CompositionEvent"in window,v=null;Wi&&"documentMode"in document&&(v=document.documentMode);var A=Wi&&"TextEvent"in window&&!v,I=Wi&&(!ms||v&&8<v&&11>=v),F=" ",$=!1;function at(c,u){switch(c){case"keyup":return S0.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bt(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var fe=!1;function Un(c,u){switch(c){case"compositionend":return bt(u);case"keypress":return u.which!==32?null:($=!0,F);case"textInput":return c=u.data,c===F&&$?null:c;default:return null}}function de(c,u){if(fe)return c==="compositionend"||!ms&&at(c,u)?(c=cf(),ia=Ga=fs=null,fe=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return I&&u.locale!=="ko"?null:u.data;default:return null}}var er={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u==="input"?!!er[c.type]:u==="textarea"}function aa(c,u,f,p){na?ra?ra.push(p):ra=[p]:na=p,u=fp(u,"onChange"),0<u.length&&(f=new Kl("onChange","change",null,f,p),c.push({event:f,listeners:u}))}var fr=null,ys=null;function gf(c){GS(c,0)}function C0(c){var u=ls(c);if(rf(u))return c}function hA(c,u){if(c==="change")return u}var fA=!1;if(Wi){var Iy;if(Wi){var Ry="oninput"in document;if(!Ry){var dA=document.createElement("div");dA.setAttribute("oninput","return;"),Ry=typeof dA.oninput=="function"}Iy=Ry}else Iy=!1;fA=Iy&&(!document.documentMode||9<document.documentMode)}function gA(){fr&&(fr.detachEvent("onpropertychange",pA),ys=fr=null)}function pA(c){if(c.propertyName==="value"&&C0(ys)){var u=[];aa(u,ys,c,wi(c)),d0(gf,u)}}function Vk(c,u,f){c==="focusin"?(gA(),fr=u,ys=f,fr.attachEvent("onpropertychange",pA)):c==="focusout"&&gA()}function Bk(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return C0(ys)}function Fk(c,u){if(c==="click")return C0(u)}function Uk(c,u){if(c==="input"||c==="change")return C0(u)}function jk(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var si=typeof Object.is=="function"?Object.is:jk;function pf(c,u){if(si(c,u))return!0;if(typeof c!="object"||c===null||typeof u!="object"||u===null)return!1;var f=Object.keys(c),p=Object.keys(u);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var _=f[p];if(!Ge.call(u,_)||!si(c[_],u[_]))return!1}return!0}function mA(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function yA(c,u){var f=mA(c);c=0;for(var p;f;){if(f.nodeType===3){if(p=c+f.textContent.length,c<=u&&p>=u)return{node:f,offset:u-c};c=p}t:{for(;f;){if(f.nextSibling){f=f.nextSibling;break t}f=f.parentNode}f=void 0}f=mA(f)}}function vA(c,u){return c&&u?c===u?!0:c&&c.nodeType===3?!1:u&&u.nodeType===3?vA(c,u.parentNode):"contains"in c?c.contains(u):c.compareDocumentPosition?!!(c.compareDocumentPosition(u)&16):!1:!1}function _A(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var u=hc(c.document);u instanceof c.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)c=u.contentWindow;else break;u=hc(c.document)}return u}function Dy(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u&&(u==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||u==="textarea"||c.contentEditable==="true")}var zk=Wi&&"documentMode"in document&&11>=document.documentMode,ru=null,Oy=null,mf=null,My=!1;function xA(c,u,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;My||ru==null||ru!==hc(p)||(p=ru,"selectionStart"in p&&Dy(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),mf&&pf(mf,p)||(mf=p,p=fp(Oy,"onSelect"),0<p.length&&(u=new Kl("onSelect","select",null,u,f),c.push({event:u,listeners:p}),u.target=ru)))}function bc(c,u){var f={};return f[c.toLowerCase()]=u.toLowerCase(),f["Webkit"+c]="webkit"+u,f["Moz"+c]="moz"+u,f}var iu={animationend:bc("Animation","AnimationEnd"),animationiteration:bc("Animation","AnimationIteration"),animationstart:bc("Animation","AnimationStart"),transitionrun:bc("Transition","TransitionRun"),transitionstart:bc("Transition","TransitionStart"),transitioncancel:bc("Transition","TransitionCancel"),transitionend:bc("Transition","TransitionEnd")},Ny={},wA={};Wi&&(wA=document.createElement("div").style,"AnimationEvent"in window||(delete iu.animationend.animation,delete iu.animationiteration.animation,delete iu.animationstart.animation),"TransitionEvent"in window||delete iu.transitionend.transition);function Ec(c){if(Ny[c])return Ny[c];if(!iu[c])return c;var u=iu[c],f;for(f in u)if(u.hasOwnProperty(f)&&f in wA)return Ny[c]=u[f];return c}var bA=Ec("animationend"),EA=Ec("animationiteration"),AA=Ec("animationstart"),Hk=Ec("transitionrun"),Gk=Ec("transitionstart"),Wk=Ec("transitioncancel"),TA=Ec("transitionend"),SA=new Map,Py="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Py.push("scrollEnd");function qi(c,u){SA.set(c,u),Gi(u,[c])}var CA=new WeakMap;function Ai(c,u){if(typeof c=="object"&&c!==null){var f=CA.get(c);return f!==void 0?f:(u={value:c,source:u,stack:ql(u)},CA.set(c,u),u)}return{value:c,source:u,stack:ql(u)}}var Ti=[],su=0,ky=0;function I0(){for(var c=su,u=ky=su=0;u<c;){var f=Ti[u];Ti[u++]=null;var p=Ti[u];Ti[u++]=null;var _=Ti[u];Ti[u++]=null;var w=Ti[u];if(Ti[u++]=null,p!==null&&_!==null){var D=p.pending;D===null?_.next=_:(_.next=D.next,D.next=_),p.pending=_}w!==0&&IA(f,_,w)}}function R0(c,u,f,p){Ti[su++]=c,Ti[su++]=u,Ti[su++]=f,Ti[su++]=p,ky|=p,c.lanes|=p,c=c.alternate,c!==null&&(c.lanes|=p)}function Ly(c,u,f,p){return R0(c,u,f,p),D0(c)}function au(c,u){return R0(c,null,null,u),D0(c)}function IA(c,u,f){c.lanes|=f;var p=c.alternate;p!==null&&(p.lanes|=f);for(var _=!1,w=c.return;w!==null;)w.childLanes|=f,p=w.alternate,p!==null&&(p.childLanes|=f),w.tag===22&&(c=w.stateNode,c===null||c._visibility&1||(_=!0)),c=w,w=w.return;return c.tag===3?(w=c.stateNode,_&&u!==null&&(_=31-br(f),c=w.hiddenUpdates,p=c[_],p===null?c[_]=[u]:p.push(u),u.lane=f|536870912),w):null}function D0(c){if(50<jf)throw jf=0,zv=null,Error(r(185));for(var u=c.return;u!==null;)c=u,u=c.return;return c.tag===3?c.stateNode:null}var ou={};function qk(c,u,f,p){this.tag=c,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(c,u,f,p){return new qk(c,u,f,p)}function Vy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function oa(c,u){var f=c.alternate;return f===null?(f=ai(c.tag,u,c.key,c.mode),f.elementType=c.elementType,f.type=c.type,f.stateNode=c.stateNode,f.alternate=c,c.alternate=f):(f.pendingProps=u,f.type=c.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=c.flags&65011712,f.childLanes=c.childLanes,f.lanes=c.lanes,f.child=c.child,f.memoizedProps=c.memoizedProps,f.memoizedState=c.memoizedState,f.updateQueue=c.updateQueue,u=c.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=c.sibling,f.index=c.index,f.ref=c.ref,f.refCleanup=c.refCleanup,f}function RA(c,u){c.flags&=65011714;var f=c.alternate;return f===null?(c.childLanes=0,c.lanes=u,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,u=f.dependencies,c.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),c}function O0(c,u,f,p,_,w){var D=0;if(p=c,typeof c=="function")Vy(c)&&(D=1);else if(typeof c=="string")D=X9(c,f,pt.current)?26:c==="html"||c==="head"||c==="body"?27:5;else t:switch(c){case M:return c=ai(31,f,u,_),c.elementType=M,c.lanes=w,c;case x:return Ac(f.children,_,w,u);case b:D=8,_|=24;break;case E:return c=ai(12,f,u,_|2),c.elementType=E,c.lanes=w,c;case N:return c=ai(13,f,u,_),c.elementType=N,c.lanes=w,c;case j:return c=ai(19,f,u,_),c.elementType=j,c.lanes=w,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case S:case R:D=10;break t;case T:D=9;break t;case k:D=11;break t;case O:D=14;break t;case C:D=16,p=null;break t}D=29,f=Error(r(130,c===null?"null":typeof c,"")),p=null}return u=ai(D,f,u,_),u.elementType=c,u.type=p,u.lanes=w,u}function Ac(c,u,f,p){return c=ai(7,c,p,u),c.lanes=f,c}function By(c,u,f){return c=ai(6,c,null,u),c.lanes=f,c}function Fy(c,u,f){return u=ai(4,c.children!==null?c.children:[],c.key,u),u.lanes=f,u.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},u}var cu=[],lu=0,M0=null,N0=0,Si=[],Ci=0,Tc=null,ca=1,la="";function Sc(c,u){cu[lu++]=N0,cu[lu++]=M0,M0=c,N0=u}function DA(c,u,f){Si[Ci++]=ca,Si[Ci++]=la,Si[Ci++]=Tc,Tc=c;var p=ca;c=la;var _=32-br(p)-1;p&=~(1<<_),f+=1;var w=32-br(u)+_;if(30<w){var D=_-_%5;w=(p&(1<<D)-1).toString(32),p>>=D,_-=D,ca=1<<32-br(u)+_|f<<_|p,la=w+c}else ca=1<<w|f<<_|p,la=c}function Uy(c){c.return!==null&&(Sc(c,1),DA(c,1,0))}function jy(c){for(;c===M0;)M0=cu[--lu],cu[lu]=null,N0=cu[--lu],cu[lu]=null;for(;c===Tc;)Tc=Si[--Ci],Si[Ci]=null,la=Si[--Ci],Si[Ci]=null,ca=Si[--Ci],Si[Ci]=null}var Br=null,gn=null,be=!1,Cc=null,vs=!1,zy=Error(r(519));function Ic(c){var u=Error(r(418,""));throw _f(Ai(u,c)),zy}function OA(c){var u=c.stateNode,f=c.type,p=c.memoizedProps;switch(u[Fn]=c,u[On]=p,f){case"dialog":le("cancel",u),le("close",u);break;case"iframe":case"object":case"embed":le("load",u);break;case"video":case"audio":for(f=0;f<Hf.length;f++)le(Hf[f],u);break;case"source":le("error",u);break;case"img":case"image":case"link":le("error",u),le("load",u);break;case"details":le("toggle",u);break;case"input":le("invalid",u),fc(u,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Yl(u);break;case"select":le("invalid",u);break;case"textarea":le("invalid",u),dc(u,p.value,p.defaultValue,p.children),Yl(u)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||p.suppressHydrationWarning===!0||XS(u.textContent,f)?(p.popover!=null&&(le("beforetoggle",u),le("toggle",u)),p.onScroll!=null&&le("scroll",u),p.onScrollEnd!=null&&le("scrollend",u),p.onClick!=null&&(u.onclick=dp),u=!0):u=!1,u||Ic(c)}function MA(c){for(Br=c.return;Br;)switch(Br.tag){case 5:case 13:vs=!1;return;case 27:case 3:vs=!0;return;default:Br=Br.return}}function yf(c){if(c!==Br)return!1;if(!be)return MA(c),be=!0,!1;var u=c.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=c.type,f=!(f!=="form"&&f!=="button")||i_(c.type,c.memoizedProps)),f=!f),f&&gn&&Ic(c),MA(c),u===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));t:{for(c=c.nextSibling,u=0;c;){if(c.nodeType===8)if(f=c.data,f==="/$"){if(u===0){gn=Xi(c.nextSibling);break t}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++;c=c.nextSibling}gn=null}}else u===27?(u=gn,ao(c.type)?(c=c_,c_=null,gn=c):gn=u):gn=Br?Xi(c.stateNode.nextSibling):null;return!0}function vf(){gn=Br=null,be=!1}function NA(){var c=Cc;return c!==null&&(qr===null?qr=c:qr.push.apply(qr,c),Cc=null),c}function _f(c){Cc===null?Cc=[c]:Cc.push(c)}var Hy=q(null),Rc=null,ua=null;function Wa(c,u,f){nt(Hy,u._currentValue),u._currentValue=f}function ha(c){c._currentValue=Hy.current,ot(Hy)}function Gy(c,u,f){for(;c!==null;){var p=c.alternate;if((c.childLanes&u)!==u?(c.childLanes|=u,p!==null&&(p.childLanes|=u)):p!==null&&(p.childLanes&u)!==u&&(p.childLanes|=u),c===f)break;c=c.return}}function Wy(c,u,f,p){var _=c.child;for(_!==null&&(_.return=c);_!==null;){var w=_.dependencies;if(w!==null){var D=_.child;w=w.firstContext;t:for(;w!==null;){var L=w;w=_;for(var W=0;W<u.length;W++)if(L.context===u[W]){w.lanes|=f,L=w.alternate,L!==null&&(L.lanes|=f),Gy(w.return,f,c),p||(D=null);break t}w=L.next}}else if(_.tag===18){if(D=_.return,D===null)throw Error(r(341));D.lanes|=f,w=D.alternate,w!==null&&(w.lanes|=f),Gy(D,f,c),D=null}else D=_.child;if(D!==null)D.return=_;else for(D=_;D!==null;){if(D===c){D=null;break}if(_=D.sibling,_!==null){_.return=D.return,D=_;break}D=D.return}_=D}}function xf(c,u,f,p){c=null;for(var _=u,w=!1;_!==null;){if(!w){if((_.flags&524288)!==0)w=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var D=_.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var L=_.type;si(_.pendingProps.value,D.value)||(c!==null?c.push(L):c=[L])}}else if(_===Jt.current){if(D=_.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(c!==null?c.push(Kf):c=[Kf])}_=_.return}c!==null&&Wy(u,c,f,p),u.flags|=262144}function P0(c){for(c=c.firstContext;c!==null;){if(!si(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Dc(c){Rc=c,ua=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Er(c){return PA(Rc,c)}function k0(c,u){return Rc===null&&Dc(c),PA(c,u)}function PA(c,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},ua===null){if(c===null)throw Error(r(308));ua=u,c.dependencies={lanes:0,firstContext:u},c.flags|=524288}else ua=ua.next=u;return f}var Yk=typeof AbortController<"u"?AbortController:function(){var c=[],u=this.signal={aborted:!1,addEventListener:function(f,p){c.push(p)}};this.abort=function(){u.aborted=!0,c.forEach(function(f){return f()})}},Xk=n.unstable_scheduleCallback,Kk=n.unstable_NormalPriority,zn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qy(){return{controller:new Yk,data:new Map,refCount:0}}function wf(c){c.refCount--,c.refCount===0&&Xk(Kk,function(){c.controller.abort()})}var bf=null,Yy=0,uu=0,hu=null;function $k(c,u){if(bf===null){var f=bf=[];Yy=0,uu=Kv(),hu={status:"pending",value:void 0,then:function(p){f.push(p)}}}return Yy++,u.then(kA,kA),u}function kA(){if(--Yy===0&&bf!==null){hu!==null&&(hu.status="fulfilled");var c=bf;bf=null,uu=0,hu=null;for(var u=0;u<c.length;u++)(0,c[u])()}}function Qk(c,u){var f=[],p={status:"pending",value:null,reason:null,then:function(_){f.push(_)}};return c.then(function(){p.status="fulfilled",p.value=u;for(var _=0;_<f.length;_++)(0,f[_])(u)},function(_){for(p.status="rejected",p.reason=_,_=0;_<f.length;_++)(0,f[_])(void 0)}),p}var LA=K.S;K.S=function(c,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&$k(c,u),LA!==null&&LA(c,u)};var Oc=q(null);function Xy(){var c=Oc.current;return c!==null?c:Xe.pooledCache}function L0(c,u){u===null?nt(Oc,Oc.current):nt(Oc,u.pool)}function VA(){var c=Xy();return c===null?null:{parent:zn._currentValue,pool:c}}var Ef=Error(r(460)),BA=Error(r(474)),V0=Error(r(542)),Ky={then:function(){}};function FA(c){return c=c.status,c==="fulfilled"||c==="rejected"}function B0(){}function UA(c,u,f){switch(f=c[f],f===void 0?c.push(u):f!==u&&(u.then(B0,B0),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw c=u.reason,zA(c),c;default:if(typeof u.status=="string")u.then(B0,B0);else{if(c=Xe,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=u,c.status="pending",c.then(function(p){if(u.status==="pending"){var _=u;_.status="fulfilled",_.value=p}},function(p){if(u.status==="pending"){var _=u;_.status="rejected",_.reason=p}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw c=u.reason,zA(c),c}throw Af=u,Ef}}var Af=null;function jA(){if(Af===null)throw Error(r(459));var c=Af;return Af=null,c}function zA(c){if(c===Ef||c===V0)throw Error(r(483))}var qa=!1;function $y(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qy(c,u){c=c.updateQueue,u.updateQueue===c&&(u.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Ya(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Xa(c,u,f){var p=c.updateQueue;if(p===null)return null;if(p=p.shared,(De&2)!==0){var _=p.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),p.pending=u,u=D0(c),IA(c,null,f),u}return R0(c,p,u,f),D0(c)}function Tf(c,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var p=u.lanes;p&=c.pendingLanes,f|=p,u.lanes=f,Zh(c,f)}}function Zy(c,u){var f=c.updateQueue,p=c.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var _=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var D={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?_=w=D:w=w.next=D,f=f.next}while(f!==null);w===null?_=w=u:w=w.next=u}else _=w=u;f={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:w,shared:p.shared,callbacks:p.callbacks},c.updateQueue=f;return}c=f.lastBaseUpdate,c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=u}var Jy=!1;function Sf(){if(Jy){var c=hu;if(c!==null)throw c}}function Cf(c,u,f,p){Jy=!1;var _=c.updateQueue;qa=!1;var w=_.firstBaseUpdate,D=_.lastBaseUpdate,L=_.shared.pending;if(L!==null){_.shared.pending=null;var W=L,J=W.next;W.next=null,D===null?w=J:D.next=J,D=W;var ht=c.alternate;ht!==null&&(ht=ht.updateQueue,L=ht.lastBaseUpdate,L!==D&&(L===null?ht.firstBaseUpdate=J:L.next=J,ht.lastBaseUpdate=W))}if(w!==null){var gt=_.baseState;D=0,ht=J=W=null,L=w;do{var it=L.lane&-536870913,st=it!==L.lane;if(st?(ge&it)===it:(p&it)===it){it!==0&&it===uu&&(Jy=!0),ht!==null&&(ht=ht.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});t:{var Yt=c,Ht=L;it=u;var je=f;switch(Ht.tag){case 1:if(Yt=Ht.payload,typeof Yt=="function"){gt=Yt.call(je,gt,it);break t}gt=Yt;break t;case 3:Yt.flags=Yt.flags&-65537|128;case 0:if(Yt=Ht.payload,it=typeof Yt=="function"?Yt.call(je,gt,it):Yt,it==null)break t;gt=d({},gt,it);break t;case 2:qa=!0}}it=L.callback,it!==null&&(c.flags|=64,st&&(c.flags|=8192),st=_.callbacks,st===null?_.callbacks=[it]:st.push(it))}else st={lane:it,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ht===null?(J=ht=st,W=gt):ht=ht.next=st,D|=it;if(L=L.next,L===null){if(L=_.shared.pending,L===null)break;st=L,L=st.next,st.next=null,_.lastBaseUpdate=st,_.shared.pending=null}}while(!0);ht===null&&(W=gt),_.baseState=W,_.firstBaseUpdate=J,_.lastBaseUpdate=ht,w===null&&(_.shared.lanes=0),no|=D,c.lanes=D,c.memoizedState=gt}}function HA(c,u){if(typeof c!="function")throw Error(r(191,c));c.call(u)}function GA(c,u){var f=c.callbacks;if(f!==null)for(c.callbacks=null,c=0;c<f.length;c++)HA(f[c],u)}var fu=q(null),F0=q(0);function WA(c,u){c=va,nt(F0,c),nt(fu,u),va=c|u.baseLanes}function tv(){nt(F0,va),nt(fu,fu.current)}function ev(){va=F0.current,ot(fu),ot(F0)}var Ka=0,ee=null,Fe=null,Nn=null,U0=!1,du=!1,Mc=!1,j0=0,If=0,gu=null,Zk=0;function En(){throw Error(r(321))}function nv(c,u){if(u===null)return!1;for(var f=0;f<u.length&&f<c.length;f++)if(!si(c[f],u[f]))return!1;return!0}function rv(c,u,f,p,_,w){return Ka=w,ee=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,K.H=c===null||c.memoizedState===null?IT:RT,Mc=!1,w=f(p,_),Mc=!1,du&&(w=YA(u,f,p,_)),qA(c),w}function qA(c){K.H=Y0;var u=Fe!==null&&Fe.next!==null;if(Ka=0,Nn=Fe=ee=null,U0=!1,If=0,gu=null,u)throw Error(r(300));c===null||nr||(c=c.dependencies,c!==null&&P0(c)&&(nr=!0))}function YA(c,u,f,p){ee=c;var _=0;do{if(du&&(gu=null),If=0,du=!1,25<=_)throw Error(r(301));if(_+=1,Nn=Fe=null,c.updateQueue!=null){var w=c.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}K.H=s9,w=u(f,p)}while(du);return w}function Jk(){var c=K.H,u=c.useState()[0];return u=typeof u.then=="function"?Rf(u):u,c=c.useState()[0],(Fe!==null?Fe.memoizedState:null)!==c&&(ee.flags|=1024),u}function iv(){var c=j0!==0;return j0=0,c}function sv(c,u,f){u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~f}function av(c){if(U0){for(c=c.memoizedState;c!==null;){var u=c.queue;u!==null&&(u.pending=null),c=c.next}U0=!1}Ka=0,Nn=Fe=ee=null,du=!1,If=j0=0,gu=null}function Gr(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?ee.memoizedState=Nn=c:Nn=Nn.next=c,Nn}function Pn(){if(Fe===null){var c=ee.alternate;c=c!==null?c.memoizedState:null}else c=Fe.next;var u=Nn===null?ee.memoizedState:Nn.next;if(u!==null)Nn=u,Fe=c;else{if(c===null)throw ee.alternate===null?Error(r(467)):Error(r(310));Fe=c,c={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Nn===null?ee.memoizedState=Nn=c:Nn=Nn.next=c}return Nn}function ov(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rf(c){var u=If;return If+=1,gu===null&&(gu=[]),c=UA(gu,c,u),u=ee,(Nn===null?u.memoizedState:Nn.next)===null&&(u=u.alternate,K.H=u===null||u.memoizedState===null?IT:RT),c}function z0(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Rf(c);if(c.$$typeof===R)return Er(c)}throw Error(r(438,String(c)))}function cv(c){var u=null,f=ee.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var p=ee.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(u={data:p.data.map(function(_){return _.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=ov(),ee.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(c),p=0;p<c;p++)f[p]=B;return u.index++,f}function fa(c,u){return typeof u=="function"?u(c):u}function H0(c){var u=Pn();return lv(u,Fe,c)}function lv(c,u,f){var p=c.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var _=c.baseQueue,w=p.pending;if(w!==null){if(_!==null){var D=_.next;_.next=w.next,w.next=D}u.baseQueue=_=w,p.pending=null}if(w=c.baseState,_===null)c.memoizedState=w;else{u=_.next;var L=D=null,W=null,J=u,ht=!1;do{var gt=J.lane&-536870913;if(gt!==J.lane?(ge&gt)===gt:(Ka&gt)===gt){var it=J.revertLane;if(it===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),gt===uu&&(ht=!0);else if((Ka&it)===it){J=J.next,it===uu&&(ht=!0);continue}else gt={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},W===null?(L=W=gt,D=w):W=W.next=gt,ee.lanes|=it,no|=it;gt=J.action,Mc&&f(w,gt),w=J.hasEagerState?J.eagerState:f(w,gt)}else it={lane:gt,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},W===null?(L=W=it,D=w):W=W.next=it,ee.lanes|=gt,no|=gt;J=J.next}while(J!==null&&J!==u);if(W===null?D=w:W.next=L,!si(w,c.memoizedState)&&(nr=!0,ht&&(f=hu,f!==null)))throw f;c.memoizedState=w,c.baseState=D,c.baseQueue=W,p.lastRenderedState=w}return _===null&&(p.lanes=0),[c.memoizedState,p.dispatch]}function uv(c){var u=Pn(),f=u.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var p=f.dispatch,_=f.pending,w=u.memoizedState;if(_!==null){f.pending=null;var D=_=_.next;do w=c(w,D.action),D=D.next;while(D!==_);si(w,u.memoizedState)||(nr=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),f.lastRenderedState=w}return[w,p]}function XA(c,u,f){var p=ee,_=Pn(),w=be;if(w){if(f===void 0)throw Error(r(407));f=f()}else f=u();var D=!si((Fe||_).memoizedState,f);D&&(_.memoizedState=f,nr=!0),_=_.queue;var L=QA.bind(null,p,_,c);if(Df(2048,8,L,[c]),_.getSnapshot!==u||D||Nn!==null&&Nn.memoizedState.tag&1){if(p.flags|=2048,pu(9,G0(),$A.bind(null,p,_,f,u),null),Xe===null)throw Error(r(349));w||(Ka&124)!==0||KA(p,u,f)}return f}function KA(c,u,f){c.flags|=16384,c={getSnapshot:u,value:f},u=ee.updateQueue,u===null?(u=ov(),ee.updateQueue=u,u.stores=[c]):(f=u.stores,f===null?u.stores=[c]:f.push(c))}function $A(c,u,f,p){u.value=f,u.getSnapshot=p,ZA(u)&&JA(c)}function QA(c,u,f){return f(function(){ZA(u)&&JA(c)})}function ZA(c){var u=c.getSnapshot;c=c.value;try{var f=u();return!si(c,f)}catch{return!0}}function JA(c){var u=au(c,2);u!==null&&hi(u,c,2)}function hv(c){var u=Gr();if(typeof c=="function"){var f=c;if(c=f(),Mc){wr(!0);try{f()}finally{wr(!1)}}}return u.memoizedState=u.baseState=c,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:c},u}function tT(c,u,f,p){return c.baseState=f,lv(c,Fe,typeof p=="function"?p:fa)}function t9(c,u,f,p,_){if(q0(c))throw Error(r(485));if(c=u.action,c!==null){var w={payload:_,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){w.listeners.push(D)}};K.T!==null?f(!0):w.isTransition=!1,p(w),f=u.pending,f===null?(w.next=u.pending=w,eT(u,w)):(w.next=f.next,u.pending=f.next=w)}}function eT(c,u){var f=u.action,p=u.payload,_=c.state;if(u.isTransition){var w=K.T,D={};K.T=D;try{var L=f(_,p),W=K.S;W!==null&&W(D,L),nT(c,u,L)}catch(J){fv(c,u,J)}finally{K.T=w}}else try{w=f(_,p),nT(c,u,w)}catch(J){fv(c,u,J)}}function nT(c,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){rT(c,u,p)},function(p){return fv(c,u,p)}):rT(c,u,f)}function rT(c,u,f){u.status="fulfilled",u.value=f,iT(u),c.state=f,u=c.pending,u!==null&&(f=u.next,f===u?c.pending=null:(f=f.next,u.next=f,eT(c,f)))}function fv(c,u,f){var p=c.pending;if(c.pending=null,p!==null){p=p.next;do u.status="rejected",u.reason=f,iT(u),u=u.next;while(u!==p)}c.action=null}function iT(c){c=c.listeners;for(var u=0;u<c.length;u++)(0,c[u])()}function sT(c,u){return u}function aT(c,u){if(be){var f=Xe.formState;if(f!==null){t:{var p=ee;if(be){if(gn){e:{for(var _=gn,w=vs;_.nodeType!==8;){if(!w){_=null;break e}if(_=Xi(_.nextSibling),_===null){_=null;break e}}w=_.data,_=w==="F!"||w==="F"?_:null}if(_){gn=Xi(_.nextSibling),p=_.data==="F!";break t}}Ic(p)}p=!1}p&&(u=f[0])}}return f=Gr(),f.memoizedState=f.baseState=u,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sT,lastRenderedState:u},f.queue=p,f=TT.bind(null,ee,p),p.dispatch=f,p=hv(!1),w=yv.bind(null,ee,!1,p.queue),p=Gr(),_={state:u,dispatch:null,action:c,pending:null},p.queue=_,f=t9.bind(null,ee,_,w,f),_.dispatch=f,p.memoizedState=c,[u,f,!1]}function oT(c){var u=Pn();return cT(u,Fe,c)}function cT(c,u,f){if(u=lv(c,u,sT)[0],c=H0(fa)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var p=Rf(u)}catch(D){throw D===Ef?V0:D}else p=u;u=Pn();var _=u.queue,w=_.dispatch;return f!==u.memoizedState&&(ee.flags|=2048,pu(9,G0(),e9.bind(null,_,f),null)),[p,w,c]}function e9(c,u){c.action=u}function lT(c){var u=Pn(),f=Fe;if(f!==null)return cT(u,f,c);Pn(),u=u.memoizedState,f=Pn();var p=f.queue.dispatch;return f.memoizedState=c,[u,p,!1]}function pu(c,u,f,p){return c={tag:c,create:f,deps:p,inst:u,next:null},u=ee.updateQueue,u===null&&(u=ov(),ee.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=c.next=c:(p=f.next,f.next=c,c.next=p,u.lastEffect=c),c}function G0(){return{destroy:void 0,resource:void 0}}function uT(){return Pn().memoizedState}function W0(c,u,f,p){var _=Gr();p=p===void 0?null:p,ee.flags|=c,_.memoizedState=pu(1|u,G0(),f,p)}function Df(c,u,f,p){var _=Pn();p=p===void 0?null:p;var w=_.memoizedState.inst;Fe!==null&&p!==null&&nv(p,Fe.memoizedState.deps)?_.memoizedState=pu(u,w,f,p):(ee.flags|=c,_.memoizedState=pu(1|u,w,f,p))}function hT(c,u){W0(8390656,8,c,u)}function fT(c,u){Df(2048,8,c,u)}function dT(c,u){return Df(4,2,c,u)}function gT(c,u){return Df(4,4,c,u)}function pT(c,u){if(typeof u=="function"){c=c();var f=u(c);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return c=c(),u.current=c,function(){u.current=null}}function mT(c,u,f){f=f!=null?f.concat([c]):null,Df(4,4,pT.bind(null,u,c),f)}function dv(){}function yT(c,u){var f=Pn();u=u===void 0?null:u;var p=f.memoizedState;return u!==null&&nv(u,p[1])?p[0]:(f.memoizedState=[c,u],c)}function vT(c,u){var f=Pn();u=u===void 0?null:u;var p=f.memoizedState;if(u!==null&&nv(u,p[1]))return p[0];if(p=c(),Mc){wr(!0);try{c()}finally{wr(!1)}}return f.memoizedState=[p,u],p}function gv(c,u,f){return f===void 0||(Ka&1073741824)!==0?c.memoizedState=u:(c.memoizedState=f,c=wS(),ee.lanes|=c,no|=c,f)}function _T(c,u,f,p){return si(f,u)?f:fu.current!==null?(c=gv(c,f,p),si(c,u)||(nr=!0),c):(Ka&42)===0?(nr=!0,c.memoizedState=f):(c=wS(),ee.lanes|=c,no|=c,u)}function xT(c,u,f,p,_){var w=ct.p;ct.p=w!==0&&8>w?w:8;var D=K.T,L={};K.T=L,yv(c,!1,u,f);try{var W=_(),J=K.S;if(J!==null&&J(L,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ht=Qk(W,p);Of(c,u,ht,ui(c))}else Of(c,u,p,ui(c))}catch(gt){Of(c,u,{then:function(){},status:"rejected",reason:gt},ui())}finally{ct.p=w,K.T=D}}function n9(){}function pv(c,u,f,p){if(c.tag!==5)throw Error(r(476));var _=wT(c).queue;xT(c,_,u,yt,f===null?n9:function(){return bT(c),f(p)})}function wT(c){var u=c.memoizedState;if(u!==null)return u;u={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:yt},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:f},next:null},c.memoizedState=u,c=c.alternate,c!==null&&(c.memoizedState=u),u}function bT(c){var u=wT(c).next.queue;Of(c,u,{},ui())}function mv(){return Er(Kf)}function ET(){return Pn().memoizedState}function AT(){return Pn().memoizedState}function r9(c){for(var u=c.return;u!==null;){switch(u.tag){case 24:case 3:var f=ui();c=Ya(f);var p=Xa(u,c,f);p!==null&&(hi(p,u,f),Tf(p,u,f)),u={cache:qy()},c.payload=u;return}u=u.return}}function i9(c,u,f){var p=ui();f={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},q0(c)?ST(u,f):(f=Ly(c,u,f,p),f!==null&&(hi(f,c,p),CT(f,u,p)))}function TT(c,u,f){var p=ui();Of(c,u,f,p)}function Of(c,u,f,p){var _={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(q0(c))ST(u,_);else{var w=c.alternate;if(c.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var D=u.lastRenderedState,L=w(D,f);if(_.hasEagerState=!0,_.eagerState=L,si(L,D))return R0(c,u,_,0),Xe===null&&I0(),!1}catch{}finally{}if(f=Ly(c,u,_,p),f!==null)return hi(f,c,p),CT(f,u,p),!0}return!1}function yv(c,u,f,p){if(p={lane:2,revertLane:Kv(),action:p,hasEagerState:!1,eagerState:null,next:null},q0(c)){if(u)throw Error(r(479))}else u=Ly(c,f,p,2),u!==null&&hi(u,c,2)}function q0(c){var u=c.alternate;return c===ee||u!==null&&u===ee}function ST(c,u){du=U0=!0;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}function CT(c,u,f){if((f&4194048)!==0){var p=u.lanes;p&=c.pendingLanes,f|=p,u.lanes=f,Zh(c,f)}}var Y0={readContext:Er,use:z0,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En},IT={readContext:Er,use:z0,useCallback:function(c,u){return Gr().memoizedState=[c,u===void 0?null:u],c},useContext:Er,useEffect:hT,useImperativeHandle:function(c,u,f){f=f!=null?f.concat([c]):null,W0(4194308,4,pT.bind(null,u,c),f)},useLayoutEffect:function(c,u){return W0(4194308,4,c,u)},useInsertionEffect:function(c,u){W0(4,2,c,u)},useMemo:function(c,u){var f=Gr();u=u===void 0?null:u;var p=c();if(Mc){wr(!0);try{c()}finally{wr(!1)}}return f.memoizedState=[p,u],p},useReducer:function(c,u,f){var p=Gr();if(f!==void 0){var _=f(u);if(Mc){wr(!0);try{f(u)}finally{wr(!1)}}}else _=u;return p.memoizedState=p.baseState=_,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:_},p.queue=c,c=c.dispatch=i9.bind(null,ee,c),[p.memoizedState,c]},useRef:function(c){var u=Gr();return c={current:c},u.memoizedState=c},useState:function(c){c=hv(c);var u=c.queue,f=TT.bind(null,ee,u);return u.dispatch=f,[c.memoizedState,f]},useDebugValue:dv,useDeferredValue:function(c,u){var f=Gr();return gv(f,c,u)},useTransition:function(){var c=hv(!1);return c=xT.bind(null,ee,c.queue,!0,!1),Gr().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,u,f){var p=ee,_=Gr();if(be){if(f===void 0)throw Error(r(407));f=f()}else{if(f=u(),Xe===null)throw Error(r(349));(ge&124)!==0||KA(p,u,f)}_.memoizedState=f;var w={value:f,getSnapshot:u};return _.queue=w,hT(QA.bind(null,p,w,c),[c]),p.flags|=2048,pu(9,G0(),$A.bind(null,p,w,f,u),null),f},useId:function(){var c=Gr(),u=Xe.identifierPrefix;if(be){var f=la,p=ca;f=(p&~(1<<32-br(p)-1)).toString(32)+f,u="«"+u+"R"+f,f=j0++,0<f&&(u+="H"+f.toString(32)),u+="»"}else f=Zk++,u="«"+u+"r"+f.toString(32)+"»";return c.memoizedState=u},useHostTransitionStatus:mv,useFormState:aT,useActionState:aT,useOptimistic:function(c){var u=Gr();u.memoizedState=u.baseState=c;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=yv.bind(null,ee,!0,f),f.dispatch=u,[c,u]},useMemoCache:cv,useCacheRefresh:function(){return Gr().memoizedState=r9.bind(null,ee)}},RT={readContext:Er,use:z0,useCallback:yT,useContext:Er,useEffect:fT,useImperativeHandle:mT,useInsertionEffect:dT,useLayoutEffect:gT,useMemo:vT,useReducer:H0,useRef:uT,useState:function(){return H0(fa)},useDebugValue:dv,useDeferredValue:function(c,u){var f=Pn();return _T(f,Fe.memoizedState,c,u)},useTransition:function(){var c=H0(fa)[0],u=Pn().memoizedState;return[typeof c=="boolean"?c:Rf(c),u]},useSyncExternalStore:XA,useId:ET,useHostTransitionStatus:mv,useFormState:oT,useActionState:oT,useOptimistic:function(c,u){var f=Pn();return tT(f,Fe,c,u)},useMemoCache:cv,useCacheRefresh:AT},s9={readContext:Er,use:z0,useCallback:yT,useContext:Er,useEffect:fT,useImperativeHandle:mT,useInsertionEffect:dT,useLayoutEffect:gT,useMemo:vT,useReducer:uv,useRef:uT,useState:function(){return uv(fa)},useDebugValue:dv,useDeferredValue:function(c,u){var f=Pn();return Fe===null?gv(f,c,u):_T(f,Fe.memoizedState,c,u)},useTransition:function(){var c=uv(fa)[0],u=Pn().memoizedState;return[typeof c=="boolean"?c:Rf(c),u]},useSyncExternalStore:XA,useId:ET,useHostTransitionStatus:mv,useFormState:lT,useActionState:lT,useOptimistic:function(c,u){var f=Pn();return Fe!==null?tT(f,Fe,c,u):(f.baseState=c,[c,f.queue.dispatch])},useMemoCache:cv,useCacheRefresh:AT},mu=null,Mf=0;function X0(c){var u=Mf;return Mf+=1,mu===null&&(mu=[]),UA(mu,c,u)}function Nf(c,u){u=u.props.ref,c.ref=u!==void 0?u:null}function K0(c,u){throw u.$$typeof===g?Error(r(525)):(c=Object.prototype.toString.call(u),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":c)))}function DT(c){var u=c._init;return u(c._payload)}function OT(c){function u(X,Y){if(c){var Z=X.deletions;Z===null?(X.deletions=[Y],X.flags|=16):Z.push(Y)}}function f(X,Y){if(!c)return null;for(;Y!==null;)u(X,Y),Y=Y.sibling;return null}function p(X){for(var Y=new Map;X!==null;)X.key!==null?Y.set(X.key,X):Y.set(X.index,X),X=X.sibling;return Y}function _(X,Y){return X=oa(X,Y),X.index=0,X.sibling=null,X}function w(X,Y,Z){return X.index=Z,c?(Z=X.alternate,Z!==null?(Z=Z.index,Z<Y?(X.flags|=67108866,Y):Z):(X.flags|=67108866,Y)):(X.flags|=1048576,Y)}function D(X){return c&&X.alternate===null&&(X.flags|=67108866),X}function L(X,Y,Z,ft){return Y===null||Y.tag!==6?(Y=By(Z,X.mode,ft),Y.return=X,Y):(Y=_(Y,Z),Y.return=X,Y)}function W(X,Y,Z,ft){var Dt=Z.type;return Dt===x?ht(X,Y,Z.props.children,ft,Z.key):Y!==null&&(Y.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===C&&DT(Dt)===Y.type)?(Y=_(Y,Z.props),Nf(Y,Z),Y.return=X,Y):(Y=O0(Z.type,Z.key,Z.props,null,X.mode,ft),Nf(Y,Z),Y.return=X,Y)}function J(X,Y,Z,ft){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==Z.containerInfo||Y.stateNode.implementation!==Z.implementation?(Y=Fy(Z,X.mode,ft),Y.return=X,Y):(Y=_(Y,Z.children||[]),Y.return=X,Y)}function ht(X,Y,Z,ft,Dt){return Y===null||Y.tag!==7?(Y=Ac(Z,X.mode,ft,Dt),Y.return=X,Y):(Y=_(Y,Z),Y.return=X,Y)}function gt(X,Y,Z){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=By(""+Y,X.mode,Z),Y.return=X,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case m:return Z=O0(Y.type,Y.key,Y.props,null,X.mode,Z),Nf(Z,Y),Z.return=X,Z;case y:return Y=Fy(Y,X.mode,Z),Y.return=X,Y;case C:var ft=Y._init;return Y=ft(Y._payload),gt(X,Y,Z)}if(xt(Y)||G(Y))return Y=Ac(Y,X.mode,Z,null),Y.return=X,Y;if(typeof Y.then=="function")return gt(X,X0(Y),Z);if(Y.$$typeof===R)return gt(X,k0(X,Y),Z);K0(X,Y)}return null}function it(X,Y,Z,ft){var Dt=Y!==null?Y.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Dt!==null?null:L(X,Y,""+Z,ft);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case m:return Z.key===Dt?W(X,Y,Z,ft):null;case y:return Z.key===Dt?J(X,Y,Z,ft):null;case C:return Dt=Z._init,Z=Dt(Z._payload),it(X,Y,Z,ft)}if(xt(Z)||G(Z))return Dt!==null?null:ht(X,Y,Z,ft,null);if(typeof Z.then=="function")return it(X,Y,X0(Z),ft);if(Z.$$typeof===R)return it(X,Y,k0(X,Z),ft);K0(X,Z)}return null}function st(X,Y,Z,ft,Dt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return X=X.get(Z)||null,L(Y,X,""+ft,Dt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case m:return X=X.get(ft.key===null?Z:ft.key)||null,W(Y,X,ft,Dt);case y:return X=X.get(ft.key===null?Z:ft.key)||null,J(Y,X,ft,Dt);case C:var se=ft._init;return ft=se(ft._payload),st(X,Y,Z,ft,Dt)}if(xt(ft)||G(ft))return X=X.get(Z)||null,ht(Y,X,ft,Dt,null);if(typeof ft.then=="function")return st(X,Y,Z,X0(ft),Dt);if(ft.$$typeof===R)return st(X,Y,Z,k0(Y,ft),Dt);K0(Y,ft)}return null}function Yt(X,Y,Z,ft){for(var Dt=null,se=null,Vt=Y,Gt=Y=0,ir=null;Vt!==null&&Gt<Z.length;Gt++){Vt.index>Gt?(ir=Vt,Vt=null):ir=Vt.sibling;var xe=it(X,Vt,Z[Gt],ft);if(xe===null){Vt===null&&(Vt=ir);break}c&&Vt&&xe.alternate===null&&u(X,Vt),Y=w(xe,Y,Gt),se===null?Dt=xe:se.sibling=xe,se=xe,Vt=ir}if(Gt===Z.length)return f(X,Vt),be&&Sc(X,Gt),Dt;if(Vt===null){for(;Gt<Z.length;Gt++)Vt=gt(X,Z[Gt],ft),Vt!==null&&(Y=w(Vt,Y,Gt),se===null?Dt=Vt:se.sibling=Vt,se=Vt);return be&&Sc(X,Gt),Dt}for(Vt=p(Vt);Gt<Z.length;Gt++)ir=st(Vt,X,Gt,Z[Gt],ft),ir!==null&&(c&&ir.alternate!==null&&Vt.delete(ir.key===null?Gt:ir.key),Y=w(ir,Y,Gt),se===null?Dt=ir:se.sibling=ir,se=ir);return c&&Vt.forEach(function(ho){return u(X,ho)}),be&&Sc(X,Gt),Dt}function Ht(X,Y,Z,ft){if(Z==null)throw Error(r(151));for(var Dt=null,se=null,Vt=Y,Gt=Y=0,ir=null,xe=Z.next();Vt!==null&&!xe.done;Gt++,xe=Z.next()){Vt.index>Gt?(ir=Vt,Vt=null):ir=Vt.sibling;var ho=it(X,Vt,xe.value,ft);if(ho===null){Vt===null&&(Vt=ir);break}c&&Vt&&ho.alternate===null&&u(X,Vt),Y=w(ho,Y,Gt),se===null?Dt=ho:se.sibling=ho,se=ho,Vt=ir}if(xe.done)return f(X,Vt),be&&Sc(X,Gt),Dt;if(Vt===null){for(;!xe.done;Gt++,xe=Z.next())xe=gt(X,xe.value,ft),xe!==null&&(Y=w(xe,Y,Gt),se===null?Dt=xe:se.sibling=xe,se=xe);return be&&Sc(X,Gt),Dt}for(Vt=p(Vt);!xe.done;Gt++,xe=Z.next())xe=st(Vt,X,Gt,xe.value,ft),xe!==null&&(c&&xe.alternate!==null&&Vt.delete(xe.key===null?Gt:xe.key),Y=w(xe,Y,Gt),se===null?Dt=xe:se.sibling=xe,se=xe);return c&&Vt.forEach(function(a7){return u(X,a7)}),be&&Sc(X,Gt),Dt}function je(X,Y,Z,ft){if(typeof Z=="object"&&Z!==null&&Z.type===x&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case m:t:{for(var Dt=Z.key;Y!==null;){if(Y.key===Dt){if(Dt=Z.type,Dt===x){if(Y.tag===7){f(X,Y.sibling),ft=_(Y,Z.props.children),ft.return=X,X=ft;break t}}else if(Y.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===C&&DT(Dt)===Y.type){f(X,Y.sibling),ft=_(Y,Z.props),Nf(ft,Z),ft.return=X,X=ft;break t}f(X,Y);break}else u(X,Y);Y=Y.sibling}Z.type===x?(ft=Ac(Z.props.children,X.mode,ft,Z.key),ft.return=X,X=ft):(ft=O0(Z.type,Z.key,Z.props,null,X.mode,ft),Nf(ft,Z),ft.return=X,X=ft)}return D(X);case y:t:{for(Dt=Z.key;Y!==null;){if(Y.key===Dt)if(Y.tag===4&&Y.stateNode.containerInfo===Z.containerInfo&&Y.stateNode.implementation===Z.implementation){f(X,Y.sibling),ft=_(Y,Z.children||[]),ft.return=X,X=ft;break t}else{f(X,Y);break}else u(X,Y);Y=Y.sibling}ft=Fy(Z,X.mode,ft),ft.return=X,X=ft}return D(X);case C:return Dt=Z._init,Z=Dt(Z._payload),je(X,Y,Z,ft)}if(xt(Z))return Yt(X,Y,Z,ft);if(G(Z)){if(Dt=G(Z),typeof Dt!="function")throw Error(r(150));return Z=Dt.call(Z),Ht(X,Y,Z,ft)}if(typeof Z.then=="function")return je(X,Y,X0(Z),ft);if(Z.$$typeof===R)return je(X,Y,k0(X,Z),ft);K0(X,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,Y!==null&&Y.tag===6?(f(X,Y.sibling),ft=_(Y,Z),ft.return=X,X=ft):(f(X,Y),ft=By(Z,X.mode,ft),ft.return=X,X=ft),D(X)):f(X,Y)}return function(X,Y,Z,ft){try{Mf=0;var Dt=je(X,Y,Z,ft);return mu=null,Dt}catch(Vt){if(Vt===Ef||Vt===V0)throw Vt;var se=ai(29,Vt,null,X.mode);return se.lanes=ft,se.return=X,se}finally{}}}var yu=OT(!0),MT=OT(!1),Ii=q(null),_s=null;function $a(c){var u=c.alternate;nt(Hn,Hn.current&1),nt(Ii,c),_s===null&&(u===null||fu.current!==null||u.memoizedState!==null)&&(_s=c)}function NT(c){if(c.tag===22){if(nt(Hn,Hn.current),nt(Ii,c),_s===null){var u=c.alternate;u!==null&&u.memoizedState!==null&&(_s=c)}}else Qa()}function Qa(){nt(Hn,Hn.current),nt(Ii,Ii.current)}function da(c){ot(Ii),_s===c&&(_s=null),ot(Hn)}var Hn=q(0);function $0(c){for(var u=c;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||o_(f)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function vv(c,u,f,p){u=c.memoizedState,f=f(p,u),f=f==null?u:d({},u,f),c.memoizedState=f,c.lanes===0&&(c.updateQueue.baseState=f)}var _v={enqueueSetState:function(c,u,f){c=c._reactInternals;var p=ui(),_=Ya(p);_.payload=u,f!=null&&(_.callback=f),u=Xa(c,_,p),u!==null&&(hi(u,c,p),Tf(u,c,p))},enqueueReplaceState:function(c,u,f){c=c._reactInternals;var p=ui(),_=Ya(p);_.tag=1,_.payload=u,f!=null&&(_.callback=f),u=Xa(c,_,p),u!==null&&(hi(u,c,p),Tf(u,c,p))},enqueueForceUpdate:function(c,u){c=c._reactInternals;var f=ui(),p=Ya(f);p.tag=2,u!=null&&(p.callback=u),u=Xa(c,p,f),u!==null&&(hi(u,c,f),Tf(u,c,f))}};function PT(c,u,f,p,_,w,D){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(p,w,D):u.prototype&&u.prototype.isPureReactComponent?!pf(f,p)||!pf(_,w):!0}function kT(c,u,f,p){c=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,p),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,p),u.state!==c&&_v.enqueueReplaceState(u,u.state,null)}function Nc(c,u){var f=u;if("ref"in u){f={};for(var p in u)p!=="ref"&&(f[p]=u[p])}if(c=c.defaultProps){f===u&&(f=d({},f));for(var _ in c)f[_]===void 0&&(f[_]=c[_])}return f}var Q0=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function LT(c){Q0(c)}function VT(c){console.error(c)}function BT(c){Q0(c)}function Z0(c,u){try{var f=c.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(p){setTimeout(function(){throw p})}}function FT(c,u,f){try{var p=c.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function xv(c,u,f){return f=Ya(f),f.tag=3,f.payload={element:null},f.callback=function(){Z0(c,u)},f}function UT(c){return c=Ya(c),c.tag=3,c}function jT(c,u,f,p){var _=f.type.getDerivedStateFromError;if(typeof _=="function"){var w=p.value;c.payload=function(){return _(w)},c.callback=function(){FT(u,f,p)}}var D=f.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(c.callback=function(){FT(u,f,p),typeof _!="function"&&(ro===null?ro=new Set([this]):ro.add(this));var L=p.stack;this.componentDidCatch(p.value,{componentStack:L!==null?L:""})})}function a9(c,u,f,p,_){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(u=f.alternate,u!==null&&xf(u,f,_,!0),f=Ii.current,f!==null){switch(f.tag){case 13:return _s===null?Gv():f.alternate===null&&pn===0&&(pn=3),f.flags&=-257,f.flags|=65536,f.lanes=_,p===Ky?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([p]):u.add(p),qv(c,p,_)),!1;case 22:return f.flags|=65536,p===Ky?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([p]):f.add(p)),qv(c,p,_)),!1}throw Error(r(435,f.tag))}return qv(c,p,_),Gv(),!1}if(be)return u=Ii.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=_,p!==zy&&(c=Error(r(422),{cause:p}),_f(Ai(c,f)))):(p!==zy&&(u=Error(r(423),{cause:p}),_f(Ai(u,f))),c=c.current.alternate,c.flags|=65536,_&=-_,c.lanes|=_,p=Ai(p,f),_=xv(c.stateNode,p,_),Zy(c,_),pn!==4&&(pn=2)),!1;var w=Error(r(520),{cause:p});if(w=Ai(w,f),Uf===null?Uf=[w]:Uf.push(w),pn!==4&&(pn=2),u===null)return!0;p=Ai(p,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,c=_&-_,f.lanes|=c,c=xv(f.stateNode,p,c),Zy(f,c),!1;case 1:if(u=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ro===null||!ro.has(w))))return f.flags|=65536,_&=-_,f.lanes|=_,_=UT(_),jT(_,c,f,p),Zy(f,_),!1}f=f.return}while(f!==null);return!1}var zT=Error(r(461)),nr=!1;function dr(c,u,f,p){u.child=c===null?MT(u,null,f,p):yu(u,c.child,f,p)}function HT(c,u,f,p,_){f=f.render;var w=u.ref;if("ref"in p){var D={};for(var L in p)L!=="ref"&&(D[L]=p[L])}else D=p;return Dc(u),p=rv(c,u,f,D,w,_),L=iv(),c!==null&&!nr?(sv(c,u,_),ga(c,u,_)):(be&&L&&Uy(u),u.flags|=1,dr(c,u,p,_),u.child)}function GT(c,u,f,p,_){if(c===null){var w=f.type;return typeof w=="function"&&!Vy(w)&&w.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=w,WT(c,u,w,p,_)):(c=O0(f.type,null,p,u,u.mode,_),c.ref=u.ref,c.return=u,u.child=c)}if(w=c.child,!Iv(c,_)){var D=w.memoizedProps;if(f=f.compare,f=f!==null?f:pf,f(D,p)&&c.ref===u.ref)return ga(c,u,_)}return u.flags|=1,c=oa(w,p),c.ref=u.ref,c.return=u,u.child=c}function WT(c,u,f,p,_){if(c!==null){var w=c.memoizedProps;if(pf(w,p)&&c.ref===u.ref)if(nr=!1,u.pendingProps=p=w,Iv(c,_))(c.flags&131072)!==0&&(nr=!0);else return u.lanes=c.lanes,ga(c,u,_)}return wv(c,u,f,p,_)}function qT(c,u,f){var p=u.pendingProps,_=p.children,w=c!==null?c.memoizedState:null;if(p.mode==="hidden"){if((u.flags&128)!==0){if(p=w!==null?w.baseLanes|f:f,c!==null){for(_=u.child=c.child,w=0;_!==null;)w=w|_.lanes|_.childLanes,_=_.sibling;u.childLanes=w&~p}else u.childLanes=0,u.child=null;return YT(c,u,p,f)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},c!==null&&L0(u,w!==null?w.cachePool:null),w!==null?WA(u,w):tv(),NT(u);else return u.lanes=u.childLanes=536870912,YT(c,u,w!==null?w.baseLanes|f:f,f)}else w!==null?(L0(u,w.cachePool),WA(u,w),Qa(),u.memoizedState=null):(c!==null&&L0(u,null),tv(),Qa());return dr(c,u,_,f),u.child}function YT(c,u,f,p){var _=Xy();return _=_===null?null:{parent:zn._currentValue,pool:_},u.memoizedState={baseLanes:f,cachePool:_},c!==null&&L0(u,null),tv(),NT(u),c!==null&&xf(c,u,p,!0),null}function J0(c,u){var f=u.ref;if(f===null)c!==null&&c.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(c===null||c.ref!==f)&&(u.flags|=4194816)}}function wv(c,u,f,p,_){return Dc(u),f=rv(c,u,f,p,void 0,_),p=iv(),c!==null&&!nr?(sv(c,u,_),ga(c,u,_)):(be&&p&&Uy(u),u.flags|=1,dr(c,u,f,_),u.child)}function XT(c,u,f,p,_,w){return Dc(u),u.updateQueue=null,f=YA(u,p,f,_),qA(c),p=iv(),c!==null&&!nr?(sv(c,u,w),ga(c,u,w)):(be&&p&&Uy(u),u.flags|=1,dr(c,u,f,w),u.child)}function KT(c,u,f,p,_){if(Dc(u),u.stateNode===null){var w=ou,D=f.contextType;typeof D=="object"&&D!==null&&(w=Er(D)),w=new f(p,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=_v,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=p,w.state=u.memoizedState,w.refs={},$y(u),D=f.contextType,w.context=typeof D=="object"&&D!==null?Er(D):ou,w.state=u.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(vv(u,f,D,p),w.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(D=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),D!==w.state&&_v.enqueueReplaceState(w,w.state,null),Cf(u,p,w,_),Sf(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),p=!0}else if(c===null){w=u.stateNode;var L=u.memoizedProps,W=Nc(f,L);w.props=W;var J=w.context,ht=f.contextType;D=ou,typeof ht=="object"&&ht!==null&&(D=Er(ht));var gt=f.getDerivedStateFromProps;ht=typeof gt=="function"||typeof w.getSnapshotBeforeUpdate=="function",L=u.pendingProps!==L,ht||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(L||J!==D)&&kT(u,w,p,D),qa=!1;var it=u.memoizedState;w.state=it,Cf(u,p,w,_),Sf(),J=u.memoizedState,L||it!==J||qa?(typeof gt=="function"&&(vv(u,f,gt,p),J=u.memoizedState),(W=qa||PT(u,f,W,p,it,J,D))?(ht||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=p,u.memoizedState=J),w.props=p,w.state=J,w.context=D,p=W):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),p=!1)}else{w=u.stateNode,Qy(c,u),D=u.memoizedProps,ht=Nc(f,D),w.props=ht,gt=u.pendingProps,it=w.context,J=f.contextType,W=ou,typeof J=="object"&&J!==null&&(W=Er(J)),L=f.getDerivedStateFromProps,(J=typeof L=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D!==gt||it!==W)&&kT(u,w,p,W),qa=!1,it=u.memoizedState,w.state=it,Cf(u,p,w,_),Sf();var st=u.memoizedState;D!==gt||it!==st||qa||c!==null&&c.dependencies!==null&&P0(c.dependencies)?(typeof L=="function"&&(vv(u,f,L,p),st=u.memoizedState),(ht=qa||PT(u,f,ht,p,it,st,W)||c!==null&&c.dependencies!==null&&P0(c.dependencies))?(J||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(p,st,W),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(p,st,W)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||D===c.memoizedProps&&it===c.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===c.memoizedProps&&it===c.memoizedState||(u.flags|=1024),u.memoizedProps=p,u.memoizedState=st),w.props=p,w.state=st,w.context=W,p=ht):(typeof w.componentDidUpdate!="function"||D===c.memoizedProps&&it===c.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===c.memoizedProps&&it===c.memoizedState||(u.flags|=1024),p=!1)}return w=p,J0(c,u),p=(u.flags&128)!==0,w||p?(w=u.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,c!==null&&p?(u.child=yu(u,c.child,null,_),u.child=yu(u,null,f,_)):dr(c,u,f,_),u.memoizedState=w.state,c=u.child):c=ga(c,u,_),c}function $T(c,u,f,p){return vf(),u.flags|=256,dr(c,u,f,p),u.child}var bv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ev(c){return{baseLanes:c,cachePool:VA()}}function Av(c,u,f){return c=c!==null?c.childLanes&~f:0,u&&(c|=Ri),c}function QT(c,u,f){var p=u.pendingProps,_=!1,w=(u.flags&128)!==0,D;if((D=w)||(D=c!==null&&c.memoizedState===null?!1:(Hn.current&2)!==0),D&&(_=!0,u.flags&=-129),D=(u.flags&32)!==0,u.flags&=-33,c===null){if(be){if(_?$a(u):Qa(),be){var L=gn,W;if(W=L){t:{for(W=L,L=vs;W.nodeType!==8;){if(!L){L=null;break t}if(W=Xi(W.nextSibling),W===null){L=null;break t}}L=W}L!==null?(u.memoizedState={dehydrated:L,treeContext:Tc!==null?{id:ca,overflow:la}:null,retryLane:536870912,hydrationErrors:null},W=ai(18,null,null,0),W.stateNode=L,W.return=u,u.child=W,Br=u,gn=null,W=!0):W=!1}W||Ic(u)}if(L=u.memoizedState,L!==null&&(L=L.dehydrated,L!==null))return o_(L)?u.lanes=32:u.lanes=536870912,null;da(u)}return L=p.children,p=p.fallback,_?(Qa(),_=u.mode,L=tp({mode:"hidden",children:L},_),p=Ac(p,_,f,null),L.return=u,p.return=u,L.sibling=p,u.child=L,_=u.child,_.memoizedState=Ev(f),_.childLanes=Av(c,D,f),u.memoizedState=bv,p):($a(u),Tv(u,L))}if(W=c.memoizedState,W!==null&&(L=W.dehydrated,L!==null)){if(w)u.flags&256?($a(u),u.flags&=-257,u=Sv(c,u,f)):u.memoizedState!==null?(Qa(),u.child=c.child,u.flags|=128,u=null):(Qa(),_=p.fallback,L=u.mode,p=tp({mode:"visible",children:p.children},L),_=Ac(_,L,f,null),_.flags|=2,p.return=u,_.return=u,p.sibling=_,u.child=p,yu(u,c.child,null,f),p=u.child,p.memoizedState=Ev(f),p.childLanes=Av(c,D,f),u.memoizedState=bv,u=_);else if($a(u),o_(L)){if(D=L.nextSibling&&L.nextSibling.dataset,D)var J=D.dgst;D=J,p=Error(r(419)),p.stack="",p.digest=D,_f({value:p,source:null,stack:null}),u=Sv(c,u,f)}else if(nr||xf(c,u,f,!1),D=(f&c.childLanes)!==0,nr||D){if(D=Xe,D!==null&&(p=f&-f,p=(p&42)!==0?1:Ba(p),p=(p&(D.suspendedLanes|f))!==0?0:p,p!==0&&p!==W.retryLane))throw W.retryLane=p,au(c,p),hi(D,c,p),zT;L.data==="$?"||Gv(),u=Sv(c,u,f)}else L.data==="$?"?(u.flags|=192,u.child=c.child,u=null):(c=W.treeContext,gn=Xi(L.nextSibling),Br=u,be=!0,Cc=null,vs=!1,c!==null&&(Si[Ci++]=ca,Si[Ci++]=la,Si[Ci++]=Tc,ca=c.id,la=c.overflow,Tc=u),u=Tv(u,p.children),u.flags|=4096);return u}return _?(Qa(),_=p.fallback,L=u.mode,W=c.child,J=W.sibling,p=oa(W,{mode:"hidden",children:p.children}),p.subtreeFlags=W.subtreeFlags&65011712,J!==null?_=oa(J,_):(_=Ac(_,L,f,null),_.flags|=2),_.return=u,p.return=u,p.sibling=_,u.child=p,p=_,_=u.child,L=c.child.memoizedState,L===null?L=Ev(f):(W=L.cachePool,W!==null?(J=zn._currentValue,W=W.parent!==J?{parent:J,pool:J}:W):W=VA(),L={baseLanes:L.baseLanes|f,cachePool:W}),_.memoizedState=L,_.childLanes=Av(c,D,f),u.memoizedState=bv,p):($a(u),f=c.child,c=f.sibling,f=oa(f,{mode:"visible",children:p.children}),f.return=u,f.sibling=null,c!==null&&(D=u.deletions,D===null?(u.deletions=[c],u.flags|=16):D.push(c)),u.child=f,u.memoizedState=null,f)}function Tv(c,u){return u=tp({mode:"visible",children:u},c.mode),u.return=c,c.child=u}function tp(c,u){return c=ai(22,c,null,u),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function Sv(c,u,f){return yu(u,c.child,null,f),c=Tv(u,u.pendingProps.children),c.flags|=2,u.memoizedState=null,c}function ZT(c,u,f){c.lanes|=u;var p=c.alternate;p!==null&&(p.lanes|=u),Gy(c.return,u,f)}function Cv(c,u,f,p,_){var w=c.memoizedState;w===null?c.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:_}:(w.isBackwards=u,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=f,w.tailMode=_)}function JT(c,u,f){var p=u.pendingProps,_=p.revealOrder,w=p.tail;if(dr(c,u,p.children,f),p=Hn.current,(p&2)!==0)p=p&1|2,u.flags|=128;else{if(c!==null&&(c.flags&128)!==0)t:for(c=u.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&ZT(c,f,u);else if(c.tag===19)ZT(c,f,u);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break t;for(;c.sibling===null;){if(c.return===null||c.return===u)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}p&=1}switch(nt(Hn,p),_){case"forwards":for(f=u.child,_=null;f!==null;)c=f.alternate,c!==null&&$0(c)===null&&(_=f),f=f.sibling;f=_,f===null?(_=u.child,u.child=null):(_=f.sibling,f.sibling=null),Cv(u,!1,_,f,w);break;case"backwards":for(f=null,_=u.child,u.child=null;_!==null;){if(c=_.alternate,c!==null&&$0(c)===null){u.child=_;break}c=_.sibling,_.sibling=f,f=_,_=c}Cv(u,!0,f,null,w);break;case"together":Cv(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function ga(c,u,f){if(c!==null&&(u.dependencies=c.dependencies),no|=u.lanes,(f&u.childLanes)===0)if(c!==null){if(xf(c,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(c!==null&&u.child!==c.child)throw Error(r(153));if(u.child!==null){for(c=u.child,f=oa(c,c.pendingProps),u.child=f,f.return=u;c.sibling!==null;)c=c.sibling,f=f.sibling=oa(c,c.pendingProps),f.return=u;f.sibling=null}return u.child}function Iv(c,u){return(c.lanes&u)!==0?!0:(c=c.dependencies,!!(c!==null&&P0(c)))}function o9(c,u,f){switch(u.tag){case 3:Bt(u,u.stateNode.containerInfo),Wa(u,zn,c.memoizedState.cache),vf();break;case 27:case 5:zt(u);break;case 4:Bt(u,u.stateNode.containerInfo);break;case 10:Wa(u,u.type,u.memoizedProps.value);break;case 13:var p=u.memoizedState;if(p!==null)return p.dehydrated!==null?($a(u),u.flags|=128,null):(f&u.child.childLanes)!==0?QT(c,u,f):($a(u),c=ga(c,u,f),c!==null?c.sibling:null);$a(u);break;case 19:var _=(c.flags&128)!==0;if(p=(f&u.childLanes)!==0,p||(xf(c,u,f,!1),p=(f&u.childLanes)!==0),_){if(p)return JT(c,u,f);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),nt(Hn,Hn.current),p)break;return null;case 22:case 23:return u.lanes=0,qT(c,u,f);case 24:Wa(u,zn,c.memoizedState.cache)}return ga(c,u,f)}function tS(c,u,f){if(c!==null)if(c.memoizedProps!==u.pendingProps)nr=!0;else{if(!Iv(c,f)&&(u.flags&128)===0)return nr=!1,o9(c,u,f);nr=(c.flags&131072)!==0}else nr=!1,be&&(u.flags&1048576)!==0&&DA(u,N0,u.index);switch(u.lanes=0,u.tag){case 16:t:{c=u.pendingProps;var p=u.elementType,_=p._init;if(p=_(p._payload),u.type=p,typeof p=="function")Vy(p)?(c=Nc(p,c),u.tag=1,u=KT(null,u,p,c,f)):(u.tag=0,u=wv(null,u,p,c,f));else{if(p!=null){if(_=p.$$typeof,_===k){u.tag=11,u=HT(null,u,p,c,f);break t}else if(_===O){u.tag=14,u=GT(null,u,p,c,f);break t}}throw u=_t(p)||p,Error(r(306,u,""))}}return u;case 0:return wv(c,u,u.type,u.pendingProps,f);case 1:return p=u.type,_=Nc(p,u.pendingProps),KT(c,u,p,_,f);case 3:t:{if(Bt(u,u.stateNode.containerInfo),c===null)throw Error(r(387));p=u.pendingProps;var w=u.memoizedState;_=w.element,Qy(c,u),Cf(u,p,null,f);var D=u.memoizedState;if(p=D.cache,Wa(u,zn,p),p!==w.cache&&Wy(u,[zn],f,!0),Sf(),p=D.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:D.cache},u.updateQueue.baseState=w,u.memoizedState=w,u.flags&256){u=$T(c,u,p,f);break t}else if(p!==_){_=Ai(Error(r(424)),u),_f(_),u=$T(c,u,p,f);break t}else{switch(c=u.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(gn=Xi(c.firstChild),Br=u,be=!0,Cc=null,vs=!0,f=MT(u,null,p,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(vf(),p===_){u=ga(c,u,f);break t}dr(c,u,p,f)}u=u.child}return u;case 26:return J0(c,u),c===null?(f=iC(u.type,null,u.pendingProps,null))?u.memoizedState=f:be||(f=u.type,c=u.pendingProps,p=gp(At.current).createElement(f),p[Fn]=u,p[On]=c,pr(p,f,c),bn(p),u.stateNode=p):u.memoizedState=iC(u.type,c.memoizedProps,u.pendingProps,c.memoizedState),null;case 27:return zt(u),c===null&&be&&(p=u.stateNode=eC(u.type,u.pendingProps,At.current),Br=u,vs=!0,_=gn,ao(u.type)?(c_=_,gn=Xi(p.firstChild)):gn=_),dr(c,u,u.pendingProps.children,f),J0(c,u),c===null&&(u.flags|=4194304),u.child;case 5:return c===null&&be&&((_=p=gn)&&(p=k9(p,u.type,u.pendingProps,vs),p!==null?(u.stateNode=p,Br=u,gn=Xi(p.firstChild),vs=!1,_=!0):_=!1),_||Ic(u)),zt(u),_=u.type,w=u.pendingProps,D=c!==null?c.memoizedProps:null,p=w.children,i_(_,w)?p=null:D!==null&&i_(_,D)&&(u.flags|=32),u.memoizedState!==null&&(_=rv(c,u,Jk,null,null,f),Kf._currentValue=_),J0(c,u),dr(c,u,p,f),u.child;case 6:return c===null&&be&&((c=f=gn)&&(f=L9(f,u.pendingProps,vs),f!==null?(u.stateNode=f,Br=u,gn=null,c=!0):c=!1),c||Ic(u)),null;case 13:return QT(c,u,f);case 4:return Bt(u,u.stateNode.containerInfo),p=u.pendingProps,c===null?u.child=yu(u,null,p,f):dr(c,u,p,f),u.child;case 11:return HT(c,u,u.type,u.pendingProps,f);case 7:return dr(c,u,u.pendingProps,f),u.child;case 8:return dr(c,u,u.pendingProps.children,f),u.child;case 12:return dr(c,u,u.pendingProps.children,f),u.child;case 10:return p=u.pendingProps,Wa(u,u.type,p.value),dr(c,u,p.children,f),u.child;case 9:return _=u.type._context,p=u.pendingProps.children,Dc(u),_=Er(_),p=p(_),u.flags|=1,dr(c,u,p,f),u.child;case 14:return GT(c,u,u.type,u.pendingProps,f);case 15:return WT(c,u,u.type,u.pendingProps,f);case 19:return JT(c,u,f);case 31:return p=u.pendingProps,f=u.mode,p={mode:p.mode,children:p.children},c===null?(f=tp(p,f),f.ref=u.ref,u.child=f,f.return=u,u=f):(f=oa(c.child,p),f.ref=u.ref,u.child=f,f.return=u,u=f),u;case 22:return qT(c,u,f);case 24:return Dc(u),p=Er(zn),c===null?(_=Xy(),_===null&&(_=Xe,w=qy(),_.pooledCache=w,w.refCount++,w!==null&&(_.pooledCacheLanes|=f),_=w),u.memoizedState={parent:p,cache:_},$y(u),Wa(u,zn,_)):((c.lanes&f)!==0&&(Qy(c,u),Cf(u,null,null,f),Sf()),_=c.memoizedState,w=u.memoizedState,_.parent!==p?(_={parent:p,cache:p},u.memoizedState=_,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=_),Wa(u,zn,p)):(p=w.cache,Wa(u,zn,p),p!==_.cache&&Wy(u,[zn],f,!0))),dr(c,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function pa(c){c.flags|=4}function eS(c,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!lC(u)){if(u=Ii.current,u!==null&&((ge&4194048)===ge?_s!==null:(ge&62914560)!==ge&&(ge&536870912)===0||u!==_s))throw Af=Ky,BA;c.flags|=8192}}function ep(c,u){u!==null&&(c.flags|=4),c.flags&16384&&(u=c.tag!==22?$h():536870912,c.lanes|=u,wu|=u)}function Pf(c,u){if(!be)switch(c.tailMode){case"hidden":u=c.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?c.tail=null:f.sibling=null;break;case"collapsed":f=c.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?u||c.tail===null?c.tail=null:c.tail.sibling=null:p.sibling=null}}function ln(c){var u=c.alternate!==null&&c.alternate.child===c.child,f=0,p=0;if(u)for(var _=c.child;_!==null;)f|=_.lanes|_.childLanes,p|=_.subtreeFlags&65011712,p|=_.flags&65011712,_.return=c,_=_.sibling;else for(_=c.child;_!==null;)f|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=c,_=_.sibling;return c.subtreeFlags|=p,c.childLanes=f,u}function c9(c,u,f){var p=u.pendingProps;switch(jy(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(u),null;case 1:return ln(u),null;case 3:return f=u.stateNode,p=null,c!==null&&(p=c.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),ha(zn),Pt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(c===null||c.child===null)&&(yf(u)?pa(u):c===null||c.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,NA())),ln(u),null;case 26:return f=u.memoizedState,c===null?(pa(u),f!==null?(ln(u),eS(u,f)):(ln(u),u.flags&=-16777217)):f?f!==c.memoizedState?(pa(u),ln(u),eS(u,f)):(ln(u),u.flags&=-16777217):(c.memoizedProps!==p&&pa(u),ln(u),u.flags&=-16777217),null;case 27:Zt(u),f=At.current;var _=u.type;if(c!==null&&u.stateNode!=null)c.memoizedProps!==p&&pa(u);else{if(!p){if(u.stateNode===null)throw Error(r(166));return ln(u),null}c=pt.current,yf(u)?OA(u):(c=eC(_,p,f),u.stateNode=c,pa(u))}return ln(u),null;case 5:if(Zt(u),f=u.type,c!==null&&u.stateNode!=null)c.memoizedProps!==p&&pa(u);else{if(!p){if(u.stateNode===null)throw Error(r(166));return ln(u),null}if(c=pt.current,yf(u))OA(u);else{switch(_=gp(At.current),c){case 1:c=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:c=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":c=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":c=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":c=_.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof p.is=="string"?_.createElement("select",{is:p.is}):_.createElement("select"),p.multiple?c.multiple=!0:p.size&&(c.size=p.size);break;default:c=typeof p.is=="string"?_.createElement(f,{is:p.is}):_.createElement(f)}}c[Fn]=u,c[On]=p;t:for(_=u.child;_!==null;){if(_.tag===5||_.tag===6)c.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===u)break t;for(;_.sibling===null;){if(_.return===null||_.return===u)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}u.stateNode=c;t:switch(pr(c,f,p),f){case"button":case"input":case"select":case"textarea":c=!!p.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&pa(u)}}return ln(u),u.flags&=-16777217,null;case 6:if(c&&u.stateNode!=null)c.memoizedProps!==p&&pa(u);else{if(typeof p!="string"&&u.stateNode===null)throw Error(r(166));if(c=At.current,yf(u)){if(c=u.stateNode,f=u.memoizedProps,p=null,_=Br,_!==null)switch(_.tag){case 27:case 5:p=_.memoizedProps}c[Fn]=u,c=!!(c.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||XS(c.nodeValue,f)),c||Ic(u)}else c=gp(c).createTextNode(p),c[Fn]=u,u.stateNode=c}return ln(u),null;case 13:if(p=u.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(_=yf(u),p!==null&&p.dehydrated!==null){if(c===null){if(!_)throw Error(r(318));if(_=u.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[Fn]=u}else vf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;ln(u),_=!1}else _=NA(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=_),_=!0;if(!_)return u.flags&256?(da(u),u):(da(u),null)}if(da(u),(u.flags&128)!==0)return u.lanes=f,u;if(f=p!==null,c=c!==null&&c.memoizedState!==null,f){p=u.child,_=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(_=p.alternate.memoizedState.cachePool.pool);var w=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==_&&(p.flags|=2048)}return f!==c&&f&&(u.child.flags|=8192),ep(u,u.updateQueue),ln(u),null;case 4:return Pt(),c===null&&Jv(u.stateNode.containerInfo),ln(u),null;case 10:return ha(u.type),ln(u),null;case 19:if(ot(Hn),_=u.memoizedState,_===null)return ln(u),null;if(p=(u.flags&128)!==0,w=_.rendering,w===null)if(p)Pf(_,!1);else{if(pn!==0||c!==null&&(c.flags&128)!==0)for(c=u.child;c!==null;){if(w=$0(c),w!==null){for(u.flags|=128,Pf(_,!1),c=w.updateQueue,u.updateQueue=c,ep(u,c),u.subtreeFlags=0,c=f,f=u.child;f!==null;)RA(f,c),f=f.sibling;return nt(Hn,Hn.current&1|2),u.child}c=c.sibling}_.tail!==null&&Ot()>ip&&(u.flags|=128,p=!0,Pf(_,!1),u.lanes=4194304)}else{if(!p)if(c=$0(w),c!==null){if(u.flags|=128,p=!0,c=c.updateQueue,u.updateQueue=c,ep(u,c),Pf(_,!0),_.tail===null&&_.tailMode==="hidden"&&!w.alternate&&!be)return ln(u),null}else 2*Ot()-_.renderingStartTime>ip&&f!==536870912&&(u.flags|=128,p=!0,Pf(_,!1),u.lanes=4194304);_.isBackwards?(w.sibling=u.child,u.child=w):(c=_.last,c!==null?c.sibling=w:u.child=w,_.last=w)}return _.tail!==null?(u=_.tail,_.rendering=u,_.tail=u.sibling,_.renderingStartTime=Ot(),u.sibling=null,c=Hn.current,nt(Hn,p?c&1|2:c&1),u):(ln(u),null);case 22:case 23:return da(u),ev(),p=u.memoizedState!==null,c!==null?c.memoizedState!==null!==p&&(u.flags|=8192):p&&(u.flags|=8192),p?(f&536870912)!==0&&(u.flags&128)===0&&(ln(u),u.subtreeFlags&6&&(u.flags|=8192)):ln(u),f=u.updateQueue,f!==null&&ep(u,f.retryQueue),f=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048),c!==null&&ot(Oc),null;case 24:return f=null,c!==null&&(f=c.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),ha(zn),ln(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function l9(c,u){switch(jy(u),u.tag){case 1:return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 3:return ha(zn),Pt(),c=u.flags,(c&65536)!==0&&(c&128)===0?(u.flags=c&-65537|128,u):null;case 26:case 27:case 5:return Zt(u),null;case 13:if(da(u),c=u.memoizedState,c!==null&&c.dehydrated!==null){if(u.alternate===null)throw Error(r(340));vf()}return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 19:return ot(Hn),null;case 4:return Pt(),null;case 10:return ha(u.type),null;case 22:case 23:return da(u),ev(),c!==null&&ot(Oc),c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 24:return ha(zn),null;case 25:return null;default:return null}}function nS(c,u){switch(jy(u),u.tag){case 3:ha(zn),Pt();break;case 26:case 27:case 5:Zt(u);break;case 4:Pt();break;case 13:da(u);break;case 19:ot(Hn);break;case 10:ha(u.type);break;case 22:case 23:da(u),ev(),c!==null&&ot(Oc);break;case 24:ha(zn)}}function kf(c,u){try{var f=u.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var _=p.next;f=_;do{if((f.tag&c)===c){p=void 0;var w=f.create,D=f.inst;p=w(),D.destroy=p}f=f.next}while(f!==_)}}catch(L){We(u,u.return,L)}}function Za(c,u,f){try{var p=u.updateQueue,_=p!==null?p.lastEffect:null;if(_!==null){var w=_.next;p=w;do{if((p.tag&c)===c){var D=p.inst,L=D.destroy;if(L!==void 0){D.destroy=void 0,_=u;var W=f,J=L;try{J()}catch(ht){We(_,W,ht)}}}p=p.next}while(p!==w)}}catch(ht){We(u,u.return,ht)}}function rS(c){var u=c.updateQueue;if(u!==null){var f=c.stateNode;try{GA(u,f)}catch(p){We(c,c.return,p)}}}function iS(c,u,f){f.props=Nc(c.type,c.memoizedProps),f.state=c.memoizedState;try{f.componentWillUnmount()}catch(p){We(c,u,p)}}function Lf(c,u){try{var f=c.ref;if(f!==null){switch(c.tag){case 26:case 27:case 5:var p=c.stateNode;break;case 30:p=c.stateNode;break;default:p=c.stateNode}typeof f=="function"?c.refCleanup=f(p):f.current=p}}catch(_){We(c,u,_)}}function xs(c,u){var f=c.ref,p=c.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(_){We(c,u,_)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(_){We(c,u,_)}else f.current=null}function sS(c){var u=c.type,f=c.memoizedProps,p=c.stateNode;try{t:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break t;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(_){We(c,c.return,_)}}function Rv(c,u,f){try{var p=c.stateNode;D9(p,c.type,f,u),p[On]=u}catch(_){We(c,c.return,_)}}function aS(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&ao(c.type)||c.tag===4}function Dv(c){t:for(;;){for(;c.sibling===null;){if(c.return===null||aS(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&ao(c.type)||c.flags&2||c.child===null||c.tag===4)continue t;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Ov(c,u,f){var p=c.tag;if(p===5||p===6)c=c.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(c,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(c),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=dp));else if(p!==4&&(p===27&&ao(c.type)&&(f=c.stateNode,u=null),c=c.child,c!==null))for(Ov(c,u,f),c=c.sibling;c!==null;)Ov(c,u,f),c=c.sibling}function np(c,u,f){var p=c.tag;if(p===5||p===6)c=c.stateNode,u?f.insertBefore(c,u):f.appendChild(c);else if(p!==4&&(p===27&&ao(c.type)&&(f=c.stateNode),c=c.child,c!==null))for(np(c,u,f),c=c.sibling;c!==null;)np(c,u,f),c=c.sibling}function oS(c){var u=c.stateNode,f=c.memoizedProps;try{for(var p=c.type,_=u.attributes;_.length;)u.removeAttributeNode(_[0]);pr(u,p,f),u[Fn]=c,u[On]=f}catch(w){We(c,c.return,w)}}var ma=!1,An=!1,Mv=!1,cS=typeof WeakSet=="function"?WeakSet:Set,rr=null;function u9(c,u){if(c=c.containerInfo,n_=xp,c=_A(c),Dy(c)){if("selectionStart"in c)var f={start:c.selectionStart,end:c.selectionEnd};else t:{f=(f=c.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var _=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break t}var D=0,L=-1,W=-1,J=0,ht=0,gt=c,it=null;e:for(;;){for(var st;gt!==f||_!==0&&gt.nodeType!==3||(L=D+_),gt!==w||p!==0&&gt.nodeType!==3||(W=D+p),gt.nodeType===3&&(D+=gt.nodeValue.length),(st=gt.firstChild)!==null;)it=gt,gt=st;for(;;){if(gt===c)break e;if(it===f&&++J===_&&(L=D),it===w&&++ht===p&&(W=D),(st=gt.nextSibling)!==null)break;gt=it,it=gt.parentNode}gt=st}f=L===-1||W===-1?null:{start:L,end:W}}else f=null}f=f||{start:0,end:0}}else f=null;for(r_={focusedElem:c,selectionRange:f},xp=!1,rr=u;rr!==null;)if(u=rr,c=u.child,(u.subtreeFlags&1024)!==0&&c!==null)c.return=u,rr=c;else for(;rr!==null;){switch(u=rr,w=u.alternate,c=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&w!==null){c=void 0,f=u,_=w.memoizedProps,w=w.memoizedState,p=f.stateNode;try{var Yt=Nc(f.type,_,f.elementType===f.type);c=p.getSnapshotBeforeUpdate(Yt,w),p.__reactInternalSnapshotBeforeUpdate=c}catch(Ht){We(f,f.return,Ht)}}break;case 3:if((c&1024)!==0){if(c=u.stateNode.containerInfo,f=c.nodeType,f===9)a_(c);else if(f===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":a_(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=u.sibling,c!==null){c.return=u.return,rr=c;break}rr=u.return}}function lS(c,u,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:Ja(c,f),p&4&&kf(5,f);break;case 1:if(Ja(c,f),p&4)if(c=f.stateNode,u===null)try{c.componentDidMount()}catch(D){We(f,f.return,D)}else{var _=Nc(f.type,u.memoizedProps);u=u.memoizedState;try{c.componentDidUpdate(_,u,c.__reactInternalSnapshotBeforeUpdate)}catch(D){We(f,f.return,D)}}p&64&&rS(f),p&512&&Lf(f,f.return);break;case 3:if(Ja(c,f),p&64&&(c=f.updateQueue,c!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{GA(c,u)}catch(D){We(f,f.return,D)}}break;case 27:u===null&&p&4&&oS(f);case 26:case 5:Ja(c,f),u===null&&p&4&&sS(f),p&512&&Lf(f,f.return);break;case 12:Ja(c,f);break;case 13:Ja(c,f),p&4&&fS(c,f),p&64&&(c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(f=_9.bind(null,f),V9(c,f))));break;case 22:if(p=f.memoizedState!==null||ma,!p){u=u!==null&&u.memoizedState!==null||An,_=ma;var w=An;ma=p,(An=u)&&!w?to(c,f,(f.subtreeFlags&8772)!==0):Ja(c,f),ma=_,An=w}break;case 30:break;default:Ja(c,f)}}function uS(c){var u=c.alternate;u!==null&&(c.alternate=null,uS(u)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(u=c.stateNode,u!==null&&ja(u)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var rn=null,Wr=!1;function ya(c,u,f){for(f=f.child;f!==null;)hS(c,u,f),f=f.sibling}function hS(c,u,f){if(oe&&typeof oe.onCommitFiberUnmount=="function")try{oe.onCommitFiberUnmount(ye,f)}catch{}switch(f.tag){case 26:An||xs(f,u),ya(c,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:An||xs(f,u);var p=rn,_=Wr;ao(f.type)&&(rn=f.stateNode,Wr=!1),ya(c,u,f),Wf(f.stateNode),rn=p,Wr=_;break;case 5:An||xs(f,u);case 6:if(p=rn,_=Wr,rn=null,ya(c,u,f),rn=p,Wr=_,rn!==null)if(Wr)try{(rn.nodeType===9?rn.body:rn.nodeName==="HTML"?rn.ownerDocument.body:rn).removeChild(f.stateNode)}catch(w){We(f,u,w)}else try{rn.removeChild(f.stateNode)}catch(w){We(f,u,w)}break;case 18:rn!==null&&(Wr?(c=rn,JS(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,f.stateNode),Jf(c)):JS(rn,f.stateNode));break;case 4:p=rn,_=Wr,rn=f.stateNode.containerInfo,Wr=!0,ya(c,u,f),rn=p,Wr=_;break;case 0:case 11:case 14:case 15:An||Za(2,f,u),An||Za(4,f,u),ya(c,u,f);break;case 1:An||(xs(f,u),p=f.stateNode,typeof p.componentWillUnmount=="function"&&iS(f,u,p)),ya(c,u,f);break;case 21:ya(c,u,f);break;case 22:An=(p=An)||f.memoizedState!==null,ya(c,u,f),An=p;break;default:ya(c,u,f)}}function fS(c,u){if(u.memoizedState===null&&(c=u.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Jf(c)}catch(f){We(u,u.return,f)}}function h9(c){switch(c.tag){case 13:case 19:var u=c.stateNode;return u===null&&(u=c.stateNode=new cS),u;case 22:return c=c.stateNode,u=c._retryCache,u===null&&(u=c._retryCache=new cS),u;default:throw Error(r(435,c.tag))}}function Nv(c,u){var f=h9(c);u.forEach(function(p){var _=x9.bind(null,c,p);f.has(p)||(f.add(p),p.then(_,_))})}function oi(c,u){var f=u.deletions;if(f!==null)for(var p=0;p<f.length;p++){var _=f[p],w=c,D=u,L=D;t:for(;L!==null;){switch(L.tag){case 27:if(ao(L.type)){rn=L.stateNode,Wr=!1;break t}break;case 5:rn=L.stateNode,Wr=!1;break t;case 3:case 4:rn=L.stateNode.containerInfo,Wr=!0;break t}L=L.return}if(rn===null)throw Error(r(160));hS(w,D,_),rn=null,Wr=!1,w=_.alternate,w!==null&&(w.return=null),_.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)dS(u,c),u=u.sibling}var Yi=null;function dS(c,u){var f=c.alternate,p=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:oi(u,c),ci(c),p&4&&(Za(3,c,c.return),kf(3,c),Za(5,c,c.return));break;case 1:oi(u,c),ci(c),p&512&&(An||f===null||xs(f,f.return)),p&64&&ma&&(c=c.updateQueue,c!==null&&(p=c.callbacks,p!==null&&(f=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var _=Yi;if(oi(u,c),ci(c),p&512&&(An||f===null||xs(f,f.return)),p&4){var w=f!==null?f.memoizedState:null;if(p=c.memoizedState,f===null)if(p===null)if(c.stateNode===null){t:{p=c.type,f=c.memoizedProps,_=_.ownerDocument||_;e:switch(p){case"title":w=_.getElementsByTagName("title")[0],(!w||w[cc]||w[Fn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=_.createElement(p),_.head.insertBefore(w,_.querySelector("head > title"))),pr(w,p,f),w[Fn]=c,bn(w),p=w;break t;case"link":var D=oC("link","href",_).get(p+(f.href||""));if(D){for(var L=0;L<D.length;L++)if(w=D[L],w.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){D.splice(L,1);break e}}w=_.createElement(p),pr(w,p,f),_.head.appendChild(w);break;case"meta":if(D=oC("meta","content",_).get(p+(f.content||""))){for(L=0;L<D.length;L++)if(w=D[L],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){D.splice(L,1);break e}}w=_.createElement(p),pr(w,p,f),_.head.appendChild(w);break;default:throw Error(r(468,p))}w[Fn]=c,bn(w),p=w}c.stateNode=p}else cC(_,c.type,c.stateNode);else c.stateNode=aC(_,p,c.memoizedProps);else w!==p?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,p===null?cC(_,c.type,c.stateNode):aC(_,p,c.memoizedProps)):p===null&&c.stateNode!==null&&Rv(c,c.memoizedProps,f.memoizedProps)}break;case 27:oi(u,c),ci(c),p&512&&(An||f===null||xs(f,f.return)),f!==null&&p&4&&Rv(c,c.memoizedProps,f.memoizedProps);break;case 5:if(oi(u,c),ci(c),p&512&&(An||f===null||xs(f,f.return)),c.flags&32){_=c.stateNode;try{xi(_,"")}catch(st){We(c,c.return,st)}}p&4&&c.stateNode!=null&&(_=c.memoizedProps,Rv(c,_,f!==null?f.memoizedProps:_)),p&1024&&(Mv=!0);break;case 6:if(oi(u,c),ci(c),p&4){if(c.stateNode===null)throw Error(r(162));p=c.memoizedProps,f=c.stateNode;try{f.nodeValue=p}catch(st){We(c,c.return,st)}}break;case 3:if(yp=null,_=Yi,Yi=pp(u.containerInfo),oi(u,c),Yi=_,ci(c),p&4&&f!==null&&f.memoizedState.isDehydrated)try{Jf(u.containerInfo)}catch(st){We(c,c.return,st)}Mv&&(Mv=!1,gS(c));break;case 4:p=Yi,Yi=pp(c.stateNode.containerInfo),oi(u,c),ci(c),Yi=p;break;case 12:oi(u,c),ci(c);break;case 13:oi(u,c),ci(c),c.child.flags&8192&&c.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Fv=Ot()),p&4&&(p=c.updateQueue,p!==null&&(c.updateQueue=null,Nv(c,p)));break;case 22:_=c.memoizedState!==null;var W=f!==null&&f.memoizedState!==null,J=ma,ht=An;if(ma=J||_,An=ht||W,oi(u,c),An=ht,ma=J,ci(c),p&8192)t:for(u=c.stateNode,u._visibility=_?u._visibility&-2:u._visibility|1,_&&(f===null||W||ma||An||Pc(c)),f=null,u=c;;){if(u.tag===5||u.tag===26){if(f===null){W=f=u;try{if(w=W.stateNode,_)D=w.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{L=W.stateNode;var gt=W.memoizedProps.style,it=gt!=null&&gt.hasOwnProperty("display")?gt.display:null;L.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(st){We(W,W.return,st)}}}else if(u.tag===6){if(f===null){W=u;try{W.stateNode.nodeValue=_?"":W.memoizedProps}catch(st){We(W,W.return,st)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===c)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break t;for(;u.sibling===null;){if(u.return===null||u.return===c)break t;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}p&4&&(p=c.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,Nv(c,f))));break;case 19:oi(u,c),ci(c),p&4&&(p=c.updateQueue,p!==null&&(c.updateQueue=null,Nv(c,p)));break;case 30:break;case 21:break;default:oi(u,c),ci(c)}}function ci(c){var u=c.flags;if(u&2){try{for(var f,p=c.return;p!==null;){if(aS(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var _=f.stateNode,w=Dv(c);np(c,w,_);break;case 5:var D=f.stateNode;f.flags&32&&(xi(D,""),f.flags&=-33);var L=Dv(c);np(c,L,D);break;case 3:case 4:var W=f.stateNode.containerInfo,J=Dv(c);Ov(c,J,W);break;default:throw Error(r(161))}}catch(ht){We(c,c.return,ht)}c.flags&=-3}u&4096&&(c.flags&=-4097)}function gS(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var u=c;gS(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),c=c.sibling}}function Ja(c,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)lS(c,u.alternate,u),u=u.sibling}function Pc(c){for(c=c.child;c!==null;){var u=c;switch(u.tag){case 0:case 11:case 14:case 15:Za(4,u,u.return),Pc(u);break;case 1:xs(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&iS(u,u.return,f),Pc(u);break;case 27:Wf(u.stateNode);case 26:case 5:xs(u,u.return),Pc(u);break;case 22:u.memoizedState===null&&Pc(u);break;case 30:Pc(u);break;default:Pc(u)}c=c.sibling}}function to(c,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var p=u.alternate,_=c,w=u,D=w.flags;switch(w.tag){case 0:case 11:case 15:to(_,w,f),kf(4,w);break;case 1:if(to(_,w,f),p=w,_=p.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(J){We(p,p.return,J)}if(p=w,_=p.updateQueue,_!==null){var L=p.stateNode;try{var W=_.shared.hiddenCallbacks;if(W!==null)for(_.shared.hiddenCallbacks=null,_=0;_<W.length;_++)HA(W[_],L)}catch(J){We(p,p.return,J)}}f&&D&64&&rS(w),Lf(w,w.return);break;case 27:oS(w);case 26:case 5:to(_,w,f),f&&p===null&&D&4&&sS(w),Lf(w,w.return);break;case 12:to(_,w,f);break;case 13:to(_,w,f),f&&D&4&&fS(_,w);break;case 22:w.memoizedState===null&&to(_,w,f),Lf(w,w.return);break;case 30:break;default:to(_,w,f)}u=u.sibling}}function Pv(c,u){var f=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),c=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(c=u.memoizedState.cachePool.pool),c!==f&&(c!=null&&c.refCount++,f!=null&&wf(f))}function kv(c,u){c=null,u.alternate!==null&&(c=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==c&&(u.refCount++,c!=null&&wf(c))}function ws(c,u,f,p){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)pS(c,u,f,p),u=u.sibling}function pS(c,u,f,p){var _=u.flags;switch(u.tag){case 0:case 11:case 15:ws(c,u,f,p),_&2048&&kf(9,u);break;case 1:ws(c,u,f,p);break;case 3:ws(c,u,f,p),_&2048&&(c=null,u.alternate!==null&&(c=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==c&&(u.refCount++,c!=null&&wf(c)));break;case 12:if(_&2048){ws(c,u,f,p),c=u.stateNode;try{var w=u.memoizedProps,D=w.id,L=w.onPostCommit;typeof L=="function"&&L(D,u.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(W){We(u,u.return,W)}}else ws(c,u,f,p);break;case 13:ws(c,u,f,p);break;case 23:break;case 22:w=u.stateNode,D=u.alternate,u.memoizedState!==null?w._visibility&2?ws(c,u,f,p):Vf(c,u):w._visibility&2?ws(c,u,f,p):(w._visibility|=2,vu(c,u,f,p,(u.subtreeFlags&10256)!==0)),_&2048&&Pv(D,u);break;case 24:ws(c,u,f,p),_&2048&&kv(u.alternate,u);break;default:ws(c,u,f,p)}}function vu(c,u,f,p,_){for(_=_&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var w=c,D=u,L=f,W=p,J=D.flags;switch(D.tag){case 0:case 11:case 15:vu(w,D,L,W,_),kf(8,D);break;case 23:break;case 22:var ht=D.stateNode;D.memoizedState!==null?ht._visibility&2?vu(w,D,L,W,_):Vf(w,D):(ht._visibility|=2,vu(w,D,L,W,_)),_&&J&2048&&Pv(D.alternate,D);break;case 24:vu(w,D,L,W,_),_&&J&2048&&kv(D.alternate,D);break;default:vu(w,D,L,W,_)}u=u.sibling}}function Vf(c,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=c,p=u,_=p.flags;switch(p.tag){case 22:Vf(f,p),_&2048&&Pv(p.alternate,p);break;case 24:Vf(f,p),_&2048&&kv(p.alternate,p);break;default:Vf(f,p)}u=u.sibling}}var Bf=8192;function _u(c){if(c.subtreeFlags&Bf)for(c=c.child;c!==null;)mS(c),c=c.sibling}function mS(c){switch(c.tag){case 26:_u(c),c.flags&Bf&&c.memoizedState!==null&&$9(Yi,c.memoizedState,c.memoizedProps);break;case 5:_u(c);break;case 3:case 4:var u=Yi;Yi=pp(c.stateNode.containerInfo),_u(c),Yi=u;break;case 22:c.memoizedState===null&&(u=c.alternate,u!==null&&u.memoizedState!==null?(u=Bf,Bf=16777216,_u(c),Bf=u):_u(c));break;default:_u(c)}}function yS(c){var u=c.alternate;if(u!==null&&(c=u.child,c!==null)){u.child=null;do u=c.sibling,c.sibling=null,c=u;while(c!==null)}}function Ff(c){var u=c.deletions;if((c.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var p=u[f];rr=p,_S(p,c)}yS(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)vS(c),c=c.sibling}function vS(c){switch(c.tag){case 0:case 11:case 15:Ff(c),c.flags&2048&&Za(9,c,c.return);break;case 3:Ff(c);break;case 12:Ff(c);break;case 22:var u=c.stateNode;c.memoizedState!==null&&u._visibility&2&&(c.return===null||c.return.tag!==13)?(u._visibility&=-3,rp(c)):Ff(c);break;default:Ff(c)}}function rp(c){var u=c.deletions;if((c.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var p=u[f];rr=p,_S(p,c)}yS(c)}for(c=c.child;c!==null;){switch(u=c,u.tag){case 0:case 11:case 15:Za(8,u,u.return),rp(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,rp(u));break;default:rp(u)}c=c.sibling}}function _S(c,u){for(;rr!==null;){var f=rr;switch(f.tag){case 0:case 11:case 15:Za(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:wf(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,rr=p;else t:for(f=c;rr!==null;){p=rr;var _=p.sibling,w=p.return;if(uS(p),p===f){rr=null;break t}if(_!==null){_.return=w,rr=_;break t}rr=w}}}var f9={getCacheForType:function(c){var u=Er(zn),f=u.data.get(c);return f===void 0&&(f=c(),u.data.set(c,f)),f}},d9=typeof WeakMap=="function"?WeakMap:Map,De=0,Xe=null,ce=null,ge=0,Oe=0,li=null,eo=!1,xu=!1,Lv=!1,va=0,pn=0,no=0,kc=0,Vv=0,Ri=0,wu=0,Uf=null,qr=null,Bv=!1,Fv=0,ip=1/0,sp=null,ro=null,gr=0,io=null,bu=null,Eu=0,Uv=0,jv=null,xS=null,jf=0,zv=null;function ui(){if((De&2)!==0&&ge!==0)return ge&-ge;if(K.T!==null){var c=uu;return c!==0?c:Kv()}return Fa()}function wS(){Ri===0&&(Ri=(ge&536870912)===0||be?Kh():536870912);var c=Ii.current;return c!==null&&(c.flags|=32),Ri}function hi(c,u,f){(c===Xe&&(Oe===2||Oe===9)||c.cancelPendingCommit!==null)&&(Au(c,0),so(c,ge,Ri,!1)),$s(c,f),((De&2)===0||c!==Xe)&&(c===Xe&&((De&2)===0&&(kc|=f),pn===4&&so(c,ge,Ri,!1)),bs(c))}function bS(c,u,f){if((De&6)!==0)throw Error(r(327));var p=!f&&(u&124)===0&&(u&c.expiredLanes)===0||oc(c,u),_=p?m9(c,u):Wv(c,u,!0),w=p;do{if(_===0){xu&&!p&&so(c,u,0,!1);break}else{if(f=c.current.alternate,w&&!g9(f)){_=Wv(c,u,!1),w=!1;continue}if(_===2){if(w=u,c.errorRecoveryDisabledLanes&w)var D=0;else D=c.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){u=D;t:{var L=c;_=Uf;var W=L.current.memoizedState.isDehydrated;if(W&&(Au(L,D).flags|=256),D=Wv(L,D,!1),D!==2){if(Lv&&!W){L.errorRecoveryDisabledLanes|=w,kc|=w,_=4;break t}w=qr,qr=_,w!==null&&(qr===null?qr=w:qr.push.apply(qr,w))}_=D}if(w=!1,_!==2)continue}}if(_===1){Au(c,0),so(c,u,0,!0);break}t:{switch(p=c,w=_,w){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:so(p,u,Ri,!eo);break t;case 2:qr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(_=Fv+300-Ot(),10<_)){if(so(p,u,Ri,!eo),jl(p,0,!0)!==0)break t;p.timeoutHandle=QS(ES.bind(null,p,f,qr,sp,Bv,u,Ri,kc,wu,eo,w,2,-0,0),_);break t}ES(p,f,qr,sp,Bv,u,Ri,kc,wu,eo,w,0,-0,0)}}break}while(!0);bs(c)}function ES(c,u,f,p,_,w,D,L,W,J,ht,gt,it,st){if(c.timeoutHandle=-1,gt=u.subtreeFlags,(gt&8192||(gt&16785408)===16785408)&&(Xf={stylesheets:null,count:0,unsuspend:K9},mS(u),gt=Q9(),gt!==null)){c.cancelPendingCommit=gt(DS.bind(null,c,u,w,f,p,_,D,L,W,ht,1,it,st)),so(c,w,D,!J);return}DS(c,u,w,f,p,_,D,L,W)}function g9(c){for(var u=c;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var _=f[p],w=_.getSnapshot;_=_.value;try{if(!si(w(),_))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function so(c,u,f,p){u&=~Vv,u&=~kc,c.suspendedLanes|=u,c.pingedLanes&=~u,p&&(c.warmLanes|=u),p=c.expirationTimes;for(var _=u;0<_;){var w=31-br(_),D=1<<w;p[w]=-1,_&=~D}f!==0&&os(c,f,u)}function ap(){return(De&6)===0?(zf(0),!1):!0}function Hv(){if(ce!==null){if(Oe===0)var c=ce.return;else c=ce,ua=Rc=null,av(c),mu=null,Mf=0,c=ce;for(;c!==null;)nS(c.alternate,c),c=c.return;ce=null}}function Au(c,u){var f=c.timeoutHandle;f!==-1&&(c.timeoutHandle=-1,M9(f)),f=c.cancelPendingCommit,f!==null&&(c.cancelPendingCommit=null,f()),Hv(),Xe=c,ce=f=oa(c.current,null),ge=u,Oe=0,li=null,eo=!1,xu=oc(c,u),Lv=!1,wu=Ri=Vv=kc=no=pn=0,qr=Uf=null,Bv=!1,(u&8)!==0&&(u|=u&32);var p=c.entangledLanes;if(p!==0)for(c=c.entanglements,p&=u;0<p;){var _=31-br(p),w=1<<_;u|=c[_],p&=~w}return va=u,I0(),f}function AS(c,u){ee=null,K.H=Y0,u===Ef||u===V0?(u=jA(),Oe=3):u===BA?(u=jA(),Oe=4):Oe=u===zT?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,li=u,ce===null&&(pn=1,Z0(c,Ai(u,c.current)))}function TS(){var c=K.H;return K.H=Y0,c===null?Y0:c}function SS(){var c=K.A;return K.A=f9,c}function Gv(){pn=4,eo||(ge&4194048)!==ge&&Ii.current!==null||(xu=!0),(no&134217727)===0&&(kc&134217727)===0||Xe===null||so(Xe,ge,Ri,!1)}function Wv(c,u,f){var p=De;De|=2;var _=TS(),w=SS();(Xe!==c||ge!==u)&&(sp=null,Au(c,u)),u=!1;var D=pn;t:do try{if(Oe!==0&&ce!==null){var L=ce,W=li;switch(Oe){case 8:Hv(),D=6;break t;case 3:case 2:case 9:case 6:Ii.current===null&&(u=!0);var J=Oe;if(Oe=0,li=null,Tu(c,L,W,J),f&&xu){D=0;break t}break;default:J=Oe,Oe=0,li=null,Tu(c,L,W,J)}}p9(),D=pn;break}catch(ht){AS(c,ht)}while(!0);return u&&c.shellSuspendCounter++,ua=Rc=null,De=p,K.H=_,K.A=w,ce===null&&(Xe=null,ge=0,I0()),D}function p9(){for(;ce!==null;)CS(ce)}function m9(c,u){var f=De;De|=2;var p=TS(),_=SS();Xe!==c||ge!==u?(sp=null,ip=Ot()+500,Au(c,u)):xu=oc(c,u);t:do try{if(Oe!==0&&ce!==null){u=ce;var w=li;e:switch(Oe){case 1:Oe=0,li=null,Tu(c,u,w,1);break;case 2:case 9:if(FA(w)){Oe=0,li=null,IS(u);break}u=function(){Oe!==2&&Oe!==9||Xe!==c||(Oe=7),bs(c)},w.then(u,u);break t;case 3:Oe=7;break t;case 4:Oe=5;break t;case 7:FA(w)?(Oe=0,li=null,IS(u)):(Oe=0,li=null,Tu(c,u,w,7));break;case 5:var D=null;switch(ce.tag){case 26:D=ce.memoizedState;case 5:case 27:var L=ce;if(!D||lC(D)){Oe=0,li=null;var W=L.sibling;if(W!==null)ce=W;else{var J=L.return;J!==null?(ce=J,op(J)):ce=null}break e}}Oe=0,li=null,Tu(c,u,w,5);break;case 6:Oe=0,li=null,Tu(c,u,w,6);break;case 8:Hv(),pn=6;break t;default:throw Error(r(462))}}y9();break}catch(ht){AS(c,ht)}while(!0);return ua=Rc=null,K.H=p,K.A=_,De=f,ce!==null?0:(Xe=null,ge=0,I0(),pn)}function y9(){for(;ce!==null&&!ri();)CS(ce)}function CS(c){var u=tS(c.alternate,c,va);c.memoizedProps=c.pendingProps,u===null?op(c):ce=u}function IS(c){var u=c,f=u.alternate;switch(u.tag){case 15:case 0:u=XT(f,u,u.pendingProps,u.type,void 0,ge);break;case 11:u=XT(f,u,u.pendingProps,u.type.render,u.ref,ge);break;case 5:av(u);default:nS(f,u),u=ce=RA(u,va),u=tS(f,u,va)}c.memoizedProps=c.pendingProps,u===null?op(c):ce=u}function Tu(c,u,f,p){ua=Rc=null,av(u),mu=null,Mf=0;var _=u.return;try{if(a9(c,_,u,f,ge)){pn=1,Z0(c,Ai(f,c.current)),ce=null;return}}catch(w){if(_!==null)throw ce=_,w;pn=1,Z0(c,Ai(f,c.current)),ce=null;return}u.flags&32768?(be||p===1?c=!0:xu||(ge&536870912)!==0?c=!1:(eo=c=!0,(p===2||p===9||p===3||p===6)&&(p=Ii.current,p!==null&&p.tag===13&&(p.flags|=16384))),RS(u,c)):op(u)}function op(c){var u=c;do{if((u.flags&32768)!==0){RS(u,eo);return}c=u.return;var f=c9(u.alternate,u,va);if(f!==null){ce=f;return}if(u=u.sibling,u!==null){ce=u;return}ce=u=c}while(u!==null);pn===0&&(pn=5)}function RS(c,u){do{var f=l9(c.alternate,c);if(f!==null){f.flags&=32767,ce=f;return}if(f=c.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(c=c.sibling,c!==null)){ce=c;return}ce=c=f}while(c!==null);pn=6,ce=null}function DS(c,u,f,p,_,w,D,L,W){c.cancelPendingCommit=null;do cp();while(gr!==0);if((De&6)!==0)throw Error(r(327));if(u!==null){if(u===c.current)throw Error(r(177));if(w=u.lanes|u.childLanes,w|=ky,Qh(c,f,w,D,L,W),c===Xe&&(ce=Xe=null,ge=0),bu=u,io=c,Eu=f,Uv=w,jv=_,xS=p,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,w9(Wt,function(){return kS(),null})):(c.callbackNode=null,c.callbackPriority=0),p=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||p){p=K.T,K.T=null,_=ct.p,ct.p=2,D=De,De|=4;try{u9(c,u,f)}finally{De=D,ct.p=_,K.T=p}}gr=1,OS(),MS(),NS()}}function OS(){if(gr===1){gr=0;var c=io,u=bu,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=K.T,K.T=null;var p=ct.p;ct.p=2;var _=De;De|=4;try{dS(u,c);var w=r_,D=_A(c.containerInfo),L=w.focusedElem,W=w.selectionRange;if(D!==L&&L&&L.ownerDocument&&vA(L.ownerDocument.documentElement,L)){if(W!==null&&Dy(L)){var J=W.start,ht=W.end;if(ht===void 0&&(ht=J),"selectionStart"in L)L.selectionStart=J,L.selectionEnd=Math.min(ht,L.value.length);else{var gt=L.ownerDocument||document,it=gt&&gt.defaultView||window;if(it.getSelection){var st=it.getSelection(),Yt=L.textContent.length,Ht=Math.min(W.start,Yt),je=W.end===void 0?Ht:Math.min(W.end,Yt);!st.extend&&Ht>je&&(D=je,je=Ht,Ht=D);var X=yA(L,Ht),Y=yA(L,je);if(X&&Y&&(st.rangeCount!==1||st.anchorNode!==X.node||st.anchorOffset!==X.offset||st.focusNode!==Y.node||st.focusOffset!==Y.offset)){var Z=gt.createRange();Z.setStart(X.node,X.offset),st.removeAllRanges(),Ht>je?(st.addRange(Z),st.extend(Y.node,Y.offset)):(Z.setEnd(Y.node,Y.offset),st.addRange(Z))}}}}for(gt=[],st=L;st=st.parentNode;)st.nodeType===1&&gt.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<gt.length;L++){var ft=gt[L];ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}xp=!!n_,r_=n_=null}finally{De=_,ct.p=p,K.T=f}}c.current=u,gr=2}}function MS(){if(gr===2){gr=0;var c=io,u=bu,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=K.T,K.T=null;var p=ct.p;ct.p=2;var _=De;De|=4;try{lS(c,u.alternate,u)}finally{De=_,ct.p=p,K.T=f}}gr=3}}function NS(){if(gr===4||gr===3){gr=0,Rt();var c=io,u=bu,f=Eu,p=xS;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?gr=5:(gr=0,bu=io=null,PS(c,c.pendingLanes));var _=c.pendingLanes;if(_===0&&(ro=null),zl(f),u=u.stateNode,oe&&typeof oe.onCommitFiberRoot=="function")try{oe.onCommitFiberRoot(ye,u,void 0,(u.current.flags&128)===128)}catch{}if(p!==null){u=K.T,_=ct.p,ct.p=2,K.T=null;try{for(var w=c.onRecoverableError,D=0;D<p.length;D++){var L=p[D];w(L.value,{componentStack:L.stack})}}finally{K.T=u,ct.p=_}}(Eu&3)!==0&&cp(),bs(c),_=c.pendingLanes,(f&4194090)!==0&&(_&42)!==0?c===zv?jf++:(jf=0,zv=c):jf=0,zf(0)}}function PS(c,u){(c.pooledCacheLanes&=u)===0&&(u=c.pooledCache,u!=null&&(c.pooledCache=null,wf(u)))}function cp(c){return OS(),MS(),NS(),kS()}function kS(){if(gr!==5)return!1;var c=io,u=Uv;Uv=0;var f=zl(Eu),p=K.T,_=ct.p;try{ct.p=32>f?32:f,K.T=null,f=jv,jv=null;var w=io,D=Eu;if(gr=0,bu=io=null,Eu=0,(De&6)!==0)throw Error(r(331));var L=De;if(De|=4,vS(w.current),pS(w,w.current,D,f),De=L,zf(0,!1),oe&&typeof oe.onPostCommitFiberRoot=="function")try{oe.onPostCommitFiberRoot(ye,w)}catch{}return!0}finally{ct.p=_,K.T=p,PS(c,u)}}function LS(c,u,f){u=Ai(f,u),u=xv(c.stateNode,u,2),c=Xa(c,u,2),c!==null&&($s(c,2),bs(c))}function We(c,u,f){if(c.tag===3)LS(c,c,f);else for(;u!==null;){if(u.tag===3){LS(u,c,f);break}else if(u.tag===1){var p=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ro===null||!ro.has(p))){c=Ai(f,c),f=UT(2),p=Xa(u,f,2),p!==null&&(jT(f,p,u,c),$s(p,2),bs(p));break}}u=u.return}}function qv(c,u,f){var p=c.pingCache;if(p===null){p=c.pingCache=new d9;var _=new Set;p.set(u,_)}else _=p.get(u),_===void 0&&(_=new Set,p.set(u,_));_.has(f)||(Lv=!0,_.add(f),c=v9.bind(null,c,u,f),u.then(c,c))}function v9(c,u,f){var p=c.pingCache;p!==null&&p.delete(u),c.pingedLanes|=c.suspendedLanes&f,c.warmLanes&=~f,Xe===c&&(ge&f)===f&&(pn===4||pn===3&&(ge&62914560)===ge&&300>Ot()-Fv?(De&2)===0&&Au(c,0):Vv|=f,wu===ge&&(wu=0)),bs(c)}function VS(c,u){u===0&&(u=$h()),c=au(c,u),c!==null&&($s(c,u),bs(c))}function _9(c){var u=c.memoizedState,f=0;u!==null&&(f=u.retryLane),VS(c,f)}function x9(c,u){var f=0;switch(c.tag){case 13:var p=c.stateNode,_=c.memoizedState;_!==null&&(f=_.retryLane);break;case 19:p=c.stateNode;break;case 22:p=c.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(u),VS(c,f)}function w9(c,u){return Ye(c,u)}var lp=null,Su=null,Yv=!1,up=!1,Xv=!1,Lc=0;function bs(c){c!==Su&&c.next===null&&(Su===null?lp=Su=c:Su=Su.next=c),up=!0,Yv||(Yv=!0,E9())}function zf(c,u){if(!Xv&&up){Xv=!0;do for(var f=!1,p=lp;p!==null;){if(c!==0){var _=p.pendingLanes;if(_===0)var w=0;else{var D=p.suspendedLanes,L=p.pingedLanes;w=(1<<31-br(42|c)+1)-1,w&=_&~(D&~L),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(f=!0,jS(p,w))}else w=ge,w=jl(p,p===Xe?w:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(w&3)===0||oc(p,w)||(f=!0,jS(p,w));p=p.next}while(f);Xv=!1}}function b9(){BS()}function BS(){up=Yv=!1;var c=0;Lc!==0&&(O9()&&(c=Lc),Lc=0);for(var u=Ot(),f=null,p=lp;p!==null;){var _=p.next,w=FS(p,u);w===0?(p.next=null,f===null?lp=_:f.next=_,_===null&&(Su=f)):(f=p,(c!==0||(w&3)!==0)&&(up=!0)),p=_}zf(c)}function FS(c,u){for(var f=c.suspendedLanes,p=c.pingedLanes,_=c.expirationTimes,w=c.pendingLanes&-62914561;0<w;){var D=31-br(w),L=1<<D,W=_[D];W===-1?((L&f)===0||(L&p)!==0)&&(_[D]=Xh(L,u)):W<=u&&(c.expiredLanes|=L),w&=~L}if(u=Xe,f=ge,f=jl(c,c===u?f:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),p=c.callbackNode,f===0||c===u&&(Oe===2||Oe===9)||c.cancelPendingCommit!==null)return p!==null&&p!==null&&en(p),c.callbackNode=null,c.callbackPriority=0;if((f&3)===0||oc(c,f)){if(u=f&-f,u===c.callbackPriority)return u;switch(p!==null&&en(p),zl(f)){case 2:case 8:f=vt;break;case 32:f=Wt;break;case 268435456:f=Qe;break;default:f=Wt}return p=US.bind(null,c),f=Ye(f,p),c.callbackPriority=u,c.callbackNode=f,u}return p!==null&&p!==null&&en(p),c.callbackPriority=2,c.callbackNode=null,2}function US(c,u){if(gr!==0&&gr!==5)return c.callbackNode=null,c.callbackPriority=0,null;var f=c.callbackNode;if(cp()&&c.callbackNode!==f)return null;var p=ge;return p=jl(c,c===Xe?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),p===0?null:(bS(c,p,u),FS(c,Ot()),c.callbackNode!=null&&c.callbackNode===f?US.bind(null,c):null)}function jS(c,u){if(cp())return null;bS(c,u,!0)}function E9(){N9(function(){(De&6)!==0?Ye(kt,b9):BS()})}function Kv(){return Lc===0&&(Lc=Kh()),Lc}function zS(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Xl(""+c)}function HS(c,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,c.id&&f.setAttribute("form",c.id),u.parentNode.insertBefore(f,u),c=new FormData(c),f.parentNode.removeChild(f),c}function A9(c,u,f,p,_){if(u==="submit"&&f&&f.stateNode===_){var w=zS((_[On]||null).action),D=p.submitter;D&&(u=(u=D[On]||null)?zS(u.formAction):D.getAttribute("formAction"),u!==null&&(w=u,D=null));var L=new Kl("action","action",null,p,_);c.push({event:L,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Lc!==0){var W=D?HS(_,D):new FormData(_);pv(f,{pending:!0,data:W,method:_.method,action:w},null,W)}}else typeof w=="function"&&(L.preventDefault(),W=D?HS(_,D):new FormData(_),pv(f,{pending:!0,data:W,method:_.method,action:w},w,W))},currentTarget:_}]})}}for(var $v=0;$v<Py.length;$v++){var Qv=Py[$v],T9=Qv.toLowerCase(),S9=Qv[0].toUpperCase()+Qv.slice(1);qi(T9,"on"+S9)}qi(bA,"onAnimationEnd"),qi(EA,"onAnimationIteration"),qi(AA,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(Hk,"onTransitionRun"),qi(Gk,"onTransitionStart"),qi(Wk,"onTransitionCancel"),qi(TA,"onTransitionEnd"),Zs("onMouseEnter",["mouseout","mouseover"]),Zs("onMouseLeave",["mouseout","mouseover"]),Zs("onPointerEnter",["pointerout","pointerover"]),Zs("onPointerLeave",["pointerout","pointerover"]),Gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hf));function GS(c,u){u=(u&4)!==0;for(var f=0;f<c.length;f++){var p=c[f],_=p.event;p=p.listeners;t:{var w=void 0;if(u)for(var D=p.length-1;0<=D;D--){var L=p[D],W=L.instance,J=L.currentTarget;if(L=L.listener,W!==w&&_.isPropagationStopped())break t;w=L,_.currentTarget=J;try{w(_)}catch(ht){Q0(ht)}_.currentTarget=null,w=W}else for(D=0;D<p.length;D++){if(L=p[D],W=L.instance,J=L.currentTarget,L=L.listener,W!==w&&_.isPropagationStopped())break t;w=L,_.currentTarget=J;try{w(_)}catch(ht){Q0(ht)}_.currentTarget=null,w=W}}}}function le(c,u){var f=u[Jh];f===void 0&&(f=u[Jh]=new Set);var p=c+"__bubble";f.has(p)||(WS(u,c,2,!1),f.add(p))}function Zv(c,u,f){var p=0;u&&(p|=4),WS(f,c,p,u)}var hp="_reactListening"+Math.random().toString(36).slice(2);function Jv(c){if(!c[hp]){c[hp]=!0,tf.forEach(function(f){f!=="selectionchange"&&(C9.has(f)||Zv(f,!1,c),Zv(f,!0,c))});var u=c.nodeType===9?c:c.ownerDocument;u===null||u[hp]||(u[hp]=!0,Zv("selectionchange",!1,u))}}function WS(c,u,f,p){switch(pC(u)){case 2:var _=t7;break;case 8:_=e7;break;default:_=d_}f=_.bind(null,u,f,c),_=void 0,!bi||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),p?_!==void 0?c.addEventListener(u,f,{capture:!0,passive:_}):c.addEventListener(u,f,!0):_!==void 0?c.addEventListener(u,f,{passive:_}):c.addEventListener(u,f,!1)}function t_(c,u,f,p,_){var w=p;if((u&1)===0&&(u&2)===0&&p!==null)t:for(;;){if(p===null)return;var D=p.tag;if(D===3||D===4){var L=p.stateNode.containerInfo;if(L===_)break;if(D===4)for(D=p.return;D!==null;){var W=D.tag;if((W===3||W===4)&&D.stateNode.containerInfo===_)return;D=D.return}for(;L!==null;){if(D=Qs(L),D===null)return;if(W=D.tag,W===5||W===6||W===26||W===27){p=w=D;continue t}L=L.parentNode}}p=p.return}d0(function(){var J=w,ht=wi(f),gt=[];t:{var it=SA.get(c);if(it!==void 0){var st=Kl,Yt=c;switch(c){case"keypress":if(ds(f)===0)break t;case"keydown":case"keyup":st=eu;break;case"focusin":Yt="focus",st=Zl;break;case"focusout":Yt="blur",st=Zl;break;case"beforeblur":case"afterblur":st=Zl;break;case"click":if(f.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Ei;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=Sy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=w0;break;case bA:case EA:case AA:st=Jl;break;case TA:st=E0;break;case"scroll":case"scrollend":st=g0;break;case"wheel":st=nu;break;case"copy":case"cut":case"paste":st=tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=df;break;case"toggle":case"beforetoggle":st=T0}var Ht=(u&4)!==0,je=!Ht&&(c==="scroll"||c==="scrollend"),X=Ht?it!==null?it+"Capture":null:it;Ht=[];for(var Y=J,Z;Y!==null;){var ft=Y;if(Z=ft.stateNode,ft=ft.tag,ft!==5&&ft!==26&&ft!==27||Z===null||X===null||(ft=pc(Y,X),ft!=null&&Ht.push(Gf(Y,ft,Z))),je)break;Y=Y.return}0<Ht.length&&(it=new st(it,Yt,null,f,ht),gt.push({event:it,listeners:Ht}))}}if((u&7)===0){t:{if(it=c==="mouseover"||c==="pointerover",st=c==="mouseout"||c==="pointerout",it&&f!==ea&&(Yt=f.relatedTarget||f.fromElement)&&(Qs(Yt)||Yt[_i]))break t;if((st||it)&&(it=ht.window===ht?ht:(it=ht.ownerDocument)?it.defaultView||it.parentWindow:window,st?(Yt=f.relatedTarget||f.toElement,st=J,Yt=Yt?Qs(Yt):null,Yt!==null&&(je=s(Yt),Ht=Yt.tag,Yt!==je||Ht!==5&&Ht!==27&&Ht!==6)&&(Yt=null)):(st=null,Yt=J),st!==Yt)){if(Ht=Ei,ft="onMouseLeave",X="onMouseEnter",Y="mouse",(c==="pointerout"||c==="pointerover")&&(Ht=df,ft="onPointerLeave",X="onPointerEnter",Y="pointer"),je=st==null?it:ls(st),Z=Yt==null?it:ls(Yt),it=new Ht(ft,Y+"leave",st,f,ht),it.target=je,it.relatedTarget=Z,ft=null,Qs(ht)===J&&(Ht=new Ht(X,Y+"enter",Yt,f,ht),Ht.target=Z,Ht.relatedTarget=je,ft=Ht),je=ft,st&&Yt)e:{for(Ht=st,X=Yt,Y=0,Z=Ht;Z;Z=Cu(Z))Y++;for(Z=0,ft=X;ft;ft=Cu(ft))Z++;for(;0<Y-Z;)Ht=Cu(Ht),Y--;for(;0<Z-Y;)X=Cu(X),Z--;for(;Y--;){if(Ht===X||X!==null&&Ht===X.alternate)break e;Ht=Cu(Ht),X=Cu(X)}Ht=null}else Ht=null;st!==null&&qS(gt,it,st,Ht,!1),Yt!==null&&je!==null&&qS(gt,je,Yt,Ht,!0)}}t:{if(it=J?ls(J):window,st=it.nodeName&&it.nodeName.toLowerCase(),st==="select"||st==="input"&&it.type==="file")var Dt=hA;else if(jn(it))if(fA)Dt=Uk;else{Dt=Bk;var se=Vk}else st=it.nodeName,!st||st.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?J&&af(J.elementType)&&(Dt=hA):Dt=Fk;if(Dt&&(Dt=Dt(c,J))){aa(gt,Dt,f,ht);break t}se&&se(c,it,J),c==="focusout"&&J&&it.type==="number"&&J.memoizedProps.value!=null&&Ha(it,"number",it.value)}switch(se=J?ls(J):window,c){case"focusin":(jn(se)||se.contentEditable==="true")&&(ru=se,Oy=J,mf=null);break;case"focusout":mf=Oy=ru=null;break;case"mousedown":My=!0;break;case"contextmenu":case"mouseup":case"dragend":My=!1,xA(gt,f,ht);break;case"selectionchange":if(zk)break;case"keydown":case"keyup":xA(gt,f,ht)}var Vt;if(ms)t:{switch(c){case"compositionstart":var Gt="onCompositionStart";break t;case"compositionend":Gt="onCompositionEnd";break t;case"compositionupdate":Gt="onCompositionUpdate";break t}Gt=void 0}else fe?at(c,f)&&(Gt="onCompositionEnd"):c==="keydown"&&f.keyCode===229&&(Gt="onCompositionStart");Gt&&(I&&f.locale!=="ko"&&(fe||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&fe&&(Vt=cf()):(fs=ht,Ga="value"in fs?fs.value:fs.textContent,fe=!0)),se=fp(J,Gt),0<se.length&&(Gt=new hf(Gt,c,null,f,ht),gt.push({event:Gt,listeners:se}),Vt?Gt.data=Vt:(Vt=bt(f),Vt!==null&&(Gt.data=Vt)))),(Vt=A?Un(c,f):de(c,f))&&(Gt=fp(J,"onBeforeInput"),0<Gt.length&&(se=new hf("onBeforeInput","beforeinput",null,f,ht),gt.push({event:se,listeners:Gt}),se.data=Vt)),A9(gt,c,J,f,ht)}GS(gt,u)})}function Gf(c,u,f){return{instance:c,listener:u,currentTarget:f}}function fp(c,u){for(var f=u+"Capture",p=[];c!==null;){var _=c,w=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||w===null||(_=pc(c,f),_!=null&&p.unshift(Gf(c,_,w)),_=pc(c,u),_!=null&&p.push(Gf(c,_,w))),c.tag===3)return p;c=c.return}return[]}function Cu(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function qS(c,u,f,p,_){for(var w=u._reactName,D=[];f!==null&&f!==p;){var L=f,W=L.alternate,J=L.stateNode;if(L=L.tag,W!==null&&W===p)break;L!==5&&L!==26&&L!==27||J===null||(W=J,_?(J=pc(f,w),J!=null&&D.unshift(Gf(f,J,W))):_||(J=pc(f,w),J!=null&&D.push(Gf(f,J,W)))),f=f.return}D.length!==0&&c.push({event:u,listeners:D})}var I9=/\r\n?/g,R9=/\u0000|\uFFFD/g;function YS(c){return(typeof c=="string"?c:""+c).replace(I9,`
`).replace(R9,"")}function XS(c,u){return u=YS(u),YS(c)===u}function dp(){}function Ue(c,u,f,p,_,w){switch(f){case"children":typeof p=="string"?u==="body"||u==="textarea"&&p===""||xi(c,p):(typeof p=="number"||typeof p=="bigint")&&u!=="body"&&xi(c,""+p);break;case"className":us(c,"class",p);break;case"tabIndex":us(c,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":us(c,f,p);break;case"style":sf(c,p,w);break;case"data":if(u!=="object"){us(c,"data",p);break}case"src":case"href":if(p===""&&(u!=="a"||f!=="href")){c.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){c.removeAttribute(f);break}p=Xl(""+p),c.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){c.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(u!=="input"&&Ue(c,u,"name",_.name,_,null),Ue(c,u,"formEncType",_.formEncType,_,null),Ue(c,u,"formMethod",_.formMethod,_,null),Ue(c,u,"formTarget",_.formTarget,_,null)):(Ue(c,u,"encType",_.encType,_,null),Ue(c,u,"method",_.method,_,null),Ue(c,u,"target",_.target,_,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){c.removeAttribute(f);break}p=Xl(""+p),c.setAttribute(f,p);break;case"onClick":p!=null&&(c.onclick=dp);break;case"onScroll":p!=null&&le("scroll",c);break;case"onScrollEnd":p!=null&&le("scrollend",c);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(_.children!=null)throw Error(r(60));c.innerHTML=f}}break;case"multiple":c.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":c.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){c.removeAttribute("xlink:href");break}f=Xl(""+p),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?c.setAttribute(f,""+p):c.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?c.setAttribute(f,""):c.removeAttribute(f);break;case"capture":case"download":p===!0?c.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?c.setAttribute(f,p):c.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?c.setAttribute(f,p):c.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?c.removeAttribute(f):c.setAttribute(f,p);break;case"popover":le("beforetoggle",c),le("toggle",c),za(c,"popover",p);break;case"xlinkActuate":hr(c,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":hr(c,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":hr(c,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":hr(c,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":hr(c,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":hr(c,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":hr(c,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":hr(c,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":hr(c,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":za(c,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Ay.get(f)||f,za(c,f,p))}}function e_(c,u,f,p,_,w){switch(f){case"style":sf(c,p,w);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(_.children!=null)throw Error(r(60));c.innerHTML=f}}break;case"children":typeof p=="string"?xi(c,p):(typeof p=="number"||typeof p=="bigint")&&xi(c,""+p);break;case"onScroll":p!=null&&le("scroll",c);break;case"onScrollEnd":p!=null&&le("scrollend",c);break;case"onClick":p!=null&&(c.onclick=dp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hl.hasOwnProperty(f))t:{if(f[0]==="o"&&f[1]==="n"&&(_=f.endsWith("Capture"),u=f.slice(2,_?f.length-7:void 0),w=c[On]||null,w=w!=null?w[f]:null,typeof w=="function"&&c.removeEventListener(u,w,_),typeof p=="function")){typeof w!="function"&&w!==null&&(f in c?c[f]=null:c.hasAttribute(f)&&c.removeAttribute(f)),c.addEventListener(u,p,_);break t}f in c?c[f]=p:p===!0?c.setAttribute(f,""):za(c,f,p)}}}function pr(c,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":le("error",c),le("load",c);var p=!1,_=!1,w;for(w in f)if(f.hasOwnProperty(w)){var D=f[w];if(D!=null)switch(w){case"src":p=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Ue(c,u,w,D,f,null)}}_&&Ue(c,u,"srcSet",f.srcSet,f,null),p&&Ue(c,u,"src",f.src,f,null);return;case"input":le("invalid",c);var L=w=D=_=null,W=null,J=null;for(p in f)if(f.hasOwnProperty(p)){var ht=f[p];if(ht!=null)switch(p){case"name":_=ht;break;case"type":D=ht;break;case"checked":W=ht;break;case"defaultChecked":J=ht;break;case"value":w=ht;break;case"defaultValue":L=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(r(137,u));break;default:Ue(c,u,p,ht,f,null)}}fc(c,w,L,W,J,D,_,!1),Yl(c);return;case"select":le("invalid",c),p=D=w=null;for(_ in f)if(f.hasOwnProperty(_)&&(L=f[_],L!=null))switch(_){case"value":w=L;break;case"defaultValue":D=L;break;case"multiple":p=L;default:Ue(c,u,_,L,f,null)}u=w,f=D,c.multiple=!!p,u!=null?ta(c,!!p,u,!1):f!=null&&ta(c,!!p,f,!0);return;case"textarea":le("invalid",c),w=_=p=null;for(D in f)if(f.hasOwnProperty(D)&&(L=f[D],L!=null))switch(D){case"value":p=L;break;case"defaultValue":_=L;break;case"children":w=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(91));break;default:Ue(c,u,D,L,f,null)}dc(c,p,_,w),Yl(c);return;case"option":for(W in f)if(f.hasOwnProperty(W)&&(p=f[W],p!=null))switch(W){case"selected":c.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Ue(c,u,W,p,f,null)}return;case"dialog":le("beforetoggle",c),le("toggle",c),le("cancel",c),le("close",c);break;case"iframe":case"object":le("load",c);break;case"video":case"audio":for(p=0;p<Hf.length;p++)le(Hf[p],c);break;case"image":le("error",c),le("load",c);break;case"details":le("toggle",c);break;case"embed":case"source":case"link":le("error",c),le("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in f)if(f.hasOwnProperty(J)&&(p=f[J],p!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Ue(c,u,J,p,f,null)}return;default:if(af(u)){for(ht in f)f.hasOwnProperty(ht)&&(p=f[ht],p!==void 0&&e_(c,u,ht,p,f,void 0));return}}for(L in f)f.hasOwnProperty(L)&&(p=f[L],p!=null&&Ue(c,u,L,p,f,null))}function D9(c,u,f,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,w=null,D=null,L=null,W=null,J=null,ht=null;for(st in f){var gt=f[st];if(f.hasOwnProperty(st)&&gt!=null)switch(st){case"checked":break;case"value":break;case"defaultValue":W=gt;default:p.hasOwnProperty(st)||Ue(c,u,st,null,p,gt)}}for(var it in p){var st=p[it];if(gt=f[it],p.hasOwnProperty(it)&&(st!=null||gt!=null))switch(it){case"type":w=st;break;case"name":_=st;break;case"checked":J=st;break;case"defaultChecked":ht=st;break;case"value":D=st;break;case"defaultValue":L=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(r(137,u));break;default:st!==gt&&Ue(c,u,it,st,p,gt)}}ii(c,D,L,W,J,ht,w,_);return;case"select":st=D=L=it=null;for(w in f)if(W=f[w],f.hasOwnProperty(w)&&W!=null)switch(w){case"value":break;case"multiple":st=W;default:p.hasOwnProperty(w)||Ue(c,u,w,null,p,W)}for(_ in p)if(w=p[_],W=f[_],p.hasOwnProperty(_)&&(w!=null||W!=null))switch(_){case"value":it=w;break;case"defaultValue":L=w;break;case"multiple":D=w;default:w!==W&&Ue(c,u,_,w,p,W)}u=L,f=D,p=st,it!=null?ta(c,!!f,it,!1):!!p!=!!f&&(u!=null?ta(c,!!f,u,!0):ta(c,!!f,f?[]:"",!1));return;case"textarea":st=it=null;for(L in f)if(_=f[L],f.hasOwnProperty(L)&&_!=null&&!p.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Ue(c,u,L,null,p,_)}for(D in p)if(_=p[D],w=f[D],p.hasOwnProperty(D)&&(_!=null||w!=null))switch(D){case"value":it=_;break;case"defaultValue":st=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==w&&Ue(c,u,D,_,p,w)}Be(c,it,st);return;case"option":for(var Yt in f)if(it=f[Yt],f.hasOwnProperty(Yt)&&it!=null&&!p.hasOwnProperty(Yt))switch(Yt){case"selected":c.selected=!1;break;default:Ue(c,u,Yt,null,p,it)}for(W in p)if(it=p[W],st=f[W],p.hasOwnProperty(W)&&it!==st&&(it!=null||st!=null))switch(W){case"selected":c.selected=it&&typeof it!="function"&&typeof it!="symbol";break;default:Ue(c,u,W,it,p,st)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ht in f)it=f[Ht],f.hasOwnProperty(Ht)&&it!=null&&!p.hasOwnProperty(Ht)&&Ue(c,u,Ht,null,p,it);for(J in p)if(it=p[J],st=f[J],p.hasOwnProperty(J)&&it!==st&&(it!=null||st!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(r(137,u));break;default:Ue(c,u,J,it,p,st)}return;default:if(af(u)){for(var je in f)it=f[je],f.hasOwnProperty(je)&&it!==void 0&&!p.hasOwnProperty(je)&&e_(c,u,je,void 0,p,it);for(ht in p)it=p[ht],st=f[ht],!p.hasOwnProperty(ht)||it===st||it===void 0&&st===void 0||e_(c,u,ht,it,p,st);return}}for(var X in f)it=f[X],f.hasOwnProperty(X)&&it!=null&&!p.hasOwnProperty(X)&&Ue(c,u,X,null,p,it);for(gt in p)it=p[gt],st=f[gt],!p.hasOwnProperty(gt)||it===st||it==null&&st==null||Ue(c,u,gt,it,p,st)}var n_=null,r_=null;function gp(c){return c.nodeType===9?c:c.ownerDocument}function KS(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $S(c,u){if(c===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&u==="foreignObject"?0:c}function i_(c,u){return c==="textarea"||c==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var s_=null;function O9(){var c=window.event;return c&&c.type==="popstate"?c===s_?!1:(s_=c,!0):(s_=null,!1)}var QS=typeof setTimeout=="function"?setTimeout:void 0,M9=typeof clearTimeout=="function"?clearTimeout:void 0,ZS=typeof Promise=="function"?Promise:void 0,N9=typeof queueMicrotask=="function"?queueMicrotask:typeof ZS<"u"?function(c){return ZS.resolve(null).then(c).catch(P9)}:QS;function P9(c){setTimeout(function(){throw c})}function ao(c){return c==="head"}function JS(c,u){var f=u,p=0,_=0;do{var w=f.nextSibling;if(c.removeChild(f),w&&w.nodeType===8)if(f=w.data,f==="/$"){if(0<p&&8>p){f=p;var D=c.ownerDocument;if(f&1&&Wf(D.documentElement),f&2&&Wf(D.body),f&4)for(f=D.head,Wf(f),D=f.firstChild;D;){var L=D.nextSibling,W=D.nodeName;D[cc]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&D.rel.toLowerCase()==="stylesheet"||f.removeChild(D),D=L}}if(_===0){c.removeChild(w),Jf(u);return}_--}else f==="$"||f==="$?"||f==="$!"?_++:p=f.charCodeAt(0)-48;else p=0;f=w}while(f);Jf(u)}function a_(c){var u=c.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":a_(f),ja(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}c.removeChild(f)}}function k9(c,u,f,p){for(;c.nodeType===1;){var _=f;if(c.nodeName.toLowerCase()!==u.toLowerCase()){if(!p&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(p){if(!c[cc])switch(u){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(w=c.getAttribute("rel"),w==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(w!==_.rel||c.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||c.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||c.getAttribute("title")!==(_.title==null?null:_.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(w=c.getAttribute("src"),(w!==(_.src==null?null:_.src)||c.getAttribute("type")!==(_.type==null?null:_.type)||c.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&w&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(u==="input"&&c.type==="hidden"){var w=_.name==null?null:""+_.name;if(_.type==="hidden"&&c.getAttribute("name")===w)return c}else return c;if(c=Xi(c.nextSibling),c===null)break}return null}function L9(c,u,f){if(u==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!f||(c=Xi(c.nextSibling),c===null))return null;return c}function o_(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function V9(c,u){var f=c.ownerDocument;if(c.data!=="$?"||f.readyState==="complete")u();else{var p=function(){u(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),c._reactRetry=p}}function Xi(c){for(;c!=null;c=c.nextSibling){var u=c.nodeType;if(u===1||u===3)break;if(u===8){if(u=c.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return c}var c_=null;function tC(c){c=c.previousSibling;for(var u=0;c;){if(c.nodeType===8){var f=c.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return c;u--}else f==="/$"&&u++}c=c.previousSibling}return null}function eC(c,u,f){switch(u=gp(f),c){case"html":if(c=u.documentElement,!c)throw Error(r(452));return c;case"head":if(c=u.head,!c)throw Error(r(453));return c;case"body":if(c=u.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function Wf(c){for(var u=c.attributes;u.length;)c.removeAttributeNode(u[0]);ja(c)}var Di=new Map,nC=new Set;function pp(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var _a=ct.d;ct.d={f:B9,r:F9,D:U9,C:j9,L:z9,m:H9,X:W9,S:G9,M:q9};function B9(){var c=_a.f(),u=ap();return c||u}function F9(c){var u=cs(c);u!==null&&u.tag===5&&u.type==="form"?bT(u):_a.r(c)}var Iu=typeof document>"u"?null:document;function rC(c,u,f){var p=Iu;if(p&&typeof u=="string"&&u){var _=Mn(u);_='link[rel="'+c+'"][href="'+_+'"]',typeof f=="string"&&(_+='[crossorigin="'+f+'"]'),nC.has(_)||(nC.add(_),c={rel:c,crossOrigin:f,href:u},p.querySelector(_)===null&&(u=p.createElement("link"),pr(u,"link",c),bn(u),p.head.appendChild(u)))}}function U9(c){_a.D(c),rC("dns-prefetch",c,null)}function j9(c,u){_a.C(c,u),rC("preconnect",c,u)}function z9(c,u,f){_a.L(c,u,f);var p=Iu;if(p&&c&&u){var _='link[rel="preload"][as="'+Mn(u)+'"]';u==="image"&&f&&f.imageSrcSet?(_+='[imagesrcset="'+Mn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(_+='[imagesizes="'+Mn(f.imageSizes)+'"]')):_+='[href="'+Mn(c)+'"]';var w=_;switch(u){case"style":w=Ru(c);break;case"script":w=Du(c)}Di.has(w)||(c=d({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:c,as:u},f),Di.set(w,c),p.querySelector(_)!==null||u==="style"&&p.querySelector(qf(w))||u==="script"&&p.querySelector(Yf(w))||(u=p.createElement("link"),pr(u,"link",c),bn(u),p.head.appendChild(u)))}}function H9(c,u){_a.m(c,u);var f=Iu;if(f&&c){var p=u&&typeof u.as=="string"?u.as:"script",_='link[rel="modulepreload"][as="'+Mn(p)+'"][href="'+Mn(c)+'"]',w=_;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Du(c)}if(!Di.has(w)&&(c=d({rel:"modulepreload",href:c},u),Di.set(w,c),f.querySelector(_)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Yf(w)))return}p=f.createElement("link"),pr(p,"link",c),bn(p),f.head.appendChild(p)}}}function G9(c,u,f){_a.S(c,u,f);var p=Iu;if(p&&c){var _=kr(p).hoistableStyles,w=Ru(c);u=u||"default";var D=_.get(w);if(!D){var L={loading:0,preload:null};if(D=p.querySelector(qf(w)))L.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":u},f),(f=Di.get(w))&&l_(c,f);var W=D=p.createElement("link");bn(W),pr(W,"link",c),W._p=new Promise(function(J,ht){W.onload=J,W.onerror=ht}),W.addEventListener("load",function(){L.loading|=1}),W.addEventListener("error",function(){L.loading|=2}),L.loading|=4,mp(D,u,p)}D={type:"stylesheet",instance:D,count:1,state:L},_.set(w,D)}}}function W9(c,u){_a.X(c,u);var f=Iu;if(f&&c){var p=kr(f).hoistableScripts,_=Du(c),w=p.get(_);w||(w=f.querySelector(Yf(_)),w||(c=d({src:c,async:!0},u),(u=Di.get(_))&&u_(c,u),w=f.createElement("script"),bn(w),pr(w,"link",c),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(_,w))}}function q9(c,u){_a.M(c,u);var f=Iu;if(f&&c){var p=kr(f).hoistableScripts,_=Du(c),w=p.get(_);w||(w=f.querySelector(Yf(_)),w||(c=d({src:c,async:!0,type:"module"},u),(u=Di.get(_))&&u_(c,u),w=f.createElement("script"),bn(w),pr(w,"link",c),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(_,w))}}function iC(c,u,f,p){var _=(_=At.current)?pp(_):null;if(!_)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=Ru(f.href),f=kr(_).hoistableStyles,p=f.get(u),p||(p={type:"style",instance:null,count:0,state:null},f.set(u,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){c=Ru(f.href);var w=kr(_).hoistableStyles,D=w.get(c);if(D||(_=_.ownerDocument||_,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(c,D),(w=_.querySelector(qf(c)))&&!w._p&&(D.instance=w,D.state.loading=5),Di.has(c)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Di.set(c,f),w||Y9(_,c,f,D.state))),u&&p===null)throw Error(r(528,""));return D}if(u&&p!==null)throw Error(r(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Du(f),f=kr(_).hoistableScripts,p=f.get(u),p||(p={type:"script",instance:null,count:0,state:null},f.set(u,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Ru(c){return'href="'+Mn(c)+'"'}function qf(c){return'link[rel="stylesheet"]['+c+"]"}function sC(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function Y9(c,u,f,p){c.querySelector('link[rel="preload"][as="style"]['+u+"]")?p.loading=1:(u=c.createElement("link"),p.preload=u,u.addEventListener("load",function(){return p.loading|=1}),u.addEventListener("error",function(){return p.loading|=2}),pr(u,"link",f),bn(u),c.head.appendChild(u))}function Du(c){return'[src="'+Mn(c)+'"]'}function Yf(c){return"script[async]"+c}function aC(c,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var p=c.querySelector('style[data-href~="'+Mn(f.href)+'"]');if(p)return u.instance=p,bn(p),p;var _=d({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(c.ownerDocument||c).createElement("style"),bn(p),pr(p,"style",_),mp(p,f.precedence,c),u.instance=p;case"stylesheet":_=Ru(f.href);var w=c.querySelector(qf(_));if(w)return u.state.loading|=4,u.instance=w,bn(w),w;p=sC(f),(_=Di.get(_))&&l_(p,_),w=(c.ownerDocument||c).createElement("link"),bn(w);var D=w;return D._p=new Promise(function(L,W){D.onload=L,D.onerror=W}),pr(w,"link",p),u.state.loading|=4,mp(w,f.precedence,c),u.instance=w;case"script":return w=Du(f.src),(_=c.querySelector(Yf(w)))?(u.instance=_,bn(_),_):(p=f,(_=Di.get(w))&&(p=d({},f),u_(p,_)),c=c.ownerDocument||c,_=c.createElement("script"),bn(_),pr(_,"link",p),c.head.appendChild(_),u.instance=_);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(p=u.instance,u.state.loading|=4,mp(p,f.precedence,c));return u.instance}function mp(c,u,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=p.length?p[p.length-1]:null,w=_,D=0;D<p.length;D++){var L=p[D];if(L.dataset.precedence===u)w=L;else if(w!==_)break}w?w.parentNode.insertBefore(c,w.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(c,u.firstChild))}function l_(c,u){c.crossOrigin==null&&(c.crossOrigin=u.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=u.referrerPolicy),c.title==null&&(c.title=u.title)}function u_(c,u){c.crossOrigin==null&&(c.crossOrigin=u.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=u.referrerPolicy),c.integrity==null&&(c.integrity=u.integrity)}var yp=null;function oC(c,u,f){if(yp===null){var p=new Map,_=yp=new Map;_.set(f,p)}else _=yp,p=_.get(f),p||(p=new Map,_.set(f,p));if(p.has(c))return p;for(p.set(c,null),f=f.getElementsByTagName(c),_=0;_<f.length;_++){var w=f[_];if(!(w[cc]||w[Fn]||c==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var D=w.getAttribute(u)||"";D=c+D;var L=p.get(D);L?L.push(w):p.set(D,[w])}}return p}function cC(c,u,f){c=c.ownerDocument||c,c.head.insertBefore(f,u==="title"?c.querySelector("head > title"):null)}function X9(c,u,f){if(f===1||u.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return c=u.disabled,typeof u.precedence=="string"&&c==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function lC(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var Xf=null;function K9(){}function $9(c,u,f){if(Xf===null)throw Error(r(475));var p=Xf;if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=Ru(f.href),w=c.querySelector(qf(_));if(w){c=w._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(p.count++,p=vp.bind(p),c.then(p,p)),u.state.loading|=4,u.instance=w,bn(w);return}w=c.ownerDocument||c,f=sC(f),(_=Di.get(_))&&l_(f,_),w=w.createElement("link"),bn(w);var D=w;D._p=new Promise(function(L,W){D.onload=L,D.onerror=W}),pr(w,"link",f),u.instance=w}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(u,c),(c=u.state.preload)&&(u.state.loading&3)===0&&(p.count++,u=vp.bind(p),c.addEventListener("load",u),c.addEventListener("error",u))}}function Q9(){if(Xf===null)throw Error(r(475));var c=Xf;return c.stylesheets&&c.count===0&&h_(c,c.stylesheets),0<c.count?function(u){var f=setTimeout(function(){if(c.stylesheets&&h_(c,c.stylesheets),c.unsuspend){var p=c.unsuspend;c.unsuspend=null,p()}},6e4);return c.unsuspend=u,function(){c.unsuspend=null,clearTimeout(f)}}:null}function vp(){if(this.count--,this.count===0){if(this.stylesheets)h_(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var _p=null;function h_(c,u){c.stylesheets=null,c.unsuspend!==null&&(c.count++,_p=new Map,u.forEach(Z9,c),_p=null,vp.call(c))}function Z9(c,u){if(!(u.state.loading&4)){var f=_p.get(c);if(f)var p=f.get(null);else{f=new Map,_p.set(c,f);for(var _=c.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<_.length;w++){var D=_[w];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(f.set(D.dataset.precedence,D),p=D)}p&&f.set(null,p)}_=u.instance,D=_.getAttribute("data-precedence"),w=f.get(D)||p,w===p&&f.set(null,_),f.set(D,_),this.count++,p=vp.bind(this),_.addEventListener("load",p),_.addEventListener("error",p),w?w.parentNode.insertBefore(_,w.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(_,c.firstChild)),u.state.loading|=4}}var Kf={$$typeof:R,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function J9(c,u,f,p,_,w,D,L){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ks(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ks(0),this.hiddenUpdates=Ks(null),this.identifierPrefix=p,this.onUncaughtError=_,this.onCaughtError=w,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function uC(c,u,f,p,_,w,D,L,W,J,ht,gt){return c=new J9(c,u,f,D,L,W,J,gt),u=1,w===!0&&(u|=24),w=ai(3,null,null,u),c.current=w,w.stateNode=c,u=qy(),u.refCount++,c.pooledCache=u,u.refCount++,w.memoizedState={element:p,isDehydrated:f,cache:u},$y(w),c}function hC(c){return c?(c=ou,c):ou}function fC(c,u,f,p,_,w){_=hC(_),p.context===null?p.context=_:p.pendingContext=_,p=Ya(u),p.payload={element:f},w=w===void 0?null:w,w!==null&&(p.callback=w),f=Xa(c,p,u),f!==null&&(hi(f,c,u),Tf(f,c,u))}function dC(c,u){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var f=c.retryLane;c.retryLane=f!==0&&f<u?f:u}}function f_(c,u){dC(c,u),(c=c.alternate)&&dC(c,u)}function gC(c){if(c.tag===13){var u=au(c,67108864);u!==null&&hi(u,c,67108864),f_(c,67108864)}}var xp=!0;function t7(c,u,f,p){var _=K.T;K.T=null;var w=ct.p;try{ct.p=2,d_(c,u,f,p)}finally{ct.p=w,K.T=_}}function e7(c,u,f,p){var _=K.T;K.T=null;var w=ct.p;try{ct.p=8,d_(c,u,f,p)}finally{ct.p=w,K.T=_}}function d_(c,u,f,p){if(xp){var _=g_(p);if(_===null)t_(c,u,p,wp,f),mC(c,p);else if(r7(_,c,u,f,p))p.stopPropagation();else if(mC(c,p),u&4&&-1<n7.indexOf(c)){for(;_!==null;){var w=cs(_);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var D=Hi(w.pendingLanes);if(D!==0){var L=w;for(L.pendingLanes|=2,L.entangledLanes|=2;D;){var W=1<<31-br(D);L.entanglements[1]|=W,D&=~W}bs(w),(De&6)===0&&(ip=Ot()+500,zf(0))}}break;case 13:L=au(w,2),L!==null&&hi(L,w,2),ap(),f_(w,2)}if(w=g_(p),w===null&&t_(c,u,p,wp,f),w===_)break;_=w}_!==null&&p.stopPropagation()}else t_(c,u,p,null,f)}}function g_(c){return c=wi(c),p_(c)}var wp=null;function p_(c){if(wp=null,c=Qs(c),c!==null){var u=s(c);if(u===null)c=null;else{var f=u.tag;if(f===13){if(c=a(u),c!==null)return c;c=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;c=null}else u!==c&&(c=null)}}return wp=c,null}function pC(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wt()){case kt:return 2;case vt:return 8;case Wt:case Qt:return 32;case Qe:return 268435456;default:return 32}default:return 32}}var m_=!1,oo=null,co=null,lo=null,$f=new Map,Qf=new Map,uo=[],n7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mC(c,u){switch(c){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":$f.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qf.delete(u.pointerId)}}function Zf(c,u,f,p,_,w){return c===null||c.nativeEvent!==w?(c={blockedOn:u,domEventName:f,eventSystemFlags:p,nativeEvent:w,targetContainers:[_]},u!==null&&(u=cs(u),u!==null&&gC(u)),c):(c.eventSystemFlags|=p,u=c.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),c)}function r7(c,u,f,p,_){switch(u){case"focusin":return oo=Zf(oo,c,u,f,p,_),!0;case"dragenter":return co=Zf(co,c,u,f,p,_),!0;case"mouseover":return lo=Zf(lo,c,u,f,p,_),!0;case"pointerover":var w=_.pointerId;return $f.set(w,Zf($f.get(w)||null,c,u,f,p,_)),!0;case"gotpointercapture":return w=_.pointerId,Qf.set(w,Zf(Qf.get(w)||null,c,u,f,p,_)),!0}return!1}function yC(c){var u=Qs(c.target);if(u!==null){var f=s(u);if(f!==null){if(u=f.tag,u===13){if(u=a(f),u!==null){c.blockedOn=u,a0(c.priority,function(){if(f.tag===13){var p=ui();p=Ba(p);var _=au(f,p);_!==null&&hi(_,f,p),f_(f,p)}});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){c.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}c.blockedOn=null}function bp(c){if(c.blockedOn!==null)return!1;for(var u=c.targetContainers;0<u.length;){var f=g_(c.nativeEvent);if(f===null){f=c.nativeEvent;var p=new f.constructor(f.type,f);ea=p,f.target.dispatchEvent(p),ea=null}else return u=cs(f),u!==null&&gC(u),c.blockedOn=f,!1;u.shift()}return!0}function vC(c,u,f){bp(c)&&f.delete(u)}function i7(){m_=!1,oo!==null&&bp(oo)&&(oo=null),co!==null&&bp(co)&&(co=null),lo!==null&&bp(lo)&&(lo=null),$f.forEach(vC),Qf.forEach(vC)}function Ep(c,u){c.blockedOn===u&&(c.blockedOn=null,m_||(m_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,i7)))}var Ap=null;function _C(c){Ap!==c&&(Ap=c,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ap===c&&(Ap=null);for(var u=0;u<c.length;u+=3){var f=c[u],p=c[u+1],_=c[u+2];if(typeof p!="function"){if(p_(p||f)===null)continue;break}var w=cs(f);w!==null&&(c.splice(u,3),u-=3,pv(w,{pending:!0,data:_,method:f.method,action:p},p,_))}}))}function Jf(c){function u(W){return Ep(W,c)}oo!==null&&Ep(oo,c),co!==null&&Ep(co,c),lo!==null&&Ep(lo,c),$f.forEach(u),Qf.forEach(u);for(var f=0;f<uo.length;f++){var p=uo[f];p.blockedOn===c&&(p.blockedOn=null)}for(;0<uo.length&&(f=uo[0],f.blockedOn===null);)yC(f),f.blockedOn===null&&uo.shift();if(f=(c.ownerDocument||c).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var _=f[p],w=f[p+1],D=_[On]||null;if(typeof w=="function")D||_C(f);else if(D){var L=null;if(w&&w.hasAttribute("formAction")){if(_=w,D=w[On]||null)L=D.formAction;else if(p_(_)!==null)continue}else L=D.action;typeof L=="function"?f[p+1]=L:(f.splice(p,3),p-=3),_C(f)}}}function y_(c){this._internalRoot=c}Tp.prototype.render=y_.prototype.render=function(c){var u=this._internalRoot;if(u===null)throw Error(r(409));var f=u.current,p=ui();fC(f,p,c,u,null,null)},Tp.prototype.unmount=y_.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var u=c.containerInfo;fC(c.current,2,null,c,null,null),ap(),u[_i]=null}};function Tp(c){this._internalRoot=c}Tp.prototype.unstable_scheduleHydration=function(c){if(c){var u=Fa();c={blockedOn:null,target:c,priority:u};for(var f=0;f<uo.length&&u!==0&&u<uo[f].priority;f++);uo.splice(f,0,c),f===0&&yC(c)}};var xC=t.version;if(xC!=="19.1.0")throw Error(r(527,xC,"19.1.0"));ct.findDOMNode=function(c){var u=c._reactInternals;if(u===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(u),c=c!==null?h(c):null,c=c===null?null:c.stateNode,c};var s7={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sp.isDisabled&&Sp.supportsFiber)try{ye=Sp.inject(s7),oe=Sp}catch{}}return ed.createRoot=function(c,u){if(!i(c))throw Error(r(299));var f=!1,p="",_=LT,w=VT,D=BT,L=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(L=u.unstable_transitionCallbacks)),u=uC(c,1,!1,null,null,f,p,_,w,D,L,null),c[_i]=u.current,Jv(c),new y_(u)},ed.hydrateRoot=function(c,u,f){if(!i(c))throw Error(r(299));var p=!1,_="",w=LT,D=VT,L=BT,W=null,J=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(D=f.onCaughtError),f.onRecoverableError!==void 0&&(L=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(W=f.unstable_transitionCallbacks),f.formState!==void 0&&(J=f.formState)),u=uC(c,1,!0,u,f??null,p,_,w,D,L,W,J),u.context=hC(null),f=u.current,p=ui(),p=Ba(p),_=Ya(p),_.callback=null,Xa(f,_,p),f=p,u.current.lanes=f,$s(u,f),bs(u),c[_i]=u.current,Jv(c),new Tp(u)},ed.version="19.1.0",ed}var DC;function m7(){if(DC)return __.exports;DC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),__.exports=p7(),__.exports}var y7=m7(),rt=Pw();const un=Nw(rt);function v7({onAddClick:n,onLogout:t,onTabChange:e,currentTab:r}){return P.jsxs("nav",{className:"navbar",children:[P.jsx("button",{onClick:()=>e("dashboard"),title:"Dashboard",className:r==="dashboard"?"text-warning":"text-info",children:P.jsx("i",{className:"bi bi-house-fill"})}),P.jsx("button",{onClick:()=>e("history"),title:"History",children:P.jsx("i",{className:`bi bi-clock-history ${r==="history"?"text-warning":"text-info"}`})}),P.jsx("button",{onClick:n,title:"Add Meal",children:P.jsx("i",{className:`bi bi-plus-circle-fill ${r==="addmead"?"text-warning":"text-info"}`})}),P.jsx("button",{title:"Suggestions",onClick:()=>e("suggestions"),children:P.jsx("i",{className:`bi bi-lightbulb-fill	 ${r==="suggestions"?"text-warning":"text-info"}`})}),P.jsx("button",{onClick:()=>e("profile"),title:"Profile",children:P.jsx("i",{className:`bi bi-person-circle ${r==="profile"?"text-warning":"text-info"}`})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Vg(n){return n+.5|0}const Io=(n,t,e)=>Math.max(Math.min(n,e),t);function xd(n){return Io(Vg(n*2.55),0,255)}function No(n){return Io(Vg(n*255),0,255)}function Ea(n){return Io(Vg(n/2.55)/100,0,1)}function OC(n){return Io(Vg(n*100),0,100)}const Oi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Qx=[..."0123456789ABCDEF"],_7=n=>Qx[n&15],x7=n=>Qx[(n&240)>>4]+Qx[n&15],Cp=n=>(n&240)>>4===(n&15),w7=n=>Cp(n.r)&&Cp(n.g)&&Cp(n.b)&&Cp(n.a);function b7(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Oi[n[1]]*17,g:255&Oi[n[2]]*17,b:255&Oi[n[3]]*17,a:t===5?Oi[n[4]]*17:255}:(t===7||t===9)&&(e={r:Oi[n[1]]<<4|Oi[n[2]],g:Oi[n[3]]<<4|Oi[n[4]],b:Oi[n[5]]<<4|Oi[n[6]],a:t===9?Oi[n[7]]<<4|Oi[n[8]]:255})),e}const E7=(n,t)=>n<255?t(n):"";function A7(n){var t=w7(n)?_7:x7;return n?"#"+t(n.r)+t(n.g)+t(n.b)+E7(n.a,t):void 0}const T7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function R4(n,t,e){const r=t*Math.min(e,1-e),i=(s,a=(s+n/30)%12)=>e-r*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function S7(n,t,e){const r=(i,s=(i+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function C7(n,t,e){const r=R4(n,1,.5);let i;for(t+e>1&&(i=1/(t+e),t*=i,e*=i),i=0;i<3;i++)r[i]*=1-t-e,r[i]+=t;return r}function I7(n,t,e,r,i){return n===i?(t-e)/r+(t<e?6:0):t===i?(e-n)/r+2:(n-t)/r+4}function kw(n){const e=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(e,r,i),a=Math.min(e,r,i),o=(s+a)/2;let l,h,d;return s!==a&&(d=s-a,h=o>.5?d/(2-s-a):d/(s+a),l=I7(e,r,i,d,s),l=l*60+.5),[l|0,h||0,o]}function Lw(n,t,e,r){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,r)).map(No)}function Vw(n,t,e){return Lw(R4,n,t,e)}function R7(n,t,e){return Lw(C7,n,t,e)}function D7(n,t,e){return Lw(S7,n,t,e)}function D4(n){return(n%360+360)%360}function O7(n){const t=T7.exec(n);let e=255,r;if(!t)return;t[5]!==r&&(e=t[6]?xd(+t[5]):No(+t[5]));const i=D4(+t[2]),s=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?r=R7(i,s,a):t[1]==="hsv"?r=D7(i,s,a):r=Vw(i,s,a),{r:r[0],g:r[1],b:r[2],a:e}}function M7(n,t){var e=kw(n);e[0]=D4(e[0]+t),e=Vw(e),n.r=e[0],n.g=e[1],n.b=e[2]}function N7(n){if(!n)return;const t=kw(n),e=t[0],r=OC(t[1]),i=OC(t[2]);return n.a<255?`hsla(${e}, ${r}%, ${i}%, ${Ea(n.a)})`:`hsl(${e}, ${r}%, ${i}%)`}const MC={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},NC={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function P7(){const n={},t=Object.keys(NC),e=Object.keys(MC);let r,i,s,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],i=0;i<e.length;i++)s=e[i],o=o.replace(s,MC[s]);s=parseInt(NC[a],16),n[o]=[s>>16&255,s>>8&255,s&255]}return n}let Ip;function k7(n){Ip||(Ip=P7(),Ip.transparent=[0,0,0,0]);const t=Ip[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const L7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function V7(n){const t=L7.exec(n);let e=255,r,i,s;if(t){if(t[7]!==r){const a=+t[7];e=t[8]?xd(a):Io(a*255,0,255)}return r=+t[1],i=+t[3],s=+t[5],r=255&(t[2]?xd(r):Io(r,0,255)),i=255&(t[4]?xd(i):Io(i,0,255)),s=255&(t[6]?xd(s):Io(s,0,255)),{r,g:i,b:s,a:e}}}function B7(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Ea(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const A_=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Ou=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function F7(n,t,e){const r=Ou(Ea(n.r)),i=Ou(Ea(n.g)),s=Ou(Ea(n.b));return{r:No(A_(r+e*(Ou(Ea(t.r))-r))),g:No(A_(i+e*(Ou(Ea(t.g))-i))),b:No(A_(s+e*(Ou(Ea(t.b))-s))),a:n.a+e*(t.a-n.a)}}function Rp(n,t,e){if(n){let r=kw(n);r[t]=Math.max(0,Math.min(r[t]+r[t]*e,t===0?360:1)),r=Vw(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function O4(n,t){return n&&Object.assign(t||{},n)}function PC(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=No(n[3]))):(t=O4(n,{r:0,g:0,b:0,a:1}),t.a=No(t.a)),t}function U7(n){return n.charAt(0)==="r"?V7(n):O7(n)}class ag{constructor(t){if(t instanceof ag)return t;const e=typeof t;let r;e==="object"?r=PC(t):e==="string"&&(r=b7(t)||k7(t)||U7(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=O4(this._rgb);return t&&(t.a=Ea(t.a)),t}set rgb(t){this._rgb=PC(t)}rgbString(){return this._valid?B7(this._rgb):void 0}hexString(){return this._valid?A7(this._rgb):void 0}hslString(){return this._valid?N7(this._rgb):void 0}mix(t,e){if(t){const r=this.rgb,i=t.rgb;let s;const a=e===s?.5:e,o=2*a-1,l=r.a-i.a,h=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;s=1-h,r.r=255&h*r.r+s*i.r+.5,r.g=255&h*r.g+s*i.g+.5,r.b=255&h*r.b+s*i.b+.5,r.a=a*r.a+(1-a)*i.a,this.rgb=r}return this}interpolate(t,e){return t&&(this._rgb=F7(this._rgb,t._rgb,e)),this}clone(){return new ag(this.rgb)}alpha(t){return this._rgb.a=No(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Vg(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Rp(this._rgb,2,t),this}darken(t){return Rp(this._rgb,2,-t),this}saturate(t){return Rp(this._rgb,1,t),this}desaturate(t){return Rp(this._rgb,1,-t),this}rotate(t){return M7(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function xa(){}const j7=(()=>{let n=0;return()=>n++})();function Re(n){return n==null}function cr(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function _e(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ji(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Es(n,t){return ji(n)?n:t}function re(n,t){return typeof n>"u"?t:n}const z7=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,M4=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function tn(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function ke(n,t,e,r){let i,s,a;if(cr(n))for(s=n.length,i=0;i<s;i++)t.call(e,n[i],i);else if(_e(n))for(a=Object.keys(n),s=a.length,i=0;i<s;i++)t.call(e,n[a[i]],a[i])}function V1(n,t){let e,r,i,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,r=n.length;e<r;++e)if(i=n[e],s=t[e],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function B1(n){if(cr(n))return n.map(B1);if(_e(n)){const t=Object.create(null),e=Object.keys(n),r=e.length;let i=0;for(;i<r;++i)t[e[i]]=B1(n[e[i]]);return t}return n}function N4(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function H7(n,t,e,r){if(!N4(n))return;const i=t[n],s=e[n];_e(i)&&_e(s)?og(i,s,r):t[n]=B1(s)}function og(n,t,e){const r=cr(t)?t:[t],i=r.length;if(!_e(n))return n;e=e||{};const s=e.merger||H7;let a;for(let o=0;o<i;++o){if(a=r[o],!_e(a))continue;const l=Object.keys(a);for(let h=0,d=l.length;h<d;++h)s(l[h],n,a,e)}return n}function Bd(n,t){return og(n,t,{merger:G7})}function G7(n,t,e){if(!N4(n))return;const r=t[n],i=e[n];_e(r)&&_e(i)?Bd(r,i):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=B1(i))}const kC={"":n=>n,x:n=>n.x,y:n=>n.y};function W7(n){const t=n.split("."),e=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(e.push(r),r="");return e}function q7(n){const t=W7(n);return e=>{for(const r of t){if(r==="")break;e=e&&e[r]}return e}}function vl(n,t){return(kC[t]||(kC[t]=q7(t)))(n)}function Bw(n){return n.charAt(0).toUpperCase()+n.slice(1)}const cg=n=>typeof n<"u",zo=n=>typeof n=="function",LC=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function Y7(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const qe=Math.PI,vn=2*qe,X7=vn+qe,F1=Number.POSITIVE_INFINITY,K7=qe/180,Kn=qe/2,Vc=qe/4,VC=qe*2/3,P4=Math.log10,Ps=Math.sign;function Fd(n,t,e){return Math.abs(n-t)<e}function BC(n){const t=Math.round(n);n=Fd(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(P4(n))),r=n/e;return(r<=1?1:r<=2?2:r<=5?5:10)*e}function $7(n){const t=[],e=Math.sqrt(n);let r;for(r=1;r<e;r++)n%r===0&&(t.push(r),t.push(n/r));return e===(e|0)&&t.push(e),t.sort((i,s)=>i-s).pop(),t}function Q7(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function lg(n){return!Q7(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Z7(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function J7(n,t,e){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Aa(n){return n*(qe/180)}function tL(n){return n*(180/qe)}function FC(n){if(!ji(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function k4(n,t){const e=t.x-n.x,r=t.y-n.y,i=Math.sqrt(e*e+r*r);let s=Math.atan2(r,e);return s<-.5*qe&&(s+=vn),{angle:s,distance:i}}function Zx(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function eL(n,t){return(n-t+X7)%vn-qe}function Zi(n){return(n%vn+vn)%vn}function ug(n,t,e,r){const i=Zi(n),s=Zi(t),a=Zi(e),o=Zi(s-i),l=Zi(a-i),h=Zi(i-s),d=Zi(i-a);return i===s||i===a||r&&s===a||o>l&&h<d}function Dr(n,t,e){return Math.max(t,Math.min(e,n))}function nL(n){return Dr(n,-32768,32767)}function Ro(n,t,e,r=1e-6){return n>=Math.min(t,e)-r&&n<=Math.max(t,e)+r}function Fw(n,t,e){e=e||(a=>n[a]<t);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,e(s)?i=s:r=s;return{lo:i,hi:r}}const rl=(n,t,e,r)=>Fw(n,e,r?i=>{const s=n[i][t];return s<e||s===e&&n[i+1][t]===e}:i=>n[i][t]<e),rL=(n,t,e)=>Fw(n,e,r=>n[r][t]>=e);function iL(n,t,e){let r=0,i=n.length;for(;r<i&&n[r]<t;)r++;for(;i>r&&n[i-1]>e;)i--;return r>0||i<n.length?n.slice(r,i):n}const L4=["push","pop","shift","splice","unshift"];function sL(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),L4.forEach(e=>{const r="_onData"+Bw(e),i=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){const a=i.apply(this,s);return n._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...s)}),a}})})}function UC(n,t){const e=n._chartjs;if(!e)return;const r=e.listeners,i=r.indexOf(t);i!==-1&&r.splice(i,1),!(r.length>0)&&(L4.forEach(s=>{delete n[s]}),delete n._chartjs)}function V4(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const B4=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function F4(n,t){let e=[],r=!1;return function(...i){e=i,r||(r=!0,B4.call(window,()=>{r=!1,n.apply(t,e)}))}}function aL(n,t){let e;return function(...r){return t?(clearTimeout(e),e=setTimeout(n,t,r)):n.apply(this,r),t}}const U4=n=>n==="start"?"left":n==="end"?"right":"center",fi=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,oL=(n,t,e,r)=>n===(r?"left":"right")?e:n==="center"?(t+e)/2:t;function cL(n,t,e){const r=t.length;let i=0,s=r;if(n._sorted){const{iScale:a,vScale:o,_parsed:l}=n,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,d=a.axis,{min:g,max:m,minDefined:y,maxDefined:x}=a.getUserBounds();if(y){if(i=Math.min(rl(l,d,g).lo,e?r:rl(t,d,a.getPixelForValue(g)).lo),h){const b=l.slice(0,i+1).reverse().findIndex(E=>!Re(E[o.axis]));i-=Math.max(0,b)}i=Dr(i,0,r-1)}if(x){let b=Math.max(rl(l,a.axis,m,!0).hi+1,e?0:rl(t,d,a.getPixelForValue(m),!0).hi+1);if(h){const E=l.slice(b-1).findIndex(S=>!Re(S[o.axis]));b+=Math.max(0,E)}s=Dr(b,i,r)-i}else s=r-i}return{start:i,count:s}}function lL(n){const{xScale:t,yScale:e,_scaleRanges:r}=n,i={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==e.min||r.ymax!==e.max;return Object.assign(r,i),s}const Dp=n=>n===0||n===1,jC=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*vn/e)),zC=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*vn/e)+1,Ud={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Kn)+1,easeOutSine:n=>Math.sin(n*Kn),easeInOutSine:n=>-.5*(Math.cos(qe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Dp(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Dp(n)?n:jC(n,.075,.3),easeOutElastic:n=>Dp(n)?n:zC(n,.075,.3),easeInOutElastic(n){return Dp(n)?n:n<.5?.5*jC(n*2,.1125,.45):.5+.5*zC(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Ud.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ud.easeInBounce(n*2)*.5:Ud.easeOutBounce(n*2-1)*.5+.5};function Uw(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function HC(n){return Uw(n)?n:new ag(n)}function T_(n){return Uw(n)?n:new ag(n).saturate(.5).darken(.1).hexString()}const uL=["x","y","borderWidth","radius","tension"],hL=["color","borderColor","backgroundColor"];function fL(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:hL},numbers:{type:"number",properties:uL}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function dL(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const GC=new Map;function gL(n,t){t=t||{};const e=n+JSON.stringify(t);let r=GC.get(e);return r||(r=new Intl.NumberFormat(n,t),GC.set(e,r)),r}function jw(n,t,e){return gL(t,e).format(n)}const pL={values(n){return cr(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const r=this.chart.options.locale;let i,s=n;if(e.length>1){const h=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(h<1e-4||h>1e15)&&(i="scientific"),s=mL(n,e)}const a=P4(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),jw(n,r,l)}};function mL(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var j4={formatters:pL};function yL(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:j4.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const _l=Object.create(null),Jx=Object.create(null);function jd(n,t){if(!t)return n;const e=t.split(".");for(let r=0,i=e.length;r<i;++r){const s=e[r];n=n[s]||(n[s]=Object.create(null))}return n}function S_(n,t,e){return typeof t=="string"?og(jd(n,t),e):og(jd(n,""),t)}class vL{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>T_(i.backgroundColor),this.hoverBorderColor=(r,i)=>T_(i.borderColor),this.hoverColor=(r,i)=>T_(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return S_(this,t,e)}get(t){return jd(this,t)}describe(t,e){return S_(Jx,t,e)}override(t,e){return S_(_l,t,e)}route(t,e,r,i){const s=jd(this,t),a=jd(this,r),o="_"+e;Object.defineProperties(s,{[o]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[o],h=a[i];return _e(l)?Object.assign({},h,l):re(l,h)},set(l){this[o]=l}}})}apply(t){t.forEach(e=>e(this))}}var Cn=new vL({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[fL,dL,yL]);function _L(n){return!n||Re(n.size)||Re(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function WC(n,t,e,r,i){let s=t[i];return s||(s=t[i]=n.measureText(i).width,e.push(i)),s>r&&(r=s),r}function Bc(n,t,e){const r=n.currentDevicePixelRatio,i=e!==0?Math.max(e/2,.5):0;return Math.round((t-i)*r)/r+i}function qC(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function t2(n,t,e,r){z4(n,t,e,r,null)}function z4(n,t,e,r,i){let s,a,o,l,h,d,g,m;const y=t.pointStyle,x=t.rotation,b=t.radius;let E=(x||0)*K7;if(y&&typeof y=="object"&&(s=y.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,r),n.rotate(E),n.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),y){default:i?n.ellipse(e,r,i/2,b,0,0,vn):n.arc(e,r,b,0,vn),n.closePath();break;case"triangle":d=i?i/2:b,n.moveTo(e+Math.sin(E)*d,r-Math.cos(E)*b),E+=VC,n.lineTo(e+Math.sin(E)*d,r-Math.cos(E)*b),E+=VC,n.lineTo(e+Math.sin(E)*d,r-Math.cos(E)*b),n.closePath();break;case"rectRounded":h=b*.516,l=b-h,a=Math.cos(E+Vc)*l,g=Math.cos(E+Vc)*(i?i/2-h:l),o=Math.sin(E+Vc)*l,m=Math.sin(E+Vc)*(i?i/2-h:l),n.arc(e-g,r-o,h,E-qe,E-Kn),n.arc(e+m,r-a,h,E-Kn,E),n.arc(e+g,r+o,h,E,E+Kn),n.arc(e-m,r+a,h,E+Kn,E+qe),n.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*b,d=i?i/2:l,n.rect(e-d,r-l,2*d,2*l);break}E+=Vc;case"rectRot":g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+m,r-a),n.lineTo(e+g,r+o),n.lineTo(e-m,r+a),n.closePath();break;case"crossRot":E+=Vc;case"cross":g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+g,r+o),n.moveTo(e+m,r-a),n.lineTo(e-m,r+a);break;case"star":g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+g,r+o),n.moveTo(e+m,r-a),n.lineTo(e-m,r+a),E+=Vc,g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+g,r+o),n.moveTo(e+m,r-a),n.lineTo(e-m,r+a);break;case"line":a=i?i/2:Math.cos(E)*b,o=Math.sin(E)*b,n.moveTo(e-a,r-o),n.lineTo(e+a,r+o);break;case"dash":n.moveTo(e,r),n.lineTo(e+Math.cos(E)*(i?i/2:b),r+Math.sin(E)*b);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function hg(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function zw(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Hw(n){n.restore()}function xL(n,t,e,r,i){if(!t)return n.lineTo(e.x,e.y);if(i==="middle"){const s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else i==="after"!=!!r?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function wL(n,t,e,r){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?e.cp2x:e.cp1x,r?e.cp2y:e.cp1y,e.x,e.y)}function bL(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Re(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function EL(n,t,e,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,h=e+s.actualBoundingBoxDescent,d=i.strikethrough?(l+h)/2:h;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(a,d),n.lineTo(o,d),n.stroke()}}function AL(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function U1(n,t,e,r,i,s={}){const a=cr(t)?t:[t],o=s.strokeWidth>0&&s.strokeColor!=="";let l,h;for(n.save(),n.font=i.string,bL(n,s),l=0;l<a.length;++l)h=a[l],s.backdrop&&AL(n,s.backdrop),o&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Re(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(h,e,r,s.maxWidth)),n.fillText(h,e,r,s.maxWidth),EL(n,e,r,h,s),r+=Number(i.lineHeight);n.restore()}function j1(n,t){const{x:e,y:r,w:i,h:s,radius:a}=t;n.arc(e+a.topLeft,r+a.topLeft,a.topLeft,1.5*qe,qe,!0),n.lineTo(e,r+s-a.bottomLeft),n.arc(e+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,qe,Kn,!0),n.lineTo(e+i-a.bottomRight,r+s),n.arc(e+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,Kn,0,!0),n.lineTo(e+i,r+a.topRight),n.arc(e+i-a.topRight,r+a.topRight,a.topRight,0,-Kn,!0),n.lineTo(e+a.topLeft,r)}const TL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,SL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function CL(n,t){const e=(""+n).match(TL);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const IL=n=>+n||0;function Gw(n,t){const e={},r=_e(t),i=r?Object.keys(t):t,s=_e(n)?r?a=>re(n[a],n[t[a]]):a=>n[a]:()=>n;for(const a of i)e[a]=IL(s(a));return e}function H4(n){return Gw(n,{top:"y",right:"x",bottom:"y",left:"x"})}function rh(n){return Gw(n,["topLeft","topRight","bottomLeft","bottomRight"])}function rs(n){const t=H4(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Qr(n,t){n=n||{},t=t||Cn.font;let e=re(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let r=re(n.style,t.style);r&&!(""+r).match(SL)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:re(n.family,t.family),lineHeight:CL(re(n.lineHeight,t.lineHeight),e),size:e,style:r,weight:re(n.weight,t.weight),string:""};return i.string=_L(i),i}function Op(n,t,e,r){let i,s,a;for(i=0,s=n.length;i<s;++i)if(a=n[i],a!==void 0&&a!==void 0)return a}function RL(n,t,e){const{min:r,max:i}=n,s=M4(t,(i-r)/2),a=(o,l)=>e&&o===0?0:o+l;return{min:a(r,-Math.abs(s)),max:a(i,s)}}function Ol(n,t){return Object.assign(Object.create(n),t)}function Ww(n,t=[""],e,r,i=()=>n[0]){const s=e||n;typeof r>"u"&&(r=Y4("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:o=>Ww([o,...n],t,s,r)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete n[0][l],!0},get(o,l){return W4(o,l,()=>VL(l,t,n,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,l){return XC(o).includes(l)},ownKeys(o){return XC(o)},set(o,l,h){const d=o._storage||(o._storage=i());return o[l]=d[l]=h,delete o._keys,!0}})}function uh(n,t,e,r){const i={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:G4(n,r),setContext:s=>uh(n,s,e,r),override:s=>uh(n.override(s),t,e,r)};return new Proxy(i,{deleteProperty(s,a){return delete s[a],delete n[a],!0},get(s,a,o){return W4(s,a,()=>OL(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(s,a,o){return n[a]=o,delete s[a],!0}})}function G4(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=n;return{allKeys:i,scriptable:e,indexable:r,isScriptable:zo(e)?e:()=>e,isIndexable:zo(r)?r:()=>r}}const DL=(n,t)=>n?n+Bw(t):t,qw=(n,t)=>_e(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function W4(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const r=e();return n[t]=r,r}function OL(n,t,e){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=n;let o=r[t];return zo(o)&&a.isScriptable(t)&&(o=ML(t,o,n,e)),cr(o)&&o.length&&(o=NL(t,o,n,a.isIndexable)),qw(t,o)&&(o=uh(o,i,s&&s[t],a)),o}function ML(n,t,e,r){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=e;if(o.has(n))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+n);o.add(n);let l=t(s,a||r);return o.delete(n),qw(n,l)&&(l=Yw(i._scopes,i,n,l)),l}function NL(n,t,e,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=e;if(typeof s.index<"u"&&r(n))return t[s.index%t.length];if(_e(t[0])){const l=t,h=i._scopes.filter(d=>d!==l);t=[];for(const d of l){const g=Yw(h,i,n,d);t.push(uh(g,s,a&&a[n],o))}}return t}function q4(n,t,e){return zo(n)?n(t,e):n}const PL=(n,t)=>n===!0?t:typeof n=="string"?vl(t,n):void 0;function kL(n,t,e,r,i){for(const s of t){const a=PL(e,s);if(a){n.add(a);const o=q4(a._fallback,e,i);if(typeof o<"u"&&o!==e&&o!==r)return o}else if(a===!1&&typeof r<"u"&&e!==r)return null}return!1}function Yw(n,t,e,r){const i=t._rootScopes,s=q4(t._fallback,e,r),a=[...n,...i],o=new Set;o.add(r);let l=YC(o,a,e,s||e,r);return l===null||typeof s<"u"&&s!==e&&(l=YC(o,a,s,l,r),l===null)?!1:Ww(Array.from(o),[""],i,s,()=>LL(t,e,r))}function YC(n,t,e,r,i){for(;e;)e=kL(n,t,e,r,i);return e}function LL(n,t,e){const r=n._getTarget();t in r||(r[t]={});const i=r[t];return cr(i)&&_e(e)?e:i||{}}function VL(n,t,e,r){let i;for(const s of t)if(i=Y4(DL(s,n),e),typeof i<"u")return qw(n,i)?Yw(e,r,n,i):i}function Y4(n,t){for(const e of t){if(!e)continue;const r=e[n];if(typeof r<"u")return r}}function XC(n){let t=n._keys;return t||(t=n._keys=BL(n._scopes)),t}function BL(n){const t=new Set;for(const e of n)for(const r of Object.keys(e).filter(i=>!i.startsWith("_")))t.add(r);return Array.from(t)}const FL=Number.EPSILON||1e-14,hh=(n,t)=>t<n.length&&!n[t].skip&&n[t],X4=n=>n==="x"?"y":"x";function UL(n,t,e,r){const i=n.skip?t:n,s=t,a=e.skip?t:e,o=Zx(s,i),l=Zx(a,s);let h=o/(o+l),d=l/(o+l);h=isNaN(h)?0:h,d=isNaN(d)?0:d;const g=r*h,m=r*d;return{previous:{x:s.x-g*(a.x-i.x),y:s.y-g*(a.y-i.y)},next:{x:s.x+m*(a.x-i.x),y:s.y+m*(a.y-i.y)}}}function jL(n,t,e){const r=n.length;let i,s,a,o,l,h=hh(n,0);for(let d=0;d<r-1;++d)if(l=h,h=hh(n,d+1),!(!l||!h)){if(Fd(t[d],0,FL)){e[d]=e[d+1]=0;continue}i=e[d]/t[d],s=e[d+1]/t[d],o=Math.pow(i,2)+Math.pow(s,2),!(o<=9)&&(a=3/Math.sqrt(o),e[d]=i*a*t[d],e[d+1]=s*a*t[d])}}function zL(n,t,e="x"){const r=X4(e),i=n.length;let s,a,o,l=hh(n,0);for(let h=0;h<i;++h){if(a=o,o=l,l=hh(n,h+1),!o)continue;const d=o[e],g=o[r];a&&(s=(d-a[e])/3,o[`cp1${e}`]=d-s,o[`cp1${r}`]=g-s*t[h]),l&&(s=(l[e]-d)/3,o[`cp2${e}`]=d+s,o[`cp2${r}`]=g+s*t[h])}}function HL(n,t="x"){const e=X4(t),r=n.length,i=Array(r).fill(0),s=Array(r);let a,o,l,h=hh(n,0);for(a=0;a<r;++a)if(o=l,l=h,h=hh(n,a+1),!!l){if(h){const d=h[t]-l[t];i[a]=d!==0?(h[e]-l[e])/d:0}s[a]=o?h?Ps(i[a-1])!==Ps(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}jL(n,i,s),zL(n,s,t)}function Mp(n,t,e){return Math.max(Math.min(n,e),t)}function GL(n,t){let e,r,i,s,a,o=hg(n[0],t);for(e=0,r=n.length;e<r;++e)a=s,s=o,o=e<r-1&&hg(n[e+1],t),s&&(i=n[e],a&&(i.cp1x=Mp(i.cp1x,t.left,t.right),i.cp1y=Mp(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=Mp(i.cp2x,t.left,t.right),i.cp2y=Mp(i.cp2y,t.top,t.bottom)))}function WL(n,t,e,r,i){let s,a,o,l;if(t.spanGaps&&(n=n.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")HL(n,i);else{let h=r?n[n.length-1]:n[0];for(s=0,a=n.length;s<a;++s)o=n[s],l=UL(h,o,n[Math.min(s+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,h=o}t.capBezierPoints&&GL(n,e)}function Xw(){return typeof window<"u"&&typeof document<"u"}function Kw(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function z1(n,t,e){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*t.parentNode[e])):r=n,r}const Dm=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function qL(n,t){return Dm(n).getPropertyValue(t)}const YL=["top","right","bottom","left"];function ll(n,t,e){const r={};e=e?"-"+e:"";for(let i=0;i<4;i++){const s=YL[i];r[s]=parseFloat(n[t+"-"+s+e])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const XL=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function KL(n,t){const e=n.touches,r=e&&e.length?e[0]:n,{offsetX:i,offsetY:s}=r;let a=!1,o,l;if(XL(i,s,n.target))o=i,l=s;else{const h=t.getBoundingClientRect();o=r.clientX-h.left,l=r.clientY-h.top,a=!0}return{x:o,y:l,box:a}}function Gc(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:r}=t,i=Dm(e),s=i.boxSizing==="border-box",a=ll(i,"padding"),o=ll(i,"border","width"),{x:l,y:h,box:d}=KL(n,e),g=a.left+(d&&o.left),m=a.top+(d&&o.top);let{width:y,height:x}=t;return s&&(y-=a.width+o.width,x-=a.height+o.height),{x:Math.round((l-g)/y*e.width/r),y:Math.round((h-m)/x*e.height/r)}}function $L(n,t,e){let r,i;if(t===void 0||e===void 0){const s=n&&Kw(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{const a=s.getBoundingClientRect(),o=Dm(s),l=ll(o,"border","width"),h=ll(o,"padding");t=a.width-h.width-l.width,e=a.height-h.height-l.height,r=z1(o.maxWidth,s,"clientWidth"),i=z1(o.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:r||F1,maxHeight:i||F1}}const Np=n=>Math.round(n*10)/10;function QL(n,t,e,r){const i=Dm(n),s=ll(i,"margin"),a=z1(i.maxWidth,n,"clientWidth")||F1,o=z1(i.maxHeight,n,"clientHeight")||F1,l=$L(n,t,e);let{width:h,height:d}=l;if(i.boxSizing==="content-box"){const m=ll(i,"border","width"),y=ll(i,"padding");h-=y.width+m.width,d-=y.height+m.height}return h=Math.max(0,h-s.width),d=Math.max(0,r?h/r:d-s.height),h=Np(Math.min(h,a,l.maxWidth)),d=Np(Math.min(d,o,l.maxHeight)),h&&!d&&(d=Np(h/2)),(t!==void 0||e!==void 0)&&r&&l.height&&d>l.height&&(d=l.height,h=Np(Math.floor(d*r))),{width:h,height:d}}function KC(n,t,e){const r=t||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const a=n.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||a.height!==i||a.width!==s?(n.currentDevicePixelRatio=r,a.height=i,a.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const ZL=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Xw()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function $C(n,t){const e=qL(n,t),r=e&&e.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Wc(n,t,e,r){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function JL(n,t,e,r){return{x:n.x+e*(t.x-n.x),y:r==="middle"?e<.5?n.y:t.y:r==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function tV(n,t,e,r){const i={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},a=Wc(n,i,e),o=Wc(i,s,e),l=Wc(s,t,e),h=Wc(a,o,e),d=Wc(o,l,e);return Wc(h,d,e)}const eV=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,r){return e-r},leftForLtr(e,r){return e-r}}},nV=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function ih(n,t,e){return n?eV(t,e):nV()}function K4(n,t){let e,r;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,r=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=r)}function $4(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Q4(n){return n==="angle"?{between:ug,compare:eL,normalize:Zi}:{between:Ro,compare:(t,e)=>t-e,normalize:t=>t}}function QC({start:n,end:t,count:e,loop:r,style:i}){return{start:n%e,end:t%e,loop:r&&(t-n+1)%e===0,style:i}}function rV(n,t,e){const{property:r,start:i,end:s}=e,{between:a,normalize:o}=Q4(r),l=t.length;let{start:h,end:d,loop:g}=n,m,y;if(g){for(h+=l,d+=l,m=0,y=l;m<y&&a(o(t[h%l][r]),i,s);++m)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:g,style:n.style}}function iV(n,t,e){if(!e)return[n];const{property:r,start:i,end:s}=e,a=t.length,{compare:o,between:l,normalize:h}=Q4(r),{start:d,end:g,loop:m,style:y}=rV(n,t,e),x=[];let b=!1,E=null,S,T,R;const k=()=>l(i,R,S)&&o(i,R)!==0,N=()=>o(s,S)===0||l(s,R,S),j=()=>b||k(),O=()=>!b||N();for(let C=d,M=d;C<=g;++C)T=t[C%a],!T.skip&&(S=h(T[r]),S!==R&&(b=l(S,i,s),E===null&&j()&&(E=o(S,i)===0?C:M),E!==null&&O()&&(x.push(QC({start:E,end:C,loop:m,count:a,style:y})),E=null),M=C,R=S));return E!==null&&x.push(QC({start:E,end:g,loop:m,count:a,style:y})),x}function sV(n,t){const e=[],r=n.segments;for(let i=0;i<r.length;i++){const s=iV(r[i],n.points,t);s.length&&e.push(...s)}return e}function aV(n,t,e,r){let i=0,s=t-1;if(e&&!r)for(;i<t&&!n[i].skip;)i++;for(;i<t&&n[i].skip;)i++;for(i%=t,e&&(s+=i);s>i&&n[s%t].skip;)s--;return s%=t,{start:i,end:s}}function oV(n,t,e,r){const i=n.length,s=[];let a=t,o=n[t],l;for(l=t+1;l<=e;++l){const h=n[l%i];h.skip||h.stop?o.skip||(r=!1,s.push({start:t%i,end:(l-1)%i,loop:r}),t=a=h.stop?l:null):(a=l,o.skip&&(t=l)),o=h}return a!==null&&s.push({start:t%i,end:a%i,loop:r}),s}function cV(n,t){const e=n.points,r=n.options.spanGaps,i=e.length;if(!i)return[];const s=!!n._loop,{start:a,end:o}=aV(e,i,s,r);if(r===!0)return ZC(n,[{start:a,end:o,loop:s}],e,t);const l=o<a?o+i:o,h=!!n._fullLoop&&a===0&&o===i-1;return ZC(n,oV(e,a,l,h),e,t)}function ZC(n,t,e,r){return!r||!r.setContext||!e?t:lV(n,t,e,r)}function lV(n,t,e,r){const i=n._chart.getContext(),s=JC(n.options),{_datasetIndex:a,options:{spanGaps:o}}=n,l=e.length,h=[];let d=s,g=t[0].start,m=g;function y(x,b,E,S){const T=o?-1:1;if(x!==b){for(x+=l;e[x%l].skip;)x-=T;for(;e[b%l].skip;)b+=T;x%l!==b%l&&(h.push({start:x%l,end:b%l,loop:E,style:S}),d=S,g=b%l)}}for(const x of t){g=o?g:x.start;let b=e[g%l],E;for(m=g+1;m<=x.end;m++){const S=e[m%l];E=JC(r.setContext(Ol(i,{type:"segment",p0:b,p1:S,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:a}))),uV(E,d)&&y(g,m-1,x.loop,d),b=S,d=E}g<m-1&&y(g,m-1,x.loop,d)}return h}function JC(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function uV(n,t){if(!t)return!1;const e=[],r=function(i,s){return Uw(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(t,r)}function Pp(n,t,e){return n.options.clip?n[e]:t[e]}function hV(n,t){const{xScale:e,yScale:r}=n;return e&&r?{left:Pp(e,t,"left"),right:Pp(e,t,"right"),top:Pp(r,t,"top"),bottom:Pp(r,t,"bottom")}:t}function fV(n,t){const e=t._clip;if(e.disabled)return!1;const r=hV(t,n.chartArea);return{left:e.left===!1?0:r.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:r.right+(e.right===!0?0:e.right),top:e.top===!1?0:r.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:r.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class dV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,r,i){const s=e.listeners[i],a=e.duration;s.forEach(o=>o({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(r-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=B4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let a=s.length-1,o=!1,l;for(;a>=0;--a)l=s[a],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(t),o=!0):(s[a]=s[s.length-1],s.pop());o&&(i.draw(),this._notify(i,r,t,"progress")),s.length||(r.running=!1,this._notify(i,r,t,"complete"),r.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let r=e.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,r)),r}listen(t,e,r){this._getAnims(t).listeners[e].push(r)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const r=e.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var wa=new dV;const tI="transparent",gV={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const r=HC(n||tI),i=r.valid&&HC(t||tI);return i&&i.valid?i.mix(r,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class pV{constructor(t,e,r,i){const s=e[r];i=Op([t.to,i,s,t.from]);const a=Op([t.from,s,i]);this._active=!0,this._fn=t.fn||gV[t.type||typeof a],this._easing=Ud[t.easing]||Ud.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=r,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,a=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Op([t.to,e,i,t.from]),this._from=Op([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,r=this._duration,i=this._prop,s=this._from,a=this._loop,o=this._to;let l;if(this._active=s!==o&&(a||e<r),!this._active){this._target[i]=o,this._notify(!0);return}if(e<0){this._target[i]=s;return}l=e/r%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,o,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,r)=>{t.push({res:e,rej:r})})}_notify(t){const e=t?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][e]()}}class Z4{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!_e(t))return;const e=Object.keys(Cn.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const s=t[i];if(!_e(s))return;const a={};for(const o of e)a[o]=s[o];(cr(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!r.has(o))&&r.set(o,a)})})}_animateOptions(t,e){const r=e.options,i=yV(t,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&mV(t.options.$animations,r).then(()=>{t.options=r},()=>{}),s}_createAnimations(t,e){const r=this._properties,i=[],s=t.$animations||(t.$animations={}),a=Object.keys(e),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const h=a[l];if(h.charAt(0)==="$")continue;if(h==="options"){i.push(...this._animateOptions(t,e));continue}const d=e[h];let g=s[h];const m=r.get(h);if(g)if(m&&g.active()){g.update(m,d,o);continue}else g.cancel();if(!m||!m.duration){t[h]=d;continue}s[h]=g=new pV(m,t,h,d),i.push(g)}return i}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const r=this._createAnimations(t,e);if(r.length)return wa.add(this._chart,r),!0}}function mV(n,t){const e=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function yV(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function eI(n,t){const e=n&&n.options||{},r=e.reverse,i=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:r?s:i,end:r?i:s}}function vV(n,t,e){if(e===!1)return!1;const r=eI(n,e),i=eI(t,e);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function _V(n){let t,e,r,i;return _e(n)?(t=n.top,e=n.right,r=n.bottom,i=n.left):t=e=r=i=n,{top:t,right:e,bottom:r,left:i,disabled:n===!1}}function J4(n,t){const e=[],r=n._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)e.push(r[i].index);return e}function nI(n,t,e,r={}){const i=n.keys,s=r.mode==="single";let a,o,l,h;if(t===null)return;let d=!1;for(a=0,o=i.length;a<o;++a){if(l=+i[a],l===e){if(d=!0,r.all)continue;break}h=n.values[l],ji(h)&&(s||t===0||Ps(t)===Ps(h))&&(t+=h)}return!d&&!r.all?0:t}function xV(n,t){const{iScale:e,vScale:r}=t,i=e.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",a=Object.keys(n),o=new Array(a.length);let l,h,d;for(l=0,h=a.length;l<h;++l)d=a[l],o[l]={[i]:d,[s]:n[d]};return o}function C_(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function wV(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function bV(n){const{min:t,max:e,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?e:Number.POSITIVE_INFINITY}}function EV(n,t,e){const r=n[t]||(n[t]={});return r[e]||(r[e]={})}function rI(n,t,e,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(e&&s>0||!e&&s<0)return i.index}return null}function iI(n,t){const{chart:e,_cachedMeta:r}=n,i=e._stacks||(e._stacks={}),{iScale:s,vScale:a,index:o}=r,l=s.axis,h=a.axis,d=wV(s,a,r),g=t.length;let m;for(let y=0;y<g;++y){const x=t[y],{[l]:b,[h]:E}=x,S=x._stacks||(x._stacks={});m=S[h]=EV(i,d,b),m[o]=E,m._top=rI(m,a,!0,r.type),m._bottom=rI(m,a,!1,r.type);const T=m._visualValues||(m._visualValues={});T[o]=E}}function I_(n,t){const e=n.scales;return Object.keys(e).filter(r=>e[r].axis===t).shift()}function AV(n,t){return Ol(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function TV(n,t,e){return Ol(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function nd(n,t){const e=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){t=t||n._parsed;for(const i of t){const s=i._stacks;if(!s||s[r]===void 0||s[r][e]===void 0)return;delete s[r][e],s[r]._visualValues!==void 0&&s[r]._visualValues[e]!==void 0&&delete s[r]._visualValues[e]}}}const R_=n=>n==="reset"||n==="none",sI=(n,t)=>t?n:Object.assign({},n),SV=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:J4(e,!0),values:null};class ul{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=C_(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&nd(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,r=this.getDataset(),i=(g,m,y,x)=>g==="x"?m:g==="r"?x:y,s=e.xAxisID=re(r.xAxisID,I_(t,"x")),a=e.yAxisID=re(r.yAxisID,I_(t,"y")),o=e.rAxisID=re(r.rAxisID,I_(t,"r")),l=e.indexAxis,h=e.iAxisID=i(l,s,a,o),d=e.vAxisID=i(l,a,s,o);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&UC(this._data,this),t._stacked&&nd(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),r=this._data;if(_e(e)){const i=this._cachedMeta;this._data=xV(e,i)}else if(r!==e){if(r){UC(r,this);const i=this._cachedMeta;nd(i),i._parsed=[]}e&&Object.isExtensible(e)&&sL(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=e._stacked;e._stacked=C_(e.vScale,e),e.stack!==r.stack&&(i=!0,nd(e),e.stack=r.stack),this._resyncElements(t),(i||s!==e._stacked)&&(iI(this,e._parsed),e._stacked=C_(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:a}=r,o=s.axis;let l=t===0&&e===i.length?!0:r._sorted,h=t>0&&r._parsed[t-1],d,g,m;if(this._parsing===!1)r._parsed=i,r._sorted=!0,m=i;else{cr(i[t])?m=this.parseArrayData(r,i,t,e):_e(i[t])?m=this.parseObjectData(r,i,t,e):m=this.parsePrimitiveData(r,i,t,e);const y=()=>g[o]===null||h&&g[o]<h[o];for(d=0;d<e;++d)r._parsed[d+t]=g=m[d],l&&(y()&&(l=!1),h=g);r._sorted=l}a&&iI(this,m)}parsePrimitiveData(t,e,r,i){const{iScale:s,vScale:a}=t,o=s.axis,l=a.axis,h=s.getLabels(),d=s===a,g=new Array(i);let m,y,x;for(m=0,y=i;m<y;++m)x=m+r,g[m]={[o]:d||s.parse(h[x],x),[l]:a.parse(e[x],x)};return g}parseArrayData(t,e,r,i){const{xScale:s,yScale:a}=t,o=new Array(i);let l,h,d,g;for(l=0,h=i;l<h;++l)d=l+r,g=e[d],o[l]={x:s.parse(g[0],d),y:a.parse(g[1],d)};return o}parseObjectData(t,e,r,i){const{xScale:s,yScale:a}=t,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,h=new Array(i);let d,g,m,y;for(d=0,g=i;d<g;++d)m=d+r,y=e[m],h[d]={x:s.parse(vl(y,o),m),y:a.parse(vl(y,l),m)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,r){const i=this.chart,s=this._cachedMeta,a=e[t.axis],o={keys:J4(i,!0),values:e._stacks[t.axis]._visualValues};return nI(o,a,s.index,{mode:r})}updateRangeFromParsed(t,e,r,i){const s=r[e.axis];let a=s===null?NaN:s;const o=i&&r._stacks[e.axis];i&&o&&(i.values=o,a=nI(i,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&t===r.iScale,a=i.length,o=this._getOtherScale(t),l=SV(e,r,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:g}=bV(o);let m,y;function x(){y=i[m];const b=y[o.axis];return!ji(y[t.axis])||d>b||g<b}for(m=0;m<a&&!(!x()&&(this.updateRangeFromParsed(h,t,y,l),s));++m);if(s){for(m=a-1;m>=0;--m)if(!x()){this.updateRangeFromParsed(h,t,y,l);break}}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,r=[];let i,s,a;for(i=0,s=e.length;i<s;++i)a=e[i][t.axis],ji(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,r=e.iScale,i=e.vScale,s=this.getParsed(t);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=_V(re(this.options.clip,vV(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,r=this._cachedMeta,i=r.data||[],s=e.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||i.length-o,h=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(t,s,o,l),d=o;d<o+l;++d){const g=i[d];g.hidden||(g.active&&h?a.push(g):g.draw(t,s))}for(d=0;d<a.length;++d)a[d].draw(t,s)}getStyle(t,e){const r=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,e,r){const i=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];s=a.$context||(a.$context=TV(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=i.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=AV(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=r,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",r){const i=e==="active",s=this._cachedDataOpts,a=t+"-"+e,o=s[a],l=this.enableOptionSharing&&cg(r);if(o)return sI(o,l);const h=this.chart.config,d=h.datasetElementScopeKeys(this._type,t),g=i?[`${t}Hover`,"hover",t,""]:[t,""],m=h.getOptionScopes(this.getDataset(),d),y=Object.keys(Cn.elements[t]),x=()=>this.getContext(r,i,e),b=h.resolveNamedOptions(m,y,x,g);return b.$shared&&(b.$shared=l,s[a]=Object.freeze(sI(b,l))),b}_resolveAnimations(t,e,r){const i=this.chart,s=this._cachedDataOpts,a=`animation-${e}`,o=s[a];if(o)return o;let l;if(i.options.animation!==!1){const d=this.chart.config,g=d.datasetAnimationScopeKeys(this._type,e),m=d.getOptionScopes(this.getDataset(),g);l=d.createResolver(m,this.getContext(t,r,e))}const h=new Z4(i,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||R_(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const r=this.resolveDataElementOptions(t,e),i=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(e,s)||s!==i;return this.updateSharedOptions(s,e,r),{sharedOptions:s,includeOptions:a}}updateElement(t,e,r,i){R_(i)?Object.assign(t,r):this._resolveAnimations(e,i).update(t,r)}updateSharedOptions(t,e,r){t&&!R_(e)&&this._resolveAnimations(void 0,e).update(t,r)}_setStyle(t,e,r,i){t.active=i;const s=this.getStyle(e,i);this._resolveAnimations(e,r,i).update(t,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,e,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,r=this._cachedMeta.data;for(const[o,l,h]of this._syncList)this[o](l,h);this._syncList=[];const i=r.length,s=e.length,a=Math.min(s,i);a&&this.parse(0,a),s>i?this._insertElements(i,s-i,t):s<i&&this._removeElements(s,i-s)}_insertElements(t,e,r=!0){const i=this._cachedMeta,s=i.data,a=t+e;let o;const l=h=>{for(h.length+=e,o=h.length-1;o>=a;o--)h[o]=h[o-e]};for(l(s),o=t;o<a;++o)s[o]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,e),r&&this.updateElements(s,t,e,"reset")}updateElements(t,e,r,i){}_removeElements(t,e){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(t,e);r._stacked&&nd(r,i)}r.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,r,i]=t;this[e](r,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}lt(ul,"defaults",{}),lt(ul,"datasetElementType",null),lt(ul,"dataElementType",null);function CV(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let r=[];for(let i=0,s=e.length;i<s;i++)r=r.concat(e[i].controller.getAllParsedValues(n));n._cache.$bar=V4(r.sort((i,s)=>i-s))}return n._cache.$bar}function IV(n){const t=n.iScale,e=CV(t,n.type);let r=t._length,i,s,a,o;const l=()=>{a===32767||a===-32768||(cg(o)&&(r=Math.min(r,Math.abs(a-o)||r)),o=a)};for(i=0,s=e.length;i<s;++i)a=t.getPixelForValue(e[i]),l();for(o=void 0,i=0,s=t.ticks.length;i<s;++i)a=t.getPixelForTick(i),l();return r}function RV(n,t,e,r){const i=e.barThickness;let s,a;return Re(i)?(s=t.min*e.categoryPercentage,a=e.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:t.pixels[n]-s/2}}function DV(n,t,e,r){const i=t.pixels,s=i[n];let a=n>0?i[n-1]:null,o=n<i.length-1?i[n+1]:null;const l=e.categoryPercentage;a===null&&(a=s-(o===null?t.end-t.start:o-s)),o===null&&(o=s+s-a);const h=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:e.barPercentage,start:h}}function OV(n,t,e,r){const i=e.parse(n[0],r),s=e.parse(n[1],r),a=Math.min(i,s),o=Math.max(i,s);let l=a,h=o;Math.abs(a)>Math.abs(o)&&(l=o,h=a),t[e.axis]=h,t._custom={barStart:l,barEnd:h,start:i,end:s,min:a,max:o}}function tM(n,t,e,r){return cr(n)?OV(n,t,e,r):t[e.axis]=e.parse(n,r),t}function aI(n,t,e,r){const i=n.iScale,s=n.vScale,a=i.getLabels(),o=i===s,l=[];let h,d,g,m;for(h=e,d=e+r;h<d;++h)m=t[h],g={},g[i.axis]=o||i.parse(a[h],h),l.push(tM(m,g,s,h));return l}function D_(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function MV(n,t,e){return n!==0?Ps(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function NV(n){let t,e,r,i,s;return n.horizontal?(t=n.base>n.x,e="left",r="right"):(t=n.base<n.y,e="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:e,end:r,reverse:t,top:i,bottom:s}}function PV(n,t,e,r){let i=t.borderSkipped;const s={};if(!i){n.borderSkipped=s;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:l,top:h,bottom:d}=NV(n);i==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===r?i=h:(e._bottom||0)===r?i=d:(s[oI(d,a,o,l)]=!0,i=h)),s[oI(i,a,o,l)]=!0,n.borderSkipped=s}function oI(n,t,e,r){return r?(n=kV(n,t,e),n=cI(n,e,t)):n=cI(n,t,e),n}function kV(n,t,e){return n===t?e:n===e?t:n}function cI(n,t,e){return n==="start"?t:n==="end"?e:n}function LV(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class c1 extends ul{parsePrimitiveData(t,e,r,i){return aI(t,e,r,i)}parseArrayData(t,e,r,i){return aI(t,e,r,i)}parseObjectData(t,e,r,i){const{iScale:s,vScale:a}=t,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,h=s.axis==="x"?o:l,d=a.axis==="x"?o:l,g=[];let m,y,x,b;for(m=r,y=r+i;m<y;++m)b=e[m],x={},x[s.axis]=s.parse(vl(b,h),m),g.push(tM(vl(b,d),x,a,m));return g}updateRangeFromParsed(t,e,r,i){super.updateRangeFromParsed(t,e,r,i);const s=r._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:r,vScale:i}=e,s=this.getParsed(t),a=s._custom,o=D_(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,r,i){const s=i==="reset",{index:a,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),h=o.isHorizontal(),d=this._getRuler(),{sharedOptions:g,includeOptions:m}=this._getSharedOptions(e,i);for(let y=e;y<e+r;y++){const x=this.getParsed(y),b=s||Re(x[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(y),E=this._calculateBarIndexPixels(y,d),S=(x._stacks||{})[o.axis],T={horizontal:h,base:b.base,enableBorderRadius:!S||D_(x._custom)||a===S._top||a===S._bottom,x:h?b.head:E.center,y:h?E.center:b.head,height:h?E.size:Math.abs(b.size),width:h?Math.abs(b.size):E.size};m&&(T.options=g||this.resolveDataElementOptions(y,t[y].active?"active":i));const R=T.options||t[y].options;PV(T,R,S,a),LV(T,R,d.ratio),this.updateElement(t[y],y,T,i)}}_getStacks(t,e){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),s=r.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(e),l=o&&o[r.axis],h=d=>{const g=d._parsed.find(y=>y[r.axis]===l),m=g&&g[d.vScale.axis];if(Re(m)||isNaN(m))return!0};for(const d of i)if(!(e!==void 0&&h(d))&&((s===!1||a.indexOf(d.stack)===-1||s===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)t[re(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,r){const i=this._getStacks(t,r),s=e!==void 0?i.indexOf(e):-1;return s===-1?i.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,r=e.iScale,i=[];let s,a;for(s=0,a=e.data.length;s<a;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const o=t.barThickness;return{min:o||IV(e),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:r,index:i},options:{base:s,minBarLength:a}}=this,o=s||0,l=this.getParsed(t),h=l._custom,d=D_(h);let g=l[e.axis],m=0,y=r?this.applyStack(e,l,r):g,x,b;y!==g&&(m=y-g,y=g),d&&(g=h.barStart,y=h.barEnd-h.barStart,g!==0&&Ps(g)!==Ps(h.barEnd)&&(m=0),m+=g);const E=!Re(s)&&!d?s:m;let S=e.getPixelForValue(E);if(this.chart.getDataVisibility(t)?x=e.getPixelForValue(m+y):x=S,b=x-S,Math.abs(b)<a){b=MV(b,e,o)*a,g===o&&(S-=b/2);const T=e.getPixelForDecimal(0),R=e.getPixelForDecimal(1),k=Math.min(T,R),N=Math.max(T,R);S=Math.max(Math.min(S,N),k),x=S+b,r&&!d&&(l._stacks[e.axis]._visualValues[i]=e.getValueForPixel(x)-e.getValueForPixel(S))}if(S===e.getPixelForValue(o)){const T=Ps(b)*e.getLineWidthForValue(o)/2;S+=T,b-=T}return{size:b,base:S,head:x,center:x+b/2}}_calculateBarIndexPixels(t,e){const r=e.scale,i=this.options,s=i.skipNull,a=re(i.maxBarThickness,1/0);let o,l;const h=this._getAxisCount();if(e.grouped){const d=s?this._getStackCount(t):e.stackCount,g=i.barThickness==="flex"?DV(t,e,i,d*h):RV(t,e,i,d*h),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,y=this._getAxis().indexOf(re(m,this.getFirstScaleIdForIndexAxis())),x=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+y;o=g.start+g.chunk*x+g.chunk/2,l=Math.min(a,g.chunk*g.ratio)}else o=r.getPixelForValue(this.getParsed(t)[r.axis],t),l=Math.min(a,e.min*e.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,r=t.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[e.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}lt(c1,"id","bar"),lt(c1,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),lt(c1,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function VV(n,t,e){let r=1,i=1,s=0,a=0;if(t<vn){const o=n,l=o+t,h=Math.cos(o),d=Math.sin(o),g=Math.cos(l),m=Math.sin(l),y=(R,k,N)=>ug(R,o,l,!0)?1:Math.max(k,k*e,N,N*e),x=(R,k,N)=>ug(R,o,l,!0)?-1:Math.min(k,k*e,N,N*e),b=y(0,h,g),E=y(Kn,d,m),S=x(qe,h,g),T=x(qe+Kn,d,m);r=(b-S)/2,i=(E-T)/2,s=-(b+S)/2,a=-(E+T)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}class wd extends ul{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(_e(r[t])){const{key:l="value"}=this._parsing;s=h=>+vl(r[h],l)}let a,o;for(a=t,o=t+e;a<o;++a)i._parsed[a]=s(a)}}_getRotation(){return Aa(this.options.rotation-90)}_getCircumference(){return Aa(this.options.circumference)}_getRotationExtents(){let t=vn,e=-vn;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),a=i._getCircumference();t=Math.min(t,s),e=Math.max(e,s+a)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:r}=e,i=this._cachedMeta,s=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-a)/2,0),l=Math.min(z7(this.options.cutout,o),1),h=this._getRingWeight(this.index),{circumference:d,rotation:g}=this._getRotationExtents(),{ratioX:m,ratioY:y,offsetX:x,offsetY:b}=VV(g,d,l),E=(r.width-a)/m,S=(r.height-a)/y,T=Math.max(Math.min(E,S)/2,0),R=M4(this.options.radius,T),k=Math.max(R*l,0),N=(R-k)/this._getVisibleDatasetWeightTotal();this.offsetX=x*R,this.offsetY=b*R,i.total=this.calculateTotal(),this.outerRadius=R-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*h,0),this.updateElements(s,0,s.length,t)}_circumference(t,e){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return e&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*s/vn)}updateElements(t,e,r,i){const s=i==="reset",a=this.chart,o=a.chartArea,h=a.options.animation,d=(o.left+o.right)/2,g=(o.top+o.bottom)/2,m=s&&h.animateScale,y=m?0:this.innerRadius,x=m?0:this.outerRadius,{sharedOptions:b,includeOptions:E}=this._getSharedOptions(e,i);let S=this._getRotation(),T;for(T=0;T<e;++T)S+=this._circumference(T,s);for(T=e;T<e+r;++T){const R=this._circumference(T,s),k=t[T],N={x:d+this.offsetX,y:g+this.offsetY,startAngle:S,endAngle:S+R,circumference:R,outerRadius:x,innerRadius:y};E&&(N.options=b||this.resolveDataElementOptions(T,k.active?"active":i)),S+=R,this.updateElement(k,T,N,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let r=0,i;for(i=0;i<e.length;i++){const s=t._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!e[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?vn*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=jw(e._parsed[t],r.options.locale);return{label:i[t]||"",value:s}}getMaxBorderWidth(t){let e=0;const r=this.chart;let i,s,a,o,l;if(!t){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){a=r.getDatasetMeta(i),t=a.data,o=a.controller;break}}if(!t)return 0;for(i=0,s=t.length;i<s;++i)l=o.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let r=0,i=t.length;r<i;++r){const s=this.resolveDataElementOptions(r);e=Math.max(e,s.offset||0,s.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(e+=this._getRingWeight(r));return e}_getRingWeight(t){return Math.max(re(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}lt(wd,"id","doughnut"),lt(wd,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),lt(wd,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),lt(wd,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:r,color:i}}=t.legend.options;return e.labels.map((s,a)=>{const l=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,r){r.chart.toggleDataVisibility(e.index),r.chart.update()}}}});class l1 extends ul{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=e,a=this.chart._animationsDisabled;let{start:o,count:l}=cL(e,i,a);this._drawStart=o,this._drawCount=l,lL(e)&&(o=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:h},t),this.updateElements(i,o,l,t)}updateElements(t,e,r,i){const s=i==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:h}=this._cachedMeta,{sharedOptions:d,includeOptions:g}=this._getSharedOptions(e,i),m=a.axis,y=o.axis,{spanGaps:x,segment:b}=this.options,E=lg(x)?x:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||s||i==="none",T=e+r,R=t.length;let k=e>0&&this.getParsed(e-1);for(let N=0;N<R;++N){const j=t[N],O=S?j:{};if(N<e||N>=T){O.skip=!0;continue}const C=this.getParsed(N),M=Re(C[y]),B=O[m]=a.getPixelForValue(C[m],N),H=O[y]=s||M?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,C,l):C[y],N);O.skip=isNaN(B)||isNaN(H)||M,O.stop=N>0&&Math.abs(C[m]-k[m])>E,b&&(O.parsed=C,O.raw=h.data[N]),g&&(O.options=d||this.resolveDataElementOptions(N,j.active?"active":i)),S||this.updateElement(j,N,O,i),k=C}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,r=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}lt(l1,"id","line"),lt(l1,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),lt(l1,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Fc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class $w{constructor(t){lt(this,"options");this.options=t||{}}static override(t){Object.assign($w.prototype,t)}init(){}formats(){return Fc()}parse(){return Fc()}format(){return Fc()}add(){return Fc()}diff(){return Fc()}startOf(){return Fc()}endOf(){return Fc()}}var eM={_date:$w};function BV(n,t,e,r){const{controller:i,data:s,_sorted:a}=n,o=i._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(o&&t===o.axis&&t!=="r"&&a&&s.length){const h=o._reversePixels?rL:rl;if(r){if(i._sharedOptions){const d=s[0],g=typeof d.getRange=="function"&&d.getRange(t);if(g){const m=h(s,t,e-g),y=h(s,t,e+g);return{lo:m.lo,hi:y.hi}}}}else{const d=h(s,t,e);if(l){const{vScale:g}=i._cachedMeta,{_parsed:m}=n,y=m.slice(0,d.lo+1).reverse().findIndex(b=>!Re(b[g.axis]));d.lo-=Math.max(0,y);const x=m.slice(d.hi).findIndex(b=>!Re(b[g.axis]));d.hi+=Math.max(0,x)}return d}}return{lo:0,hi:s.length-1}}function Om(n,t,e,r,i){const s=n.getSortedVisibleDatasetMetas(),a=e[t];for(let o=0,l=s.length;o<l;++o){const{index:h,data:d}=s[o],{lo:g,hi:m}=BV(s[o],t,a,i);for(let y=g;y<=m;++y){const x=d[y];x.skip||r(x,h,y)}}}function FV(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(r,i){const s=t?Math.abs(r.x-i.x):0,a=e?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function O_(n,t,e,r,i){const s=[];return!i&&!n.isPointInArea(t)||Om(n,e,t,function(o,l,h){!i&&!hg(o,n.chartArea,0)||o.inRange(t.x,t.y,r)&&s.push({element:o,datasetIndex:l,index:h})},!0),s}function UV(n,t,e,r){let i=[];function s(a,o,l){const{startAngle:h,endAngle:d}=a.getProps(["startAngle","endAngle"],r),{angle:g}=k4(a,{x:t.x,y:t.y});ug(g,h,d)&&i.push({element:a,datasetIndex:o,index:l})}return Om(n,e,t,s),i}function jV(n,t,e,r,i,s){let a=[];const o=FV(e);let l=Number.POSITIVE_INFINITY;function h(d,g,m){const y=d.inRange(t.x,t.y,i);if(r&&!y)return;const x=d.getCenterPoint(i);if(!(!!s||n.isPointInArea(x))&&!y)return;const E=o(t,x);E<l?(a=[{element:d,datasetIndex:g,index:m}],l=E):E===l&&a.push({element:d,datasetIndex:g,index:m})}return Om(n,e,t,h),a}function M_(n,t,e,r,i,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!r?UV(n,t,e,i):jV(n,t,e,r,i,s)}function lI(n,t,e,r,i){const s=[],a=e==="x"?"inXRange":"inYRange";let o=!1;return Om(n,e,t,(l,h,d)=>{l[a]&&l[a](t[e],i)&&(s.push({element:l,datasetIndex:h,index:d}),o=o||l.inRange(t.x,t.y,i))}),r&&!o?[]:s}var zV={modes:{index(n,t,e,r){const i=Gc(t,n),s=e.axis||"x",a=e.includeInvisible||!1,o=e.intersect?O_(n,i,s,r,a):M_(n,i,s,!1,r,a),l=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(h=>{const d=o[0].index,g=h.data[d];g&&!g.skip&&l.push({element:g,datasetIndex:h.index,index:d})}),l):[]},dataset(n,t,e,r){const i=Gc(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;let o=e.intersect?O_(n,i,s,r,a):M_(n,i,s,!1,r,a);if(o.length>0){const l=o[0].datasetIndex,h=n.getDatasetMeta(l).data;o=[];for(let d=0;d<h.length;++d)o.push({element:h[d],datasetIndex:l,index:d})}return o},point(n,t,e,r){const i=Gc(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;return O_(n,i,s,r,a)},nearest(n,t,e,r){const i=Gc(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;return M_(n,i,s,e.intersect,r,a)},x(n,t,e,r){const i=Gc(t,n);return lI(n,i,"x",e.intersect,r)},y(n,t,e,r){const i=Gc(t,n);return lI(n,i,"y",e.intersect,r)}}};const nM=["left","top","right","bottom"];function rd(n,t){return n.filter(e=>e.pos===t)}function uI(n,t){return n.filter(e=>nM.indexOf(e.pos)===-1&&e.box.axis===t)}function id(n,t){return n.sort((e,r)=>{const i=t?r:e,s=t?e:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function HV(n){const t=[];let e,r,i,s,a,o;for(e=0,r=(n||[]).length;e<r;++e)i=n[e],{position:s,options:{stack:a,stackWeight:o=1}}=i,t.push({index:e,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return t}function GV(n){const t={};for(const e of n){const{stack:r,pos:i,stackWeight:s}=e;if(!r||!nM.includes(i))continue;const a=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}function WV(n,t){const e=GV(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,a,o;for(s=0,a=n.length;s<a;++s){o=n[s];const{fullSize:l}=o.box,h=e[o.stack],d=h&&o.stackWeight/h.weight;o.horizontal?(o.width=d?d*r:l&&t.availableWidth,o.height=i):(o.width=r,o.height=d?d*i:l&&t.availableHeight)}return e}function qV(n){const t=HV(n),e=id(t.filter(h=>h.box.fullSize),!0),r=id(rd(t,"left"),!0),i=id(rd(t,"right")),s=id(rd(t,"top"),!0),a=id(rd(t,"bottom")),o=uI(t,"x"),l=uI(t,"y");return{fullSize:e,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(a).concat(o),chartArea:rd(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(a).concat(o)}}function hI(n,t,e,r){return Math.max(n[e],t[e])+Math.max(n[r],t[r])}function rM(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function YV(n,t,e,r){const{pos:i,box:s}=e,a=n.maxPadding;if(!_e(i)){e.size&&(n[i]-=e.size);const g=r[e.stack]||{size:0,count:1};g.size=Math.max(g.size,e.horizontal?s.height:s.width),e.size=g.size/g.count,n[i]+=e.size}s.getPadding&&rM(a,s.getPadding());const o=Math.max(0,t.outerWidth-hI(a,n,"left","right")),l=Math.max(0,t.outerHeight-hI(a,n,"top","bottom")),h=o!==n.w,d=l!==n.h;return n.w=o,n.h=l,e.horizontal?{same:h,other:d}:{same:d,other:h}}function XV(n){const t=n.maxPadding;function e(r){const i=Math.max(t[r]-n[r],0);return n[r]+=i,i}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function KV(n,t){const e=t.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(t[a],e[a])}),s}return r(n?["left","right"]:["top","bottom"])}function bd(n,t,e,r){const i=[];let s,a,o,l,h,d;for(s=0,a=n.length,h=0;s<a;++s){o=n[s],l=o.box,l.update(o.width||t.w,o.height||t.h,KV(o.horizontal,t));const{same:g,other:m}=YV(t,e,o,r);h|=g&&i.length,d=d||m,l.fullSize||i.push(o)}return h&&bd(i,t,e,r)||d}function kp(n,t,e,r,i){n.top=e,n.left=t,n.right=t+r,n.bottom=e+i,n.width=r,n.height=i}function fI(n,t,e,r){const i=e.padding;let{x:s,y:a}=t;for(const o of n){const l=o.box,h=r[o.stack]||{placed:0,weight:1},d=o.stackWeight/h.weight||1;if(o.horizontal){const g=t.w*d,m=h.size||l.height;cg(h.start)&&(a=h.start),l.fullSize?kp(l,i.left,a,e.outerWidth-i.right-i.left,m):kp(l,t.left+h.placed,a,g,m),h.start=a,h.placed+=g,a=l.bottom}else{const g=t.h*d,m=h.size||l.width;cg(h.start)&&(s=h.start),l.fullSize?kp(l,s,i.top,m,e.outerHeight-i.bottom-i.top):kp(l,s,t.top+h.placed,m,g),h.start=s,h.placed+=g,s=l.right}}t.x=s,t.y=a}var Do={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,r){if(!n)return;const i=rs(n.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(e-i.height,0),o=qV(n.boxes),l=o.vertical,h=o.horizontal;ke(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const d=l.reduce((b,E)=>E.box.options&&E.box.options.display===!1?b:b+1,0)||1,g=Object.freeze({outerWidth:t,outerHeight:e,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/d,hBoxMaxHeight:a/2}),m=Object.assign({},i);rM(m,rs(r));const y=Object.assign({maxPadding:m,w:s,h:a,x:i.left,y:i.top},i),x=WV(l.concat(h),g);bd(o.fullSize,y,g,x),bd(l,y,g,x),bd(h,y,g,x)&&bd(l,y,g,x),XV(y),fI(o.leftAndTop,y,g,x),y.x+=y.w,y.y+=y.h,fI(o.rightAndBottom,y,g,x),n.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},ke(o.chartArea,b=>{const E=b.box;Object.assign(E,n.chartArea),E.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class iM{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,r){}removeEventListener(t,e,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,r,i){return e=Math.max(0,e||t.width),r=r||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):r)}}isAttached(t){return!0}updateConfig(t){}}class $V extends iM{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const u1="$chartjs",QV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},dI=n=>n===null||n==="";function ZV(n,t){const e=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[u1]={initial:{height:r,width:i,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",dI(i)){const s=$C(n,"width");s!==void 0&&(n.width=s)}if(dI(r))if(n.style.height==="")n.height=n.width/(t||2);else{const s=$C(n,"height");s!==void 0&&(n.height=s)}return n}const sM=ZL?{passive:!0}:!1;function JV(n,t,e){n&&n.addEventListener(t,e,sM)}function tB(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,sM)}function eB(n,t){const e=QV[n.type]||n.type,{x:r,y:i}=Gc(n,t);return{type:e,chart:t,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function H1(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function nB(n,t,e){const r=n.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||H1(o.addedNodes,r),a=a&&!H1(o.removedNodes,r);a&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}function rB(n,t,e){const r=n.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||H1(o.removedNodes,r),a=a&&!H1(o.addedNodes,r);a&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}const fg=new Map;let gI=0;function aM(){const n=window.devicePixelRatio;n!==gI&&(gI=n,fg.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function iB(n,t){fg.size||window.addEventListener("resize",aM),fg.set(n,t)}function sB(n){fg.delete(n),fg.size||window.removeEventListener("resize",aM)}function aB(n,t,e){const r=n.canvas,i=r&&Kw(r);if(!i)return;const s=F4((o,l)=>{const h=i.clientWidth;e(o,l),h<i.clientWidth&&e()},window),a=new ResizeObserver(o=>{const l=o[0],h=l.contentRect.width,d=l.contentRect.height;h===0&&d===0||s(h,d)});return a.observe(i),iB(n,s),a}function N_(n,t,e){e&&e.disconnect(),t==="resize"&&sB(n)}function oB(n,t,e){const r=n.canvas,i=F4(s=>{n.ctx!==null&&e(eB(s,n))},n);return JV(r,t,i),i}class cB extends iM{acquireContext(t,e){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(ZV(t,e),r):null}releaseContext(t){const e=t.canvas;if(!e[u1])return!1;const r=e[u1].initial;["height","width"].forEach(s=>{const a=r[s];Re(a)?e.removeAttribute(s):e.setAttribute(s,a)});const i=r.style||{};return Object.keys(i).forEach(s=>{e.style[s]=i[s]}),e.width=e.width,delete e[u1],!0}addEventListener(t,e,r){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),a={attach:nB,detach:rB,resize:aB}[e]||oB;i[e]=a(t,e,r)}removeEventListener(t,e){const r=t.$proxies||(t.$proxies={}),i=r[e];if(!i)return;({attach:N_,detach:N_,resize:N_}[e]||tB)(t,e,i),r[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,r,i){return QL(t,e,r,i)}isAttached(t){const e=t&&Kw(t);return!!(e&&e.isConnected)}}function lB(n){return!Xw()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?$V:cB}var o1;let $o=(o1=class{constructor(){lt(this,"x");lt(this,"y");lt(this,"active",!1);lt(this,"options");lt(this,"$animations")}tooltipPosition(t){const{x:e,y:r}=this.getProps(["x","y"],t);return{x:e,y:r}}hasValue(){return lg(this.x)&&lg(this.y)}getProps(t,e){const r=this.$animations;if(!e||!r)return this;const i={};return t.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},lt(o1,"defaults",{}),lt(o1,"defaultRoutes"),o1);function uB(n,t){const e=n.options.ticks,r=hB(n),i=Math.min(e.maxTicksLimit||r,r),s=e.major.enabled?dB(t):[],a=s.length,o=s[0],l=s[a-1],h=[];if(a>i)return gB(t,h,s,a/i),h;const d=fB(s,t,i);if(a>0){let g,m;const y=a>1?Math.round((l-o)/(a-1)):null;for(Lp(t,h,d,Re(y)?0:o-y,o),g=0,m=a-1;g<m;g++)Lp(t,h,d,s[g],s[g+1]);return Lp(t,h,d,l,Re(y)?t.length:l+y),h}return Lp(t,h,d),h}function hB(n){const t=n.options.offset,e=n._tickSize(),r=n._length/e+(t?0:1),i=n._maxLength/e;return Math.floor(Math.min(r,i))}function fB(n,t,e){const r=pB(n),i=t.length/e;if(!r)return Math.max(i,1);const s=$7(r);for(let a=0,o=s.length-1;a<o;a++){const l=s[a];if(l>i)return l}return Math.max(i,1)}function dB(n){const t=[];let e,r;for(e=0,r=n.length;e<r;e++)n[e].major&&t.push(e);return t}function gB(n,t,e,r){let i=0,s=e[0],a;for(r=Math.ceil(r),a=0;a<n.length;a++)a===s&&(t.push(n[a]),i++,s=e[i*r])}function Lp(n,t,e,r,i){const s=re(r,0),a=Math.min(re(i,n.length),n.length);let o=0,l,h,d;for(e=Math.ceil(e),i&&(l=i-r,e=l/Math.floor(l/e)),d=s;d<0;)o++,d=Math.round(s+o*e);for(h=Math.max(s,0);h<a;h++)h===d&&(t.push(n[h]),o++,d=Math.round(s+o*e))}function pB(n){const t=n.length;let e,r;if(t<2)return!1;for(r=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==r)return!1;return r}const mB=n=>n==="left"?"right":n==="right"?"left":n,pI=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,mI=(n,t)=>Math.min(t||n,n);function yI(n,t){const e=[],r=n.length/t,i=n.length;let s=0;for(;s<i;s+=r)e.push(n[Math.floor(s)]);return e}function yB(n,t,e){const r=n.ticks.length,i=Math.min(t,r-1),s=n._startPixel,a=n._endPixel,o=1e-6;let l=n.getPixelForTick(i),h;if(!(e&&(r===1?h=Math.max(l-s,a-l):t===0?h=(n.getPixelForTick(1)-l)/2:h=(l-n.getPixelForTick(i-1))/2,l+=i<t?h:-h,l<s-o||l>a+o)))return l}function vB(n,t){ke(n,e=>{const r=e.gc,i=r.length/2;let s;if(i>t){for(s=0;s<i;++s)delete e.data[r[s]];r.splice(0,i)}})}function sd(n){return n.drawTicks?n.tickLength:0}function vI(n,t){if(!n.display)return 0;const e=Qr(n.font,t),r=rs(n.padding);return(cr(n.text)?n.text.length:1)*e.lineHeight+r.height}function _B(n,t){return Ol(n,{scale:t,type:"scale"})}function xB(n,t,e){return Ol(n,{tick:e,index:t,type:"tick"})}function wB(n,t,e){let r=U4(n);return(e&&t!=="right"||!e&&t==="right")&&(r=mB(r)),r}function bB(n,t,e,r){const{top:i,left:s,bottom:a,right:o,chart:l}=n,{chartArea:h,scales:d}=l;let g=0,m,y,x;const b=a-i,E=o-s;if(n.isHorizontal()){if(y=fi(r,s,o),_e(e)){const S=Object.keys(e)[0],T=e[S];x=d[S].getPixelForValue(T)+b-t}else e==="center"?x=(h.bottom+h.top)/2+b-t:x=pI(n,e,t);m=o-s}else{if(_e(e)){const S=Object.keys(e)[0],T=e[S];y=d[S].getPixelForValue(T)-E+t}else e==="center"?y=(h.left+h.right)/2-E+t:y=pI(n,e,t);x=fi(r,a,i),g=e==="left"?-Kn:Kn}return{titleX:y,titleY:x,maxWidth:m,rotation:g}}class Lh extends $o{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:r,_suggestedMax:i}=this;return t=Es(t,Number.POSITIVE_INFINITY),e=Es(e,Number.NEGATIVE_INFINITY),r=Es(r,Number.POSITIVE_INFINITY),i=Es(i,Number.NEGATIVE_INFINITY),{min:Es(t,r),max:Es(e,i),minDefined:ji(t),maxDefined:ji(e)}}getMinMax(t){let{min:e,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),a;if(i&&s)return{min:e,max:r};const o=this.getMatchingVisibleMetas();for(let l=0,h=o.length;l<h;++l)a=o[l].controller.getMinMax(this,t),i||(e=Math.min(e,a.min)),s||(r=Math.max(r,a.max));return e=s&&e>r?r:e,r=i&&e>r?e:r,{min:Es(e,Es(r,e)),max:Es(r,Es(e,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){tn(this.options.beforeUpdate,[this])}update(t,e,r){const{beginAtZero:i,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=RL(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?yI(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=uB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,r;this.isHorizontal()?(e=this.left,r=this.right):(e=this.top,r=this.bottom,t=!t),this._startPixel=e,this._endPixel=r,this._reversePixels=t,this._length=r-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){tn(this.options.afterUpdate,[this])}beforeSetDimensions(){tn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){tn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),tn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){tn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r],s.label=tn(e.callback,[s.value,r,t],this)}afterTickToLabelConversion(){tn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){tn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,r=mI(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,s=e.maxRotation;let a=i,o,l,h;if(!this._isVisible()||!e.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),g=d.widest.width,m=d.highest.height,y=Dr(this.chart.width-g,0,this.maxWidth);o=t.offset?this.maxWidth/r:y/(r-1),g+6>o&&(o=y/(r-(t.offset?.5:1)),l=this.maxHeight-sd(t.grid)-e.padding-vI(t.title,this.chart.options.font),h=Math.sqrt(g*g+m*m),a=tL(Math.min(Math.asin(Dr((d.highest.height+6)/o,-1,1)),Math.asin(Dr(l/h,-1,1))-Math.asin(Dr(m/h,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){tn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){tn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:r,title:i,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=vI(i,e.options.font);if(o?(t.width=this.maxWidth,t.height=sd(s)+l):(t.height=this.maxHeight,t.width=sd(s)+l),r.display&&this.ticks.length){const{first:h,last:d,widest:g,highest:m}=this._getLabelSizes(),y=r.padding*2,x=Aa(this.labelRotation),b=Math.cos(x),E=Math.sin(x);if(o){const S=r.mirror?0:E*g.width+b*m.height;t.height=Math.min(this.maxHeight,t.height+S+y)}else{const S=r.mirror?0:b*g.width+E*m.height;t.width=Math.min(this.maxWidth,t.width+S+y)}this._calculatePadding(h,d,E,b)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,r,i){const{ticks:{align:s,padding:a},position:o}=this.options,l=this.labelRotation!==0,h=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,y=0;l?h?(m=i*t.width,y=r*e.height):(m=r*t.height,y=i*e.width):s==="start"?y=e.width:s==="end"?m=t.width:s!=="inner"&&(m=t.width/2,y=e.width/2),this.paddingLeft=Math.max((m-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((y-g+a)*this.width/(this.width-g),0)}else{let d=e.height/2,g=t.height/2;s==="start"?(d=0,g=t.height):s==="end"&&(d=e.height,g=0),this.paddingTop=d+a,this.paddingBottom=g+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){tn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,r;for(e=0,r=t.length;e<r;e++)Re(t[e].label)&&(t.splice(e,1),r--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let r=this.ticks;e<r.length&&(r=yI(r,e)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,r){const{ctx:i,_longestTextCache:s}=this,a=[],o=[],l=Math.floor(e/mI(e,r));let h=0,d=0,g,m,y,x,b,E,S,T,R,k,N;for(g=0;g<e;g+=l){if(x=t[g].label,b=this._resolveTickFontOptions(g),i.font=E=b.string,S=s[E]=s[E]||{data:{},gc:[]},T=b.lineHeight,R=k=0,!Re(x)&&!cr(x))R=WC(i,S.data,S.gc,R,x),k=T;else if(cr(x))for(m=0,y=x.length;m<y;++m)N=x[m],!Re(N)&&!cr(N)&&(R=WC(i,S.data,S.gc,R,N),k+=T);a.push(R),o.push(k),h=Math.max(R,h),d=Math.max(k,d)}vB(s,e);const j=a.indexOf(h),O=o.indexOf(d),C=M=>({width:a[M]||0,height:o[M]||0});return{first:C(0),last:C(e-1),widest:C(j),highest:C(O),widths:a,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return nL(this._alignToPixels?Bc(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const r=e[t];return r.$context||(r.$context=xB(this.getContext(),t,r))}return this.$context||(this.$context=_B(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Aa(this.labelRotation),r=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),s=this._getLabelSizes(),a=t.autoSkipPadding||0,o=s?s.widest.width+a:0,l=s?s.highest.height+a:0;return this.isHorizontal()?l*r>o*i?o/r:l/i:l*i<o*r?l/r:o/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,r=this.chart,i=this.options,{grid:s,position:a,border:o}=i,l=s.offset,h=this.isHorizontal(),g=this.ticks.length+(l?1:0),m=sd(s),y=[],x=o.setContext(this.getContext()),b=x.display?x.width:0,E=b/2,S=function(K){return Bc(r,K,b)};let T,R,k,N,j,O,C,M,B,H,G,U;if(a==="top")T=S(this.bottom),O=this.bottom-m,M=T-E,H=S(t.top)+E,U=t.bottom;else if(a==="bottom")T=S(this.top),H=t.top,U=S(t.bottom)-E,O=T+E,M=this.top+m;else if(a==="left")T=S(this.right),j=this.right-m,C=T-E,B=S(t.left)+E,G=t.right;else if(a==="right")T=S(this.left),B=t.left,G=S(t.right)-E,j=T+E,C=this.left+m;else if(e==="x"){if(a==="center")T=S((t.top+t.bottom)/2+.5);else if(_e(a)){const K=Object.keys(a)[0],ct=a[K];T=S(this.chart.scales[K].getPixelForValue(ct))}H=t.top,U=t.bottom,O=T+E,M=O+m}else if(e==="y"){if(a==="center")T=S((t.left+t.right)/2);else if(_e(a)){const K=Object.keys(a)[0],ct=a[K];T=S(this.chart.scales[K].getPixelForValue(ct))}j=T-E,C=j-m,B=t.left,G=t.right}const _t=re(i.ticks.maxTicksLimit,g),xt=Math.max(1,Math.ceil(g/_t));for(R=0;R<g;R+=xt){const K=this.getContext(R),ct=s.setContext(K),yt=o.setContext(K),et=ct.lineWidth,V=ct.color,q=yt.dash||[],ot=yt.dashOffset,nt=ct.tickWidth,pt=ct.tickColor,Tt=ct.tickBorderDash||[],At=ct.tickBorderDashOffset;k=yB(this,R,l),k!==void 0&&(N=Bc(r,k,et),h?j=C=B=G=N:O=M=H=U=N,y.push({tx1:j,ty1:O,tx2:C,ty2:M,x1:B,y1:H,x2:G,y2:U,width:et,color:V,borderDash:q,borderDashOffset:ot,tickWidth:nt,tickColor:pt,tickBorderDash:Tt,tickBorderDashOffset:At}))}return this._ticksLength=g,this._borderValue=T,y}_computeLabelItems(t){const e=this.axis,r=this.options,{position:i,ticks:s}=r,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:h,padding:d,mirror:g}=s,m=sd(r.grid),y=m+d,x=g?-d:y,b=-Aa(this.labelRotation),E=[];let S,T,R,k,N,j,O,C,M,B,H,G,U="middle";if(i==="top")j=this.bottom-x,O=this._getXAxisLabelAlignment();else if(i==="bottom")j=this.top+x,O=this._getXAxisLabelAlignment();else if(i==="left"){const xt=this._getYAxisLabelAlignment(m);O=xt.textAlign,N=xt.x}else if(i==="right"){const xt=this._getYAxisLabelAlignment(m);O=xt.textAlign,N=xt.x}else if(e==="x"){if(i==="center")j=(t.top+t.bottom)/2+y;else if(_e(i)){const xt=Object.keys(i)[0],K=i[xt];j=this.chart.scales[xt].getPixelForValue(K)+y}O=this._getXAxisLabelAlignment()}else if(e==="y"){if(i==="center")N=(t.left+t.right)/2-y;else if(_e(i)){const xt=Object.keys(i)[0],K=i[xt];N=this.chart.scales[xt].getPixelForValue(K)}O=this._getYAxisLabelAlignment(m).textAlign}e==="y"&&(l==="start"?U="top":l==="end"&&(U="bottom"));const _t=this._getLabelSizes();for(S=0,T=o.length;S<T;++S){R=o[S],k=R.label;const xt=s.setContext(this.getContext(S));C=this.getPixelForTick(S)+s.labelOffset,M=this._resolveTickFontOptions(S),B=M.lineHeight,H=cr(k)?k.length:1;const K=H/2,ct=xt.color,yt=xt.textStrokeColor,et=xt.textStrokeWidth;let V=O;a?(N=C,O==="inner"&&(S===T-1?V=this.options.reverse?"left":"right":S===0?V=this.options.reverse?"right":"left":V="center"),i==="top"?h==="near"||b!==0?G=-H*B+B/2:h==="center"?G=-_t.highest.height/2-K*B+B:G=-_t.highest.height+B/2:h==="near"||b!==0?G=B/2:h==="center"?G=_t.highest.height/2-K*B:G=_t.highest.height-H*B,g&&(G*=-1),b!==0&&!xt.showLabelBackdrop&&(N+=B/2*Math.sin(b))):(j=C,G=(1-H)*B/2);let q;if(xt.showLabelBackdrop){const ot=rs(xt.backdropPadding),nt=_t.heights[S],pt=_t.widths[S];let Tt=G-ot.top,At=0-ot.left;switch(U){case"middle":Tt-=nt/2;break;case"bottom":Tt-=nt;break}switch(O){case"center":At-=pt/2;break;case"right":At-=pt;break;case"inner":S===T-1?At-=pt:S>0&&(At-=pt/2);break}q={left:At,top:Tt,width:pt+ot.width,height:nt+ot.height,color:xt.backdropColor}}E.push({label:k,font:M,textOffset:G,options:{rotation:b,color:ct,strokeColor:yt,strokeWidth:et,textAlign:V,textBaseline:U,translation:[N,j],backdrop:q}})}return E}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Aa(this.labelRotation))return t==="top"?"left":"right";let i="center";return e.align==="start"?i="left":e.align==="end"?i="right":e.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,a=this._getLabelSizes(),o=t+s,l=a.widest.width;let h,d;return e==="left"?i?(d=this.right+s,r==="near"?h="left":r==="center"?(h="center",d+=l/2):(h="right",d+=l)):(d=this.right-o,r==="near"?h="right":r==="center"?(h="center",d-=l/2):(h="left",d=this.left)):e==="right"?i?(d=this.left+s,r==="near"?h="right":r==="center"?(h="center",d-=l/2):(h="left",d-=l)):(d=this.left+o,r==="near"?h="left":r==="center"?(h="center",d+=l/2):(h="right",d=this.right)):h="right",{textAlign:h,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:r,top:i,width:s,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(r,i,s,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex(s=>s.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,a;const o=(l,h,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(h.x,h.y),r.stroke(),r.restore())};if(e.display)for(s=0,a=i.length;s<a;++s){const l=i[s];e.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),a=r.display?s.width:0;if(!a)return;const o=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let h,d,g,m;this.isHorizontal()?(h=Bc(t,this.left,a)-a/2,d=Bc(t,this.right,o)+o/2,g=m=l):(g=Bc(t,this.top,a)-a/2,m=Bc(t,this.bottom,o)+o/2,h=d=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(h,g),e.lineTo(d,m),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&zw(r,i);const s=this.getLabelItems(t);for(const a of s){const o=a.options,l=a.font,h=a.label,d=a.textOffset;U1(r,h,0,d,l,o)}i&&Hw(r)}drawTitle(){const{ctx:t,options:{position:e,title:r,reverse:i}}=this;if(!r.display)return;const s=Qr(r.font),a=rs(r.padding),o=r.align;let l=s.lineHeight/2;e==="bottom"||e==="center"||_e(e)?(l+=a.bottom,cr(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=a.top;const{titleX:h,titleY:d,maxWidth:g,rotation:m}=bB(this,l,e,o);U1(t,r.text,0,0,s,{color:r.color,maxWidth:g,rotation:m,textAlign:wB(o,e,i),textBaseline:"middle",translation:[h,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,r=re(t.grid&&t.grid.z,-1),i=re(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Lh.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,a;for(s=0,a=e.length;s<a;++s){const o=e[s];o[r]===this.id&&(!t||o.type===t)&&i.push(o)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Qr(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Vp{constructor(t,e,r){this.type=t,this.scope=e,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let r;TB(e)&&(r=this.register(e));const i=this.items,s=t.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in i||(i[s]=t,EB(t,a,r),this.override&&Cn.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,r=t.id,i=this.scope;r in e&&delete e[r],i&&r in Cn[i]&&(delete Cn[i][r],this.override&&delete _l[r])}}function EB(n,t,e){const r=og(Object.create(null),[e?Cn.get(e):{},Cn.get(t),n.defaults]);Cn.set(t,r),n.defaultRoutes&&AB(t,n.defaultRoutes),n.descriptors&&Cn.describe(t,n.descriptors)}function AB(n,t){Object.keys(t).forEach(e=>{const r=e.split("."),i=r.pop(),s=[n].concat(r).join("."),a=t[e].split("."),o=a.pop(),l=a.join(".");Cn.route(s,i,l,o)})}function TB(n){return"id"in n&&"defaults"in n}class SB{constructor(){this.controllers=new Vp(ul,"datasets",!0),this.elements=new Vp($o,"elements"),this.plugins=new Vp(Object,"plugins"),this.scales=new Vp(Lh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,r){[...e].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(t,s,i):ke(i,a=>{const o=r||this._getRegistryForType(a);this._exec(t,o,a)})})}_exec(t,e,r){const i=Bw(t);tn(r["before"+i],[],r),e[t](r),tn(r["after"+i],[],r)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const r=this._typedRegistries[e];if(r.isForType(t))return r}return this.plugins}_get(t,e,r){const i=e.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return i}}var Ts=new SB;class CB{constructor(){this._init=[]}notify(t,e,r,i){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=i?this._descriptors(t).filter(i):this._descriptors(t),a=this._notify(s,t,e,r);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,e,r,i){i=i||{};for(const s of t){const a=s.plugin,o=a[r],l=[e,i,s.options];if(tn(o,l,a)===!1&&i.cancelable)return!1}return!0}invalidate(){Re(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const r=t&&t.config,i=re(r.options&&r.options.plugins,{}),s=IB(r);return i===!1&&!e?[]:DB(t,s,i,e)}_notifyStateChanges(t){const e=this._oldCache||[],r=this._cache,i=(s,a)=>s.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(i(e,r),t,"stop"),this._notify(i(r,e),t,"start")}}function IB(n){const t={},e=[],r=Object.keys(Ts.plugins.items);for(let s=0;s<r.length;s++)e.push(Ts.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const a=i[s];e.indexOf(a)===-1&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}function RB(n,t){return!t&&n===!1?null:n===!0?{}:n}function DB(n,{plugins:t,localIds:e},r,i){const s=[],a=n.getContext();for(const o of t){const l=o.id,h=RB(r[l],i);h!==null&&s.push({plugin:o,options:OB(n.config,{plugin:o,local:e[l]},h,a)})}return s}function OB(n,{plugin:t,local:e},r,i){const s=n.pluginScopeKeys(t),a=n.getOptionScopes(r,s);return e&&t.defaults&&a.push(t.defaults),n.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function e2(n,t){const e=Cn.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function MB(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function NB(n,t){return n===t?"_index_":"_value_"}function _I(n){if(n==="x"||n==="y"||n==="r")return n}function PB(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function n2(n,...t){if(_I(n))return n;for(const e of t){const r=e.axis||PB(e.position)||n.length>1&&_I(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function xI(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function kB(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(e.length)return xI(n,"x",e[0])||xI(n,"y",e[0])}return{}}function LB(n,t){const e=_l[n.type]||{scales:{}},r=t.scales||{},i=e2(n.type,t),s=Object.create(null);return Object.keys(r).forEach(a=>{const o=r[a];if(!_e(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=n2(a,o,kB(a,n),Cn.scales[o.type]),h=NB(l,i),d=e.scales||{};s[a]=Bd(Object.create(null),[{axis:l},o,d[l],d[h]])}),n.data.datasets.forEach(a=>{const o=a.type||n.type,l=a.indexAxis||e2(o,t),d=(_l[o]||{}).scales||{};Object.keys(d).forEach(g=>{const m=MB(g,l),y=a[m+"AxisID"]||m;s[y]=s[y]||Object.create(null),Bd(s[y],[{axis:m},r[y],d[g]])})}),Object.keys(s).forEach(a=>{const o=s[a];Bd(o,[Cn.scales[o.type],Cn.scale])}),s}function oM(n){const t=n.options||(n.options={});t.plugins=re(t.plugins,{}),t.scales=LB(n,t)}function cM(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function VB(n){return n=n||{},n.data=cM(n.data),oM(n),n}const wI=new Map,lM=new Set;function Bp(n,t){let e=wI.get(n);return e||(e=t(),wI.set(n,e),lM.add(e)),e}const ad=(n,t,e)=>{const r=vl(t,e);r!==void 0&&n.add(r)};class BB{constructor(t){this._config=VB(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=cM(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),oM(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Bp(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Bp(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Bp(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,r=this.type;return Bp(`${r}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const r=this._scopeCache;let i=r.get(t);return(!i||e)&&(i=new Map,r.set(t,i)),i}getOptionScopes(t,e,r){const{options:i,type:s}=this,a=this._cachedScopes(t,r),o=a.get(e);if(o)return o;const l=new Set;e.forEach(d=>{t&&(l.add(t),d.forEach(g=>ad(l,t,g))),d.forEach(g=>ad(l,i,g)),d.forEach(g=>ad(l,_l[s]||{},g)),d.forEach(g=>ad(l,Cn,g)),d.forEach(g=>ad(l,Jx,g))});const h=Array.from(l);return h.length===0&&h.push(Object.create(null)),lM.has(e)&&a.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,_l[e]||{},Cn.datasets[e]||{},{type:e},Cn,Jx]}resolveNamedOptions(t,e,r,i=[""]){const s={$shared:!0},{resolver:a,subPrefixes:o}=bI(this._resolverCache,t,i);let l=a;if(UB(a,e)){s.$shared=!1,r=zo(r)?r():r;const h=this.createResolver(t,r,o);l=uh(a,r,h)}for(const h of e)s[h]=l[h];return s}createResolver(t,e,r=[""],i){const{resolver:s}=bI(this._resolverCache,t,r);return _e(e)?uh(s,e,void 0,i):s}}function bI(n,t,e){let r=n.get(t);r||(r=new Map,n.set(t,r));const i=e.join();let s=r.get(i);return s||(s={resolver:Ww(t,e),subPrefixes:e.filter(o=>!o.toLowerCase().includes("hover"))},r.set(i,s)),s}const FB=n=>_e(n)&&Object.getOwnPropertyNames(n).some(t=>zo(n[t]));function UB(n,t){const{isScriptable:e,isIndexable:r}=G4(n);for(const i of t){const s=e(i),a=r(i),o=(a||s)&&n[i];if(s&&(zo(o)||FB(o))||a&&cr(o))return!0}return!1}var jB="4.5.0";const zB=["top","bottom","left","right","chartArea"];function EI(n,t){return n==="top"||n==="bottom"||zB.indexOf(n)===-1&&t==="x"}function AI(n,t){return function(e,r){return e[n]===r[n]?e[t]-r[t]:e[n]-r[n]}}function TI(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),tn(e&&e.onComplete,[n],t)}function HB(n){const t=n.chart,e=t.options.animation;tn(e&&e.onProgress,[n],t)}function uM(n){return Xw()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const h1={},SI=n=>{const t=uM(n);return Object.values(h1).filter(e=>e.canvas===t).pop()};function GB(n,t,e){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=t){const a=n[i];delete n[i],(e>0||s>t)&&(n[s+e]=a)}}}function WB(n,t,e,r){return!e||n.type==="mouseout"?null:r?t:n}var xo;let Ml=(xo=class{static register(...t){Ts.add(...t),CI()}static unregister(...t){Ts.remove(...t),CI()}constructor(t,e){const r=this.config=new BB(e),i=uM(t),s=SI(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||lB(i)),this.platform.updateConfig(r);const o=this.platform.acquireContext(i,a.aspectRatio),l=o&&o.canvas,h=l&&l.height,d=l&&l.width;if(this.id=j7(),this.ctx=o,this.canvas=l,this.width=d,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new CB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=aL(g=>this.update(g),a.resizeDelay||0),this._dataChanges=[],h1[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}wa.listen(this,"complete",TI),wa.listen(this,"progress",HB),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:r,height:i,_aspectRatio:s}=this;return Re(t)?e&&s?s:i?r/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ts}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():KC(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qC(this.canvas,this.ctx),this}stop(){return wa.stop(this),this}resize(t,e){wa.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,t,e,s),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,KC(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),tn(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};ke(e,(r,i)=>{r.id=i})}buildOrUpdateScales(){const t=this.options,e=t.scales,r=this.scales,i=Object.keys(r).reduce((a,o)=>(a[o]=!1,a),{});let s=[];e&&(s=s.concat(Object.keys(e).map(a=>{const o=e[a],l=n2(a,o),h=l==="r",d=l==="x";return{options:o,dposition:h?"chartArea":d?"bottom":"left",dtype:h?"radialLinear":d?"category":"linear"}}))),ke(s,a=>{const o=a.options,l=o.id,h=n2(l,o),d=re(o.type,a.dtype);(o.position===void 0||EI(o.position,h)!==EI(a.dposition))&&(o.position=a.dposition),i[l]=!0;let g=null;if(l in r&&r[l].type===d)g=r[l];else{const m=Ts.getScale(d);g=new m({id:l,type:d,ctx:this.ctx,chart:this}),r[g.id]=g}g.init(o,t)}),ke(i,(a,o)=>{a||delete r[o]}),ke(r,a=>{Do.configure(this,a,a.options),Do.addBox(this,a)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,r=t.length;if(t.sort((i,s)=>i.index-s.index),r>e){for(let i=e;i<r;++i)this._destroyDatasetMeta(i);t.splice(e,r-e)}this._sortedMetasets=t.slice(0).sort(AI("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((r,i)=>{e.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=e.length;r<i;r++){const s=e[r];let a=this.getDatasetMeta(r);const o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=o,a.indexAxis=s.indexAxis||e2(o,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const l=Ts.getController(o),{datasetElementType:h,dataElementType:d}=Cn.datasets[o];Object.assign(l,{dataElementType:Ts.getElement(d),datasetElementType:h&&Ts.getElement(h)}),a.controller=new l(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){ke(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const r=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let h=0,d=this.data.datasets.length;h<d;h++){const{controller:g}=this.getDatasetMeta(h),m=!i&&s.indexOf(g)===-1;g.buildOrUpdateElements(m),a=Math.max(+g.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),i||ke(s,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(AI("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){ke(this.scales,t=>{Do.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!LC(e,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of e){const a=r==="_removeElements"?-s:s;GB(t,i,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,r=s=>new Set(t.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),i=r(0);for(let s=1;s<e;s++)if(!LC(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Do.update(this,this.width,this.height,t);const e=this.chartArea,r=e.width<=0||e.height<=0;this._layers=[],ke(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,r=this.data.datasets.length;e<r;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,r=this.data.datasets.length;e<r;++e)this._updateDataset(e,zo(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const r=this.getDatasetMeta(t),i={meta:r,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wa.has(this)?this.attached&&!wa.running(this)&&wa.start(this):(this.draw(),TI({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,r=[];let i,s;for(i=0,s=e.length;i<s;++i){const a=e[i];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,r={meta:t,index:t.index,cancelable:!0},i=fV(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&zw(e,i),t.controller.draw(),i&&Hw(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return hg(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,r,i){const s=zV.modes[e];return typeof s=="function"?s(this,t,r,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],r=this._metasets;let i=r.filter(s=>s&&s._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ol(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!e.hidden}setDatasetVisibility(t,e){const r=this.getDatasetMeta(t);r.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,r){const i=r?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,i);cg(e)?(s.data[e].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(s,{visible:r}),this.update(o=>o.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),wa.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),qC(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete h1[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,r=(s,a)=>{e.addEventListener(this,s,a),t[s]=a},i=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};ke(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,r=(l,h)=>{e.addEventListener(this,l,h),t[l]=h},i=(l,h)=>{t[l]&&(e.removeEventListener(this,l,h),delete t[l])},s=(l,h)=>{this.canvas&&this.resize(l,h)};let a;const o=()=>{i("attach",o),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",o)},e.isAttached(this.canvas)?o():a()}unbindEvents(){ke(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ke(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,r){const i=r?"set":"remove";let s,a,o,l;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),o=0,l=t.length;o<l;++o){a=t[o];const h=a&&this.getDatasetMeta(a.datasetIndex).controller;h&&h[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],r=t.map(({datasetIndex:s,index:a})=>{const o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!V1(r,e)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,e))}notifyPlugins(t,e,r){return this._plugins.notify(this,t,e,r)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,r){const i=this.options.hover,s=(l,h)=>l.filter(d=>!h.some(g=>d.datasetIndex===g.datasetIndex&&d.index===g.index)),a=s(e,t),o=r?t:s(t,e);a.length&&this.updateHoverStyle(a,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(t,e){const r={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(t,e,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(t,e,r){const{_active:i=[],options:s}=this,a=e,o=this._getActiveElements(t,i,r,a),l=Y7(t),h=WB(t,this._lastEvent,r,l);r&&(this._lastEvent=null,tn(s.onHover,[t,o,this],this),l&&tn(s.onClick,[t,o,this],this));const d=!V1(o,i);return(d||e)&&(this._active=o,this._updateHoverStyles(o,i,e)),this._lastEvent=h,d}_getActiveElements(t,e,r,i){if(t.type==="mouseout")return[];if(!r)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,i)}},lt(xo,"defaults",Cn),lt(xo,"instances",h1),lt(xo,"overrides",_l),lt(xo,"registry",Ts),lt(xo,"version",jB),lt(xo,"getChart",SI),xo);function CI(){return ke(Ml.instances,n=>n._plugins.invalidate())}function qB(n,t,e){const{startAngle:r,x:i,y:s,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:h,borderJoinStyle:d}=l,g=Math.min(h/a,Zi(r-e));if(n.beginPath(),n.arc(i,s,a-h/2,r+g/2,e-g/2),o>0){const m=Math.min(h/o,Zi(r-e));n.arc(i,s,o+h/2,e-m/2,r+m/2,!0)}else{const m=Math.min(h/2,a*Zi(r-e));if(d==="round")n.arc(i,s,m,e-qe/2,r+qe/2,!0);else if(d==="bevel"){const y=2*m*m,x=-y*Math.cos(e+qe/2)+i,b=-y*Math.sin(e+qe/2)+s,E=y*Math.cos(r+qe/2)+i,S=y*Math.sin(r+qe/2)+s;n.lineTo(x,b),n.lineTo(E,S)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function YB(n,t,e){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:o,innerRadius:l}=t;let h=i/o;n.beginPath(),n.arc(s,a,o,r-h,e+h),l>i?(h=i/l,n.arc(s,a,l,e+h,r-h,!0)):n.arc(s,a,i,e+Kn,r-Kn),n.closePath(),n.clip()}function XB(n){return Gw(n,["outerStart","outerEnd","innerStart","innerEnd"])}function KB(n,t,e,r){const i=XB(n.options.borderRadius),s=(e-t)/2,a=Math.min(s,r*t/2),o=l=>{const h=(e-Math.min(s,l))*r/2;return Dr(l,0,Math.min(s,h))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:Dr(i.innerStart,0,a),innerEnd:Dr(i.innerEnd,0,a)}}function Mu(n,t,e,r){return{x:e+n*Math.cos(t),y:r+n*Math.sin(t)}}function G1(n,t,e,r,i,s){const{x:a,y:o,startAngle:l,pixelMargin:h,innerRadius:d}=t,g=Math.max(t.outerRadius+r+e-h,0),m=d>0?d+r+e+h:0;let y=0;const x=i-l;if(r){const xt=d>0?d-r:0,K=g>0?g-r:0,ct=(xt+K)/2,yt=ct!==0?x*ct/(ct+r):x;y=(x-yt)/2}const b=Math.max(.001,x*g-e/qe)/g,E=(x-b)/2,S=l+E+y,T=i-E-y,{outerStart:R,outerEnd:k,innerStart:N,innerEnd:j}=KB(t,m,g,T-S),O=g-R,C=g-k,M=S+R/O,B=T-k/C,H=m+N,G=m+j,U=S+N/H,_t=T-j/G;if(n.beginPath(),s){const xt=(M+B)/2;if(n.arc(a,o,g,M,xt),n.arc(a,o,g,xt,B),k>0){const et=Mu(C,B,a,o);n.arc(et.x,et.y,k,B,T+Kn)}const K=Mu(G,T,a,o);if(n.lineTo(K.x,K.y),j>0){const et=Mu(G,_t,a,o);n.arc(et.x,et.y,j,T+Kn,_t+Math.PI)}const ct=(T-j/m+(S+N/m))/2;if(n.arc(a,o,m,T-j/m,ct,!0),n.arc(a,o,m,ct,S+N/m,!0),N>0){const et=Mu(H,U,a,o);n.arc(et.x,et.y,N,U+Math.PI,S-Kn)}const yt=Mu(O,S,a,o);if(n.lineTo(yt.x,yt.y),R>0){const et=Mu(O,M,a,o);n.arc(et.x,et.y,R,S-Kn,M)}}else{n.moveTo(a,o);const xt=Math.cos(M)*g+a,K=Math.sin(M)*g+o;n.lineTo(xt,K);const ct=Math.cos(B)*g+a,yt=Math.sin(B)*g+o;n.lineTo(ct,yt)}n.closePath()}function $B(n,t,e,r,i){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){G1(n,t,e,r,l,i);for(let h=0;h<s;++h)n.fill();isNaN(o)||(l=a+(o%vn||vn))}return G1(n,t,e,r,l,i),n.fill(),l}function QB(n,t,e,r,i){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:h,borderJoinStyle:d,borderDash:g,borderDashOffset:m,borderRadius:y}=l,x=l.borderAlign==="inner";if(!h)return;n.setLineDash(g||[]),n.lineDashOffset=m,x?(n.lineWidth=h*2,n.lineJoin=d||"round"):(n.lineWidth=h,n.lineJoin=d||"bevel");let b=t.endAngle;if(s){G1(n,t,e,r,b,i);for(let E=0;E<s;++E)n.stroke();isNaN(o)||(b=a+(o%vn||vn))}x&&YB(n,t,b),l.selfJoin&&b-a>=qe&&y===0&&d!=="miter"&&qB(n,t,b),s||(G1(n,t,e,r,b,i),n.stroke())}class Yu extends $o{constructor(e){super();lt(this,"circumference");lt(this,"endAngle");lt(this,"fullCircles");lt(this,"innerRadius");lt(this,"outerRadius");lt(this,"pixelMargin");lt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,r,i){const s=this.getProps(["x","y"],i),{angle:a,distance:o}=k4(s,{x:e,y:r}),{startAngle:l,endAngle:h,innerRadius:d,outerRadius:g,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),y=(this.options.spacing+this.options.borderWidth)/2,x=re(m,h-l),b=ug(a,l,h)&&l!==h,E=x>=vn||b,S=Ro(o,d+y,g+y);return E&&S}getCenterPoint(e){const{x:r,y:i,startAngle:s,endAngle:a,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:d}=this.options,g=(s+a)/2,m=(o+l+d+h)/2;return{x:r+Math.cos(g)*m,y:i+Math.sin(g)*m}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:r,circumference:i}=this,s=(r.offset||0)/4,a=(r.spacing||0)/2,o=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>vn?Math.floor(i/vn):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*s,Math.sin(l)*s);const h=1-Math.sin(Math.min(qe,i||0)),d=s*h;e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,$B(e,this,d,a,o),QB(e,this,d,a,o),e.restore()}}lt(Yu,"id","arc"),lt(Yu,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),lt(Yu,"defaultRoutes",{backgroundColor:"backgroundColor"}),lt(Yu,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function hM(n,t,e=t){n.lineCap=re(e.borderCapStyle,t.borderCapStyle),n.setLineDash(re(e.borderDash,t.borderDash)),n.lineDashOffset=re(e.borderDashOffset,t.borderDashOffset),n.lineJoin=re(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=re(e.borderWidth,t.borderWidth),n.strokeStyle=re(e.borderColor,t.borderColor)}function ZB(n,t,e){n.lineTo(e.x,e.y)}function JB(n){return n.stepped?xL:n.tension||n.cubicInterpolationMode==="monotone"?wL:ZB}function fM(n,t,e={}){const r=n.length,{start:i=0,end:s=r-1}=e,{start:a,end:o}=t,l=Math.max(i,a),h=Math.min(s,o),d=i<a&&s<a||i>o&&s>o;return{count:r,start:l,loop:t.loop,ilen:h<l&&!d?r+h-l:h-l}}function tF(n,t,e,r){const{points:i,options:s}=t,{count:a,start:o,loop:l,ilen:h}=fM(i,e,r),d=JB(s);let{move:g=!0,reverse:m}=r||{},y,x,b;for(y=0;y<=h;++y)x=i[(o+(m?h-y:y))%a],!x.skip&&(g?(n.moveTo(x.x,x.y),g=!1):d(n,b,x,m,s.stepped),b=x);return l&&(x=i[(o+(m?h:0))%a],d(n,b,x,m,s.stepped)),!!l}function eF(n,t,e,r){const i=t.points,{count:s,start:a,ilen:o}=fM(i,e,r),{move:l=!0,reverse:h}=r||{};let d=0,g=0,m,y,x,b,E,S;const T=k=>(a+(h?o-k:k))%s,R=()=>{b!==E&&(n.lineTo(d,E),n.lineTo(d,b),n.lineTo(d,S))};for(l&&(y=i[T(0)],n.moveTo(y.x,y.y)),m=0;m<=o;++m){if(y=i[T(m)],y.skip)continue;const k=y.x,N=y.y,j=k|0;j===x?(N<b?b=N:N>E&&(E=N),d=(g*d+k)/++g):(R(),n.lineTo(k,N),x=j,g=0,b=E=N),S=N}R()}function r2(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?eF:tF}function nF(n){return n.stepped?JL:n.tension||n.cubicInterpolationMode==="monotone"?tV:Wc}function rF(n,t,e,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,e,r)&&i.closePath()),hM(n,t.options),n.stroke(i)}function iF(n,t,e,r){const{segments:i,options:s}=t,a=r2(t);for(const o of i)hM(n,s,o.style),n.beginPath(),a(n,t,o,{start:e,end:e+r-1})&&n.closePath(),n.stroke()}const sF=typeof Path2D=="function";function aF(n,t,e,r){sF&&!t.options.segment?rF(n,t,e,r):iF(n,t,e,r)}class Ed extends $o{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;WL(this._points,r,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=cV(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,r=t.length;return r&&e[t[r-1].end]}interpolate(t,e){const r=this.options,i=t[e],s=this.points,a=sV(this,{property:e,start:i,end:i});if(!a.length)return;const o=[],l=nF(r);let h,d;for(h=0,d=a.length;h<d;++h){const{start:g,end:m}=a[h],y=s[g],x=s[m];if(y===x){o.push(y);continue}const b=Math.abs((i-y[e])/(x[e]-y[e])),E=l(y,x,b,r.stepped);E[e]=t[e],o.push(E)}return o.length===1?o[0]:o}pathSegment(t,e,r){return r2(this)(t,this,e,r)}path(t,e,r){const i=this.segments,s=r2(this);let a=this._loop;e=e||0,r=r||this.points.length-e;for(const o of i)a&=s(t,this,o,{start:e,end:e+r-1});return!!a}draw(t,e,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),aF(t,this,r,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}lt(Ed,"id","line"),lt(Ed,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),lt(Ed,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),lt(Ed,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function II(n,t,e,r){const i=n.options,{[e]:s}=n.getProps([e],r);return Math.abs(t-s)<i.radius+i.hitRadius}class f1 extends $o{constructor(e){super();lt(this,"parsed");lt(this,"skip");lt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,r,i){const s=this.options,{x:a,y:o}=this.getProps(["x","y"],i);return Math.pow(e-a,2)+Math.pow(r-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,r){return II(this,e,"x",r)}inYRange(e,r){return II(this,e,"y",r)}getCenterPoint(e){const{x:r,y:i}=this.getProps(["x","y"],e);return{x:r,y:i}}size(e){e=e||this.options||{};let r=e.radius||0;r=Math.max(r,r&&e.hoverRadius||0);const i=r&&e.borderWidth||0;return(r+i)*2}draw(e,r){const i=this.options;this.skip||i.radius<.1||!hg(this,r,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,t2(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}lt(f1,"id","point"),lt(f1,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),lt(f1,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function dM(n,t){const{x:e,y:r,base:i,width:s,height:a}=n.getProps(["x","y","base","width","height"],t);let o,l,h,d,g;return n.horizontal?(g=a/2,o=Math.min(e,i),l=Math.max(e,i),h=r-g,d=r+g):(g=s/2,o=e-g,l=e+g,h=Math.min(r,i),d=Math.max(r,i)),{left:o,top:h,right:l,bottom:d}}function Oo(n,t,e,r){return n?0:Dr(t,e,r)}function oF(n,t,e){const r=n.options.borderWidth,i=n.borderSkipped,s=H4(r);return{t:Oo(i.top,s.top,0,e),r:Oo(i.right,s.right,0,t),b:Oo(i.bottom,s.bottom,0,e),l:Oo(i.left,s.left,0,t)}}function cF(n,t,e){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=rh(i),a=Math.min(t,e),o=n.borderSkipped,l=r||_e(i);return{topLeft:Oo(!l||o.top||o.left,s.topLeft,0,a),topRight:Oo(!l||o.top||o.right,s.topRight,0,a),bottomLeft:Oo(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:Oo(!l||o.bottom||o.right,s.bottomRight,0,a)}}function lF(n){const t=dM(n),e=t.right-t.left,r=t.bottom-t.top,i=oF(n,e/2,r/2),s=cF(n,e/2,r/2);return{outer:{x:t.left,y:t.top,w:e,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function P_(n,t,e,r){const i=t===null,s=e===null,o=n&&!(i&&s)&&dM(n,r);return o&&(i||Ro(t,o.left,o.right))&&(s||Ro(e,o.top,o.bottom))}function uF(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function hF(n,t){n.rect(t.x,t.y,t.w,t.h)}function k_(n,t,e={}){const r=n.x!==e.x?-t:0,i=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-r,a=(n.y+n.h!==e.y+e.h?t:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+s,h:n.h+a,radius:n.radius}}class d1 extends $o{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:a}=lF(this),o=uF(a.radius)?j1:hF;t.save(),(a.w!==s.w||a.h!==s.h)&&(t.beginPath(),o(t,k_(a,e,s)),t.clip(),o(t,k_(s,-e,a)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),o(t,k_(s,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,r){return P_(this,t,e,r)}inXRange(t,e){return P_(this,t,null,e)}inYRange(t,e){return P_(this,null,t,e)}getCenterPoint(t){const{x:e,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+i)/2:e,y:s?r:(r+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}lt(d1,"id","bar"),lt(d1,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),lt(d1,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const RI=(n,t)=>{let{boxHeight:e=t,boxWidth:r=t}=n;return n.usePointStyle&&(e=Math.min(e,t),r=n.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:e,itemHeight:Math.max(t,e)}},fF=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class DI extends $o{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,r){this.maxWidth=t,this.maxHeight=e,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=tn(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(r=>t.filter(r,this.chart.data))),t.sort&&(e=e.sort((r,i)=>t.sort(r,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,i=Qr(r.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=RI(r,s);let h,d;e.font=i.string,this.isHorizontal()?(h=this.maxWidth,d=this._fitRows(a,s,o,l)+10):(d=this.maxHeight,h=this._fitCols(a,i,o,l)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,r,i){const{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],h=this.lineWidths=[0],d=i+o;let g=t;s.textAlign="left",s.textBaseline="middle";let m=-1,y=-d;return this.legendItems.forEach((x,b)=>{const E=r+e/2+s.measureText(x.text).width;(b===0||h[h.length-1]+E+2*o>a)&&(g+=d,h[h.length-(b>0?0:1)]=0,y+=d,m++),l[b]={left:0,top:y,row:m,width:E,height:i},h[h.length-1]+=E+o}),g}_fitCols(t,e,r,i){const{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],h=this.columnSizes=[],d=a-t;let g=o,m=0,y=0,x=0,b=0;return this.legendItems.forEach((E,S)=>{const{itemWidth:T,itemHeight:R}=dF(r,e,s,E,i);S>0&&y+R+2*o>d&&(g+=m+o,h.push({width:m,height:y}),x+=m+o,b++,m=y=0),l[S]={left:x,top:y,col:b,width:T,height:R},m=Math.max(m,T),y+=R+o}),g+=m,h.push({width:m,height:y}),g}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:r,labels:{padding:i},rtl:s}}=this,a=ih(s,this.left,this.width);if(this.isHorizontal()){let o=0,l=fi(r,this.left+i,this.right-this.lineWidths[o]);for(const h of e)o!==h.row&&(o=h.row,l=fi(r,this.left+i,this.right-this.lineWidths[o])),h.top+=this.top+t+i,h.left=a.leftForLtr(a.x(l),h.width),l+=h.width+i}else{let o=0,l=fi(r,this.top+t+i,this.bottom-this.columnSizes[o].height);for(const h of e)h.col!==o&&(o=h.col,l=fi(r,this.top+t+i,this.bottom-this.columnSizes[o].height)),h.top=l,h.left+=this.left+i,h.left=a.leftForLtr(a.x(h.left),h.width),l+=h.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;zw(t,this),this._draw(),Hw(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:r,ctx:i}=this,{align:s,labels:a}=t,o=Cn.color,l=ih(t.rtl,this.left,this.width),h=Qr(a.font),{padding:d}=a,g=h.size,m=g/2;let y;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=h.string;const{boxWidth:x,boxHeight:b,itemHeight:E}=RI(a,g),S=function(j,O,C){if(isNaN(x)||x<=0||isNaN(b)||b<0)return;i.save();const M=re(C.lineWidth,1);if(i.fillStyle=re(C.fillStyle,o),i.lineCap=re(C.lineCap,"butt"),i.lineDashOffset=re(C.lineDashOffset,0),i.lineJoin=re(C.lineJoin,"miter"),i.lineWidth=M,i.strokeStyle=re(C.strokeStyle,o),i.setLineDash(re(C.lineDash,[])),a.usePointStyle){const B={radius:b*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:M},H=l.xPlus(j,x/2),G=O+m;z4(i,B,H,G,a.pointStyleWidth&&x)}else{const B=O+Math.max((g-b)/2,0),H=l.leftForLtr(j,x),G=rh(C.borderRadius);i.beginPath(),Object.values(G).some(U=>U!==0)?j1(i,{x:H,y:B,w:x,h:b,radius:G}):i.rect(H,B,x,b),i.fill(),M!==0&&i.stroke()}i.restore()},T=function(j,O,C){U1(i,C.text,j,O+E/2,h,{strikethrough:C.hidden,textAlign:l.textAlign(C.textAlign)})},R=this.isHorizontal(),k=this._computeTitleHeight();R?y={x:fi(s,this.left+d,this.right-r[0]),y:this.top+d+k,line:0}:y={x:this.left+d,y:fi(s,this.top+k+d,this.bottom-e[0].height),line:0},K4(this.ctx,t.textDirection);const N=E+d;this.legendItems.forEach((j,O)=>{i.strokeStyle=j.fontColor,i.fillStyle=j.fontColor;const C=i.measureText(j.text).width,M=l.textAlign(j.textAlign||(j.textAlign=a.textAlign)),B=x+m+C;let H=y.x,G=y.y;l.setWidth(this.width),R?O>0&&H+B+d>this.right&&(G=y.y+=N,y.line++,H=y.x=fi(s,this.left+d,this.right-r[y.line])):O>0&&G+N>this.bottom&&(H=y.x=H+e[y.line].width+d,y.line++,G=y.y=fi(s,this.top+k+d,this.bottom-e[y.line].height));const U=l.x(H);if(S(U,G,j),H=oL(M,H+x+m,R?H+B:this.right,t.rtl),T(l.x(H),G,j),R)y.x+=B+d;else if(typeof j.text!="string"){const _t=h.lineHeight;y.y+=gM(j,_t)+d}else y.y+=N}),$4(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,r=Qr(e.font),i=rs(e.padding);if(!e.display)return;const s=ih(t.rtl,this.left,this.width),a=this.ctx,o=e.position,l=r.size/2,h=i.top+l;let d,g=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),d=this.top+h,g=fi(t.align,g,this.right-m);else{const x=this.columnSizes.reduce((b,E)=>Math.max(b,E.height),0);d=h+fi(t.align,this.top,this.bottom-x-t.labels.padding-this._computeTitleHeight())}const y=fi(o,g,g+m);a.textAlign=s.textAlign(U4(o)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=r.string,U1(a,e.text,y,d,r)}_computeTitleHeight(){const t=this.options.title,e=Qr(t.font),r=rs(t.padding);return t.display?e.lineHeight+r.height:0}_getLegendItemAt(t,e){let r,i,s;if(Ro(t,this.left,this.right)&&Ro(e,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Ro(t,i.left,i.left+i.width)&&Ro(e,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(t){const e=this.options;if(!mF(t.type,e))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,s=fF(i,r);i&&!s&&tn(e.onLeave,[t,i,this],this),this._hoveredItem=r,r&&!s&&tn(e.onHover,[t,r,this],this)}else r&&tn(e.onClick,[t,r,this],this)}}function dF(n,t,e,r,i){const s=gF(r,n,t,e),a=pF(i,r,t.lineHeight);return{itemWidth:s,itemHeight:a}}function gF(n,t,e,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,a)=>s.length>a.length?s:a)),t+e.size/2+r.measureText(i).width}function pF(n,t,e){let r=n;return typeof t.text!="string"&&(r=gM(t,e)),r}function gM(n,t){const e=n.text?n.text.length:0;return t*e}function mF(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var Qw={id:"legend",_element:DI,start(n,t,e){const r=n.legend=new DI({ctx:n.ctx,options:e,chart:n});Do.configure(n,r,e),Do.addBox(n,r)},stop(n){Do.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const r=n.legend;Do.configure(n,r,e),r.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const r=t.datasetIndex,i=e.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const h=l.controller.getStyle(e?0:void 0),d=rs(h.borderWidth);return{text:t[l.index].label,fillStyle:h.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:h.borderColor,pointStyle:r||h.pointStyle,rotation:h.rotation,textAlign:i||h.textAlign,borderRadius:a&&(o||h.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const Ad={average(n){if(!n.length)return!1;let t,e,r=new Set,i=0,s=0;for(t=0,e=n.length;t<e;++t){const o=n[t].element;if(o&&o.hasValue()){const l=o.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((o,l)=>o+l)/r.size,y:i/s}},nearest(n,t){if(!n.length)return!1;let e=t.x,r=t.y,i=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=n.length;s<a;++s){const l=n[s].element;if(l&&l.hasValue()){const h=l.getCenterPoint(),d=Zx(t,h);d<i&&(i=d,o=l)}}if(o){const l=o.tooltipPosition();e=l.x,r=l.y}return{x:e,y:r}}};function As(n,t){return t&&(cr(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function ba(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function yF(n,t){const{element:e,datasetIndex:r,index:i}=t,s=n.getDatasetMeta(r).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:n,label:a,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:e}}function OI(n,t){const e=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:a,boxHeight:o}=t,l=Qr(t.bodyFont),h=Qr(t.titleFont),d=Qr(t.footerFont),g=s.length,m=i.length,y=r.length,x=rs(t.padding);let b=x.height,E=0,S=r.reduce((k,N)=>k+N.before.length+N.lines.length+N.after.length,0);if(S+=n.beforeBody.length+n.afterBody.length,g&&(b+=g*h.lineHeight+(g-1)*t.titleSpacing+t.titleMarginBottom),S){const k=t.displayColors?Math.max(o,l.lineHeight):l.lineHeight;b+=y*k+(S-y)*l.lineHeight+(S-1)*t.bodySpacing}m&&(b+=t.footerMarginTop+m*d.lineHeight+(m-1)*t.footerSpacing);let T=0;const R=function(k){E=Math.max(E,e.measureText(k).width+T)};return e.save(),e.font=h.string,ke(n.title,R),e.font=l.string,ke(n.beforeBody.concat(n.afterBody),R),T=t.displayColors?a+2+t.boxPadding:0,ke(r,k=>{ke(k.before,R),ke(k.lines,R),ke(k.after,R)}),T=0,e.font=d.string,ke(n.footer,R),e.restore(),E+=x.width,{width:E,height:b}}function vF(n,t){const{y:e,height:r}=t;return e<r/2?"top":e>n.height-r/2?"bottom":"center"}function _F(n,t,e,r){const{x:i,width:s}=r,a=e.caretSize+e.caretPadding;if(n==="left"&&i+s+a>t.width||n==="right"&&i-s-a<0)return!0}function xF(n,t,e,r){const{x:i,width:s}=e,{width:a,chartArea:{left:o,right:l}}=n;let h="center";return r==="center"?h=i<=(o+l)/2?"left":"right":i<=s/2?h="left":i>=a-s/2&&(h="right"),_F(h,n,t,e)&&(h="center"),h}function MI(n,t,e){const r=e.yAlign||t.yAlign||vF(n,e);return{xAlign:e.xAlign||t.xAlign||xF(n,t,e,r),yAlign:r}}function wF(n,t){let{x:e,width:r}=n;return t==="right"?e-=r:t==="center"&&(e-=r/2),e}function bF(n,t,e){let{y:r,height:i}=n;return t==="top"?r+=e:t==="bottom"?r-=i+e:r-=i/2,r}function NI(n,t,e,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=n,{xAlign:o,yAlign:l}=e,h=i+s,{topLeft:d,topRight:g,bottomLeft:m,bottomRight:y}=rh(a);let x=wF(t,o);const b=bF(t,l,h);return l==="center"?o==="left"?x+=h:o==="right"&&(x-=h):o==="left"?x-=Math.max(d,m)+i:o==="right"&&(x+=Math.max(g,y)+i),{x:Dr(x,0,r.width-t.width),y:Dr(b,0,r.height-t.height)}}function Fp(n,t,e){const r=rs(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-r.right:n.x+r.left}function PI(n){return As([],ba(n))}function EF(n,t,e){return Ol(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function kI(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const pM={beforeTitle:xa,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,r=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return e[t.dataIndex]}return""},afterTitle:xa,beforeBody:xa,beforeLabel:xa,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Re(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:xa,afterBody:xa,beforeFooter:xa,footer:xa,afterFooter:xa};function Yr(n,t,e,r){const i=n[t].call(e,r);return typeof i>"u"?pM[t].call(e,r):i}class i2 extends $o{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&e.options.animation&&r.animations,s=new Z4(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=EF(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:r}=e,i=Yr(r,"beforeTitle",this,t),s=Yr(r,"title",this,t),a=Yr(r,"afterTitle",this,t);let o=[];return o=As(o,ba(i)),o=As(o,ba(s)),o=As(o,ba(a)),o}getBeforeBody(t,e){return PI(Yr(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:r}=e,i=[];return ke(t,s=>{const a={before:[],lines:[],after:[]},o=kI(r,s);As(a.before,ba(Yr(o,"beforeLabel",this,s))),As(a.lines,Yr(o,"label",this,s)),As(a.after,ba(Yr(o,"afterLabel",this,s))),i.push(a)}),i}getAfterBody(t,e){return PI(Yr(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:r}=e,i=Yr(r,"beforeFooter",this,t),s=Yr(r,"footer",this,t),a=Yr(r,"afterFooter",this,t);let o=[];return o=As(o,ba(i)),o=As(o,ba(s)),o=As(o,ba(a)),o}_createItems(t){const e=this._active,r=this.chart.data,i=[],s=[],a=[];let o=[],l,h;for(l=0,h=e.length;l<h;++l)o.push(yF(this.chart,e[l]));return t.filter&&(o=o.filter((d,g,m)=>t.filter(d,g,m,r))),t.itemSort&&(o=o.sort((d,g)=>t.itemSort(d,g,r))),ke(o,d=>{const g=kI(t.callbacks,d);i.push(Yr(g,"labelColor",this,d)),s.push(Yr(g,"labelPointStyle",this,d)),a.push(Yr(g,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=o,o}update(t,e){const r=this.options.setContext(this.getContext()),i=this._active;let s,a=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const o=Ad[r.position].call(this,i,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const l=this._size=OI(this,r),h=Object.assign({},o,l),d=MI(this.chart,r,h),g=NI(r,h,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:g.x,y:g.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,r,i){const s=this.getCaretPosition(t,r,i);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,r){const{xAlign:i,yAlign:s}=this,{caretSize:a,cornerRadius:o}=r,{topLeft:l,topRight:h,bottomLeft:d,bottomRight:g}=rh(o),{x:m,y}=t,{width:x,height:b}=e;let E,S,T,R,k,N;return s==="center"?(k=y+b/2,i==="left"?(E=m,S=E-a,R=k+a,N=k-a):(E=m+x,S=E+a,R=k-a,N=k+a),T=E):(i==="left"?S=m+Math.max(l,d)+a:i==="right"?S=m+x-Math.max(h,g)-a:S=this.caretX,s==="top"?(R=y,k=R-a,E=S-a,T=S+a):(R=y+b,k=R+a,E=S+a,T=S-a),N=R),{x1:E,x2:S,x3:T,y1:R,y2:k,y3:N}}drawTitle(t,e,r){const i=this.title,s=i.length;let a,o,l;if(s){const h=ih(r.rtl,this.x,this.width);for(t.x=Fp(this,r.titleAlign,r),e.textAlign=h.textAlign(r.titleAlign),e.textBaseline="middle",a=Qr(r.titleFont),o=r.titleSpacing,e.fillStyle=r.titleColor,e.font=a.string,l=0;l<s;++l)e.fillText(i[l],h.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+o,l+1===s&&(t.y+=r.titleMarginBottom-o)}}_drawColorBox(t,e,r,i,s){const a=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:l,boxWidth:h}=s,d=Qr(s.bodyFont),g=Fp(this,"left",s),m=i.x(g),y=l<d.lineHeight?(d.lineHeight-l)/2:0,x=e.y+y;if(s.usePointStyle){const b={radius:Math.min(h,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},E=i.leftForLtr(m,h)+h/2,S=x+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,t2(t,b,E,S),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,t2(t,b,E,S)}else{t.lineWidth=_e(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const b=i.leftForLtr(m,h),E=i.leftForLtr(i.xPlus(m,1),h-2),S=rh(a.borderRadius);Object.values(S).some(T=>T!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,j1(t,{x:b,y:x,w:h,h:l,radius:S}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),j1(t,{x:E,y:x+1,w:h-2,h:l-2,radius:S}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(b,x,h,l),t.strokeRect(b,x,h,l),t.fillStyle=a.backgroundColor,t.fillRect(E,x+1,h-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,e,r){const{body:i}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:h,boxPadding:d}=r,g=Qr(r.bodyFont);let m=g.lineHeight,y=0;const x=ih(r.rtl,this.x,this.width),b=function(C){e.fillText(C,x.x(t.x+y),t.y+m/2),t.y+=m+s},E=x.textAlign(a);let S,T,R,k,N,j,O;for(e.textAlign=a,e.textBaseline="middle",e.font=g.string,t.x=Fp(this,E,r),e.fillStyle=r.bodyColor,ke(this.beforeBody,b),y=o&&E!=="right"?a==="center"?h/2+d:h+2+d:0,k=0,j=i.length;k<j;++k){for(S=i[k],T=this.labelTextColors[k],e.fillStyle=T,ke(S.before,b),R=S.lines,o&&R.length&&(this._drawColorBox(e,t,k,x,r),m=Math.max(g.lineHeight,l)),N=0,O=R.length;N<O;++N)b(R[N]),m=g.lineHeight;ke(S.after,b)}y=0,m=g.lineHeight,ke(this.afterBody,b),t.y-=s}drawFooter(t,e,r){const i=this.footer,s=i.length;let a,o;if(s){const l=ih(r.rtl,this.x,this.width);for(t.x=Fp(this,r.footerAlign,r),t.y+=r.footerMarginTop,e.textAlign=l.textAlign(r.footerAlign),e.textBaseline="middle",a=Qr(r.footerFont),e.fillStyle=r.footerColor,e.font=a.string,o=0;o<s;++o)e.fillText(i[o],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,e,r,i){const{xAlign:s,yAlign:a}=this,{x:o,y:l}=t,{width:h,height:d}=r,{topLeft:g,topRight:m,bottomLeft:y,bottomRight:x}=rh(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(o+g,l),a==="top"&&this.drawCaret(t,e,r,i),e.lineTo(o+h-m,l),e.quadraticCurveTo(o+h,l,o+h,l+m),a==="center"&&s==="right"&&this.drawCaret(t,e,r,i),e.lineTo(o+h,l+d-x),e.quadraticCurveTo(o+h,l+d,o+h-x,l+d),a==="bottom"&&this.drawCaret(t,e,r,i),e.lineTo(o+y,l+d),e.quadraticCurveTo(o,l+d,o,l+d-y),a==="center"&&s==="left"&&this.drawCaret(t,e,r,i),e.lineTo(o,l+g),e.quadraticCurveTo(o,l,o+g,l),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const a=Ad[t.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=OI(this,t),l=Object.assign({},a,this._size),h=MI(e,t,l),d=NI(t,l,h,e);(i._to!==d.x||s._to!==d.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=rs(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=r,this.drawBackground(s,t,i,e),K4(t,e.textDirection),s.y+=a.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),$4(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const r=this._active,i=t.map(({datasetIndex:o,index:l})=>{const h=this.chart.getDatasetMeta(o);if(!h)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:h.data[l],index:l}}),s=!V1(r,i),a=this._positionChanged(i,e);(s||a)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,r=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],a=this._getActiveElements(t,s,e,r),o=this._positionChanged(a,t),l=e||!V1(a,s)||o;return l&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,r,i){const s=this.options;if(t.type==="mouseout")return[];if(!i)return e.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(t,e){const{caretX:r,caretY:i,options:s}=this,a=Ad[s.position].call(this,t,e);return a!==!1&&(r!==a.x||i!==a.y)}}lt(i2,"positioners",Ad);var Zw={id:"tooltip",_element:i2,positioners:Ad,afterInit(n,t,e){e&&(n.tooltip=new i2({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:pM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const AF=(n,t,e,r)=>(typeof t=="string"?(e=n.push(t)-1,r.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function TF(n,t,e,r){const i=n.indexOf(t);if(i===-1)return AF(n,t,e,r);const s=n.lastIndexOf(t);return i!==s?e:i}const SF=(n,t)=>n===null?null:Dr(Math.round(n),0,t);function LI(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class s2 extends Lh{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const r=this.getLabels();for(const{index:i,label:s}of e)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Re(t))return null;const r=this.getLabels();return e=isFinite(e)&&r[e]===t?e:TF(r,t,re(e,t),this._addedLabels),SF(e,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),e||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const t=this.min,e=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=t===0&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=e;a++)i.push({value:a});return i}getLabelForValue(t){return LI.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}lt(s2,"id","category"),lt(s2,"defaults",{ticks:{callback:LI}});function CF(n,t){const e=[],{bounds:i,step:s,min:a,max:o,precision:l,count:h,maxTicks:d,maxDigits:g,includeBounds:m}=n,y=s||1,x=d-1,{min:b,max:E}=t,S=!Re(a),T=!Re(o),R=!Re(h),k=(E-b)/(g+1);let N=BC((E-b)/x/y)*y,j,O,C,M;if(N<1e-14&&!S&&!T)return[{value:b},{value:E}];M=Math.ceil(E/N)-Math.floor(b/N),M>x&&(N=BC(M*N/x/y)*y),Re(l)||(j=Math.pow(10,l),N=Math.ceil(N*j)/j),i==="ticks"?(O=Math.floor(b/N)*N,C=Math.ceil(E/N)*N):(O=b,C=E),S&&T&&s&&Z7((o-a)/s,N/1e3)?(M=Math.round(Math.min((o-a)/N,d)),N=(o-a)/M,O=a,C=o):R?(O=S?a:O,C=T?o:C,M=h-1,N=(C-O)/M):(M=(C-O)/N,Fd(M,Math.round(M),N/1e3)?M=Math.round(M):M=Math.ceil(M));const B=Math.max(FC(N),FC(O));j=Math.pow(10,Re(l)?B:l),O=Math.round(O*j)/j,C=Math.round(C*j)/j;let H=0;for(S&&(m&&O!==a?(e.push({value:a}),O<a&&H++,Fd(Math.round((O+H*N)*j)/j,a,VI(a,k,n))&&H++):O<a&&H++);H<M;++H){const G=Math.round((O+H*N)*j)/j;if(T&&G>o)break;e.push({value:G})}return T&&m&&C!==o?e.length&&Fd(e[e.length-1].value,o,VI(o,k,n))?e[e.length-1].value=o:e.push({value:o}):(!T||C===o)&&e.push({value:C}),e}function VI(n,t,{horizontal:e,minRotation:r}){const i=Aa(r),s=(e?Math.sin(i):Math.cos(i))||.001,a=.75*t*(""+n).length;return Math.min(t/s,a)}class IF extends Lh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Re(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const a=l=>i=e?i:l,o=l=>s=r?s:l;if(t){const l=Ps(i),h=Ps(s);l<0&&h<0?o(0):l>0&&h>0&&a(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);o(s+l),t||a(i-l)}this.min=i,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:r}=t,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,a=CF(i,s);return t.bounds==="ticks"&&J7(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const i=(r-e)/Math.max(t.length-1,1)/2;e-=i,r+=i}this._startValue=e,this._endValue=r,this._valueRange=r-e}getLabelForValue(t){return jw(t,this.chart.options.locale,this.options.ticks.format)}}class W1 extends IF{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ji(t)?t:0,this.max=ji(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,r=Aa(this.options.ticks.minRotation),i=(t?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}lt(W1,"id","linear"),lt(W1,"defaults",{ticks:{callback:j4.formatters.numeric}});const Mm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Kr=Object.keys(Mm);function BI(n,t){return n-t}function FI(n,t){if(Re(t))return null;const e=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let a=t;return typeof r=="function"&&(a=r(a)),ji(a)||(a=typeof r=="string"?e.parse(a,r):e.parse(a)),a===null?null:(i&&(a=i==="week"&&(lg(s)||s===!0)?e.startOf(a,"isoWeek",s):e.startOf(a,i)),+a)}function UI(n,t,e,r){const i=Kr.length;for(let s=Kr.indexOf(n);s<i-1;++s){const a=Mm[Kr[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(o*a.size))<=r)return Kr[s]}return Kr[i-1]}function RF(n,t,e,r,i){for(let s=Kr.length-1;s>=Kr.indexOf(e);s--){const a=Kr[s];if(Mm[a].common&&n._adapter.diff(i,r,a)>=t-1)return a}return Kr[e?Kr.indexOf(e):0]}function DF(n){for(let t=Kr.indexOf(n)+1,e=Kr.length;t<e;++t)if(Mm[Kr[t]].common)return Kr[t]}function jI(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:r,hi:i}=Fw(e,t),s=e[r]>=t?e[r]:e[i];n[s]=!0}}function OF(n,t,e,r){const i=n._adapter,s=+i.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+i.add(o,1,r))l=e[o],l>=0&&(t[l].major=!0);return t}function zI(n,t,e){const r=[],i={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],i[o]=a,r.push({value:o,major:!1});return s===0||!e?r:OF(n,r,i,e)}class dg extends Lh{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const r=t.time||(t.time={}),i=this._adapter=new eM._date(t.adapters.date);i.init(e),Bd(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:FI(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,r=t.time.unit||"day";let{min:i,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function l(h){!a&&!isNaN(h.min)&&(i=Math.min(i,h.min)),!o&&!isNaN(h.max)&&(s=Math.max(s,h.max))}(!a||!o)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=ji(i)&&!isNaN(i)?i:+e.startOf(Date.now(),r),s=ji(s)&&!isNaN(s)?s:+e.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],r=t[t.length-1]),{min:e,max:r}}buildTicks(){const t=this.options,e=t.time,r=t.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,a=this.max,o=iL(i,s,a);return this._unit=e.unit||(r.autoSkip?UI(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):RF(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:DF(this._unit),this.initOffsets(i),t.reverse&&o.reverse(),zI(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,r=0,i,s;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?e=1-i:e=(this.getDecimalForValue(t[1])-i)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?r=s:r=(s-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;e=Dr(e,0,a),r=Dr(r,0,a),this._offsets={start:e,end:r,factor:1/(e+1+r)}}_generate(){const t=this._adapter,e=this.min,r=this.max,i=this.options,s=i.time,a=s.unit||UI(s.minUnit,e,r,this._getLabelCapacity(e)),o=re(i.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,h=lg(l)||l===!0,d={};let g=e,m,y;if(h&&(g=+t.startOf(g,"isoWeek",l)),g=+t.startOf(g,h?"day":a),t.diff(r,e,a)>1e5*o)throw new Error(e+" and "+r+" are too far apart with stepSize of "+o+" "+a);const x=i.ticks.source==="data"&&this.getDataTimestamps();for(m=g,y=0;m<r;m=+t.add(m,o,a),y++)jI(d,m,x);return(m===r||i.bounds==="ticks"||y===1)&&jI(d,m,x),Object.keys(d).sort(BI).map(b=>+b)}getLabelForValue(t){const e=this._adapter,r=this.options.time;return r.tooltipFormat?e.format(t,r.tooltipFormat):e.format(t,r.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,s=this._unit,a=e||i[s];return this._adapter.format(t,a)}_tickFormatFunction(t,e,r,i){const s=this.options,a=s.ticks.callback;if(a)return tn(a,[t,e,r],this);const o=s.time.displayFormats,l=this._unit,h=this._majorUnit,d=l&&o[l],g=h&&o[h],m=r[e],y=h&&g&&m&&m.major;return this._adapter.format(t,i||(y?g:d))}generateTickLabels(t){let e,r,i;for(e=0,r=t.length;e<r;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+r)*e.factor)}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,r=this.ctx.measureText(t).width,i=Aa(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(i),a=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:r*s+o*a,h:r*a+o*s}}_getLabelCapacity(t){const e=this.options.time,r=e.displayFormats,i=r[e.unit]||r.millisecond,s=this._tickFormatFunction(t,0,zI(this,[t],this._majorUnit),i),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],e,r;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,r=i.length;e<r;++e)t=t.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,r;if(t.length)return t;const i=this.getLabels();for(e=0,r=i.length;e<r;++e)t.push(FI(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return V4(t.sort(BI))}}lt(dg,"id","time"),lt(dg,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Up(n,t,e){let r=0,i=n.length-1,s,a,o,l;e?(t>=n[r].pos&&t<=n[i].pos&&({lo:r,hi:i}=rl(n,"pos",t)),{pos:s,time:o}=n[r],{pos:a,time:l}=n[i]):(t>=n[r].time&&t<=n[i].time&&({lo:r,hi:i}=rl(n,"time",t)),{time:s,pos:o}=n[r],{time:a,pos:l}=n[i]);const h=a-s;return h?o+(l-o)*(t-s)/h:o}class HI extends dg{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Up(e,this.min),this._tableRange=Up(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:r}=this,i=[],s=[];let a,o,l,h,d;for(a=0,o=t.length;a<o;++a)h=t[a],h>=e&&h<=r&&i.push(h);if(i.length<2)return[{time:e,pos:0},{time:r,pos:1}];for(a=0,o=i.length;a<o;++a)d=i[a+1],l=i[a-1],h=i[a],Math.round((d+l)/2)!==h&&s.push({time:h,pos:a/(o-1)});return s}_generate(){const t=this.min,e=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(e)||r.length===1)&&r.push(e),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),r=this.getLabelTimestamps();return e.length&&r.length?t=this.normalize(e.concat(r)):t=e.length?e:r,t=this._cache.all=t,t}getDecimalForValue(t){return(Up(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return Up(this._table,r*this._tableRange+this._minPos,!0)}}lt(HI,"id","timeseries"),lt(HI,"defaults",dg.defaults);const mM="label";function GI(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function MF(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function yM(n,t){n.labels=t}function vM(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mM;const r=[];n.datasets=t.map(i=>{const s=n.datasets.find(a=>a[e]===i[e]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function NF(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mM;const e={labels:[],datasets:[]};return yM(e,n.labels),vM(e,n.datasets,t),e}function PF(n,t){const{height:e=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:a,data:o,options:l,plugins:h=[],fallbackContent:d,updateMode:g,...m}=n,y=rt.useRef(null),x=rt.useRef(null),b=()=>{y.current&&(x.current=new Ml(y.current,{type:a,data:NF(o,s),options:l&&{...l},plugins:h}),GI(t,x.current))},E=()=>{GI(t,null),x.current&&(x.current.destroy(),x.current=null)};return rt.useEffect(()=>{!i&&x.current&&l&&MF(x.current,l)},[i,l]),rt.useEffect(()=>{!i&&x.current&&yM(x.current.config.data,o.labels)},[i,o.labels]),rt.useEffect(()=>{!i&&x.current&&o.datasets&&vM(x.current.config.data,o.datasets,s)},[i,o.datasets]),rt.useEffect(()=>{x.current&&(i?(E(),setTimeout(b)):x.current.update(g))},[i,l,o.labels,o.datasets,g]),rt.useEffect(()=>{x.current&&(E(),setTimeout(b))},[a]),rt.useEffect(()=>(b(),()=>E()),[]),un.createElement("canvas",{ref:y,role:"img",height:e,width:r,...m},d)}const kF=rt.forwardRef(PF);function Jw(n,t){return Ml.register(t),rt.forwardRef((e,r)=>un.createElement(kF,{...e,ref:r,type:n}))}const LF=Jw("line",l1),VF=Jw("bar",c1),_M=Jw("doughnut",wd);Ml.register(d1,s2,W1);function xM({meals:n,startOfWeek:t}){const e=()=>{const a=[];for(let o=0;o<7;o++){const l=new Date(t);l.setDate(t.getDate()+o),a.push(l.toISOString().split("T")[0])}return a},i={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Calories",data:e().map(o=>{let l=0;return n.filter(h=>h.date===o).forEach(h=>{h.kcal?l+=h.kcal:h.foodItems.forEach(d=>{d.nutrients.forEach(g=>{const m=parseFloat(g.total)||0;(g.type==="Carbohydrate"||g.type==="Protein")&&(l+=m*4),g.type==="Fat"&&(l+=m*9)})})}),Math.round(l)}),backgroundColor:"deepskyblue"}]},s={plugins:{tooltip:{enabled:!0},legend:{display:!1}},scales:{y:{ticks:{color:"white"},grid:{color:"#444"}},x:{ticks:{color:"white"},grid:{color:"#444"}}}};return P.jsx(VF,{data:i,options:s})}Ml.register(Yu,Zw,Qw);function wM({meals:n,selectedDate:t,goal:e=2e3}){const r=t||new Date().toISOString().split("T")[0],s=n.filter(d=>d.date===r).reduce((d,g)=>{if(g.kcal)return d+g.kcal;let m=0;return g.foodItems.forEach(y=>{y.nutrients.forEach(x=>{const b=parseFloat(x.total)||0;(x.type==="Carbohydrate"||x.type==="Protein")&&(m+=b*4),x.type==="Fat"&&(m+=b*9)})}),d+m},0),a=Math.round(s),o=e-a,l={labels:["Calories Consumed"],datasets:[{data:[s,o>0?o:0],backgroundColor:["deepskyblue","#a9c9f8ff"],borderWidth:0}]},h={cutout:"85%",plugins:{legend:{display:!0,position:"bottom",labels:{color:"white",font:{size:12,weight:"bold"},padding:15,boxWidth:10,boxHeight:10}}}};return P.jsxs("div",{className:"donut-chart",style:{position:"relative"},children:[P.jsx(_M,{data:l,options:h}),P.jsx("div",{className:"DonutWordings",children:o>0?`${o} Remaining`:"Goal Reached"})]})}Ml.register(Yu,Zw,Qw);function bM({meals:n,selectedDate:t}){const e=t||new Date().toISOString().split("T")[0],r=n.filter(m=>m.date===e),i=["Protein","Fat","Carbohydrate","Sugar","Fibre","Salt","Caffeine"],s={};r.forEach(m=>{m.foodItems.forEach(y=>{y.nutrients.forEach(x=>{var S;const b=(S=x.type)==null?void 0:S.toLowerCase();if(!b||b.includes("kcal")||b.includes("calorie"))return;const E=b.charAt(0).toUpperCase()+b.slice(1);if(i.includes(E)){const T=parseFloat(x.total)||0;s[E]=(s[E]||0)+T}})})});const a=Object.entries(s).sort((m,y)=>y[1]-m[1]),o=a.slice(0,4),l=a.slice(4),h=o.map(([m,y],x)=>({label:m,value:y,color:["#4CAF50","#FF9800","#03A9F4","teal"][x%4]}));if(l.length>0){const m=l.reduce((y,[,x])=>y+x,0);h.push({label:"Others",value:m,color:"gray"})}const d={labels:h.map(m=>m.label),datasets:[{data:h.map(m=>m.value),backgroundColor:h.map(m=>m.color),borderWidth:0}]},g={cutout:"85%",plugins:{tooltip:{enabled:!0},legend:{display:!0,position:"bottom",labels:{color:"white",font:{size:8,weight:"bold"},padding:5,boxWidth:5,boxHeight:5}}}};return P.jsx("div",{className:"donut-chart",style:{position:"relative"},children:P.jsx(_M,{data:d,options:g})})}const BF="Left",FF="Right",UF="Up",jF="Down",Xu={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},a2={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},WI="mousemove",qI="mouseup",zF="touchend",HF="touchmove",GF="touchstart";function WF(n,t,e,r){return n>t?e>0?FF:BF:r>0?jF:UF}function YI(n,t){if(t===0)return n;const e=Math.PI/180*t,r=n[0]*Math.cos(e)+n[1]*Math.sin(e),i=n[1]*Math.cos(e)-n[0]*Math.sin(e);return[r,i]}function qF(n,t){const e=d=>{const g="touches"in d;g&&d.touches.length>1||n((m,y)=>{y.trackMouse&&!g&&(document.addEventListener(WI,r),document.addEventListener(qI,a));const{clientX:x,clientY:b}=g?d.touches[0]:d,E=YI([x,b],y.rotationAngle);return y.onTouchStartOrOnMouseDown&&y.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},m),a2),{initial:E.slice(),xy:E,start:d.timeStamp||0})})},r=d=>{n((g,m)=>{const y="touches"in d;if(y&&d.touches.length>1)return g;if(d.timeStamp-g.start>m.swipeDuration)return g.swiping?Object.assign(Object.assign({},g),{swiping:!1}):g;const{clientX:x,clientY:b}=y?d.touches[0]:d,[E,S]=YI([x,b],m.rotationAngle),T=E-g.xy[0],R=S-g.xy[1],k=Math.abs(T),N=Math.abs(R),j=(d.timeStamp||0)-g.start,O=Math.sqrt(k*k+N*N)/(j||1),C=[T/(j||1),R/(j||1)],M=WF(k,N,T,R),B=typeof m.delta=="number"?m.delta:m.delta[M.toLowerCase()]||Xu.delta;if(k<B&&N<B&&!g.swiping)return g;const H={absX:k,absY:N,deltaX:T,deltaY:R,dir:M,event:d,first:g.first,initial:g.initial,velocity:O,vxvy:C};H.first&&m.onSwipeStart&&m.onSwipeStart(H),m.onSwiping&&m.onSwiping(H);let G=!1;return(m.onSwiping||m.onSwiped||m[`onSwiped${M}`])&&(G=!0),G&&m.preventScrollOnSwipe&&m.trackTouch&&d.cancelable&&d.preventDefault(),Object.assign(Object.assign({},g),{first:!1,eventData:H,swiping:!0})})},i=d=>{n((g,m)=>{let y;if(g.swiping&&g.eventData){if(d.timeStamp-g.start<m.swipeDuration){y=Object.assign(Object.assign({},g.eventData),{event:d}),m.onSwiped&&m.onSwiped(y);const x=m[`onSwiped${y.dir}`];x&&x(y)}}else m.onTap&&m.onTap({event:d});return m.onTouchEndOrOnMouseUp&&m.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},g),a2),{eventData:y})})},s=()=>{document.removeEventListener(WI,r),document.removeEventListener(qI,a)},a=d=>{s(),i(d)},o=(d,g)=>{let m=()=>{};if(d&&d.addEventListener){const y=Object.assign(Object.assign({},Xu.touchEventOptions),g.touchEventOptions),x=[[GF,e,y],[HF,r,Object.assign(Object.assign({},y),g.preventScrollOnSwipe?{passive:!1}:{})],[zF,i,y]];x.forEach(([b,E,S])=>d.addEventListener(b,E,S)),m=()=>x.forEach(([b,E])=>d.removeEventListener(b,E))}return m},h={ref:d=>{d!==null&&n((g,m)=>{if(g.el===d)return g;const y={};return g.el&&g.el!==d&&g.cleanUpTouch&&(g.cleanUpTouch(),y.cleanUpTouch=void 0),m.trackTouch&&d&&(y.cleanUpTouch=o(d,m)),Object.assign(Object.assign(Object.assign({},g),{el:d}),y)})}};return t.trackMouse&&(h.onMouseDown=e),[h,o]}function YF(n,t,e,r){return!t.trackTouch||!n.el?(n.cleanUpTouch&&n.cleanUpTouch(),Object.assign(Object.assign({},n),{cleanUpTouch:void 0})):n.cleanUpTouch?t.preventScrollOnSwipe!==e.preventScrollOnSwipe||t.touchEventOptions.passive!==e.touchEventOptions.passive?(n.cleanUpTouch(),Object.assign(Object.assign({},n),{cleanUpTouch:r(n.el,t)})):n:Object.assign(Object.assign({},n),{cleanUpTouch:r(n.el,t)})}function XF(n){const{trackMouse:t}=n,e=rt.useRef(Object.assign({},a2)),r=rt.useRef(Object.assign({},Xu)),i=rt.useRef(Object.assign({},r.current));i.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},Xu),n);let s;for(s in Xu)r.current[s]===void 0&&(r.current[s]=Xu[s]);const[a,o]=rt.useMemo(()=>qF(l=>e.current=l(e.current,r.current),{trackMouse:t}),[t]);return e.current=YF(e.current,r.current,i.current,o),a}const EM=rt.createContext({});function KF(n){const t=rt.useRef(null);return t.current===null&&(t.current=n()),t.current}const tb=typeof window<"u",$F=tb?rt.useLayoutEffect:rt.useEffect,eb=rt.createContext(null);function nb(n,t){n.indexOf(t)===-1&&n.push(t)}function rb(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Ia=(n,t,e)=>e>t?t:e<n?n:e;let ib=()=>{};const Ra={},AM=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function TM(n){return typeof n=="object"&&n!==null}const SM=n=>/^0[^.\s]+$/u.test(n);function sb(n){let t;return()=>(t===void 0&&(t=n()),t)}const Bi=n=>n,QF=(n,t)=>e=>t(n(e)),Bg=(...n)=>n.reduce(QF),gg=(n,t,e)=>{const r=t-n;return r===0?1:(e-n)/r};class ab{constructor(){this.subscriptions=[]}add(t){return nb(this.subscriptions,t),()=>rb(this.subscriptions,t)}notify(t,e,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,e,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(t,e,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ks=n=>n*1e3,Ls=n=>n/1e3;function CM(n,t){return t?n*(1e3/t):0}const IM=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,ZF=1e-7,JF=12;function tU(n,t,e,r,i){let s,a,o=0;do a=t+(e-t)/2,s=IM(a,r,i)-n,s>0?e=a:t=a;while(Math.abs(s)>ZF&&++o<JF);return a}function Fg(n,t,e,r){if(n===t&&e===r)return Bi;const i=s=>tU(s,0,1,n,e);return s=>s===0||s===1?s:IM(i(s),t,r)}const RM=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,DM=n=>t=>1-n(1-t),OM=Fg(.33,1.53,.69,.99),ob=DM(OM),MM=RM(ob),NM=n=>(n*=2)<1?.5*ob(n):.5*(2-Math.pow(2,-10*(n-1))),cb=n=>1-Math.sin(Math.acos(n)),PM=DM(cb),kM=RM(cb),eU=Fg(.42,0,1,1),nU=Fg(0,0,.58,1),LM=Fg(.42,0,.58,1),rU=n=>Array.isArray(n)&&typeof n[0]!="number",VM=n=>Array.isArray(n)&&typeof n[0]=="number",iU={linear:Bi,easeIn:eU,easeInOut:LM,easeOut:nU,circIn:cb,circInOut:kM,circOut:PM,backIn:ob,backInOut:MM,backOut:OM,anticipate:NM},sU=n=>typeof n=="string",XI=n=>{if(VM(n)){ib(n.length===4);const[t,e,r,i]=n;return Fg(t,e,r,i)}else if(sU(n))return iU[n];return n},jp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function aU(n,t){let e=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){a.has(d)&&(h.schedule(d),n()),d(o)}const h={schedule:(d,g=!1,m=!1)=>{const x=m&&i?e:r;return g&&a.add(d),x.has(d)||x.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(o=d,i){s=!0;return}i=!0,[e,r]=[r,e],e.forEach(l),e.clear(),i=!1,s&&(s=!1,h.process(d))}};return h}const oU=40;function BM(n,t){let e=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>e=!0,a=jp.reduce((R,k)=>(R[k]=aU(s),R),{}),{setup:o,read:l,resolveKeyframes:h,preUpdate:d,update:g,preRender:m,render:y,postRender:x}=a,b=()=>{const R=Ra.useManualTiming?i.timestamp:performance.now();e=!1,Ra.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(R-i.timestamp,oU),1)),i.timestamp=R,i.isProcessing=!0,o.process(i),l.process(i),h.process(i),d.process(i),g.process(i),m.process(i),y.process(i),x.process(i),i.isProcessing=!1,e&&t&&(r=!1,n(b))},E=()=>{e=!0,r=!0,i.isProcessing||n(b)};return{schedule:jp.reduce((R,k)=>{const N=a[k];return R[k]=(j,O=!1,C=!1)=>(e||E(),N.schedule(j,O,C)),R},{}),cancel:R=>{for(let k=0;k<jp.length;k++)a[jp[k]].cancel(R)},state:i,steps:a}}const{schedule:an,cancel:Ho,state:vr,steps:L_}=BM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Bi,!0);let g1;function cU(){g1=void 0}const Zr={now:()=>(g1===void 0&&Zr.set(vr.isProcessing||Ra.useManualTiming?vr.timestamp:performance.now()),g1),set:n=>{g1=n,queueMicrotask(cU)}},FM=n=>t=>typeof t=="string"&&t.startsWith(n),lb=FM("--"),lU=FM("var(--"),ub=n=>lU(n)?uU.test(n.split("/*")[0].trim()):!1,uU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Vh={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},pg={...Vh,transform:n=>Ia(0,1,n)},zp={...Vh,default:1},zd=n=>Math.round(n*1e5)/1e5,hb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function hU(n){return n==null}const fU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fb=(n,t)=>e=>!!(typeof e=="string"&&fU.test(e)&&e.startsWith(n)||t&&!hU(e)&&Object.prototype.hasOwnProperty.call(e,t)),UM=(n,t,e)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(hb);return{[n]:parseFloat(i),[t]:parseFloat(s),[e]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},dU=n=>Ia(0,255,n),V_={...Vh,transform:n=>Math.round(dU(n))},il={test:fb("rgb","red"),parse:UM("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:r=1})=>"rgba("+V_.transform(n)+", "+V_.transform(t)+", "+V_.transform(e)+", "+zd(pg.transform(r))+")"};function gU(n){let t="",e="",r="",i="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),t+=t,e+=e,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const o2={test:fb("#"),parse:gU,transform:il.transform},Ug=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),wo=Ug("deg"),Vs=Ug("%"),Xt=Ug("px"),pU=Ug("vh"),mU=Ug("vw"),KI={...Vs,parse:n=>Vs.parse(n)/100,transform:n=>Vs.transform(n*100)},Ku={test:fb("hsl","hue"),parse:UM("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:r=1})=>"hsla("+Math.round(n)+", "+Vs.transform(zd(t))+", "+Vs.transform(zd(e))+", "+zd(pg.transform(r))+")"},Ln={test:n=>il.test(n)||o2.test(n)||Ku.test(n),parse:n=>il.test(n)?il.parse(n):Ku.test(n)?Ku.parse(n):o2.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?il.transform(n):Ku.transform(n),getAnimatableNone:n=>{const t=Ln.parse(n);return t.alpha=0,Ln.transform(t)}},yU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vU(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(hb))==null?void 0:t.length)||0)+(((e=n.match(yU))==null?void 0:e.length)||0)>0}const jM="number",zM="color",_U="var",xU="var(",$I="${}",wU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function mg(n){const t=n.toString(),e=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(wU,l=>(Ln.test(l)?(r.color.push(s),i.push(zM),e.push(Ln.parse(l))):l.startsWith(xU)?(r.var.push(s),i.push(_U),e.push(l)):(r.number.push(s),i.push(jM),e.push(parseFloat(l))),++s,$I)).split($I);return{values:e,split:o,indexes:r,types:i}}function HM(n){return mg(n).values}function GM(n){const{split:t,types:e}=mg(n),r=t.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],i[a]!==void 0){const o=e[a];o===jM?s+=zd(i[a]):o===zM?s+=Ln.transform(i[a]):s+=i[a]}return s}}const bU=n=>typeof n=="number"?0:Ln.test(n)?Ln.getAnimatableNone(n):n;function EU(n){const t=HM(n);return GM(n)(t.map(bU))}const Go={test:vU,parse:HM,createTransformer:GM,getAnimatableNone:EU};function B_(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function AU({hue:n,saturation:t,lightness:e,alpha:r}){n/=360,t/=100,e/=100;let i=0,s=0,a=0;if(!t)i=s=a=e;else{const o=e<.5?e*(1+t):e+t-e*t,l=2*e-o;i=B_(l,o,n+1/3),s=B_(l,o,n),a=B_(l,o,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function q1(n,t){return e=>e>0?t:n}const hn=(n,t,e)=>n+(t-n)*e,F_=(n,t,e)=>{const r=n*n,i=e*(t*t-r)+r;return i<0?0:Math.sqrt(i)},TU=[o2,il,Ku],SU=n=>TU.find(t=>t.test(n));function QI(n){const t=SU(n);if(!t)return!1;let e=t.parse(n);return t===Ku&&(e=AU(e)),e}const ZI=(n,t)=>{const e=QI(n),r=QI(t);if(!e||!r)return q1(n,t);const i={...e};return s=>(i.red=F_(e.red,r.red,s),i.green=F_(e.green,r.green,s),i.blue=F_(e.blue,r.blue,s),i.alpha=hn(e.alpha,r.alpha,s),il.transform(i))},c2=new Set(["none","hidden"]);function CU(n,t){return c2.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function IU(n,t){return e=>hn(n,t,e)}function db(n){return typeof n=="number"?IU:typeof n=="string"?ub(n)?q1:Ln.test(n)?ZI:OU:Array.isArray(n)?WM:typeof n=="object"?Ln.test(n)?ZI:RU:q1}function WM(n,t){const e=[...n],r=e.length,i=n.map((s,a)=>db(s)(s,t[a]));return s=>{for(let a=0;a<r;a++)e[a]=i[a](s);return e}}function RU(n,t){const e={...n,...t},r={};for(const i in e)n[i]!==void 0&&t[i]!==void 0&&(r[i]=db(n[i])(n[i],t[i]));return i=>{for(const s in r)e[s]=r[s](i);return e}}function DU(n,t){const e=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],a=n.indexes[s][r[s]],o=n.values[a]??0;e[i]=o,r[s]++}return e}const OU=(n,t)=>{const e=Go.createTransformer(t),r=mg(n),i=mg(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?c2.has(n)&&!i.values.length||c2.has(t)&&!r.values.length?CU(n,t):Bg(WM(DU(r,i),i.values),e):q1(n,t)};function qM(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?hn(n,t,e):db(n)(n,t)}const MU=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>an.update(t,e),stop:()=>Ho(t),now:()=>vr.isProcessing?vr.timestamp:Zr.now()}},YM=(n,t,e=10)=>{let r="";const i=Math.max(Math.round(t/e),2);for(let s=0;s<i;s++)r+=Math.round(n(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Y1=2e4;function gb(n){let t=0;const e=50;let r=n.next(t);for(;!r.done&&t<Y1;)t+=e,r=n.next(t);return t>=Y1?1/0:t}function NU(n,t=100,e){const r=e({...n,keyframes:[0,t]}),i=Math.min(gb(r),Y1);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:Ls(i)}}const PU=5;function XM(n,t,e){const r=Math.max(t-PU,0);return CM(e-n(r),t-r)}const mn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},U_=.001;function kU({duration:n=mn.duration,bounce:t=mn.bounce,velocity:e=mn.velocity,mass:r=mn.mass}){let i,s,a=1-t;a=Ia(mn.minDamping,mn.maxDamping,a),n=Ia(mn.minDuration,mn.maxDuration,Ls(n)),a<1?(i=h=>{const d=h*a,g=d*n,m=d-e,y=l2(h,a),x=Math.exp(-g);return U_-m/y*x},s=h=>{const g=h*a*n,m=g*e+e,y=Math.pow(a,2)*Math.pow(h,2)*n,x=Math.exp(-g),b=l2(Math.pow(h,2),a);return(-i(h)+U_>0?-1:1)*((m-y)*x)/b}):(i=h=>{const d=Math.exp(-h*n),g=(h-e)*n+1;return-U_+d*g},s=h=>{const d=Math.exp(-h*n),g=(e-h)*(n*n);return d*g});const o=5/n,l=VU(i,s,o);if(n=ks(n),isNaN(l))return{stiffness:mn.stiffness,damping:mn.damping,duration:n};{const h=Math.pow(l,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const LU=12;function VU(n,t,e){let r=e;for(let i=1;i<LU;i++)r=r-n(r)/t(r);return r}function l2(n,t){return n*Math.sqrt(1-t*t)}const BU=["duration","bounce"],FU=["stiffness","damping","mass"];function JI(n,t){return t.some(e=>n[e]!==void 0)}function UU(n){let t={velocity:mn.velocity,stiffness:mn.stiffness,damping:mn.damping,mass:mn.mass,isResolvedFromDuration:!1,...n};if(!JI(n,FU)&&JI(n,BU))if(n.visualDuration){const e=n.visualDuration,r=2*Math.PI/(e*1.2),i=r*r,s=2*Ia(.05,1,1-(n.bounce||0))*Math.sqrt(i);t={...t,mass:mn.mass,stiffness:i,damping:s}}else{const e=kU(n);t={...t,...e,mass:mn.mass},t.isResolvedFromDuration=!0}return t}function X1(n=mn.visualDuration,t=mn.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:r,restDelta:i}=e;const s=e.keyframes[0],a=e.keyframes[e.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:h,mass:d,duration:g,velocity:m,isResolvedFromDuration:y}=UU({...e,velocity:-Ls(e.velocity||0)}),x=m||0,b=h/(2*Math.sqrt(l*d)),E=a-s,S=Ls(Math.sqrt(l/d)),T=Math.abs(E)<5;r||(r=T?mn.restSpeed.granular:mn.restSpeed.default),i||(i=T?mn.restDelta.granular:mn.restDelta.default);let R;if(b<1){const N=l2(S,b);R=j=>{const O=Math.exp(-b*S*j);return a-O*((x+b*S*E)/N*Math.sin(N*j)+E*Math.cos(N*j))}}else if(b===1)R=N=>a-Math.exp(-S*N)*(E+(x+S*E)*N);else{const N=S*Math.sqrt(b*b-1);R=j=>{const O=Math.exp(-b*S*j),C=Math.min(N*j,300);return a-O*((x+b*S*E)*Math.sinh(C)+N*E*Math.cosh(C))/N}}const k={calculatedDuration:y&&g||null,next:N=>{const j=R(N);if(y)o.done=N>=g;else{let O=N===0?x:0;b<1&&(O=N===0?ks(x):XM(R,N,j));const C=Math.abs(O)<=r,M=Math.abs(a-j)<=i;o.done=C&&M}return o.value=o.done?a:j,o},toString:()=>{const N=Math.min(gb(k),Y1),j=YM(O=>k.next(N*O).value,N,30);return N+"ms "+j},toTransition:()=>{}};return k}X1.applyToOptions=n=>{const t=NU(n,100,X1);return n.ease=t.ease,n.duration=ks(t.duration),n.type="keyframes",n};function u2({keyframes:n,velocity:t=0,power:e=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:h=.5,restSpeed:d}){const g=n[0],m={done:!1,value:g},y=C=>o!==void 0&&C<o||l!==void 0&&C>l,x=C=>o===void 0?l:l===void 0||Math.abs(o-C)<Math.abs(l-C)?o:l;let b=e*t;const E=g+b,S=a===void 0?E:a(E);S!==E&&(b=S-g);const T=C=>-b*Math.exp(-C/r),R=C=>S+T(C),k=C=>{const M=T(C),B=R(C);m.done=Math.abs(M)<=h,m.value=m.done?S:B};let N,j;const O=C=>{y(m.value)&&(N=C,j=X1({keyframes:[m.value,x(m.value)],velocity:XM(R,C,m.value),damping:i,stiffness:s,restDelta:h,restSpeed:d}))};return O(0),{calculatedDuration:null,next:C=>{let M=!1;return!j&&N===void 0&&(M=!0,k(C),O(C)),N!==void 0&&C>=N?j.next(C-N):(!M&&k(C),m)}}}function jU(n,t,e){const r=[],i=e||Ra.mix||qM,s=n.length-1;for(let a=0;a<s;a++){let o=i(n[a],n[a+1]);if(t){const l=Array.isArray(t)?t[a]||Bi:t;o=Bg(l,o)}r.push(o)}return r}function zU(n,t,{clamp:e=!0,ease:r,mixer:i}={}){const s=n.length;if(ib(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),t=[...t].reverse());const o=jU(t,r,i),l=o.length,h=d=>{if(a&&d<n[0])return t[0];let g=0;if(l>1)for(;g<n.length-2&&!(d<n[g+1]);g++);const m=gg(n[g],n[g+1],d);return o[g](m)};return e?d=>h(Ia(n[0],n[s-1],d)):h}function HU(n,t){const e=n[n.length-1];for(let r=1;r<=t;r++){const i=gg(0,t,r);n.push(hn(e,1,i))}}function GU(n){const t=[0];return HU(t,n.length-1),t}function WU(n,t){return n.map(e=>e*t)}function qU(n,t){return n.map(()=>t||LM).splice(0,n.length-1)}function Hd({duration:n=300,keyframes:t,times:e,ease:r="easeInOut"}){const i=rU(r)?r.map(XI):XI(r),s={done:!1,value:t[0]},a=WU(e&&e.length===t.length?e:GU(t),n),o=zU(a,t,{ease:Array.isArray(i)?i:qU(t,i)});return{calculatedDuration:n,next:l=>(s.value=o(l),s.done=l>=n,s)}}const YU=n=>n!==null;function pb(n,{repeat:t,repeatType:e="loop"},r,i=1){const s=n.filter(YU),o=i<0||t&&e!=="loop"&&t%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const XU={decay:u2,inertia:u2,tween:Hd,keyframes:Hd,spring:X1};function KM(n){typeof n.type=="string"&&(n.type=XU[n.type])}class mb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const KU=n=>n/100;class yb extends mb{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:e}=this.options;e&&e.updatedAt!==Zr.now()&&this.tick(Zr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;KM(t);const{type:e=Hd,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=t;let{keyframes:o}=t;const l=e||Hd;l!==Hd&&typeof o[0]!="number"&&(this.mixKeyframes=Bg(KU,qM(o[0],o[1])),o=[0,100]);const h=l({...t,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=gb(h));const{calculatedDuration:d}=h;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=h}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:d,repeat:g,repeatType:m,repeatDelay:y,type:x,onUpdate:b,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const S=this.currentTime-h*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let R=this.currentTime,k=r;if(g){const C=Math.min(this.currentTime,i)/o;let M=Math.floor(C),B=C%1;!B&&C>=1&&(B=1),B===1&&M--,M=Math.min(M,g+1),!!(M%2)&&(m==="reverse"?(B=1-B,y&&(B-=y/o)):m==="mirror"&&(k=a)),R=Ia(0,1,B)*o}const N=T?{done:!1,value:d[0]}:k.next(R);s&&(N.value=s(N.value));let{done:j}=N;!T&&l!==null&&(j=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return O&&x!==u2&&(N.value=pb(d,this.options,E,this.speed)),b&&b(N.value),O&&this.finish(),N}then(t,e){return this.finished.then(t,e)}get duration(){return Ls(this.calculatedDuration)}get time(){return Ls(this.currentTime)}set time(t){var e;t=ks(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Zr.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Ls(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:t=MU,startTime:e}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=e??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function $U(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const sl=n=>n*180/Math.PI,h2=n=>{const t=sl(Math.atan2(n[1],n[0]));return f2(t)},QU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:h2,rotateZ:h2,skewX:n=>sl(Math.atan(n[1])),skewY:n=>sl(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},f2=n=>(n=n%360,n<0&&(n+=360),n),t3=h2,e3=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),n3=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),ZU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:e3,scaleY:n3,scale:n=>(e3(n)+n3(n))/2,rotateX:n=>f2(sl(Math.atan2(n[6],n[5]))),rotateY:n=>f2(sl(Math.atan2(-n[2],n[0]))),rotateZ:t3,rotate:t3,skewX:n=>sl(Math.atan(n[4])),skewY:n=>sl(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function d2(n){return n.includes("scale")?1:0}function g2(n,t){if(!n||n==="none")return d2(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(e)r=ZU,i=e;else{const o=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=QU,i=o}if(!i)return d2(t);const s=r[t],a=i[1].split(",").map(tj);return typeof s=="function"?s(a):a[s]}const JU=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return g2(e,t)};function tj(n){return parseFloat(n.trim())}const Bh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fh=new Set(Bh),r3=n=>n===Vh||n===Xt,ej=new Set(["x","y","z"]),nj=Bh.filter(n=>!ej.has(n));function rj(n){const t=[];return nj.forEach(e=>{const r=n.getValue(e);r!==void 0&&(t.push([e,r.get()]),r.set(e.startsWith("scale")?1:0))}),t}const hl={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>g2(t,"x"),y:(n,{transform:t})=>g2(t,"y")};hl.translateX=hl.x;hl.translateY=hl.y;const fl=new Set;let p2=!1,m2=!1,y2=!1;function $M(){if(m2){const n=Array.from(fl).filter(r=>r.needsMeasurement),t=new Set(n.map(r=>r.element)),e=new Map;t.forEach(r=>{const i=rj(r);i.length&&(e.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=e.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))==null||o.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}m2=!1,p2=!1,fl.forEach(n=>n.complete(y2)),fl.clear()}function QM(){fl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(m2=!0)})}function ij(){y2=!0,QM(),$M(),y2=!1}class vb{constructor(t,e,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(fl.add(this),p2||(p2=!0,an.read(QM),an.resolveKeyframes($M))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:r,motionValue:i}=this;if(t[0]===null){const s=i==null?void 0:i.get(),a=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&e){const o=r.readValue(e,a);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=a),i&&s===void 0&&i.set(t[0])}$U(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),fl.delete(this)}cancel(){this.state==="scheduled"&&(fl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sj=n=>n.startsWith("--");function aj(n,t,e){sj(t)?n.style.setProperty(t,e):n.style[t]=e}const oj=sb(()=>window.ScrollTimeline!==void 0),cj={};function lj(n,t){const e=sb(n);return()=>cj[t]??e()}const ZM=lj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Td=([n,t,e,r])=>`cubic-bezier(${n}, ${t}, ${e}, ${r})`,i3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Td([0,.65,.55,1]),circOut:Td([.55,0,1,.45]),backIn:Td([.31,.01,.66,-.59]),backOut:Td([.33,1.53,.69,.99])};function JM(n,t){if(n)return typeof n=="function"?ZM()?YM(n,t):"ease-out":VM(n)?Td(n):Array.isArray(n)?n.map(e=>JM(e,t)||i3.easeOut):i3[n]}function uj(n,t,e,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},h=void 0){const d={[t]:e};l&&(d.offset=l);const g=JM(o,i);Array.isArray(g)&&(d.easing=g);const m={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return h&&(m.pseudoElement=h),n.animate(d,m)}function tN(n){return typeof n=="function"&&"applyToOptions"in n}function hj({type:n,...t}){return tN(n)&&ZM()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class fj extends mb{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=t,ib(typeof t.type!="string");const h=hj(t);this.animation=uj(e,r,i,h,s),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=pb(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):aj(e,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,r;const t=((r=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:r.call(e).duration)||0;return Ls(Number(t))}get time(){return Ls(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ks(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&oj()?(this.animation.timeline=t,Bi):e(this)}}const eN={anticipate:NM,backInOut:MM,circInOut:kM};function dj(n){return n in eN}function gj(n){typeof n.ease=="string"&&dj(n.ease)&&(n.ease=eN[n.ease])}const s3=10;class pj extends fj{constructor(t){gj(t),KM(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const o=new yb({...a,autoplay:!1}),l=ks(this.finishedTime??this.time);e.setWithVelocity(o.sample(l-s3).value,o.sample(l).value,s3),o.stop()}}const a3=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Go.test(n)||n==="0")&&!n.startsWith("url("));function mj(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function yj(n,t,e,r){const i=n[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=n[n.length-1],a=a3(i,t),o=a3(s,t);return!a||!o?!1:mj(n)||(e==="spring"||tN(e))&&r}function v2(n){n.duration=0,n.type}const vj=new Set(["opacity","clipPath","filter","transform"]),_j=sb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function xj(n){var d;const{motionValue:t,name:e,repeatDelay:r,repeatType:i,damping:s,type:a}=n;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:h}=t.owner.getProps();return _j()&&e&&vj.has(e)&&(e!=="transform"||!h)&&!l&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const wj=40;class bj extends mb{constructor({autoplay:t=!0,delay:e=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:h,element:d,...g}){var x;super(),this.stop=()=>{var b,E;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=Zr.now();const m={autoplay:t,delay:e,type:r,repeat:i,repeatDelay:s,repeatType:a,name:l,motionValue:h,element:d,...g},y=(d==null?void 0:d.KeyframeResolver)||vb;this.keyframeResolver=new y(o,(b,E,S)=>this.onKeyframesResolved(b,E,m,!S),l,h,d),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(t,e,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:h,onUpdate:d}=r;this.resolvedAt=Zr.now(),yj(t,s,a,o)||((Ra.instantAnimations||!l)&&(d==null||d(pb(t,r,e))),t[0]=t[t.length-1],v2(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>wj?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...r,keyframes:t},y=!h&&xj(m)?new pj({...m,element:m.motionValue.owner.current}):new yb(m);y.finished.then(()=>this.notifyFinished()).catch(Bi),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),ij()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const Ej=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Aj(n){const t=Ej.exec(n);if(!t)return[,];const[,e,r,i]=t;return[`--${e??r}`,i]}function nN(n,t,e=1){const[r,i]=Aj(n);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const a=s.trim();return AM(a)?parseFloat(a):a}return ub(i)?nN(i,t,e+1):i}function _b(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const rN=new Set(["width","height","top","left","right","bottom",...Bh]),Tj={test:n=>n==="auto",parse:n=>n},iN=n=>t=>t.test(n),sN=[Vh,Xt,Vs,wo,mU,pU,Tj],o3=n=>sN.find(iN(n));function Sj(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||SM(n):!0}const Cj=new Set(["brightness","contrast","saturate","opacity"]);function Ij(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[r]=e.match(hb)||[];if(!r)return n;const i=e.replace(r,"");let s=Cj.has(t)?1:0;return r!==e&&(s*=100),t+"("+s+i+")"}const Rj=/\b([a-z-]*)\(.*?\)/gu,_2={...Go,getAnimatableNone:n=>{const t=n.match(Rj);return t?t.map(Ij).join(" "):n}},c3={...Vh,transform:Math.round},Dj={rotate:wo,rotateX:wo,rotateY:wo,rotateZ:wo,scale:zp,scaleX:zp,scaleY:zp,scaleZ:zp,skew:wo,skewX:wo,skewY:wo,distance:Xt,translateX:Xt,translateY:Xt,translateZ:Xt,x:Xt,y:Xt,z:Xt,perspective:Xt,transformPerspective:Xt,opacity:pg,originX:KI,originY:KI,originZ:Xt},xb={borderWidth:Xt,borderTopWidth:Xt,borderRightWidth:Xt,borderBottomWidth:Xt,borderLeftWidth:Xt,borderRadius:Xt,radius:Xt,borderTopLeftRadius:Xt,borderTopRightRadius:Xt,borderBottomRightRadius:Xt,borderBottomLeftRadius:Xt,width:Xt,maxWidth:Xt,height:Xt,maxHeight:Xt,top:Xt,right:Xt,bottom:Xt,left:Xt,padding:Xt,paddingTop:Xt,paddingRight:Xt,paddingBottom:Xt,paddingLeft:Xt,margin:Xt,marginTop:Xt,marginRight:Xt,marginBottom:Xt,marginLeft:Xt,backgroundPositionX:Xt,backgroundPositionY:Xt,...Dj,zIndex:c3,fillOpacity:pg,strokeOpacity:pg,numOctaves:c3},Oj={...xb,color:Ln,backgroundColor:Ln,outlineColor:Ln,fill:Ln,stroke:Ln,borderColor:Ln,borderTopColor:Ln,borderRightColor:Ln,borderBottomColor:Ln,borderLeftColor:Ln,filter:_2,WebkitFilter:_2},aN=n=>Oj[n];function oN(n,t){let e=aN(n);return e!==_2&&(e=Go),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const Mj=new Set(["auto","none","0"]);function Nj(n,t,e){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!Mj.has(s)&&mg(s).values.length&&(i=n[r]),r++}if(i&&e)for(const s of t)n[s]=oN(e,i)}class Pj extends vb{constructor(t,e,r,i,s){super(t,e,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:r}=this;if(!e||!e.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let h=t[l];if(typeof h=="string"&&(h=h.trim(),ub(h))){const d=nN(h,e.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!rN.has(r)||t.length!==2)return;const[i,s]=t,a=o3(i),o=o3(s);if(a!==o)if(r3(a)&&r3(o))for(let l=0;l<t.length;l++){const h=t[l];typeof h=="string"&&(t[l]=parseFloat(h))}else hl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||Sj(t[i]))&&r.push(i);r.length&&Nj(t,r,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=hl[r](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:t,name:e,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(e);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=hl[e](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,h])=>{t.getValue(l).set(h)}),this.resolveNoneKeyframes()}}function kj(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=(e==null?void 0:e[n])??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const cN=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function Lj(n){return TM(n)&&"offsetHeight"in n}const l3=30,Vj=n=>!isNaN(parseFloat(n));class Bj{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Zr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Zr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Vj(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new ab);const r=this.events[t].add(e);return t==="change"?()=>{r(),an.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,r){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Zr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>l3)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,l3);return CM(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fh(n,t){return new Bj(n,t)}const{schedule:wb}=BM(queueMicrotask,!1),Qi={x:!1,y:!1};function lN(){return Qi.x||Qi.y}function Fj(n){return n==="x"||n==="y"?Qi[n]?null:(Qi[n]=!0,()=>{Qi[n]=!1}):Qi.x||Qi.y?null:(Qi.x=Qi.y=!0,()=>{Qi.x=Qi.y=!1})}function uN(n,t){const e=kj(n),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[e,i,()=>r.abort()]}function u3(n){return!(n.pointerType==="touch"||lN())}function Uj(n,t,e={}){const[r,i,s]=uN(n,e),a=o=>{if(!u3(o))return;const{target:l}=o,h=t(l,o);if(typeof h!="function"||!l)return;const d=g=>{u3(g)&&(h(g),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,i)};return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const hN=(n,t)=>t?n===t?!0:hN(n,t.parentElement):!1,bb=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,jj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zj(n){return jj.has(n.tagName)||n.tabIndex!==-1}const p1=new WeakSet;function h3(n){return t=>{t.key==="Enter"&&n(t)}}function j_(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Hj=(n,t)=>{const e=n.currentTarget;if(!e)return;const r=h3(()=>{if(p1.has(e))return;j_(e,"down");const i=h3(()=>{j_(e,"up")}),s=()=>j_(e,"cancel");e.addEventListener("keyup",i,t),e.addEventListener("blur",s,t)});e.addEventListener("keydown",r,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",r),t)};function f3(n){return bb(n)&&!lN()}function Gj(n,t,e={}){const[r,i,s]=uN(n,e),a=o=>{const l=o.currentTarget;if(!f3(o))return;p1.add(l);const h=t(l,o),d=(y,x)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",m),p1.has(l)&&p1.delete(l),f3(y)&&typeof h=="function"&&h(y,{success:x})},g=y=>{d(y,l===window||l===document||e.useGlobalTarget||hN(l,y.target))},m=y=>{d(y,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",m,i)};return r.forEach(o=>{(e.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),Lj(o)&&(o.addEventListener("focus",h=>Hj(h,i)),!zj(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function fN(n){return TM(n)&&"ownerSVGElement"in n}function Wj(n){return fN(n)&&n.tagName==="svg"}const Or=n=>!!(n&&n.getVelocity),qj=[...sN,Ln,Go],Yj=n=>qj.find(iN(n)),dN=rt.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function Xj(n=!0){const t=rt.useContext(eb);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:i}=t,s=rt.useId();rt.useEffect(()=>{if(n)return i(s)},[n]);const a=rt.useCallback(()=>n&&r&&r(s),[s,r,n]);return!e&&r?[!1,a]:[!0]}const gN=rt.createContext({strict:!1}),d3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dh={};for(const n in d3)dh[n]={isEnabled:t=>d3[n].some(e=>!!t[e])};function Kj(n){for(const t in n)dh[t]={...dh[t],...n[t]}}const $j=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function K1(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||$j.has(n)}let pN=n=>!K1(n);function Qj(n){typeof n=="function"&&(pN=t=>t.startsWith("on")?!K1(t):n(t))}try{Qj(require("@emotion/is-prop-valid").default)}catch{}function Zj(n,t,e){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(pN(i)||e===!0&&K1(i)||!t&&!K1(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const Nm=rt.createContext({});function Pm(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function yg(n){return typeof n=="string"||Array.isArray(n)}const Eb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ab=["initial",...Eb];function km(n){return Pm(n.animate)||Ab.some(t=>yg(n[t]))}function mN(n){return!!(km(n)||n.variants)}function Jj(n,t){if(km(n)){const{initial:e,animate:r}=n;return{initial:e===!1||yg(e)?e:void 0,animate:yg(r)?r:void 0}}return n.inherit!==!1?t:{}}function tz(n){const{initial:t,animate:e}=Jj(n,rt.useContext(Nm));return rt.useMemo(()=>({initial:t,animate:e}),[g3(t),g3(e)])}function g3(n){return Array.isArray(n)?n.join(" "):n}const vg={};function ez(n){for(const t in n)vg[t]=n[t],lb(t)&&(vg[t].isCSSVariable=!0)}function yN(n,{layout:t,layoutId:e}){return Fh.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!vg[n]||n==="opacity")}const nz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rz=Bh.length;function iz(n,t,e){let r="",i=!0;for(let s=0;s<rz;s++){const a=Bh[s],o=n[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||e){const h=cN(o,xb[a]);if(!l){i=!1;const d=nz[a]||a;r+=`${d}(${h}) `}e&&(t[a]=h)}}return r=r.trim(),e?r=e(t,i?"":r):i&&(r="none"),r}function Tb(n,t,e){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,o=!1;for(const l in t){const h=t[l];if(Fh.has(l)){a=!0;continue}else if(lb(l)){i[l]=h;continue}else{const d=cN(h,xb[l]);l.startsWith("origin")?(o=!0,s[l]=d):r[l]=d}}if(t.transform||(a||e?r.transform=iz(t,n.transform,e):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:h="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${h} ${d}`}}const Sb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vN(n,t,e){for(const r in t)!Or(t[r])&&!yN(r,e)&&(n[r]=t[r])}function sz({transformTemplate:n},t){return rt.useMemo(()=>{const e=Sb();return Tb(e,t,n),Object.assign({},e.vars,e.style)},[t])}function az(n,t){const e=n.style||{},r={};return vN(r,e,n),Object.assign(r,sz(n,t)),r}function oz(n,t){const e={},r=az(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=r,e}const cz={offset:"stroke-dashoffset",array:"stroke-dasharray"},lz={offset:"strokeDashoffset",array:"strokeDasharray"};function uz(n,t,e=1,r=0,i=!0){n.pathLength=1;const s=i?cz:lz;n[s.offset]=Xt.transform(-r);const a=Xt.transform(t),o=Xt.transform(e);n[s.array]=`${a} ${o}`}function _N(n,{attrX:t,attrY:e,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,h,d){if(Tb(n,o,h),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:m}=n;g.transform&&(m.transform=g.transform,delete g.transform),(m.transform||g.transformOrigin)&&(m.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete g.transformBox),t!==void 0&&(g.x=t),e!==void 0&&(g.y=e),r!==void 0&&(g.scale=r),i!==void 0&&uz(g,i,s,a,!1)}const xN=()=>({...Sb(),attrs:{}}),wN=n=>typeof n=="string"&&n.toLowerCase()==="svg";function hz(n,t,e,r){const i=rt.useMemo(()=>{const s=xN();return _N(s,t,wN(r),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[t]);if(n.style){const s={};vN(s,n.style,n),i.style={...s,...i.style}}return i}const fz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Cb(n){return typeof n!="string"||n.includes("-")?!1:!!(fz.indexOf(n)>-1||/[A-Z]/u.test(n))}function dz(n,t,e,{latestValues:r},i,s=!1){const o=(Cb(n)?hz:oz)(t,r,i,n),l=Zj(t,typeof n=="string",s),h=n!==rt.Fragment?{...l,...o,ref:e}:{},{children:d}=t,g=rt.useMemo(()=>Or(d)?d.get():d,[d]);return rt.createElement(n,{...h,children:g})}function p3(n){const t=[{},{}];return n==null||n.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function Ib(n,t,e,r){if(typeof t=="function"){const[i,s]=p3(r);t=t(e!==void 0?e:n.custom,i,s)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[i,s]=p3(r);t=t(e!==void 0?e:n.custom,i,s)}return t}function m1(n){return Or(n)?n.get():n}function gz({scrapeMotionValuesFromProps:n,createRenderState:t},e,r,i){return{latestValues:pz(e,r,i,n),renderState:t()}}function pz(n,t,e,r){const i={},s=r(n,{});for(const m in s)i[m]=m1(s[m]);let{initial:a,animate:o}=n;const l=km(n),h=mN(n);t&&h&&!l&&n.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let d=e?e.initial===!1:!1;d=d||a===!1;const g=d?o:a;if(g&&typeof g!="boolean"&&!Pm(g)){const m=Array.isArray(g)?g:[g];for(let y=0;y<m.length;y++){const x=Ib(n,m[y]);if(x){const{transitionEnd:b,transition:E,...S}=x;for(const T in S){let R=S[T];if(Array.isArray(R)){const k=d?R.length-1:0;R=R[k]}R!==null&&(i[T]=R)}for(const T in b)i[T]=b[T]}}}return i}const bN=n=>(t,e)=>{const r=rt.useContext(Nm),i=rt.useContext(eb),s=()=>gz(n,t,r,i);return e?s():KF(s)};function Rb(n,t,e){var s;const{style:r}=n,i={};for(const a in r)(Or(r[a])||t.style&&Or(t.style[a])||yN(a,n)||((s=e==null?void 0:e.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const mz=bN({scrapeMotionValuesFromProps:Rb,createRenderState:Sb});function EN(n,t,e){const r=Rb(n,t,e);for(const i in n)if(Or(n[i])||Or(t[i])){const s=Bh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}const yz=bN({scrapeMotionValuesFromProps:EN,createRenderState:xN}),vz=Symbol.for("motionComponentSymbol");function $u(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function _z(n,t,e){return rt.useCallback(r=>{r&&n.onMount&&n.onMount(r),t&&(r?t.mount(r):t.unmount()),e&&(typeof e=="function"?e(r):$u(e)&&(e.current=r))},[t])}const Db=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xz="framerAppearId",AN="data-"+Db(xz),TN=rt.createContext({});function wz(n,t,e,r,i){var b,E;const{visualElement:s}=rt.useContext(Nm),a=rt.useContext(gN),o=rt.useContext(eb),l=rt.useContext(dN).reducedMotion,h=rt.useRef(null);r=r||a.renderer,!h.current&&r&&(h.current=r(n,{visualState:t,parent:s,props:e,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=h.current,g=rt.useContext(TN);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&bz(h.current,e,i,g);const m=rt.useRef(!1);rt.useInsertionEffect(()=>{d&&m.current&&d.update(e,o)});const y=e[AN],x=rt.useRef(!!y&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,y))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,y)));return $F(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),rt.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,y)}),x.current=!1))}),d}function bz(n,t,e,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:h,layoutCrossfade:d}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:SN(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&$u(o),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:h})}function SN(n){if(n)return n.options.allowProjection!==!1?n.projection:SN(n.parent)}function z_(n,{forwardMotionProps:t=!1}={},e,r){e&&Kj(e);const i=Cb(n)?yz:mz;function s(o,l){let h;const d={...rt.useContext(dN),...o,layoutId:Ez(o)},{isStatic:g}=d,m=tz(o),y=i(o,g);if(!g&&tb){Az();const x=Tz(d);h=x.MeasureLayout,m.visualElement=wz(n,y,d,r,x.ProjectionNode)}return P.jsxs(Nm.Provider,{value:m,children:[h&&m.visualElement?P.jsx(h,{visualElement:m.visualElement,...d}):null,dz(n,o,_z(y,m.visualElement,l),y,g,t)]})}s.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const a=rt.forwardRef(s);return a[vz]=n,a}function Ez({layoutId:n}){const t=rt.useContext(EM).id;return t&&n!==void 0?t+"-"+n:n}function Az(n,t){rt.useContext(gN).strict}function Tz(n){const{drag:t,layout:e}=dh;if(!t&&!e)return{};const r={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Sz(n,t){if(typeof Proxy>"u")return z_;const e=new Map,r=(s,a)=>z_(s,a,n,t),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(e.has(a)||e.set(a,z_(a,void 0,n,t)),e.get(a))})}function CN({top:n,left:t,right:e,bottom:r}){return{x:{min:t,max:e},y:{min:n,max:r}}}function Cz({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function Iz(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),r=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:r.y,right:r.x}}function H_(n){return n===void 0||n===1}function x2({scale:n,scaleX:t,scaleY:e}){return!H_(n)||!H_(t)||!H_(e)}function qc(n){return x2(n)||IN(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function IN(n){return m3(n.x)||m3(n.y)}function m3(n){return n&&n!=="0%"}function $1(n,t,e){const r=n-e,i=t*r;return e+i}function y3(n,t,e,r,i){return i!==void 0&&(n=$1(n,i,r)),$1(n,e,r)+t}function w2(n,t=0,e=1,r,i){n.min=y3(n.min,t,e,r,i),n.max=y3(n.max,t,e,r,i)}function RN(n,{x:t,y:e}){w2(n.x,t.translate,t.scale,t.originPoint),w2(n.y,e.translate,e.scale,e.originPoint)}const v3=.999999999999,_3=1.0000000000001;function Rz(n,t,e,r=!1){const i=e.length;if(!i)return;t.x=t.y=1;let s,a;for(let o=0;o<i;o++){s=e[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Zu(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,RN(n,a)),r&&qc(s.latestValues)&&Zu(n,s.latestValues))}t.x<_3&&t.x>v3&&(t.x=1),t.y<_3&&t.y>v3&&(t.y=1)}function Qu(n,t){n.min=n.min+t,n.max=n.max+t}function x3(n,t,e,r,i=.5){const s=hn(n.min,n.max,i);w2(n,t,e,s,r)}function Zu(n,t){x3(n.x,t.x,t.scaleX,t.scale,t.originX),x3(n.y,t.y,t.scaleY,t.scale,t.originY)}function DN(n,t){return CN(Iz(n.getBoundingClientRect(),t))}function Dz(n,t,e){const r=DN(n,e),{scroll:i}=t;return i&&(Qu(r.x,i.offset.x),Qu(r.y,i.offset.y)),r}const w3=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ju=()=>({x:w3(),y:w3()}),b3=()=>({min:0,max:0}),Tn=()=>({x:b3(),y:b3()}),b2={current:null},ON={current:!1};function Oz(){if(ON.current=!0,!!tb)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>b2.current=n.matches;n.addEventListener("change",t),t()}else b2.current=!1}const Mz=new WeakMap;function Nz(n,t,e){for(const r in t){const i=t[r],s=e[r];if(Or(i))n.addValue(r,i);else if(Or(s))n.addValue(r,fh(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,fh(a!==void 0?a:i,{owner:n}))}}for(const r in e)t[r]===void 0&&n.removeValue(r);return t}const E3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Pz{scrapeMotionValuesFromProps(t,e,r){return{}}constructor({parent:t,props:e,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Zr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,an.render(this.render,!1,!0))};const{latestValues:l,renderState:h}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=e.initial?{...l}:{},this.renderState=h,this.parent=t,this.props=e,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=km(e),this.isVariantNode=mN(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...g}=this.scrapeMotionValuesFromProps(e,{},this);for(const m in g){const y=g[m];l[m]!==void 0&&Or(y)&&y.set(l[m])}}mount(t){this.current=t,Mz.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,r)=>this.bindToMotionValue(r,e)),ON.current||Oz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:b2.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ho(this.notifyUpdate),Ho(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Fh.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=e.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&an.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in dh){const e=dh[t];if(!e)continue;const{isEnabled:r,Feature:i}=e;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let r=0;r<E3.length;r++){const i=E3[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=t[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=Nz(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const r=this.values.get(t);e!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&e!==void 0&&(r=fh(e===null?void 0:e,{owner:this}),this.addValue(t,r)),r}readValue(t,e){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(AM(r)||SM(r))?r=parseFloat(r):!Yj(r)&&Go.test(e)&&(r=oN(t,e)),this.setBaseTarget(t,Or(r)?r.get():r)),Or(r)?r.get():r}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var s;const{initial:e}=this.props;let r;if(typeof e=="string"||typeof e=="object"){const a=Ib(this.props,e,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[t])}if(e&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Or(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new ab),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){wb.render(this.render)}}class MN extends Pz{constructor(){super(...arguments),this.KeyframeResolver=Pj}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:r}){delete e[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Or(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function NN(n,{style:t,vars:e},r,i){const s=n.style;let a;for(a in t)s[a]=t[a];i==null||i.applyProjectionStyles(s,r);for(a in e)s.setProperty(a,e[a])}function kz(n){return window.getComputedStyle(n)}class Lz extends MN{constructor(){super(...arguments),this.type="html",this.renderInstance=NN}readValueFromInstance(t,e){var r;if(Fh.has(e))return(r=this.projection)!=null&&r.isProjecting?d2(e):JU(t,e);{const i=kz(t),s=(lb(e)?i.getPropertyValue(e):i[e])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:e}){return DN(t,e)}build(t,e,r){Tb(t,e,r.transformTemplate)}scrapeMotionValuesFromProps(t,e,r){return Rb(t,e,r)}}const PN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Vz(n,t,e,r){NN(n,t,void 0,r);for(const i in t.attrs)n.setAttribute(PN.has(i)?i:Db(i),t.attrs[i])}class Bz extends MN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Tn}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Fh.has(e)){const r=aN(e);return r&&r.default||0}return e=PN.has(e)?e:Db(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,r){return EN(t,e,r)}build(t,e,r){_N(t,e,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,e,r,i){Vz(t,e,r,i)}mount(t){this.isSVGTag=wN(t.tagName),super.mount(t)}}const Fz=(n,t)=>Cb(n)?new Bz(t):new Lz(t,{allowProjection:n!==rt.Fragment});function _g(n,t,e){const r=n.getProps();return Ib(r,t,e!==void 0?e:r.custom,n)}const E2=n=>Array.isArray(n);function Uz(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,fh(e))}function jz(n){return E2(n)?n[n.length-1]||0:n}function zz(n,t){const e=_g(n,t);let{transitionEnd:r={},transition:i={},...s}=e||{};s={...s,...r};for(const a in s){const o=jz(s[a]);Uz(n,a,o)}}function Hz(n){return!!(Or(n)&&n.add)}function A2(n,t){const e=n.getValue("willChange");if(Hz(e))return e.add(t);if(!e&&Ra.WillChange){const r=new Ra.WillChange("auto");n.addValue("willChange",r),r.add(t)}}function kN(n){return n.props[AN]}const Gz=n=>n!==null;function Wz(n,{repeat:t,repeatType:e="loop"},r){const i=n.filter(Gz),s=t&&e!=="loop"&&t%2===1?0:i.length-1;return i[s]}const qz={type:"spring",stiffness:500,damping:25,restSpeed:10},Yz=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Xz={type:"keyframes",duration:.8},Kz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$z=(n,{keyframes:t})=>t.length>2?Xz:Fh.has(n)?n.startsWith("scale")?Yz(t[1]):qz:Kz;function Qz({when:n,delay:t,delayChildren:e,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:h,...d}){return!!Object.keys(d).length}const Ob=(n,t,e,r={},i,s)=>a=>{const o=_b(r,n)||{},l=o.delay||r.delay||0;let{elapsed:h=0}=r;h=h-ks(l);const d={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-h,onUpdate:m=>{t.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:t,element:s?void 0:i};Qz(o)||Object.assign(d,$z(n,d)),d.duration&&(d.duration=ks(d.duration)),d.repeatDelay&&(d.repeatDelay=ks(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let g=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(v2(d),d.delay===0&&(g=!0)),(Ra.instantAnimations||Ra.skipAnimations)&&(g=!0,v2(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,g&&!s&&t.get()!==void 0){const m=Wz(d.keyframes,o);if(m!==void 0){an.update(()=>{d.onUpdate(m),d.onComplete()});return}}return o.isSync?new yb(d):new bj(d)};function Zz({protectedKeys:n,needsAnimating:t},e){const r=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,r}function LN(n,t,{delay:e=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(s=r);const l=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const d in o){const g=n.getValue(d,n.latestValues[d]??null),m=o[d];if(m===void 0||h&&Zz(h,d))continue;const y={delay:e,..._b(s||{},d)},x=g.get();if(x!==void 0&&!g.isAnimating&&!Array.isArray(m)&&m===x&&!y.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const S=kN(n);if(S){const T=window.MotionHandoffAnimation(S,d,an);T!==null&&(y.startTime=T,b=!0)}}A2(n,d),g.start(Ob(d,g,m,n.shouldReduceMotion&&rN.has(d)?{type:!1}:y,n,b));const E=g.animation;E&&l.push(E)}return a&&Promise.all(l).then(()=>{an.update(()=>{a&&zz(n,a)})}),l}function T2(n,t,e={}){var l;const r=_g(n,t,e.type==="exit"?(l=n.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};e.transitionOverride&&(i=e.transitionOverride);const s=r?()=>Promise.all(LN(n,r,e)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:d=0,staggerChildren:g,staggerDirection:m}=i;return Jz(n,t,h,d,g,m,e)}:()=>Promise.resolve(),{when:o}=i;if(o){const[h,d]=o==="beforeChildren"?[s,a]:[a,s];return h().then(()=>d())}else return Promise.all([s(),a(e.delay)])}function Jz(n,t,e=0,r=0,i=0,s=1,a){const o=[],l=n.variantChildren.size,h=(l-1)*i,d=typeof r=="function",g=d?m=>r(m,l):s===1?(m=0)=>m*i:(m=0)=>h-m*i;return Array.from(n.variantChildren).sort(tH).forEach((m,y)=>{m.notify("AnimationStart",t),o.push(T2(m,t,{...a,delay:e+(d?0:r)+g(y)}).then(()=>m.notify("AnimationComplete",t)))}),Promise.all(o)}function tH(n,t){return n.sortNodePosition(t)}function eH(n,t,e={}){n.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>T2(n,s,e));r=Promise.all(i)}else if(typeof t=="string")r=T2(n,t,e);else{const i=typeof t=="function"?_g(n,t,e.custom):t;r=Promise.all(LN(n,i,e))}return r.then(()=>{n.notify("AnimationComplete",t)})}function VN(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let r=0;r<e;r++)if(t[r]!==n[r])return!1;return!0}const nH=Ab.length;function BN(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?BN(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<nH;e++){const r=Ab[e],i=n.props[r];(yg(i)||i===!1)&&(t[r]=i)}return t}const rH=[...Eb].reverse(),iH=Eb.length;function sH(n){return t=>Promise.all(t.map(({animation:e,options:r})=>eH(n,e,r)))}function aH(n){let t=sH(n),e=A3(),r=!0;const i=l=>(h,d)=>{var m;const g=_g(n,d,l==="exit"?(m=n.presenceContext)==null?void 0:m.custom:void 0);if(g){const{transition:y,transitionEnd:x,...b}=g;h={...h,...b,...x}}return h};function s(l){t=l(n)}function a(l){const{props:h}=n,d=BN(n.parent)||{},g=[],m=new Set;let y={},x=1/0;for(let E=0;E<iH;E++){const S=rH[E],T=e[S],R=h[S]!==void 0?h[S]:d[S],k=yg(R),N=S===l?T.isActive:null;N===!1&&(x=E);let j=R===d[S]&&R!==h[S]&&k;if(j&&r&&n.manuallyAnimateOnMount&&(j=!1),T.protectedKeys={...y},!T.isActive&&N===null||!R&&!T.prevProp||Pm(R)||typeof R=="boolean")continue;const O=oH(T.prevProp,R);let C=O||S===l&&T.isActive&&!j&&k||E>x&&k,M=!1;const B=Array.isArray(R)?R:[R];let H=B.reduce(i(S),{});N===!1&&(H={});const{prevResolvedValues:G={}}=T,U={...G,...H},_t=ct=>{C=!0,m.has(ct)&&(M=!0,m.delete(ct)),T.needsAnimating[ct]=!0;const yt=n.getValue(ct);yt&&(yt.liveStyle=!1)};for(const ct in U){const yt=H[ct],et=G[ct];if(y.hasOwnProperty(ct))continue;let V=!1;E2(yt)&&E2(et)?V=!VN(yt,et):V=yt!==et,V?yt!=null?_t(ct):m.add(ct):yt!==void 0&&m.has(ct)?_t(ct):T.protectedKeys[ct]=!0}T.prevProp=R,T.prevResolvedValues=H,T.isActive&&(y={...y,...H}),r&&n.blockInitialAnimation&&(C=!1),C&&(!(j&&O)||M)&&g.push(...B.map(ct=>({animation:ct,options:{type:S}})))}if(m.size){const E={};if(typeof h.initial!="boolean"){const S=_g(n,Array.isArray(h.initial)?h.initial[0]:h.initial);S&&S.transition&&(E.transition=S.transition)}m.forEach(S=>{const T=n.getBaseTarget(S),R=n.getValue(S);R&&(R.liveStyle=!0),E[S]=T??null}),g.push({animation:E})}let b=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(g):Promise.resolve()}function o(l,h){var g;if(e[l].isActive===h)return Promise.resolve();(g=n.variantChildren)==null||g.forEach(m=>{var y;return(y=m.animationState)==null?void 0:y.setActive(l,h)}),e[l].isActive=h;const d=a(l);for(const m in e)e[m].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>e,reset:()=>{e=A3(),r=!0}}}function oH(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!VN(t,n):!1}function Uc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function A3(){return{animate:Uc(!0),whileInView:Uc(),whileHover:Uc(),whileTap:Uc(),whileDrag:Uc(),whileFocus:Uc(),exit:Uc()}}class Qo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class cH extends Qo{constructor(t){super(t),t.animationState||(t.animationState=aH(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Pm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let lH=0;class uH extends Qo{constructor(){super(...arguments),this.id=lH++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const hH={animation:{Feature:cH},exit:{Feature:uH}};function xg(n,t,e,r={passive:!0}){return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e)}function jg(n){return{point:{x:n.pageX,y:n.pageY}}}const fH=n=>t=>bb(t)&&n(t,jg(t));function Gd(n,t,e,r){return xg(n,t,fH(e),r)}const FN=1e-4,dH=1-FN,gH=1+FN,UN=.01,pH=0-UN,mH=0+UN;function zr(n){return n.max-n.min}function yH(n,t,e){return Math.abs(n-t)<=e}function T3(n,t,e,r=.5){n.origin=r,n.originPoint=hn(t.min,t.max,n.origin),n.scale=zr(e)/zr(t),n.translate=hn(e.min,e.max,n.origin)-n.originPoint,(n.scale>=dH&&n.scale<=gH||isNaN(n.scale))&&(n.scale=1),(n.translate>=pH&&n.translate<=mH||isNaN(n.translate))&&(n.translate=0)}function Wd(n,t,e,r){T3(n.x,t.x,e.x,r?r.originX:void 0),T3(n.y,t.y,e.y,r?r.originY:void 0)}function S3(n,t,e){n.min=e.min+t.min,n.max=n.min+zr(t)}function vH(n,t,e){S3(n.x,t.x,e.x),S3(n.y,t.y,e.y)}function C3(n,t,e){n.min=t.min-e.min,n.max=n.min+zr(t)}function qd(n,t,e){C3(n.x,t.x,e.x),C3(n.y,t.y,e.y)}function Ni(n){return[n("x"),n("y")]}const jN=({current:n})=>n?n.ownerDocument.defaultView:null,I3=(n,t)=>Math.abs(n-t);function _H(n,t){const e=I3(n.x,t.x),r=I3(n.y,t.y);return Math.sqrt(e**2+r**2)}class zN{constructor(t,e,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=W_(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,x=_H(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!x)return;const{point:b}=m,{timestamp:E}=vr;this.history.push({...b,timestamp:E});const{onStart:S,onMove:T}=this.handlers;y||(S&&S(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=G_(y,this.transformPagePoint),an.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:x,onSessionEnd:b,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=W_(m.type==="pointercancel"?this.lastMoveEventInfo:G_(y,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,S),b&&b(m,S)},!bb(t))return;this.dragSnapToOrigin=s,this.handlers=e,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const o=jg(t),l=G_(o,this.transformPagePoint),{point:h}=l,{timestamp:d}=vr;this.history=[{...h,timestamp:d}];const{onSessionStart:g}=e;g&&g(t,W_(l,this.history)),this.removeListeners=Bg(Gd(this.contextWindow,"pointermove",this.handlePointerMove),Gd(this.contextWindow,"pointerup",this.handlePointerUp),Gd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ho(this.updatePoint)}}function G_(n,t){return t?{point:t(n.point)}:n}function R3(n,t){return{x:n.x-t.x,y:n.y-t.y}}function W_({point:n},t){return{point:n,delta:R3(n,HN(t)),offset:R3(n,xH(t)),velocity:wH(t,.1)}}function xH(n){return n[0]}function HN(n){return n[n.length-1]}function wH(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,r=null;const i=HN(n);for(;e>=0&&(r=n[e],!(i.timestamp-r.timestamp>ks(t)));)e--;if(!r)return{x:0,y:0};const s=Ls(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function bH(n,{min:t,max:e},r){return t!==void 0&&n<t?n=r?hn(t,n,r.min):Math.max(n,t):e!==void 0&&n>e&&(n=r?hn(e,n,r.max):Math.min(n,e)),n}function D3(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function EH(n,{top:t,left:e,bottom:r,right:i}){return{x:D3(n.x,e,i),y:D3(n.y,t,r)}}function O3(n,t){let e=t.min-n.min,r=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,r]=[r,e]),{min:e,max:r}}function AH(n,t){return{x:O3(n.x,t.x),y:O3(n.y,t.y)}}function TH(n,t){let e=.5;const r=zr(n),i=zr(t);return i>r?e=gg(t.min,t.max-r,n.min):r>i&&(e=gg(n.min,n.max-i,t.min)),Ia(0,1,e)}function SH(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const S2=.35;function CH(n=S2){return n===!1?n=0:n===!0&&(n=S2),{x:M3(n,"left","right"),y:M3(n,"top","bottom")}}function M3(n,t,e){return{min:N3(n,t),max:N3(n,e)}}function N3(n,t){return typeof n=="number"?n:n[t]||0}const IH=new WeakMap;class RH{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(jg(g).point)},a=(g,m)=>{const{drag:y,dragPropagation:x,onDragStart:b}=this.getProps();if(y&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Fj(y),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ni(S=>{let T=this.getAxisMotionValue(S).get()||0;if(Vs.test(T)){const{projection:R}=this.visualElement;if(R&&R.layout){const k=R.layout.layoutBox[S];k&&(T=zr(k)*(parseFloat(T)/100))}}this.originPoint[S]=T}),b&&an.postRender(()=>b(g,m)),A2(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},o=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:x,onDirectionLock:b,onDrag:E}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:S}=m;if(x&&this.currentDirection===null){this.currentDirection=DH(S),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",m.point,S),this.updateAxis("y",m.point,S),this.visualElement.render(),E&&E(g,m)},l=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m,this.stop(g,m),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Ni(g=>{var m;return this.getAnimationState(g)==="paused"&&((m=this.getAxisMotionValue(g).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new zN(t,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:jN(this.visualElement)})}stop(t,e){const r=t||this.latestPointerEvent,i=e||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&an.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,r){const{drag:i}=this.getProps();if(!r||!Hp(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=bH(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:t,dragElastic:e}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;t&&$u(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=EH(r.layoutBox,t):this.constraints=!1,this.elastic=CH(e),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ni(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=SH(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!$u(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Dz(r,i.root,this.visualElement.getTransformPagePoint());let a=AH(i.layout.layoutBox,s);if(e){const o=e(Cz(a));this.hasMutatedConstraints=!!o,o&&(a=CN(o))}return a}startAnimation(t){const{drag:e,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},h=Ni(d=>{if(!Hp(d,e,this.currentDirection))return;let g=l&&l[d]||{};a&&(g={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,x={type:"inertia",velocity:r?t[d]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(d,x)});return Promise.all(h).then(o)}startAxisValueAnimation(t,e){const r=this.getAxisMotionValue(t);return A2(this.visualElement,t),r.start(Ob(t,r,0,e,this.visualElement,!1))}stopAnimation(){Ni(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ni(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[e];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ni(e=>{const{drag:r}=this.getProps();if(!Hp(e,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(e);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[e];s.set(t[e]-hn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:r}=this.visualElement;if(!$u(e)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ni(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=TH({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ni(a=>{if(!Hp(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:h}=this.constraints[a];o.set(hn(l,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;IH.set(this.visualElement,this);const t=this.visualElement.current,e=Gd(t,"pointerdown",l=>{const{drag:h,dragListener:d=!0}=this.getProps();h&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();$u(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),an.read(r);const a=xg(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:h})=>{this.isDragging&&h&&(Ni(d=>{const g=this.getAxisMotionValue(d);g&&(this.originPoint[d]+=l[d].translate,g.set(g.get()+l[d].translate))}),this.visualElement.render())});return()=>{a(),e(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=S2,dragMomentum:o=!0}=t;return{...t,drag:e,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Hp(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function DH(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class OH extends Qo{constructor(t){super(t),this.removeGroupControls=Bi,this.removeListeners=Bi,this.controls=new RH(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Bi}unmount(){this.removeGroupControls(),this.removeListeners()}}const P3=n=>(t,e)=>{n&&an.postRender(()=>n(t,e))};class MH extends Qo{constructor(){super(...arguments),this.removePointerDownListener=Bi}onPointerDown(t){this.session=new zN(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jN(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:P3(t),onStart:P3(e),onMove:r,onEnd:(s,a)=>{delete this.session,i&&an.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Gd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const y1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function k3(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const od={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(Xt.test(n))n=parseFloat(n);else return n;const e=k3(n,t.target.x),r=k3(n,t.target.y);return`${e}% ${r}%`}},NH={correct:(n,{treeScale:t,projectionDelta:e})=>{const r=n,i=Go.parse(n);if(i.length>5)return r;const s=Go.createTransformer(n),a=typeof i[0]!="number"?1:0,o=e.x.scale*t.x,l=e.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const h=hn(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}};let L3=!1;class PH extends rt.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;ez(kH),s&&(e.group&&e.group.add(s),r&&r.register&&i&&r.register(s),L3&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),y1.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,L3=!0,i||t.layoutDependency!==e||e===void 0||t.isPresent!==s?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||an.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),wb.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function GN(n){const[t,e]=Xj(),r=rt.useContext(EM);return P.jsx(PH,{...n,layoutGroup:r,switchLayoutGroup:rt.useContext(TN),isPresent:t,safeToRemove:e})}const kH={borderRadius:{...od,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:od,borderTopRightRadius:od,borderBottomLeftRadius:od,borderBottomRightRadius:od,boxShadow:NH};function LH(n,t,e){const r=Or(n)?n:fh(n);return r.start(Ob("",r,t,e)),r.animation}const VH=(n,t)=>n.depth-t.depth;class BH{constructor(){this.children=[],this.isDirty=!1}add(t){nb(this.children,t),this.isDirty=!0}remove(t){rb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(VH),this.isDirty=!1,this.children.forEach(t)}}function FH(n,t){const e=Zr.now(),r=({timestamp:i})=>{const s=i-e;s>=t&&(Ho(r),n(s-t))};return an.setup(r,!0),()=>Ho(r)}const WN=["TopLeft","TopRight","BottomLeft","BottomRight"],UH=WN.length,V3=n=>typeof n=="string"?parseFloat(n):n,B3=n=>typeof n=="number"||Xt.test(n);function jH(n,t,e,r,i,s){i?(n.opacity=hn(0,e.opacity??1,zH(r)),n.opacityExit=hn(t.opacity??1,0,HH(r))):s&&(n.opacity=hn(t.opacity??1,e.opacity??1,r));for(let a=0;a<UH;a++){const o=`border${WN[a]}Radius`;let l=F3(t,o),h=F3(e,o);if(l===void 0&&h===void 0)continue;l||(l=0),h||(h=0),l===0||h===0||B3(l)===B3(h)?(n[o]=Math.max(hn(V3(l),V3(h),r),0),(Vs.test(h)||Vs.test(l))&&(n[o]+="%")):n[o]=h}(t.rotate||e.rotate)&&(n.rotate=hn(t.rotate||0,e.rotate||0,r))}function F3(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const zH=qN(0,.5,PM),HH=qN(.5,.95,Bi);function qN(n,t,e){return r=>r<n?0:r>t?1:e(gg(n,t,r))}function U3(n,t){n.min=t.min,n.max=t.max}function Mi(n,t){U3(n.x,t.x),U3(n.y,t.y)}function j3(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function z3(n,t,e,r,i){return n-=t,n=$1(n,1/e,r),i!==void 0&&(n=$1(n,1/i,r)),n}function GH(n,t=0,e=1,r=.5,i,s=n,a=n){if(Vs.test(t)&&(t=parseFloat(t),t=hn(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=hn(s.min,s.max,r);n===s&&(o-=t),n.min=z3(n.min,t,e,o,i),n.max=z3(n.max,t,e,o,i)}function H3(n,t,[e,r,i],s,a){GH(n,t[e],t[r],t[i],t.scale,s,a)}const WH=["x","scaleX","originX"],qH=["y","scaleY","originY"];function G3(n,t,e,r){H3(n.x,t,WH,e?e.x:void 0,r?r.x:void 0),H3(n.y,t,qH,e?e.y:void 0,r?r.y:void 0)}function W3(n){return n.translate===0&&n.scale===1}function YN(n){return W3(n.x)&&W3(n.y)}function q3(n,t){return n.min===t.min&&n.max===t.max}function YH(n,t){return q3(n.x,t.x)&&q3(n.y,t.y)}function Y3(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function XN(n,t){return Y3(n.x,t.x)&&Y3(n.y,t.y)}function X3(n){return zr(n.x)/zr(n.y)}function K3(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class XH{constructor(){this.members=[]}add(t){nb(this.members,t),t.scheduleRender()}remove(t){if(rb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(i=>t===i);if(e===0)return!1;let r;for(let i=e;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,e){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,e&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:r}=t;e.onExitComplete&&e.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function KH(n,t,e){let r="";const i=n.x.translate/t.x,s=n.y.translate/t.y,a=(e==null?void 0:e.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:h,rotate:d,rotateX:g,rotateY:m,skewX:y,skewY:x}=e;h&&(r=`perspective(${h}px) ${r}`),d&&(r+=`rotate(${d}deg) `),g&&(r+=`rotateX(${g}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),x&&(r+=`skewY(${x}deg) `)}const o=n.x.scale*t.x,l=n.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const q_=["","X","Y","Z"],$H=1e3;let QH=0;function Y_(n,t,e,r){const{latestValues:i}=t;i[n]&&(e[n]=i[n],t.setStaticValue(n,0),r&&(r[n]=0))}function KN(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=kN(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",an,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&KN(r)}function $N({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=t==null?void 0:t()){this.id=QH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(tG),this.nodes.forEach(iG),this.nodes.forEach(sG),this.nodes.forEach(eG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new BH)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new ab),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=fN(a)&&!Wj(a),this.instance=a;const{layoutId:o,layout:l,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),n){let d,g=0;const m=()=>this.root.updateBlockedByResize=!1;an.read(()=>{g=window.innerWidth}),n(a,()=>{const y=window.innerWidth;y!==g&&(g=y,this.root.updateBlockedByResize=!0,d&&d(),d=FH(m,250),y1.hasAnimatedSinceResize&&(y1.hasAnimatedSinceResize=!1,this.nodes.forEach(Z3)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&h&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:g,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||uG,{onLayoutAnimationStart:b,onLayoutAnimationComplete:E}=h.getProps(),S=!this.targetLayout||!XN(this.targetLayout,y),T=!g&&m;if(this.options.layoutRoot||this.resumeFrom||T||g&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={..._b(x,"layout"),onPlay:b,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(d,T)}else g||Z3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ho(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aG),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&KN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const g=this.path[d];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($3);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Q3);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(rG),this.nodes.forEach(ZH),this.nodes.forEach(JH)):this.nodes.forEach(Q3),this.clearAllSnapshots();const o=Zr.now();vr.delta=Ia(0,1e3/60,o-vr.timestamp),vr.timestamp=o,vr.isProcessing=!0,L_.update.process(vr),L_.preRender.process(vr),L_.render.process(vr),vr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nG),this.sharedNodes.forEach(oG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,an.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){an.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!zr(this.snapshot.measuredBox.x)&&!zr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!YN(this.projectionDelta),l=this.getTransformTemplate(),h=l?l(this.latestValues,""):void 0,d=h!==this.prevTransformTemplateValue;a&&this.instance&&(o||qc(this.latestValues)||d)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),hG(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:a}=this.options;if(!a)return Tn();const o=a.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(fG))){const{scroll:d}=this.root;d&&(Qu(o.x,d.offset.x),Qu(o.y,d.offset.y))}return o}removeElementScroll(a){var l;const o=Tn();if(Mi(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let h=0;h<this.path.length;h++){const d=this.path[h],{scroll:g,options:m}=d;d!==this.root&&g&&m.layoutScroll&&(g.wasRoot&&Mi(o,a),Qu(o.x,g.offset.x),Qu(o.y,g.offset.y))}return o}applyTransform(a,o=!1){const l=Tn();Mi(l,a);for(let h=0;h<this.path.length;h++){const d=this.path[h];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Zu(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),qc(d.latestValues)&&Zu(l,d.latestValues)}return qc(this.latestValues)&&Zu(l,this.latestValues),l}removeTransform(a){const o=Tn();Mi(o,a);for(let l=0;l<this.path.length;l++){const h=this.path[l];if(!h.instance||!qc(h.latestValues))continue;x2(h.latestValues)&&h.updateSnapshot();const d=Tn(),g=h.measurePageBox();Mi(d,g),G3(o,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,d)}return qc(this.latestValues)&&G3(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var m;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:g}=this.options;if(!(!this.layout||!(d||g))){if(this.resolvedRelativeTargetAt=vr.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tn(),this.relativeTargetOrigin=Tn(),qd(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Mi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Tn(),this.targetWithTransforms=Tn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Mi(this.target,this.layout.layoutBox),RN(this.target,this.targetDelta)):Mi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tn(),this.relativeTargetOrigin=Tn(),qd(this.relativeTargetOrigin,this.target,y.target),Mi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||x2(this.parent.latestValues)||IN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===vr.timestamp&&(l=!1),l)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;Mi(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,m=this.treeScale.y;Rz(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Tn());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(j3(this.prevProjectionDelta.x,this.projectionDelta.x),j3(this.prevProjectionDelta.y,this.projectionDelta.y)),Wd(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==m||!K3(this.projectionDelta.x,this.prevProjectionDelta.x)||!K3(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ju(),this.projectionDelta=Ju(),this.projectionDeltaWithTransform=Ju()}setAnimationOrigin(a,o=!1){const l=this.snapshot,h=l?l.latestValues:{},d={...this.latestValues},g=Ju();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=Tn(),y=l?l.source:void 0,x=this.layout?this.layout.source:void 0,b=y!==x,E=this.getStack(),S=!E||E.members.length<=1,T=!!(b&&!S&&this.options.crossfade===!0&&!this.path.some(lG));this.animationProgress=0;let R;this.mixTargetDelta=k=>{const N=k/1e3;J3(g.x,a.x,N),J3(g.y,a.y,N),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qd(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cG(this.relativeTarget,this.relativeTargetOrigin,m,N),R&&YH(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Tn()),Mi(R,this.relativeTarget)),b&&(this.animationValues=d,jH(d,h,this.latestValues,N,T,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,h;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(h=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||h.stop(),this.pendingAnimation&&(Ho(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=an.update(()=>{y1.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=fh(0)),this.currentAnimation=LH(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($H),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:h,latestValues:d}=a;if(!(!o||!l||!h)){if(this!==a&&this.layout&&h&&QN(this.options.animationType,this.layout.layoutBox,h.layoutBox)){l=this.target||Tn();const g=zr(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+g;const m=zr(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+m}Mi(o,l),Zu(o,d),Wd(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new XH),this.sharedNodes.get(a).add(o);const h=o.options.initialPromotionConfig;o.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const h=this.getStack();h&&h.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const h={};l.z&&Y_("z",a,h,this.animationValues);for(let d=0;d<q_.length;d++)Y_(`rotate${q_[d]}`,a,h,this.animationValues),Y_(`skew${q_[d]}`,a,h,this.animationValues);a.render();for(const d in h)a.setStaticValue(d,h[d]),this.animationValues&&(this.animationValues[d]=h[d]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=m1(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=m1(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!qc(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=h.animationValues||h.latestValues;this.applyTransformsToTarget();let g=KH(this.projectionDeltaWithTransform,this.treeScale,d);l&&(g=l(d,g)),a.transform=g;const{x:m,y}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,h.animationValues?a.opacity=h===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in vg){if(d[x]===void 0)continue;const{correct:b,applyTo:E,isCSSVariable:S}=vg[x],T=g==="none"?d[x]:b(d[x],h);if(E){const R=E.length;for(let k=0;k<R;k++)a[E[k]]=T}else S?this.options.visualElement.renderState.vars[x]=T:a[x]=T}this.options.layoutId&&(a.pointerEvents=h===this?m1(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach($3),this.root.sharedNodes.clear()}}}function ZH(n){n.updateLayout()}function JH(n){var e;const t=((e=n.resumeFrom)==null?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?Ni(g=>{const m=a?t.measuredBox[g]:t.layoutBox[g],y=zr(m);m.min=r[g].min,m.max=m.min+y}):QN(s,t.layoutBox,r)&&Ni(g=>{const m=a?t.measuredBox[g]:t.layoutBox[g],y=zr(r[g]);m.max=m.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+y)});const o=Ju();Wd(o,r,t.layoutBox);const l=Ju();a?Wd(l,n.applyTransform(i,!0),t.measuredBox):Wd(l,r,t.layoutBox);const h=!YN(o);let d=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:m,layout:y}=g;if(m&&y){const x=Tn();qd(x,t.layoutBox,m.layoutBox);const b=Tn();qd(b,r,y.layoutBox),XN(x,b)||(d=!0),g.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=x,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:h,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function tG(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function eG(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function nG(n){n.clearSnapshot()}function $3(n){n.clearMeasurements()}function Q3(n){n.isLayoutDirty=!1}function rG(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function Z3(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function iG(n){n.resolveTargetDelta()}function sG(n){n.calcProjection()}function aG(n){n.resetSkewAndRotation()}function oG(n){n.removeLeadSnapshot()}function J3(n,t,e){n.translate=hn(t.translate,0,e),n.scale=hn(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function tR(n,t,e,r){n.min=hn(t.min,e.min,r),n.max=hn(t.max,e.max,r)}function cG(n,t,e,r){tR(n.x,t.x,e.x,r),tR(n.y,t.y,e.y,r)}function lG(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const uG={duration:.45,ease:[.4,0,.1,1]},eR=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),nR=eR("applewebkit/")&&!eR("chrome/")?Math.round:Bi;function rR(n){n.min=nR(n.min),n.max=nR(n.max)}function hG(n){rR(n.x),rR(n.y)}function QN(n,t,e){return n==="position"||n==="preserve-aspect"&&!yH(X3(t),X3(e),.2)}function fG(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const dG=$N({attachResizeListener:(n,t)=>xg(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),X_={current:void 0},ZN=$N({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!X_.current){const n=new dG({});n.mount(window),n.setOptions({layoutScroll:!0}),X_.current=n}return X_.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),gG={pan:{Feature:MH},drag:{Feature:OH,ProjectionNode:ZN,MeasureLayout:GN}};function iR(n,t,e){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,s=r[i];s&&an.postRender(()=>s(t,jg(t)))}class pG extends Qo{mount(){const{current:t}=this.node;t&&(this.unmount=Uj(t,(e,r)=>(iR(this.node,r,"Start"),i=>iR(this.node,i,"End"))))}unmount(){}}class mG extends Qo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Bg(xg(this.node.current,"focus",()=>this.onFocus()),xg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function sR(n,t,e){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),s=r[i];s&&an.postRender(()=>s(t,jg(t)))}class yG extends Qo{mount(){const{current:t}=this.node;t&&(this.unmount=Gj(t,(e,r)=>(sR(this.node,r,"Start"),(i,{success:s})=>sR(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const C2=new WeakMap,K_=new WeakMap,vG=n=>{const t=C2.get(n.target);t&&t(n)},_G=n=>{n.forEach(vG)};function xG({root:n,...t}){const e=n||document;K_.has(e)||K_.set(e,{});const r=K_.get(e),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(_G,{root:n,...t})),r[i]}function wG(n,t,e){const r=xG(t);return C2.set(n,e),r.observe(n),()=>{C2.delete(n),r.unobserve(n)}}const bG={some:0,all:1};class EG extends Qo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:r,amount:i="some",once:s}=t,a={root:e?e.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:bG[i]},o=l=>{const{isIntersecting:h}=l;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:d,onViewportLeave:g}=this.node.getProps(),m=h?d:g;m&&m(l)};return wG(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(AG(t,e))&&this.startObserver()}unmount(){}}function AG({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const TG={inView:{Feature:EG},tap:{Feature:yG},focus:{Feature:mG},hover:{Feature:pG}},SG={layout:{ProjectionNode:ZN,MeasureLayout:GN}},CG={...hH,...TG,...gG,...SG},IG=Sz(CG,Fz);function RG({name:n,nutrients:t,kcal:e=null,onEdit:r,onDelete:i,unit:s="g",disableSwipe:a}){const[o,l]=un.useState(null),d=e??((y=[])=>{let x=0;return y.forEach(b=>{var S,T,R;const E=parseFloat(b.count||0);((S=b.type)==null?void 0:S.toLowerCase())==="fat"&&(x+=E*9),((T=b.type)==null?void 0:T.toLowerCase())==="protein"&&(x+=E*4),(R=b.type)!=null&&R.toLowerCase().includes("carbohydrate")&&(x+=E*4)}),Math.round(x)})(t),g=y=>y.charAt(0).toUpperCase()+y.slice(1),m=XF({onSwipedLeft:()=>{a||(l("left"),setTimeout(()=>{i&&i(),l(null)},300))},onSwipedRight:()=>{a||(l("right"),setTimeout(()=>{r&&r(),l(null)},300))},preventScrollOnSwipe:!0,trackMouse:!0});return P.jsxs("div",{...m,className:"position-relative mb-2",children:[o==="left"&&P.jsx("div",{className:"position-absolute top-50 start-100 translate-middle-y text-danger fw-bold",style:{zIndex:1},children:"🗑️"}),o==="right"&&P.jsx("div",{className:"position-absolute top-50 start-20 translate-middle-y text-warning fw-bold",style:{zIndex:1},children:"🖊️"}),P.jsxs(IG.div,{initial:{x:0},animate:{x:o==="left"?-100:o==="right"?100:0},transition:{duration:.75},className:"meal-card text-white p-3 rounded shadow-sm",style:{backgroundColor:"#00bfff17"},children:[P.jsx("p",{className:"MealCardText mb-1 fw-bold",children:n}),P.jsxs("p",{className:"MealCardText mb-1",children:["Calories: ",d," kcal"]}),t.filter(y=>{var x;return["protein","fat","carbohydrate","sugar","sugars","fibre","fiber","salt","caffeine"].includes((x=y.type)==null?void 0:x.toLowerCase())}).map((y,x)=>P.jsxs("p",{className:"MealCardText mb-1",children:[g(y.type),": ",y.total," ",s]},x))]})]})}const DG=()=>{};var aR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},OG=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const i=n[e++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[e++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[e++],a=n[e++],o=n[e++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[e++],a=n[e++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return t.join("")},tP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,l=i+2<n.length,h=l?n[i+2]:0,d=s>>2,g=(s&3)<<4|o>>4;let m=(o&15)<<2|h>>6,y=h&63;l||(y=64,a||(m=64)),r.push(e[d],e[g],e[m],e[y])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(JN(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):OG(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=e[n.charAt(i++)],o=i<n.length?e[n.charAt(i)]:0;++i;const h=i<n.length?e[n.charAt(i)]:64;++i;const g=i<n.length?e[n.charAt(i)]:64;if(++i,s==null||o==null||h==null||g==null)throw new MG;const m=s<<2|o>>4;if(r.push(m),h!==64){const y=o<<4&240|h>>2;if(r.push(y),g!==64){const x=h<<6&192|g;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MG extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NG=function(n){const t=JN(n);return tP.encodeByteArray(t,!0)},eP=function(n){return NG(n).replace(/\./g,"")},nP=function(n){try{return tP.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PG=()=>rP().__FIREBASE_DEFAULTS__,kG=()=>{if(typeof process>"u"||typeof aR>"u")return;const n=aR.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},LG=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&nP(n[1]);return t&&JSON.parse(t)},Lm=()=>{try{return DG()||PG()||kG()||LG()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},VG=n=>{var t,e;return(e=(t=Lm())==null?void 0:t.emulatorHosts)==null?void 0:e[n]},iP=()=>{var n;return(n=Lm())==null?void 0:n.config},sP=n=>{var t;return(t=Lm())==null?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BG{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aP(n){return(await fetch(n,{credentials:"include"})).ok}const Yd={};function FG(){const n={prod:[],emulator:[]};for(const t of Object.keys(Yd))Yd[t]?n.emulator.push(t):n.prod.push(t);return n}function UG(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let oR=!1;function jG(n,t){if(typeof window>"u"||typeof document>"u"||!Uh(window.location.host)||Yd[n]===t||Yd[n]||oR)return;Yd[n]=t;function e(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=FG().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{oR=!0,a()},m}function d(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=UG(r),y=e("text"),x=document.getElementById(y)||document.createElement("span"),b=e("learnmore"),E=document.getElementById(b)||document.createElement("a"),S=e("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;o(R),d(E,b);const k=h();l(T,S),R.append(T,x,E,k),document.body.appendChild(R)}s?(x.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zG(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qn())}function oP(){var t;const n=(t=Lm())==null?void 0:t.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HG(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function GG(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WG(){const n=Qn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function lP(){return!oP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uP(){return!oP()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Mb(){try{return typeof indexedDB=="object"}catch{return!1}}function hP(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var s;t(((s=i.error)==null?void 0:s.message)||"")}}catch(e){t(e)}})}function qG(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YG="FirebaseError";class as extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=YG,Object.setPrototypeOf(this,as.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nl.prototype.create)}}class Nl{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},i=`${this.service}/${t}`,s=this.errors[t],a=s?XG(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new as(i,o,r)}}function XG(n,t){return n.replace(KG,(e,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const KG=/\{\$([^}]+)}/g;function $G(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Wo(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const i of e){if(!r.includes(i))return!1;const s=n[i],a=t[i];if(cR(s)&&cR(a)){if(!Wo(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!e.includes(i))return!1;return!0}function cR(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(n){const t=[];for(const[e,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Sd(n){const t={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(s)}}),t}function Cd(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function QG(n,t){const e=new ZG(n,t);return e.subscribe.bind(e)}class ZG{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let i;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");JG(t,["next","error","complete"])?i=t:i={next:t,error:e,complete:r},i.next===void 0&&(i.next=$_),i.error===void 0&&(i.error=$_),i.complete===void 0&&(i.complete=$_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JG(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function $_(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tW=1e3,eW=2,nW=4*60*60*1e3,rW=.5;function lR(n,t=tW,e=eW){const r=t*Math.pow(e,n),i=Math.round(rW*r*(Math.random()-.5)*2);return Math.min(nW,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(n){return n&&n._delegate?n._delegate:n}class is{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new BG;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(aW(t))try{this.getOrInitializeService({instanceIdentifier:Yc})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Yc){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Yc){return this.instances.has(t)}getOptions(t=Yc){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const i of r)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sW(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Yc){return this.component?this.component.multipleInstances?t:Yc:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sW(n){return n===Yc?void 0:n}function aW(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new iW(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ue||(ue={}));const cW={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},lW=ue.INFO,uW={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},hW=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),i=uW[t];if(i)console[i](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Vm{constructor(t){this.name=t,this._logLevel=lW,this._logHandler=hW,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ue))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?cW[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...t),this._logHandler(this,ue.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...t),this._logHandler(this,ue.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...t),this._logHandler(this,ue.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...t),this._logHandler(this,ue.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...t),this._logHandler(this,ue.ERROR,...t)}}const fW=(n,t)=>t.some(e=>n instanceof e);let uR,hR;function dW(){return uR||(uR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gW(){return hR||(hR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fP=new WeakMap,I2=new WeakMap,dP=new WeakMap,Q_=new WeakMap,Nb=new WeakMap;function pW(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{e(Po(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&fP.set(e,n)}).catch(()=>{}),Nb.set(t,n),t}function mW(n){if(I2.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{e(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});I2.set(n,t)}let R2={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return I2.get(n);if(t==="objectStoreNames")return n.objectStoreNames||dP.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Po(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function yW(n){R2=n(R2)}function vW(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(Z_(this),t,...e);return dP.set(r,t.sort?t.sort():[t]),Po(r)}:gW().includes(n)?function(...t){return n.apply(Z_(this),t),Po(fP.get(this))}:function(...t){return Po(n.apply(Z_(this),t))}}function _W(n){return typeof n=="function"?vW(n):(n instanceof IDBTransaction&&mW(n),fW(n,dW())?new Proxy(n,R2):n)}function Po(n){if(n instanceof IDBRequest)return pW(n);if(Q_.has(n))return Q_.get(n);const t=_W(n);return t!==n&&(Q_.set(n,t),Nb.set(t,n)),t}const Z_=n=>Nb.get(n);function xW(n,t,{blocked:e,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,t),o=Po(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Po(a.result),l.oldVersion,l.newVersion,Po(a.transaction),l)}),e&&a.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),o}const wW=["get","getKey","getAll","getAllKeys","count"],bW=["put","add","delete","clear"],J_=new Map;function fR(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(J_.get(t))return J_.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=bW.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||wW.includes(e)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(o.shift())),(await Promise.all([h[e](...o),i&&l.done]))[0]};return J_.set(t,s),s}yW(n=>({...n,get:(t,e,r)=>fR(t,e)||n.get(t,e,r),has:(t,e)=>!!fR(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(AW(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function AW(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const D2="@firebase/app",dR="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new Vm("@firebase/app"),TW="@firebase/app-compat",SW="@firebase/analytics-compat",CW="@firebase/analytics",IW="@firebase/app-check-compat",RW="@firebase/app-check",DW="@firebase/auth",OW="@firebase/auth-compat",MW="@firebase/database",NW="@firebase/data-connect",PW="@firebase/database-compat",kW="@firebase/functions",LW="@firebase/functions-compat",VW="@firebase/installations",BW="@firebase/installations-compat",FW="@firebase/messaging",UW="@firebase/messaging-compat",jW="@firebase/performance",zW="@firebase/performance-compat",HW="@firebase/remote-config",GW="@firebase/remote-config-compat",WW="@firebase/storage",qW="@firebase/storage-compat",YW="@firebase/firestore",XW="@firebase/ai",KW="@firebase/firestore-compat",$W="firebase",QW="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="[DEFAULT]",ZW={[D2]:"fire-core",[TW]:"fire-core-compat",[CW]:"fire-analytics",[SW]:"fire-analytics-compat",[RW]:"fire-app-check",[IW]:"fire-app-check-compat",[DW]:"fire-auth",[OW]:"fire-auth-compat",[MW]:"fire-rtdb",[NW]:"fire-data-connect",[PW]:"fire-rtdb-compat",[kW]:"fire-fn",[LW]:"fire-fn-compat",[VW]:"fire-iid",[BW]:"fire-iid-compat",[FW]:"fire-fcm",[UW]:"fire-fcm-compat",[jW]:"fire-perf",[zW]:"fire-perf-compat",[HW]:"fire-rc",[GW]:"fire-rc-compat",[WW]:"fire-gcs",[qW]:"fire-gcs-compat",[YW]:"fire-fst",[KW]:"fire-fst-compat",[XW]:"fire-vertex","fire-js":"fire-js",[$W]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=new Map,JW=new Map,M2=new Map;function gR(n,t){try{n.container.addComponent(t)}catch(e){Da.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Gs(n){const t=n.name;if(M2.has(t))return Da.debug(`There were multiple attempts to register component ${t}.`),!1;M2.set(t,n);for(const e of Q1.values())gR(e,n);for(const e of JW.values())gR(e,n);return!0}function Pl(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function gi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ko=new Nl("app","Firebase",tq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eq{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ko.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=QW;function gP(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r={name:O2,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!="string"||!i)throw ko.create("bad-app-name",{appName:String(i)});if(e||(e=iP()),!e)throw ko.create("no-options");const s=Q1.get(i);if(s){if(Wo(e,s.options)&&Wo(r,s.config))return s;throw ko.create("duplicate-app",{appName:i})}const a=new oW(i);for(const l of M2.values())a.addComponent(l);const o=new eq(e,r,a);return Q1.set(i,o),o}function pP(n=O2){const t=Q1.get(n);if(!t&&n===O2&&iP())return gP();if(!t)throw ko.create("no-app",{appName:n});return t}function Fi(n,t,e){let r=ZW[n]??n;e&&(r+=`-${e}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${t}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Da.warn(a.join(" "));return}Gs(new is(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nq="firebase-heartbeat-database",rq=1,wg="firebase-heartbeat-store";let tx=null;function mP(){return tx||(tx=xW(nq,rq,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(wg)}catch(e){console.warn(e)}}}}).catch(n=>{throw ko.create("idb-open",{originalErrorMessage:n.message})})),tx}async function iq(n){try{const e=(await mP()).transaction(wg),r=await e.objectStore(wg).get(yP(n));return await e.done,r}catch(t){if(t instanceof as)Da.warn(t.message);else{const e=ko.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Da.warn(e.message)}}}async function pR(n,t){try{const r=(await mP()).transaction(wg,"readwrite");await r.objectStore(wg).put(t,yP(n)),await r.done}catch(e){if(e instanceof as)Da.warn(e.message);else{const r=ko.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Da.warn(r.message)}}}function yP(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq=1024,aq=30;class oq{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new lq(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=mR();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>aq){const a=uq(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Da.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=mR(),{heartbeatsToSend:r,unsentEntries:i}=cq(this._heartbeatsCache.heartbeats),s=eP(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Da.warn(e),""}}}function mR(){return new Date().toISOString().substring(0,10)}function cq(n,t=sq){const e=[];let r=n.slice();for(const i of n){const s=e.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),yR(e)>t){s.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),yR(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class lq{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mb()?hP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await iq(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return pR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return pR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function yR(n){return eP(JSON.stringify({version:2,heartbeats:n})).length}function uq(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hq(n){Gs(new is("platform-logger",t=>new EW(t),"PRIVATE")),Gs(new is("heartbeat",t=>new oq(t),"PRIVATE")),Fi(D2,dR,n),Fi(D2,dR,"esm2020"),Fi("fire-js","")}hq("");var fq="firebase",dq="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fi(fq,dq,"app");const gq=(n,t)=>t.some(e=>n instanceof e);let vR,_R;function pq(){return vR||(vR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mq(){return _R||(_R=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vP=new WeakMap,N2=new WeakMap,_P=new WeakMap,ex=new WeakMap,Pb=new WeakMap;function yq(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{e(Lo(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&vP.set(e,n)}).catch(()=>{}),Pb.set(t,n),t}function vq(n){if(N2.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{e(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});N2.set(n,t)}let P2={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return N2.get(n);if(t==="objectStoreNames")return n.objectStoreNames||_P.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Lo(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function _q(n){P2=n(P2)}function xq(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(nx(this),t,...e);return _P.set(r,t.sort?t.sort():[t]),Lo(r)}:mq().includes(n)?function(...t){return n.apply(nx(this),t),Lo(vP.get(this))}:function(...t){return Lo(n.apply(nx(this),t))}}function wq(n){return typeof n=="function"?xq(n):(n instanceof IDBTransaction&&vq(n),gq(n,pq())?new Proxy(n,P2):n)}function Lo(n){if(n instanceof IDBRequest)return yq(n);if(ex.has(n))return ex.get(n);const t=wq(n);return t!==n&&(ex.set(n,t),Pb.set(t,n)),t}const nx=n=>Pb.get(n);function bq(n,t,{blocked:e,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,t),o=Lo(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Lo(a.result),l.oldVersion,l.newVersion,Lo(a.transaction),l)}),e&&a.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),o}const Eq=["get","getKey","getAll","getAllKeys","count"],Aq=["put","add","delete","clear"],rx=new Map;function xR(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(rx.get(t))return rx.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=Aq.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Eq.includes(e)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(o.shift())),(await Promise.all([h[e](...o),i&&l.done]))[0]};return rx.set(t,s),s}_q(n=>({...n,get:(t,e,r)=>xR(t,e)||n.get(t,e,r),has:(t,e)=>!!xR(t,e)||n.has(t,e)}));const xP="@firebase/installations",kb="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=1e4,bP=`w:${kb}`,EP="FIS_v2",Tq="https://firebaseinstallations.googleapis.com/v1",Sq=60*60*1e3,Cq="installations",Iq="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rq={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},xl=new Nl(Cq,Iq,Rq);function AP(n){return n instanceof as&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP({projectId:n}){return`${Tq}/projects/${n}/installations`}function SP(n){return{token:n.token,requestStatus:2,expiresIn:Oq(n.expiresIn),creationTime:Date.now()}}async function CP(n,t){const r=(await t.json()).error;return xl.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function IP({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Dq(n,{refreshToken:t}){const e=IP(n);return e.append("Authorization",Mq(t)),e}async function RP(n){const t=await n();return t.status>=500&&t.status<600?n():t}function Oq(n){return Number(n.replace("s","000"))}function Mq(n){return`${EP} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nq({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const r=TP(n),i=IP(n),s=t.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={fid:e,authVersion:EP,appId:n.appId,sdkVersion:bP},o={method:"POST",headers:i,body:JSON.stringify(a)},l=await RP(()=>fetch(r,o));if(l.ok){const h=await l.json();return{fid:h.fid||e,registrationStatus:2,refreshToken:h.refreshToken,authToken:SP(h.authToken)}}else throw await CP("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kq=/^[cdef][\w-]{21}$/,k2="";function Lq(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=Vq(n);return kq.test(e)?e:k2}catch{return k2}}function Vq(n){return Pq(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=new Map;function MP(n,t){const e=Bm(n);NP(e,t),Bq(e,t)}function NP(n,t){const e=OP.get(n);if(e)for(const r of e)r(t)}function Bq(n,t){const e=Fq();e&&e.postMessage({key:n,fid:t}),Uq()}let al=null;function Fq(){return!al&&"BroadcastChannel"in self&&(al=new BroadcastChannel("[Firebase] FID Change"),al.onmessage=n=>{NP(n.data.key,n.data.fid)}),al}function Uq(){OP.size===0&&al&&(al.close(),al=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jq="firebase-installations-database",zq=1,wl="firebase-installations-store";let ix=null;function Lb(){return ix||(ix=bq(jq,zq,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(wl)}}})),ix}async function Z1(n,t){const e=Bm(n),i=(await Lb()).transaction(wl,"readwrite"),s=i.objectStore(wl),a=await s.get(e);return await s.put(t,e),await i.done,(!a||a.fid!==t.fid)&&MP(n,t.fid),t}async function PP(n){const t=Bm(n),r=(await Lb()).transaction(wl,"readwrite");await r.objectStore(wl).delete(t),await r.done}async function Fm(n,t){const e=Bm(n),i=(await Lb()).transaction(wl,"readwrite"),s=i.objectStore(wl),a=await s.get(e),o=t(a);return o===void 0?await s.delete(e):await s.put(o,e),await i.done,o&&(!a||a.fid!==o.fid)&&MP(n,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(n){let t;const e=await Fm(n.appConfig,r=>{const i=Hq(r),s=Gq(n,i);return t=s.registrationPromise,s.installationEntry});return e.fid===k2?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function Hq(n){const t=n||{fid:Lq(),registrationStatus:0};return kP(t)}function Gq(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(xl.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=Wq(n,e);return{installationEntry:e,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:qq(n)}:{installationEntry:t}}async function Wq(n,t){try{const e=await Nq(n,t);return Z1(n.appConfig,e)}catch(e){throw AP(e)&&e.customData.serverCode===409?await PP(n.appConfig):await Z1(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function qq(n){let t=await wR(n.appConfig);for(;t.registrationStatus===1;)await DP(100),t=await wR(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:r}=await Vb(n);return r||e}return t}function wR(n){return Fm(n,t=>{if(!t)throw xl.create("installation-not-found");return kP(t)})}function kP(n){return Yq(n)?{fid:n.fid,registrationStatus:0}:n}function Yq(n){return n.registrationStatus===1&&n.registrationTime+wP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xq({appConfig:n,heartbeatServiceProvider:t},e){const r=Kq(n,e),i=Dq(n,e),s=t.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={installation:{sdkVersion:bP,appId:n.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},l=await RP(()=>fetch(r,o));if(l.ok){const h=await l.json();return SP(h)}else throw await CP("Generate Auth Token",l)}function Kq(n,{fid:t}){return`${TP(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(n,t=!1){let e;const r=await Fm(n.appConfig,s=>{if(!LP(s))throw xl.create("not-registered");const a=s.authToken;if(!t&&Zq(a))return s;if(a.requestStatus===1)return e=$q(n,t),s;{if(!navigator.onLine)throw xl.create("app-offline");const o=tY(s);return e=Qq(n,o),o}});return e?await e:r.authToken}async function $q(n,t){let e=await bR(n.appConfig);for(;e.authToken.requestStatus===1;)await DP(100),e=await bR(n.appConfig);const r=e.authToken;return r.requestStatus===0?Bb(n,t):r}function bR(n){return Fm(n,t=>{if(!LP(t))throw xl.create("not-registered");const e=t.authToken;return eY(e)?{...t,authToken:{requestStatus:0}}:t})}async function Qq(n,t){try{const e=await Xq(n,t),r={...t,authToken:e};return await Z1(n.appConfig,r),e}catch(e){if(AP(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await PP(n.appConfig);else{const r={...t,authToken:{requestStatus:0}};await Z1(n.appConfig,r)}throw e}}function LP(n){return n!==void 0&&n.registrationStatus===2}function Zq(n){return n.requestStatus===2&&!Jq(n)}function Jq(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+Sq}function tY(n){const t={requestStatus:1,requestTime:Date.now()};return{...n,authToken:t}}function eY(n){return n.requestStatus===1&&n.requestTime+wP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nY(n){const t=n,{installationEntry:e,registrationPromise:r}=await Vb(t);return r?r.catch(console.error):Bb(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rY(n,t=!1){const e=n;return await iY(e),(await Bb(e,t)).token}async function iY(n){const{registrationPromise:t}=await Vb(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sY(n){if(!n||!n.options)throw sx("App Configuration");if(!n.name)throw sx("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw sx(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function sx(n){return xl.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="installations",aY="installations-internal",oY=n=>{const t=n.getProvider("app").getImmediate(),e=sY(t),r=Pl(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},cY=n=>{const t=n.getProvider("app").getImmediate(),e=Pl(t,VP).getImmediate();return{getId:()=>nY(e),getToken:i=>rY(e,i)}};function lY(){Gs(new is(VP,oY,"PUBLIC")),Gs(new is(aY,cY,"PRIVATE"))}lY();Fi(xP,kb);Fi(xP,kb,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="analytics",uY="firebase_id",hY="origin",fY=60*1e3,dY="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Fb="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new Vm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gY={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},mi=new Nl("analytics","Analytics",gY);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pY(n){if(!n.startsWith(Fb)){const t=mi.create("invalid-gtag-resource",{gtagURL:n});return ei.warn(t.message),""}return n}function BP(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function mY(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function yY(n,t){const e=mY("firebase-js-sdk-policy",{createScriptURL:pY}),r=document.createElement("script"),i=`${Fb}?l=${n}&id=${t}`;r.src=e?e==null?void 0:e.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function vY(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function _Y(n,t,e,r,i,s){const a=r[i];try{if(a)await t[a];else{const l=(await BP(e)).find(h=>h.measurementId===i);l&&await t[l.appId]}}catch(o){ei.error(o)}n("config",i,s)}async function xY(n,t,e,r,i){try{let s=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const o=await BP(e);for(const l of a){const h=o.find(g=>g.measurementId===l),d=h&&t[h.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(t)),await Promise.all(s),n("event",r,i||{})}catch(s){ei.error(s)}}function wY(n,t,e,r){async function i(s,...a){try{if(s==="event"){const[o,l]=a;await xY(n,t,e,o,l)}else if(s==="config"){const[o,l]=a;await _Y(n,t,e,r,o,l)}else if(s==="consent"){const[o,l]=a;n("consent",o,l)}else if(s==="get"){const[o,l,h]=a;n("get",o,l,h)}else if(s==="set"){const[o]=a;n("set",o)}else n(s,...a)}catch(o){ei.error(o)}}return i}function bY(n,t,e,r,i){let s=function(...a){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=wY(s,n,t,e),{gtagCore:s,wrappedGtag:window[i]}}function EY(n){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(Fb)&&e.src.includes(n))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AY=30,TY=1e3;class SY{constructor(t={},e=TY){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const FP=new SY;function CY(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function IY(n){var a;const{appId:t,apiKey:e}=n,r={method:"GET",headers:CY(e)},i=dY.replace("{app-id}",t),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let o="";try{const l=await s.json();(a=l.error)!=null&&a.message&&(o=l.error.message)}catch{}throw mi.create("config-fetch-failed",{httpStatus:s.status,responseMessage:o})}return s.json()}async function RY(n,t=FP,e){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw mi.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw mi.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new MY;return setTimeout(async()=>{o.abort()},fY),UP({appId:r,apiKey:i,measurementId:s},a,o,t)}async function UP(n,{throttleEndTimeMillis:t,backoffCount:e},r,i=FP){var o;const{appId:s,measurementId:a}=n;try{await DY(r,t)}catch(l){if(a)return ei.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:a};throw l}try{const l=await IY(n);return i.deleteThrottleMetadata(s),l}catch(l){const h=l;if(!OY(h)){if(i.deleteThrottleMetadata(s),a)return ei.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:s,measurementId:a};throw l}const d=Number((o=h==null?void 0:h.customData)==null?void 0:o.httpStatus)===503?lR(e,i.intervalMillis,AY):lR(e,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+d,backoffCount:e+1};return i.setThrottleMetadata(s,g),ei.debug(`Calling attemptFetch again in ${d} millis`),UP(n,g,r,i)}}function DY(n,t){return new Promise((e,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(e,i);n.addEventListener(()=>{clearTimeout(s),r(mi.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function OY(n){if(!(n instanceof as)||!n.customData)return!1;const t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}class MY{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function NY(n,t,e,r,i){if(i&&i.global){n("event",e,r);return}else{const s=await t,a={...r,send_to:s};n("event",e,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PY(){if(Mb())try{await hP()}catch(n){return ei.warn(mi.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return ei.warn(mi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function kY(n,t,e,r,i,s,a){const o=RY(n);o.then(m=>{e[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&ei.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>ei.error(m)),t.push(o);const l=PY().then(m=>{if(m)return r.getId()}),[h,d]=await Promise.all([o,l]);EY(s)||yY(s,h.measurementId),i("js",new Date);const g=(a==null?void 0:a.config)??{};return g[hY]="firebase",g.update=!0,d!=null&&(g[uY]=d),i("config",h.measurementId,g),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LY{constructor(t){this.app=t}_delete(){return delete Xd[this.app.options.appId],Promise.resolve()}}let Xd={},ER=[];const AR={};let ax="dataLayer",VY="gtag",TR,jP,SR=!1;function BY(){const n=[];if(cP()&&n.push("This is a browser extension environment."),qG()||n.push("Cookies are not available."),n.length>0){const t=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),e=mi.create("invalid-analytics-context",{errorInfo:t});ei.warn(e.message)}}function FY(n,t,e){BY();const r=n.options.appId;if(!r)throw mi.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ei.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw mi.create("no-api-key");if(Xd[r]!=null)throw mi.create("already-exists",{id:r});if(!SR){vY(ax);const{wrappedGtag:s,gtagCore:a}=bY(Xd,ER,AR,ax,VY);jP=s,TR=a,SR=!0}return Xd[r]=kY(n,ER,AR,t,TR,ax,e),new LY(n)}function UY(n=pP()){n=_n(n);const t=Pl(n,J1);return t.isInitialized()?t.getImmediate():jY(n)}function jY(n,t={}){const e=Pl(n,J1);if(e.isInitialized()){const i=e.getImmediate();if(Wo(t,e.getOptions()))return i;throw mi.create("already-initialized")}return e.initialize({options:t})}function zY(n,t,e,r){n=_n(n),NY(jP,Xd[n.app.options.appId],t,e,r).catch(i=>ei.error(i))}const CR="@firebase/analytics",IR="0.10.18";function HY(){Gs(new is(J1,(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return FY(r,i,e)},"PUBLIC")),Gs(new is("analytics-internal",n,"PRIVATE")),Fi(CR,IR),Fi(CR,IR,"esm2020");function n(t){try{const e=t.getProvider(J1).getImmediate();return{logEvent:(r,i,s)=>zY(e,r,i,s)}}catch(e){throw mi.create("interop-component-reg-failed",{reason:e})}}}HY();function zP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GY=zP,HP=new Nl("auth","Firebase",zP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm=new Vm("@firebase/auth");function WY(n,...t){tm.logLevel<=ue.WARN&&tm.warn(`Auth (${jh}): ${n}`,...t)}function v1(n,...t){tm.logLevel<=ue.ERROR&&tm.error(`Auth (${jh}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(n,...t){throw Ub(n,...t)}function Bs(n,...t){return Ub(n,...t)}function GP(n,t,e){const r={...GY(),[t]:e};return new Nl("auth","Firebase",r).create(t,{appName:n.name})}function Fs(n){return GP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ub(n,...t){if(typeof n!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(e,...r)}return HP.create(n,...t)}function qt(n,t,...e){if(!n)throw Ub(t,...e)}function Ta(n){const t="INTERNAL ASSERTION FAILED: "+n;throw v1(t),new Error(t)}function Oa(n,t){n||Ta(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function qY(){return RR()==="http:"||RR()==="https:"}function RR(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qY()||cP()||"connection"in navigator)?navigator.onLine:!0}function XY(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(t,e){this.shortDelay=t,this.longDelay=e,Oa(e>t,"Short delay should be less than long delay!"),this.isMobile=zG()||GG()}get(){return YY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(n,t){Oa(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ta("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ta("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ta("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Y=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QY=new Hg(3e4,6e4);function Zo(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Pa(n,t,e,r,i={}){return qP(n,i,async()=>{let s={},a={};r&&(t==="GET"?a=r:s={body:JSON.stringify(r)});const o=zg({key:n.config.apiKey,...a}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const h={method:t,headers:l,...s};return HG()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Uh(n.emulatorConfig.host)&&(h.credentials="include"),WP.fetch()(await YP(n,n.config.apiHost,e,o),h)})}async function qP(n,t,e){n._canInitEmulator=!1;const r={...KY,...t};try{const i=new JY(n),s=await Promise.race([e(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Gp(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,h]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gp(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Gp(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw Gp(n,"user-disabled",a);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw GP(n,d,h);ss(n,d)}}catch(i){if(i instanceof as)throw i;ss(n,"network-request-failed",{message:String(i)})}}async function Gg(n,t,e,r,i={}){const s=await Pa(n,t,e,r,i);return"mfaPendingCredential"in s&&ss(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function YP(n,t,e,r){const i=`${t}${e}?${r}`,s=n,a=s.config.emulator?jb(n.config,i):`${n.config.apiScheme}://${i}`;return $Y.includes(e)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function ZY(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JY{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(Bs(this.auth,"network-request-failed")),QY.get())})}}function Gp(n,t,e){const r={appName:n.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const i=Bs(n,t,r);return i.customData._tokenResponse=e,i}function DR(n){return n!==void 0&&n.enterprise!==void 0}class tX{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return ZY(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eX(n,t){return Pa(n,"GET","/v2/recaptchaConfig",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nX(n,t){return Pa(n,"POST","/v1/accounts:delete",t)}async function em(n,t){return Pa(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function rX(n,t=!1){const e=_n(n),r=await e.getIdToken(t),i=zb(r);qt(i&&i.exp&&i.auth_time&&i.iat,e.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Kd(ox(i.auth_time)),issuedAtTime:Kd(ox(i.iat)),expirationTime:Kd(ox(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ox(n){return Number(n)*1e3}function zb(n){const[t,e,r]=n.split(".");if(t===void 0||e===void 0||r===void 0)return v1("JWT malformed, contained fewer than 3 sections"),null;try{const i=nP(e);return i?JSON.parse(i):(v1("Failed to decode base64 JWT payload"),null)}catch(i){return v1("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function OR(n){const t=zb(n);return qt(t,"internal-error"),qt(typeof t.exp<"u","internal-error"),qt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gh(n,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof as&&iX(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function iX({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sX{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kd(this.lastLoginAt),this.creationTime=Kd(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nm(n){var g;const t=n.auth,e=await n.getIdToken(),r=await gh(n,em(t,{idToken:e}));qt(r==null?void 0:r.users.length,t,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=(g=i.providerUserInfo)!=null&&g.length?XP(i.providerUserInfo):[],a=oX(n.providerData,s),o=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!(a!=null&&a.length),h=o?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new V2(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,d)}async function aX(n){const t=_n(n);await nm(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function oX(n,t){return[...n.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function XP(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cX(n,t){const e=await qP(n,{},async()=>{const r=zg({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await YP(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return n.emulatorConfig&&Uh(n.emulatorConfig.host)&&(l.credentials="include"),WP.fetch()(a,l)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function lX(n,t){return Pa(n,"POST","/v2/accounts:revokeToken",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){qt(t.idToken,"internal-error"),qt(typeof t.idToken<"u","internal-error"),qt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):OR(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){qt(t.length!==0,"internal-error");const e=OR(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(qt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:i,expiresIn:s}=await cX(t,e);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:i,expirationTime:s}=e,a=new sh;return r&&(qt(typeof r=="string","internal-error",{appName:t}),a.refreshToken=r),i&&(qt(typeof i=="string","internal-error",{appName:t}),a.accessToken=i),s&&(qt(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new sh,this.toJSON())}_performRefresh(){return Ta("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(n,t){qt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class ns{constructor({uid:t,auth:e,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new sX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new V2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await gh(this,this.stsTokenManager.getToken(this.auth,t));return qt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return rX(this,t)}reload(){return aX(this)}_assign(t){this!==t&&(qt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new ns({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){qt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await nm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gi(this.auth.app))return Promise.reject(Fs(this.auth));const t=await this.getIdToken();return await gh(this,nX(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const r=e.displayName??void 0,i=e.email??void 0,s=e.phoneNumber??void 0,a=e.photoURL??void 0,o=e.tenantId??void 0,l=e._redirectEventId??void 0,h=e.createdAt??void 0,d=e.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:y,providerData:x,stsTokenManager:b}=e;qt(g&&b,t,"internal-error");const E=sh.fromJSON(this.name,b);qt(typeof g=="string",t,"internal-error"),fo(r,t.name),fo(i,t.name),qt(typeof m=="boolean",t,"internal-error"),qt(typeof y=="boolean",t,"internal-error"),fo(s,t.name),fo(a,t.name),fo(o,t.name),fo(l,t.name),fo(h,t.name),fo(d,t.name);const S=new ns({uid:g,auth:t,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:E,createdAt:h,lastLoginAt:d});return x&&Array.isArray(x)&&(S.providerData=x.map(T=>({...T}))),l&&(S._redirectEventId=l),S}static async _fromIdTokenResponse(t,e,r=!1){const i=new sh;i.updateFromServerResponse(e);const s=new ns({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await nm(s),s}static async _fromGetAccountInfoResponse(t,e,r){const i=e.users[0];qt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?XP(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new sh;o.updateFromIdToken(r);const l=new ns({uid:i.localId,auth:t,stsTokenManager:o,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new V2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=new Map;function Sa(n){Oa(n instanceof Function,"Expected a class definition");let t=MR.get(n);return t?(Oa(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,MR.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}KP.type="NONE";const NR=KP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(n,t,e){return`firebase:${n}:${t}:${e}`}class ah{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=_1(this.userKey,i.apiKey,s),this.fullPersistenceKey=_1("persistence",i.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await em(this.auth,{idToken:t}).catch(()=>{});return e?ns._fromGetAccountInfoResponse(this.auth,e,t):null}return ns._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new ah(Sa(NR),t,r);const i=(await Promise.all(e.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Sa(NR);const a=_1(r,t.config.apiKey,t.name);let o=null;for(const h of e)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await em(t,{idToken:d}).catch(()=>{});if(!m)break;g=await ns._fromGetAccountInfoResponse(t,m,d)}else g=ns._fromJSON(t,d);h!==s&&(o=g),s=h;break}}catch{}const l=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ah(s,t,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(e.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new ah(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(JP(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($P(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(e8(t))return"Blackberry";if(n8(t))return"Webos";if(QP(t))return"Safari";if((t.includes("chrome/")||ZP(t))&&!t.includes("edge/"))return"Chrome";if(t8(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $P(n=Qn()){return/firefox\//i.test(n)}function QP(n=Qn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ZP(n=Qn()){return/crios\//i.test(n)}function JP(n=Qn()){return/iemobile/i.test(n)}function t8(n=Qn()){return/android/i.test(n)}function e8(n=Qn()){return/blackberry/i.test(n)}function n8(n=Qn()){return/webos/i.test(n)}function Hb(n=Qn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function uX(n=Qn()){var t;return Hb(n)&&!!((t=window.navigator)!=null&&t.standalone)}function hX(){return WG()&&document.documentMode===10}function r8(n=Qn()){return Hb(n)||t8(n)||n8(n)||e8(n)||/windows phone/i.test(n)||JP(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(n,t=[]){let e;switch(n){case"Browser":e=PR(Qn());break;case"Worker":e=`${PR(Qn())}-${n}`;break;default:e=n}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${jh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fX{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=s=>new Promise((a,o)=>{try{const l=t(s);a(l)}catch(l){o(l)}});r.onAbort=e,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const i of e)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dX(n,t={}){return Pa(n,"GET","/v2/passwordPolicy",Zo(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gX=6;class pX{constructor(t){var r;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??gX,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=t.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mX{constructor(t,e,r,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kR(this),this.idTokenSubscription=new kR(this),this.beforeStateQueue=new fX(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Sa(e)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ah.create(this,t),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await em(this,{idToken:t}),r=await ns._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(gi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let r=e,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(t);(!a||a===o)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return qt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await nm(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=XY()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(gi(this.app))return Promise.reject(Fs(this));const e=t?_n(t):null;return e&&qt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&qt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return gi(this.app)?Promise.reject(Fs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return gi(this.app)?Promise.reject(Fs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sa(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await dX(this),e=new pX(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Nl("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await lX(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Sa(t)||this._popupRedirectResolver;qt(e,this,"argument-error"),this.redirectPersistenceManager=await ah.create(this,[Sa(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,i){if(this._deleted)return()=>{};const s=typeof e=="function"?e:e.next.bind(e);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(qt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof e=="function"){const l=t.addObserver(e,r,i);return()=>{a=!0,l()}}else{const l=t.addObserver(e);return()=>{a=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return qt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=i8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&WY(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function kl(n){return _n(n)}class kR{constructor(t){this.auth=t,this.observer=null,this.addObserver=QG(e=>this.observer=e)}get next(){return qt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yX(n){Um=n}function s8(n){return Um.loadJS(n)}function vX(){return Um.recaptchaEnterpriseScript}function _X(){return Um.gapiScript}function xX(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class wX{constructor(){this.enterprise=new bX}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class bX{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const EX="recaptcha-enterprise",a8="NO_RECAPTCHA";class AX{constructor(t){this.type=EX,this.auth=kl(t)}async verify(t="verify",e=!1){async function r(s){if(!e){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{eX(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const h=new tX(l);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;DR(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:t}).then(h=>{a(h)}).catch(()=>{a(a8)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wX().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(o=>{if(!e&&DR(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=vX();l.length!==0&&(l+=o),s8(l).then(()=>{i(o,s,a)}).catch(h=>{a(h)})}}).catch(o=>{a(o)})})}}async function LR(n,t,e,r=!1,i=!1){const s=new AX(n);let a;if(i)a=a8;else try{a=await s.verify(e)}catch{a=await s.verify(e,!0)}const o={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,h=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function B2(n,t,e,r,i){var s;if((s=n._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await LR(n,t,e,e==="getOobCode");return r(n,a)}else return r(n,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await LR(n,t,e,e==="getOobCode");return r(n,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TX(n,t){const e=Pl(n,"auth");if(e.isInitialized()){const i=e.getImmediate(),s=e.getOptions();if(Wo(s,t??{}))return i;ss(i,"already-initialized")}return e.initialize({options:t})}function SX(n,t){const e=(t==null?void 0:t.persistence)||[],r=(Array.isArray(e)?e:[e]).map(Sa);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function CX(n,t,e){const r=kl(n);qt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=o8(t),{host:a,port:o}=IX(t),l=o===null?"":`:${o}`,h={url:`${s}//${a}${l}/`},d=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){qt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),qt(Wo(h,r.config.emulator)&&Wo(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Uh(a)?(aP(`${s}//${a}${l}`),jG("Auth",!0)):RX()}function o8(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function IX(n){const t=o8(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:VR(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:VR(a)}}}function VR(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function RX(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Ta("not implemented")}_getIdTokenResponse(t){return Ta("not implemented")}_linkToIdToken(t,e){return Ta("not implemented")}_getReauthenticationResolver(t){return Ta("not implemented")}}async function DX(n,t){return Pa(n,"POST","/v1/accounts:update",t)}async function OX(n,t){return Pa(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MX(n,t){return Gg(n,"POST","/v1/accounts:signInWithPassword",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NX(n,t){return Gg(n,"POST","/v1/accounts:signInWithEmailLink",Zo(n,t))}async function PX(n,t){return Gg(n,"POST","/v1/accounts:signInWithEmailLink",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg extends Gb{constructor(t,e,r,i=null){super("password",r),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new bg(t,e,"password")}static _fromEmailAndCode(t,e,r=null){return new bg(t,e,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return B2(t,e,"signInWithPassword",MX);case"emailLink":return NX(t,{email:this._email,oobCode:this._password});default:ss(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const r={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return B2(t,r,"signUpPassword",OX);case"emailLink":return PX(t,{idToken:e,email:this._email,oobCode:this._password});default:ss(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(n,t){return Gg(n,"POST","/v1/accounts:signInWithIdp",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kX="http://localhost";class bl extends Gb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new bl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ss("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i,...s}=e;if(!r||!i)return null;const a=new bl(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const e=this.buildRequest();return oh(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,oh(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,oh(t,e)}buildRequest(){const t={requestUri:kX,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=zg(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LX(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VX(n){const t=Sd(Cd(n)).link,e=t?Sd(Cd(t)).deep_link_id:null,r=Sd(Cd(n)).deep_link_id;return(r?Sd(Cd(r)).link:null)||r||e||t||n}class Wb{constructor(t){const e=Sd(Cd(t)),r=e.apiKey??null,i=e.oobCode??null,s=LX(e.mode??null);qt(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=VX(t);try{return new Wb(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(){this.providerId=Ll.PROVIDER_ID}static credential(t,e){return bg._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const r=Wb.parseLink(e);return qt(r,"argument-error"),bg._fromEmailAndCode(t,r.code,r.tenantId)}}Ll.PROVIDER_ID="password";Ll.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ll.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends c8{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends Wg{constructor(){super("facebook.com")}static credential(t){return bl._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Eo.credentialFromTaggedObject(t)}static credentialFromError(t){return Eo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Eo.credential(t.oauthAccessToken)}catch{return null}}}Eo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Eo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends Wg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return bl._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Ao.credentialFromTaggedObject(t)}static credentialFromError(t){return Ao.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return Ao.credential(e,r)}catch{return null}}}Ao.GOOGLE_SIGN_IN_METHOD="google.com";Ao.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends Wg{constructor(){super("github.com")}static credential(t){return bl._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return To.credentialFromTaggedObject(t)}static credentialFromError(t){return To.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return To.credential(t.oauthAccessToken)}catch{return null}}}To.GITHUB_SIGN_IN_METHOD="github.com";To.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends Wg{constructor(){super("twitter.com")}static credential(t,e){return bl._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return So.credentialFromTaggedObject(t)}static credentialFromError(t){return So.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return So.credential(e,r)}catch{return null}}}So.TWITTER_SIGN_IN_METHOD="twitter.com";So.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BX(n,t){return Gg(n,"POST","/v1/accounts:signUp",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,i=!1){const s=await ns._fromIdTokenResponse(t,r,i),a=BR(r);return new El({user:s,providerId:a,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const i=BR(r);return new El({user:t,providerId:i,_tokenResponse:r,operationType:e})}}function BR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm extends as{constructor(t,e,r,i){super(e.code,e.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,rm.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,i){return new rm(t,e,r,i)}}function l8(n,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?rm._fromErrorAndOperation(n,s,t,r):s})}async function FX(n,t,e=!1){const r=await gh(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return El._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u8(n,t,e=!1){const{auth:r}=n;if(gi(r.app))return Promise.reject(Fs(r));const i="reauthenticate";try{const s=await gh(n,l8(r,i,t,n),e);qt(s.idToken,r,"internal-error");const a=zb(s.idToken);qt(a,r,"internal-error");const{sub:o}=a;return qt(n.uid===o,r,"user-mismatch"),El._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ss(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h8(n,t,e=!1){if(gi(n.app))return Promise.reject(Fs(n));const r="signIn",i=await l8(n,r,t),s=await El._fromIdTokenResponse(n,r,i);return e||await n._updateCurrentUser(s.user),s}async function UX(n,t){return h8(kl(n),t)}async function jX(n,t){return u8(_n(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f8(n){const t=kl(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function zX(n,t,e){if(gi(n.app))return Promise.reject(Fs(n));const r=kl(n),a=await B2(r,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BX).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&f8(n),l}),o=await El._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function HX(n,t,e){return gi(n.app)?Promise.reject(Fs(n)):UX(_n(n),Ll.credential(t,e)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&f8(n),r})}function GX(n,t){const e=_n(n);return gi(e.auth.app)?Promise.reject(Fs(e.auth)):d8(e,t,null)}function WX(n,t){return d8(_n(n),null,t)}async function d8(n,t,e){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(s.email=t),e&&(s.password=e);const a=await gh(n,DX(r,s));await n._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qX(n,t){return _n(n).setPersistence(t)}function YX(n,t,e,r){return _n(n).onIdTokenChanged(t,e,r)}function XX(n,t,e){return _n(n).beforeAuthStateChanged(t,e)}function KX(n){return _n(n).signOut()}const im="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(im,"1"),this.storage.removeItem(im),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $X=1e3,QX=10;class p8 extends g8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=r8(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),i=this.localCache[e];r!==i&&t(e,i,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!e&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);hX()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,QX):i()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},$X)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}p8.type="LOCAL";const m8=p8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8 extends g8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}y8.type="SESSION";const qb=y8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZX(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(i=>i.isListeningto(t));if(e)return e;const r=new jm(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:i,data:s}=e.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async h=>h(e.origin,s)),l=await ZX(o);e.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(n="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JX{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const h=Yb("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:e},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(){return window}function tK(n){Us().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function eK(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nK(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function rK(){return v8()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8="firebaseLocalStorageDb",iK=1,sm="firebaseLocalStorage",x8="fbase_key";class qg{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function zm(n,t){return n.transaction([sm],t?"readwrite":"readonly").objectStore(sm)}function sK(){const n=indexedDB.deleteDatabase(_8);return new qg(n).toPromise()}function F2(){const n=indexedDB.open(_8,iK);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(sm,{keyPath:x8})}catch(i){e(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(sm)?t(r):(r.close(),await sK(),t(await F2()))})})}async function FR(n,t,e){const r=zm(n,!0).put({[x8]:t,value:e});return new qg(r).toPromise()}async function aK(n,t){const e=zm(n,!1).get(t),r=await new qg(e).toPromise();return r===void 0?null:r.value}function UR(n,t){const e=zm(n,!0).delete(t);return new qg(e).toPromise()}const oK=800,cK=3;class w8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await F2(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>cK)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return v8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jm._getInstance(rK()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await eK(),!this.activeServiceWorker)return;this.sender=new JX(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(r=t[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||nK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await F2();return await FR(t,im,"1"),await UR(t,im),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>FR(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>aK(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>UR(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=zm(i,!1).getAll();return new qg(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}w8.type="LOCAL";const lK=w8;new Hg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uK(n,t){return t?Sa(t):(qt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb extends Gb{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return oh(t,this._buildIdpRequest())}_linkToIdToken(t,e){return oh(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return oh(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function hK(n){return h8(n.auth,new Xb(n),n.bypassAuthState)}function fK(n){const{auth:t,user:e}=n;return qt(e,t,"internal-error"),u8(e,new Xb(n),n.bypassAuthState)}async function dK(n){const{auth:t,user:e}=n;return qt(e,t,"internal-error"),FX(e,new Xb(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(t,e,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=t;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:e,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return hK;case"linkViaPopup":case"linkViaRedirect":return dK;case"reauthViaPopup":case"reauthViaRedirect":return fK;default:ss(this.auth,"internal-error")}}resolve(t){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gK=new Hg(2e3,1e4);class th extends b8{constructor(t,e,r,i,s){super(t,e,i,s),this.provider=r,this.authWindow=null,this.pollId=null,th.currentPopupAction&&th.currentPopupAction.cancel(),th.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return qt(t,this.auth,"internal-error"),t}async onExecution(){Oa(this.filter.length===1,"Popup operations only handle one event");const t=Yb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Bs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,th.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,r;if((r=(e=this.authWindow)==null?void 0:e.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,gK.get())};t()}}th.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pK="pendingRedirect",x1=new Map;class mK extends b8{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=x1.get(this.auth._key());if(!t){try{const r=await yK(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}x1.set(this.auth._key(),t)}return this.bypassAuthState||x1.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yK(n,t){const e=xK(t),r=_K(n);if(!await r._isAvailable())return!1;const i=await r._get(e)==="true";return await r._remove(e),i}function vK(n,t){x1.set(n._key(),t)}function _K(n){return Sa(n._redirectPersistence)}function xK(n){return _1(pK,n.config.apiKey,n.name)}async function wK(n,t,e=!1){if(gi(n.app))return Promise.reject(Fs(n));const r=kl(n),i=uK(r,t),a=await new mK(r,i,e).execute();return a&&!e&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bK=10*60*1e3;class EK{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!AK(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!E8(t)){const i=((r=t.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";e.onError(Bs(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=bK&&this.cachedEventUids.clear(),this.cachedEventUids.has(jR(t))}saveEventToCache(t){this.cachedEventUids.add(jR(t)),this.lastProcessedEventTime=Date.now()}}function jR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function E8({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function AK(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return E8(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TK(n,t={}){return Pa(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CK=/^https?/;async function IK(n){if(n.config.emulator)return;const{authorizedDomains:t}=await TK(n);for(const e of t)try{if(RK(e))return}catch{}ss(n,"unauthorized-domain")}function RK(n){const t=L2(),{protocol:e,hostname:r}=new URL(t);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&a.hostname===r}if(!CK.test(e))return!1;if(SK.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DK=new Hg(3e4,6e4);function zR(){const n=Us().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function OK(n){return new Promise((t,e)=>{var i,s,a;function r(){zR(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{zR(),e(Bs(n,"network-request-failed"))},timeout:DK.get()})}if((s=(i=Us().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=Us().gapi)!=null&&a.load)r();else{const o=xX("iframefcb");return Us()[o]=()=>{gapi.load?r():e(Bs(n,"network-request-failed"))},s8(`${_X()}?onload=${o}`).catch(l=>e(l))}}).catch(t=>{throw w1=null,t})}let w1=null;function MK(n){return w1=w1||OK(n),w1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NK=new Hg(5e3,15e3),PK="__/auth/iframe",kK="emulator/auth/iframe",LK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BK(n){const t=n.config;qt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?jb(t,kK):`https://${n.config.authDomain}/${PK}`,r={apiKey:t.apiKey,appName:n.name,v:jh},i=VK.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${e}?${zg(r).slice(1)}`}async function FK(n){const t=await MK(n),e=Us().gapi;return qt(e,n,"internal-error"),t.open({where:document.body,url:BK(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LK,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Bs(n,"network-request-failed"),o=Us().setTimeout(()=>{s(a)},NK.get());function l(){Us().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jK=500,zK=600,HK="_blank",GK="http://localhost";class HR{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WK(n,t,e,r=jK,i=zK){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...UK,width:r.toString(),height:i.toString(),top:s,left:a},h=Qn().toLowerCase();e&&(o=ZP(h)?HK:e),$P(h)&&(t=t||GK,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[y,x])=>`${m}${y}=${x},`,"");if(uX(h)&&o!=="_self")return qK(t||"",o),new HR(null);const g=window.open(t||"",o,d);qt(g,n,"popup-blocked");try{g.focus()}catch{}return new HR(g)}function qK(n,t){const e=document.createElement("a");e.href=n,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK="__/auth/handler",XK="emulator/auth/handler",KK=encodeURIComponent("fac");async function GR(n,t,e,r,i,s){qt(n.config.authDomain,n,"auth-domain-config-required"),qt(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:r,v:jh,eventId:i};if(t instanceof c8){t.setDefaultLanguage(n.languageCode),a.providerId=t.providerId||"",$G(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof Wg){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await n._getAppCheckToken(),h=l?`#${KK}=${encodeURIComponent(l)}`:"";return`${$K(n)}?${zg(o).slice(1)}${h}`}function $K({config:n}){return n.emulator?jb(n,XK):`https://${n.authDomain}/${YK}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="webStorageSupport";class QK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qb,this._completeRedirectFn=wK,this._overrideRedirectResult=vK}async _openPopup(t,e,r,i){var a;Oa((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await GR(t,e,r,L2(),i);return WK(t,s,Yb())}async _openRedirect(t,e,r,i){await this._originValidation(t);const s=await GR(t,e,r,L2(),i);return tK(s),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:i,promise:s}=this.eventManagers[e];return i?Promise.resolve(i):(Oa(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await FK(t),r=new EK(t);return e.register("authEvent",i=>(qt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(cx,{type:cx},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[cx];s!==void 0&&e(!!s),ss(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=IK(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return r8()||QP()||Hb()}}const ZK=QK;var WR="@firebase/auth",qR="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JK{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){qt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function e$(n){Gs(new is("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;qt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:i8(n)},h=new mX(r,i,s,l);return SX(h,e),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),Gs(new is("auth-internal",t=>{const e=kl(t.getProvider("auth").getImmediate());return(r=>new JK(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fi(WR,qR,t$(n)),Fi(WR,qR,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$=5*60,r$=sP("authIdTokenMaxAge")||n$;let YR=null;const i$=n=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>r$)return;const i=e==null?void 0:e.token;YR!==i&&(YR=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Kb(n=pP()){const t=Pl(n,"auth");if(t.isInitialized())return t.getImmediate();const e=TX(n,{popupRedirectResolver:ZK,persistence:[lK,m8,qb]}),r=sP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=i$(s.toString());XX(e,a,()=>a(e.currentUser)),YX(e,o=>a(o))}}const i=VG("auth");return i&&CX(e,`http://${i}`),e}function s$(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}yX({loadJS(n){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=t,r.onerror=i=>{const s=Bs("internal-error");s.customData=i,e(s)},r.type="text/javascript",r.charset="UTF-8",s$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});e$("Browser");var XR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vo,A8;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,C){function M(){}M.prototype=C.prototype,O.D=C.prototype,O.prototype=new M,O.prototype.constructor=O,O.C=function(B,H,G){for(var U=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)U[_t-2]=arguments[_t];return C.prototype[H].apply(B,U)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,C,M){M||(M=0);var B=Array(16);if(typeof C=="string")for(var H=0;16>H;++H)B[H]=C.charCodeAt(M++)|C.charCodeAt(M++)<<8|C.charCodeAt(M++)<<16|C.charCodeAt(M++)<<24;else for(H=0;16>H;++H)B[H]=C[M++]|C[M++]<<8|C[M++]<<16|C[M++]<<24;C=O.g[0],M=O.g[1],H=O.g[2];var G=O.g[3],U=C+(G^M&(H^G))+B[0]+3614090360&4294967295;C=M+(U<<7&4294967295|U>>>25),U=G+(H^C&(M^H))+B[1]+3905402710&4294967295,G=C+(U<<12&4294967295|U>>>20),U=H+(M^G&(C^M))+B[2]+606105819&4294967295,H=G+(U<<17&4294967295|U>>>15),U=M+(C^H&(G^C))+B[3]+3250441966&4294967295,M=H+(U<<22&4294967295|U>>>10),U=C+(G^M&(H^G))+B[4]+4118548399&4294967295,C=M+(U<<7&4294967295|U>>>25),U=G+(H^C&(M^H))+B[5]+1200080426&4294967295,G=C+(U<<12&4294967295|U>>>20),U=H+(M^G&(C^M))+B[6]+2821735955&4294967295,H=G+(U<<17&4294967295|U>>>15),U=M+(C^H&(G^C))+B[7]+4249261313&4294967295,M=H+(U<<22&4294967295|U>>>10),U=C+(G^M&(H^G))+B[8]+1770035416&4294967295,C=M+(U<<7&4294967295|U>>>25),U=G+(H^C&(M^H))+B[9]+2336552879&4294967295,G=C+(U<<12&4294967295|U>>>20),U=H+(M^G&(C^M))+B[10]+4294925233&4294967295,H=G+(U<<17&4294967295|U>>>15),U=M+(C^H&(G^C))+B[11]+2304563134&4294967295,M=H+(U<<22&4294967295|U>>>10),U=C+(G^M&(H^G))+B[12]+1804603682&4294967295,C=M+(U<<7&4294967295|U>>>25),U=G+(H^C&(M^H))+B[13]+4254626195&4294967295,G=C+(U<<12&4294967295|U>>>20),U=H+(M^G&(C^M))+B[14]+2792965006&4294967295,H=G+(U<<17&4294967295|U>>>15),U=M+(C^H&(G^C))+B[15]+1236535329&4294967295,M=H+(U<<22&4294967295|U>>>10),U=C+(H^G&(M^H))+B[1]+4129170786&4294967295,C=M+(U<<5&4294967295|U>>>27),U=G+(M^H&(C^M))+B[6]+3225465664&4294967295,G=C+(U<<9&4294967295|U>>>23),U=H+(C^M&(G^C))+B[11]+643717713&4294967295,H=G+(U<<14&4294967295|U>>>18),U=M+(G^C&(H^G))+B[0]+3921069994&4294967295,M=H+(U<<20&4294967295|U>>>12),U=C+(H^G&(M^H))+B[5]+3593408605&4294967295,C=M+(U<<5&4294967295|U>>>27),U=G+(M^H&(C^M))+B[10]+38016083&4294967295,G=C+(U<<9&4294967295|U>>>23),U=H+(C^M&(G^C))+B[15]+3634488961&4294967295,H=G+(U<<14&4294967295|U>>>18),U=M+(G^C&(H^G))+B[4]+3889429448&4294967295,M=H+(U<<20&4294967295|U>>>12),U=C+(H^G&(M^H))+B[9]+568446438&4294967295,C=M+(U<<5&4294967295|U>>>27),U=G+(M^H&(C^M))+B[14]+3275163606&4294967295,G=C+(U<<9&4294967295|U>>>23),U=H+(C^M&(G^C))+B[3]+4107603335&4294967295,H=G+(U<<14&4294967295|U>>>18),U=M+(G^C&(H^G))+B[8]+1163531501&4294967295,M=H+(U<<20&4294967295|U>>>12),U=C+(H^G&(M^H))+B[13]+2850285829&4294967295,C=M+(U<<5&4294967295|U>>>27),U=G+(M^H&(C^M))+B[2]+4243563512&4294967295,G=C+(U<<9&4294967295|U>>>23),U=H+(C^M&(G^C))+B[7]+1735328473&4294967295,H=G+(U<<14&4294967295|U>>>18),U=M+(G^C&(H^G))+B[12]+2368359562&4294967295,M=H+(U<<20&4294967295|U>>>12),U=C+(M^H^G)+B[5]+4294588738&4294967295,C=M+(U<<4&4294967295|U>>>28),U=G+(C^M^H)+B[8]+2272392833&4294967295,G=C+(U<<11&4294967295|U>>>21),U=H+(G^C^M)+B[11]+1839030562&4294967295,H=G+(U<<16&4294967295|U>>>16),U=M+(H^G^C)+B[14]+4259657740&4294967295,M=H+(U<<23&4294967295|U>>>9),U=C+(M^H^G)+B[1]+2763975236&4294967295,C=M+(U<<4&4294967295|U>>>28),U=G+(C^M^H)+B[4]+1272893353&4294967295,G=C+(U<<11&4294967295|U>>>21),U=H+(G^C^M)+B[7]+4139469664&4294967295,H=G+(U<<16&4294967295|U>>>16),U=M+(H^G^C)+B[10]+3200236656&4294967295,M=H+(U<<23&4294967295|U>>>9),U=C+(M^H^G)+B[13]+681279174&4294967295,C=M+(U<<4&4294967295|U>>>28),U=G+(C^M^H)+B[0]+3936430074&4294967295,G=C+(U<<11&4294967295|U>>>21),U=H+(G^C^M)+B[3]+3572445317&4294967295,H=G+(U<<16&4294967295|U>>>16),U=M+(H^G^C)+B[6]+76029189&4294967295,M=H+(U<<23&4294967295|U>>>9),U=C+(M^H^G)+B[9]+3654602809&4294967295,C=M+(U<<4&4294967295|U>>>28),U=G+(C^M^H)+B[12]+3873151461&4294967295,G=C+(U<<11&4294967295|U>>>21),U=H+(G^C^M)+B[15]+530742520&4294967295,H=G+(U<<16&4294967295|U>>>16),U=M+(H^G^C)+B[2]+3299628645&4294967295,M=H+(U<<23&4294967295|U>>>9),U=C+(H^(M|~G))+B[0]+4096336452&4294967295,C=M+(U<<6&4294967295|U>>>26),U=G+(M^(C|~H))+B[7]+1126891415&4294967295,G=C+(U<<10&4294967295|U>>>22),U=H+(C^(G|~M))+B[14]+2878612391&4294967295,H=G+(U<<15&4294967295|U>>>17),U=M+(G^(H|~C))+B[5]+4237533241&4294967295,M=H+(U<<21&4294967295|U>>>11),U=C+(H^(M|~G))+B[12]+1700485571&4294967295,C=M+(U<<6&4294967295|U>>>26),U=G+(M^(C|~H))+B[3]+2399980690&4294967295,G=C+(U<<10&4294967295|U>>>22),U=H+(C^(G|~M))+B[10]+4293915773&4294967295,H=G+(U<<15&4294967295|U>>>17),U=M+(G^(H|~C))+B[1]+2240044497&4294967295,M=H+(U<<21&4294967295|U>>>11),U=C+(H^(M|~G))+B[8]+1873313359&4294967295,C=M+(U<<6&4294967295|U>>>26),U=G+(M^(C|~H))+B[15]+4264355552&4294967295,G=C+(U<<10&4294967295|U>>>22),U=H+(C^(G|~M))+B[6]+2734768916&4294967295,H=G+(U<<15&4294967295|U>>>17),U=M+(G^(H|~C))+B[13]+1309151649&4294967295,M=H+(U<<21&4294967295|U>>>11),U=C+(H^(M|~G))+B[4]+4149444226&4294967295,C=M+(U<<6&4294967295|U>>>26),U=G+(M^(C|~H))+B[11]+3174756917&4294967295,G=C+(U<<10&4294967295|U>>>22),U=H+(C^(G|~M))+B[2]+718787259&4294967295,H=G+(U<<15&4294967295|U>>>17),U=M+(G^(H|~C))+B[9]+3951481745&4294967295,O.g[0]=O.g[0]+C&4294967295,O.g[1]=O.g[1]+(H+(U<<21&4294967295|U>>>11))&4294967295,O.g[2]=O.g[2]+H&4294967295,O.g[3]=O.g[3]+G&4294967295}r.prototype.u=function(O,C){C===void 0&&(C=O.length);for(var M=C-this.blockSize,B=this.B,H=this.h,G=0;G<C;){if(H==0)for(;G<=M;)i(this,O,G),G+=this.blockSize;if(typeof O=="string"){for(;G<C;)if(B[H++]=O.charCodeAt(G++),H==this.blockSize){i(this,B),H=0;break}}else for(;G<C;)if(B[H++]=O[G++],H==this.blockSize){i(this,B),H=0;break}}this.h=H,this.o+=C},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var C=1;C<O.length-8;++C)O[C]=0;var M=8*this.o;for(C=O.length-8;C<O.length;++C)O[C]=M&255,M/=256;for(this.u(O),O=Array(16),C=M=0;4>C;++C)for(var B=0;32>B;B+=8)O[M++]=this.g[C]>>>B&255;return O};function s(O,C){var M=o;return Object.prototype.hasOwnProperty.call(M,O)?M[O]:M[O]=C(O)}function a(O,C){this.h=C;for(var M=[],B=!0,H=O.length-1;0<=H;H--){var G=O[H]|0;B&&G==C||(M[H]=G,B=!1)}this.g=M}var o={};function l(O){return-128<=O&&128>O?s(O,function(C){return new a([C|0],0>C?-1:0)}):new a([O|0],0>O?-1:0)}function h(O){if(isNaN(O)||!isFinite(O))return g;if(0>O)return E(h(-O));for(var C=[],M=1,B=0;O>=M;B++)C[B]=O/M|0,M*=4294967296;return new a(C,0)}function d(O,C){if(O.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(O.charAt(0)=="-")return E(d(O.substring(1),C));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=h(Math.pow(C,8)),B=g,H=0;H<O.length;H+=8){var G=Math.min(8,O.length-H),U=parseInt(O.substring(H,H+G),C);8>G?(G=h(Math.pow(C,G)),B=B.j(G).add(h(U))):(B=B.j(M),B=B.add(h(U)))}return B}var g=l(0),m=l(1),y=l(16777216);n=a.prototype,n.m=function(){if(b(this))return-E(this).m();for(var O=0,C=1,M=0;M<this.g.length;M++){var B=this.i(M);O+=(0<=B?B:4294967296+B)*C,C*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(x(this))return"0";if(b(this))return"-"+E(this).toString(O);for(var C=h(Math.pow(O,6)),M=this,B="";;){var H=k(M,C).g;M=S(M,H.j(C));var G=((0<M.g.length?M.g[0]:M.h)>>>0).toString(O);if(M=H,x(M))return G+B;for(;6>G.length;)G="0"+G;B=G+B}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function x(O){if(O.h!=0)return!1;for(var C=0;C<O.g.length;C++)if(O.g[C]!=0)return!1;return!0}function b(O){return O.h==-1}n.l=function(O){return O=S(this,O),b(O)?-1:x(O)?0:1};function E(O){for(var C=O.g.length,M=[],B=0;B<C;B++)M[B]=~O.g[B];return new a(M,~O.h).add(m)}n.abs=function(){return b(this)?E(this):this},n.add=function(O){for(var C=Math.max(this.g.length,O.g.length),M=[],B=0,H=0;H<=C;H++){var G=B+(this.i(H)&65535)+(O.i(H)&65535),U=(G>>>16)+(this.i(H)>>>16)+(O.i(H)>>>16);B=U>>>16,G&=65535,U&=65535,M[H]=U<<16|G}return new a(M,M[M.length-1]&-2147483648?-1:0)};function S(O,C){return O.add(E(C))}n.j=function(O){if(x(this)||x(O))return g;if(b(this))return b(O)?E(this).j(E(O)):E(E(this).j(O));if(b(O))return E(this.j(E(O)));if(0>this.l(y)&&0>O.l(y))return h(this.m()*O.m());for(var C=this.g.length+O.g.length,M=[],B=0;B<2*C;B++)M[B]=0;for(B=0;B<this.g.length;B++)for(var H=0;H<O.g.length;H++){var G=this.i(B)>>>16,U=this.i(B)&65535,_t=O.i(H)>>>16,xt=O.i(H)&65535;M[2*B+2*H]+=U*xt,T(M,2*B+2*H),M[2*B+2*H+1]+=G*xt,T(M,2*B+2*H+1),M[2*B+2*H+1]+=U*_t,T(M,2*B+2*H+1),M[2*B+2*H+2]+=G*_t,T(M,2*B+2*H+2)}for(B=0;B<C;B++)M[B]=M[2*B+1]<<16|M[2*B];for(B=C;B<2*C;B++)M[B]=0;return new a(M,0)};function T(O,C){for(;(O[C]&65535)!=O[C];)O[C+1]+=O[C]>>>16,O[C]&=65535,C++}function R(O,C){this.g=O,this.h=C}function k(O,C){if(x(C))throw Error("division by zero");if(x(O))return new R(g,g);if(b(O))return C=k(E(O),C),new R(E(C.g),E(C.h));if(b(C))return C=k(O,E(C)),new R(E(C.g),C.h);if(30<O.g.length){if(b(O)||b(C))throw Error("slowDivide_ only works with positive integers.");for(var M=m,B=C;0>=B.l(O);)M=N(M),B=N(B);var H=j(M,1),G=j(B,1);for(B=j(B,2),M=j(M,2);!x(B);){var U=G.add(B);0>=U.l(O)&&(H=H.add(M),G=U),B=j(B,1),M=j(M,1)}return C=S(O,H.j(C)),new R(H,C)}for(H=g;0<=O.l(C);){for(M=Math.max(1,Math.floor(O.m()/C.m())),B=Math.ceil(Math.log(M)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),G=h(M),U=G.j(C);b(U)||0<U.l(O);)M-=B,G=h(M),U=G.j(C);x(G)&&(G=m),H=H.add(G),O=S(O,U)}return new R(H,O)}n.A=function(O){return k(this,O).h},n.and=function(O){for(var C=Math.max(this.g.length,O.g.length),M=[],B=0;B<C;B++)M[B]=this.i(B)&O.i(B);return new a(M,this.h&O.h)},n.or=function(O){for(var C=Math.max(this.g.length,O.g.length),M=[],B=0;B<C;B++)M[B]=this.i(B)|O.i(B);return new a(M,this.h|O.h)},n.xor=function(O){for(var C=Math.max(this.g.length,O.g.length),M=[],B=0;B<C;B++)M[B]=this.i(B)^O.i(B);return new a(M,this.h^O.h)};function N(O){for(var C=O.g.length+1,M=[],B=0;B<C;B++)M[B]=O.i(B)<<1|O.i(B-1)>>>31;return new a(M,O.h)}function j(O,C){var M=C>>5;C%=32;for(var B=O.g.length-M,H=[],G=0;G<B;G++)H[G]=0<C?O.i(G+M)>>>C|O.i(G+M+1)<<32-C:O.i(G+M);return new a(H,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,A8=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Vo=a}).apply(typeof XR<"u"?XR:typeof self<"u"?self:typeof window<"u"?window:{});var Wp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T8,Id,S8,b1,U2,C8,I8,R8;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,A,I){return v==Array.prototype||v==Object.prototype||(v[A]=I.value),v};function e(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wp=="object"&&Wp];for(var A=0;A<v.length;++A){var I=v[A];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=e(this);function i(v,A){if(A)t:{var I=r;v=v.split(".");for(var F=0;F<v.length-1;F++){var $=v[F];if(!($ in I))break t;I=I[$]}v=v[v.length-1],F=I[v],A=A(F),A!=F&&A!=null&&t(I,v,{configurable:!0,writable:!0,value:A})}}function s(v,A){v instanceof String&&(v+="");var I=0,F=!1,$={next:function(){if(!F&&I<v.length){var at=I++;return{value:A(at,v[at]),done:!1}}return F=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(v){return v||function(){return s(this,function(A,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(v){var A=typeof v;return A=A!="object"?A:v?Array.isArray(v)?"array":A:"null",A=="array"||A=="object"&&typeof v.length=="number"}function h(v){var A=typeof v;return A=="object"&&v!=null||A=="function"}function d(v,A,I){return v.call.apply(v.bind,arguments)}function g(v,A,I){if(!v)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,F),v.apply(A,$)}}return function(){return v.apply(A,arguments)}}function m(v,A,I){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function y(v,A){var I=Array.prototype.slice.call(arguments,1);return function(){var F=I.slice();return F.push.apply(F,arguments),v.apply(this,F)}}function x(v,A){function I(){}I.prototype=A.prototype,v.aa=A.prototype,v.prototype=new I,v.prototype.constructor=v,v.Qb=function(F,$,at){for(var bt=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)bt[fe-2]=arguments[fe];return A.prototype[$].apply(F,bt)}}function b(v){const A=v.length;if(0<A){const I=Array(A);for(let F=0;F<A;F++)I[F]=v[F];return I}return[]}function E(v,A){for(let I=1;I<arguments.length;I++){const F=arguments[I];if(l(F)){const $=v.length||0,at=F.length||0;v.length=$+at;for(let bt=0;bt<at;bt++)v[$+bt]=F[bt]}else v.push(F)}}class S{constructor(A,I){this.i=A,this.j=I,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function T(v){return/^[\s\xa0]*$/.test(v)}function R(){var v=o.navigator;return v&&(v=v.userAgent)?v:""}function k(v){return k[" "](v),v}k[" "]=function(){};var N=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function j(v,A,I){for(const F in v)A.call(I,v[F],F,v)}function O(v,A){for(const I in v)A.call(void 0,v[I],I,v)}function C(v){const A={};for(const I in v)A[I]=v[I];return A}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(v,A){let I,F;for(let $=1;$<arguments.length;$++){F=arguments[$];for(I in F)v[I]=F[I];for(let at=0;at<M.length;at++)I=M[at],Object.prototype.hasOwnProperty.call(F,I)&&(v[I]=F[I])}}function H(v){var A=1;v=v.split(":");const I=[];for(;0<A&&v.length;)I.push(v.shift()),A--;return v.length&&I.push(v.join(":")),I}function G(v){o.setTimeout(()=>{throw v},0)}function U(){var v=et;let A=null;return v.g&&(A=v.g,v.g=v.g.next,v.g||(v.h=null),A.next=null),A}class _t{constructor(){this.h=this.g=null}add(A,I){const F=xt.get();F.set(A,I),this.h?this.h.next=F:this.g=F,this.h=F}}var xt=new S(()=>new K,v=>v.reset());class K{constructor(){this.next=this.g=this.h=null}set(A,I){this.h=A,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ct,yt=!1,et=new _t,V=()=>{const v=o.Promise.resolve(void 0);ct=()=>{v.then(q)}};var q=()=>{for(var v;v=U();){try{v.h.call(v.g)}catch(I){G(I)}var A=xt;A.j(v),100>A.h&&(A.h++,v.next=A.g,A.g=v)}yt=!1};function ot(){this.s=this.s,this.C=this.C}ot.prototype.s=!1,ot.prototype.ma=function(){this.s||(this.s=!0,this.N())},ot.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function nt(v,A){this.type=v,this.g=this.target=A,this.defaultPrevented=!1}nt.prototype.h=function(){this.defaultPrevented=!0};var pt=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,A=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const I=()=>{};o.addEventListener("test",I,A),o.removeEventListener("test",I,A)}catch{}return v}();function Tt(v,A){if(nt.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var I=this.type=v.type,F=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=A,A=v.relatedTarget){if(N){t:{try{k(A.nodeName);var $=!0;break t}catch{}$=!1}$||(A=null)}}else I=="mouseover"?A=v.fromElement:I=="mouseout"&&(A=v.toElement);this.relatedTarget=A,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:At[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&Tt.aa.h.call(this)}}x(Tt,nt);var At={2:"touch",3:"pen",4:"mouse"};Tt.prototype.h=function(){Tt.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Jt="closure_listenable_"+(1e6*Math.random()|0),Bt=0;function Pt(v,A,I,F,$){this.listener=v,this.proxy=null,this.src=A,this.type=I,this.capture=!!F,this.ha=$,this.key=++Bt,this.da=this.fa=!1}function zt(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Zt(v){this.src=v,this.g={},this.h=0}Zt.prototype.add=function(v,A,I,F,$){var at=v.toString();v=this.g[at],v||(v=this.g[at]=[],this.h++);var bt=Ye(v,A,F,$);return-1<bt?(A=v[bt],I||(A.fa=!1)):(A=new Pt(A,this.src,at,!!F,$),A.fa=I,v.push(A)),A};function Ge(v,A){var I=A.type;if(I in v.g){var F=v.g[I],$=Array.prototype.indexOf.call(F,A,void 0),at;(at=0<=$)&&Array.prototype.splice.call(F,$,1),at&&(zt(A),v.g[I].length==0&&(delete v.g[I],v.h--))}}function Ye(v,A,I,F){for(var $=0;$<v.length;++$){var at=v[$];if(!at.da&&at.listener==A&&at.capture==!!I&&at.ha==F)return $}return-1}var en="closure_lm_"+(1e6*Math.random()|0),ri={};function Rt(v,A,I,F,$){if(Array.isArray(A)){for(var at=0;at<A.length;at++)Rt(v,A[at],I,F,$);return null}return I=Jn(I),v&&v[Jt]?v.K(A,I,h(F)?!!F.capture:!1,$):Ot(v,A,I,!1,F,$)}function Ot(v,A,I,F,$,at){if(!A)throw Error("Invalid event type");var bt=h($)?!!$.capture:!!$,fe=Qe(v);if(fe||(v[en]=fe=new Zt(v)),I=fe.add(A,I,F,bt,at),I.proxy)return I;if(F=wt(),I.proxy=F,F.src=v,F.listener=I,v.addEventListener)pt||($=bt),$===void 0&&($=!1),v.addEventListener(A.toString(),F,$);else if(v.attachEvent)v.attachEvent(Wt(A.toString()),F);else if(v.addListener&&v.removeListener)v.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return I}function wt(){function v(I){return A.call(v.src,v.listener,I)}const A=Qt;return v}function kt(v,A,I,F,$){if(Array.isArray(A))for(var at=0;at<A.length;at++)kt(v,A[at],I,F,$);else F=h(F)?!!F.capture:!!F,I=Jn(I),v&&v[Jt]?(v=v.i,A=String(A).toString(),A in v.g&&(at=v.g[A],I=Ye(at,I,F,$),-1<I&&(zt(at[I]),Array.prototype.splice.call(at,I,1),at.length==0&&(delete v.g[A],v.h--)))):v&&(v=Qe(v))&&(A=v.g[A.toString()],v=-1,A&&(v=Ye(A,I,F,$)),(I=-1<v?A[v]:null)&&vt(I))}function vt(v){if(typeof v!="number"&&v&&!v.da){var A=v.src;if(A&&A[Jt])Ge(A.i,v);else{var I=v.type,F=v.proxy;A.removeEventListener?A.removeEventListener(I,F,v.capture):A.detachEvent?A.detachEvent(Wt(I),F):A.addListener&&A.removeListener&&A.removeListener(F),(I=Qe(A))?(Ge(I,v),I.h==0&&(I.src=null,A[en]=null)):zt(v)}}}function Wt(v){return v in ri?ri[v]:ri[v]="on"+v}function Qt(v,A){if(v.da)v=!0;else{A=new Tt(A,this);var I=v.listener,F=v.ha||v.src;v.fa&&vt(v),v=I.call(F,A)}return v}function Qe(v){return v=v[en],v instanceof Zt?v:null}var cn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jn(v){return typeof v=="function"?v:(v[cn]||(v[cn]=function(A){return v.handleEvent(A)}),v[cn])}function ye(){ot.call(this),this.i=new Zt(this),this.M=this,this.F=null}x(ye,ot),ye.prototype[Jt]=!0,ye.prototype.removeEventListener=function(v,A,I,F){kt(this,v,A,I,F)};function oe(v,A){var I,F=v.F;if(F)for(I=[];F;F=F.F)I.push(F);if(v=v.M,F=A.type||A,typeof A=="string")A=new nt(A,v);else if(A instanceof nt)A.target=A.target||v;else{var $=A;A=new nt(F,v),B(A,$)}if($=!0,I)for(var at=I.length-1;0<=at;at--){var bt=A.g=I[at];$=wr(bt,F,!0,A)&&$}if(bt=A.g=v,$=wr(bt,F,!0,A)&&$,$=wr(bt,F,!1,A)&&$,I)for(at=0;at<I.length;at++)bt=A.g=I[at],$=wr(bt,F,!1,A)&&$}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var v=this.i,A;for(A in v.g){for(var I=v.g[A],F=0;F<I.length;F++)zt(I[F]);delete v.g[A],v.h--}}this.F=null},ye.prototype.K=function(v,A,I,F){return this.i.add(String(v),A,!1,I,F)},ye.prototype.L=function(v,A,I,F){return this.i.add(String(v),A,!0,I,F)};function wr(v,A,I,F){if(A=v.i.g[String(A)],!A)return!0;A=A.concat();for(var $=!0,at=0;at<A.length;++at){var bt=A[at];if(bt&&!bt.da&&bt.capture==I){var fe=bt.listener,Un=bt.ha||bt.src;bt.fa&&Ge(v.i,bt),$=fe.call(Un,F)!==!1&&$}}return $&&!F.defaultPrevented}function br(v,A,I){if(typeof v=="function")I&&(v=m(v,I));else if(v&&typeof v.handleEvent=="function")v=m(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:o.setTimeout(v,A||0)}function s0(v){v.g=br(()=>{v.g=null,v.i&&(v.i=!1,s0(v))},v.l);const A=v.h;v.h=null,v.m.apply(null,A)}class xy extends ot{constructor(A,I){super(),this.m=A,this.l=I,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:s0(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ic(v){ot.call(this),this.h=v,this.g={}}x(ic,ot);var sc=[];function ac(v){j(v.g,function(A,I){this.g.hasOwnProperty(I)&&vt(A)},v),v.g={}}ic.prototype.N=function(){ic.aa.N.call(this),ac(this)},ic.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hi=o.JSON.stringify,jl=o.JSON.parse,oc=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function Xh(){}Xh.prototype.h=null;function Kh(v){return v.h||(v.h=v.i())}function $h(){}var Ks={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $s(){nt.call(this,"d")}x($s,nt);function Qh(){nt.call(this,"c")}x(Qh,nt);var os={},Zh=null;function Ba(){return Zh=Zh||new ye}os.La="serverreachability";function zl(v){nt.call(this,os.La,v)}x(zl,nt);function Fa(v){const A=Ba();oe(A,new zl(A))}os.STAT_EVENT="statevent";function a0(v,A){nt.call(this,os.STAT_EVENT,v),this.stat=A}x(a0,nt);function nn(v){const A=Ba();oe(A,new a0(A,v))}os.Ma="timingevent";function Fn(v,A){nt.call(this,os.Ma,v),this.size=A}x(Fn,nt);function On(v,A){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},A)}function _i(){this.g=!0}_i.prototype.xa=function(){this.g=!1};function Jh(v,A,I,F,$,at){v.info(function(){if(v.g)if(at)for(var bt="",fe=at.split("&"),Un=0;Un<fe.length;Un++){var de=fe[Un].split("=");if(1<de.length){var er=de[0];de=de[1];var jn=er.split("_");bt=2<=jn.length&&jn[1]=="type"?bt+(er+"="+de+"&"):bt+(er+"=redacted&")}}else bt=null;else bt=at;return"XMLHTTP REQ ("+F+") [attempt "+$+"]: "+A+`
`+I+`
`+bt})}function wy(v,A,I,F,$,at,bt){v.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+$+"]: "+A+`
`+I+`
`+at+" "+bt})}function Ua(v,A,I,F){v.info(function(){return"XMLHTTP TEXT ("+A+"): "+cc(v,I)+(F?" "+F:"")})}function o0(v,A){v.info(function(){return"TIMEOUT: "+A})}_i.prototype.info=function(){};function cc(v,A){if(!v.g)return A;if(!A)return null;try{var I=JSON.parse(A);if(I){for(v=0;v<I.length;v++)if(Array.isArray(I[v])){var F=I[v];if(!(2>F.length)){var $=F[1];if(Array.isArray($)&&!(1>$.length)){var at=$[0];if(at!="noop"&&at!="stop"&&at!="close")for(var bt=1;bt<$.length;bt++)$[bt]=""}}}}return Hi(I)}catch{return A}}var ja={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cs;function ls(){}x(ls,Xh),ls.prototype.g=function(){return new XMLHttpRequest},ls.prototype.i=function(){return{}},cs=new ls;function kr(v,A,I,F){this.j=v,this.i=A,this.l=I,this.R=F||1,this.U=new ic(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bn}function bn(){this.i=null,this.g="",this.h=!1}var tf={},Hl={};function Gi(v,A,I){v.L=1,v.v=dc(ii(A)),v.m=I,v.P=!0,Zs(v,null)}function Zs(v,A){v.F=Date.now(),lc(v),v.A=ii(v.v);var I=v.A,F=v.R;Array.isArray(F)||(F=[String(F)]),of(I.i,"t",F),v.C=0,I=v.j.J,v.h=new bn,v.g=E0(v.j,I?A:null,!v.m),0<v.O&&(v.M=new xy(m(v.Y,v,v.g),v.O)),A=v.U,I=v.g,F=v.ca;var $="readystatechange";Array.isArray($)||($&&(sc[0]=$.toString()),$=sc);for(var at=0;at<$.length;at++){var bt=Rt(I,$[at],F||A.handleEvent,!1,A.h||A);if(!bt)break;A.g[bt.key]=bt}A=v.H?C(v.H):{},v.m?(v.u||(v.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,A)):(v.u="GET",v.g.ea(v.A,v.u,null,A)),Fa(),Jh(v.i,v.u,v.A,v.l,v.R,v.m)}kr.prototype.ca=function(v){v=v.target;const A=this.M;A&&Ei(v)==3?A.j():this.Y(v)},kr.prototype.Y=function(v){try{if(v==this.g)t:{const jn=Ei(this.g);var A=this.g.Ba();const aa=this.g.Z();if(!(3>jn)&&(jn!=3||this.g&&(this.h.h||this.g.oa()||p0(this.g)))){this.J||jn!=4||A==7||(A==8||0>=aa?Fa(3):Fa(2)),za(this);var I=this.g.Z();this.X=I;e:if(c0(this)){var F=p0(this.g);v="";var $=F.length,at=Ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hr(this),us(this);var bt="";break e}this.h.i=new o.TextDecoder}for(A=0;A<$;A++)this.h.h=!0,v+=this.h.i.decode(F[A],{stream:!(at&&A==$-1)});F.length=0,this.h.g+=v,this.C=0,bt=this.h.g}else bt=this.g.oa();if(this.o=I==200,wy(this.i,this.u,this.A,this.l,this.R,jn,I),this.o){if(this.T&&!this.K){e:{if(this.g){var fe,Un=this.g;if((fe=Un.g?Un.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(fe)){var de=fe;break e}}de=null}if(I=de)Ua(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uc(this,I);else{this.o=!1,this.s=3,nn(12),hr(this),us(this);break t}}if(this.P){I=!0;let fr;for(;!this.J&&this.C<bt.length;)if(fr=l0(this,bt),fr==Hl){jn==4&&(this.s=4,nn(14),I=!1),Ua(this.i,this.l,null,"[Incomplete Response]");break}else if(fr==tf){this.s=4,nn(15),Ua(this.i,this.l,bt,"[Invalid Chunk]"),I=!1;break}else Ua(this.i,this.l,fr,null),uc(this,fr);if(c0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jn!=4||bt.length!=0||this.h.h||(this.s=1,nn(16),I=!1),this.o=this.o&&I,!I)Ua(this.i,this.l,bt,"[Invalid Chunked Response]"),hr(this),us(this);else if(0<bt.length&&!this.W){this.W=!0;var er=this.j;er.g==this&&er.ba&&!er.M&&(er.j.info("Great, no buffering proxy detected. Bytes received: "+bt.length),wc(er),er.M=!0,nn(11))}}else Ua(this.i,this.l,bt,null),uc(this,bt);jn==4&&hr(this),this.o&&!this.J&&(jn==4?x0(this.j,this):(this.o=!1,lc(this)))}else Sy(this.g),I==400&&0<bt.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),hr(this),us(this)}}}catch{}finally{}};function c0(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function l0(v,A){var I=v.C,F=A.indexOf(`
`,I);return F==-1?Hl:(I=Number(A.substring(I,F)),isNaN(I)?tf:(F+=1,F+I>A.length?Hl:(A=A.slice(F,F+I),v.C=F+I,A)))}kr.prototype.cancel=function(){this.J=!0,hr(this)};function lc(v){v.S=Date.now()+v.I,u0(v,v.I)}function u0(v,A){if(v.B!=null)throw Error("WatchDog timer not null");v.B=On(m(v.ba,v),A)}function za(v){v.B&&(o.clearTimeout(v.B),v.B=null)}kr.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(o0(this.i,this.A),this.L!=2&&(Fa(),nn(17)),hr(this),this.s=2,us(this)):u0(this,this.S-v)};function us(v){v.j.G==0||v.J||x0(v.j,v)}function hr(v){za(v);var A=v.M;A&&typeof A.ma=="function"&&A.ma(),v.M=null,ac(v.U),v.g&&(A=v.g,v.g=null,A.abort(),A.ma())}function uc(v,A){try{var I=v.j;if(I.G!=0&&(I.g==v||ef(I.h,v))){if(!v.K&&ef(I.h,v)&&I.G==3){try{var F=I.Da.g.parse(A)}catch{F=null}if(Array.isArray(F)&&F.length==3){var $=F;if($[0]==0){t:if(!I.u){if(I.g)if(I.g.F+3e3<v.F)eu(I),Jl(I);else break t;ff(I),nn(18)}}else I.za=$[1],0<I.za-I.T&&37500>$[2]&&I.F&&I.v==0&&!I.C&&(I.C=On(m(I.Za,I),6e3));if(1>=Wl(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else sa(I,11)}else if((v.K||I.g==v)&&eu(I),!T(A))for($=I.Da.g.parse(A),A=0;A<$.length;A++){let de=$[A];if(I.T=de[0],de=de[1],I.G==2)if(de[0]=="c"){I.K=de[1],I.ia=de[2];const er=de[3];er!=null&&(I.la=er,I.j.info("VER="+I.la));const jn=de[4];jn!=null&&(I.Aa=jn,I.j.info("SVER="+I.Aa));const aa=de[5];aa!=null&&typeof aa=="number"&&0<aa&&(F=1.5*aa,I.L=F,I.j.info("backChannelRequestTimeoutMs_="+F)),F=I;const fr=v.g;if(fr){const ys=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ys){var at=F.h;at.g||ys.indexOf("spdy")==-1&&ys.indexOf("quic")==-1&&ys.indexOf("h2")==-1||(at.j=at.l,at.g=new Set,at.h&&(ql(at,at.h),at.h=null))}if(F.D){const gf=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;gf&&(F.ya=gf,Be(F.I,F.D,gf))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-v.F,I.j.info("Handshake RTT: "+I.R+"ms")),F=I;var bt=v;if(F.qa=b0(F,F.J?F.ia:null,F.W),bt.K){Lr(F.h,bt);var fe=bt,Un=F.L;Un&&(fe.I=Un),fe.B&&(za(fe),lc(fe)),F.g=bt}else v0(F);0<I.i.length&&tu(I)}else de[0]!="stop"&&de[0]!="close"||sa(I,7);else I.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?sa(I,7):uf(I):de[0]!="noop"&&I.l&&I.l.ta(de),I.v=0)}}Fa(4)}catch{}}var h0=class{constructor(v,A){this.g=v,this.map=A}};function Js(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gl(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function Wl(v){return v.h?1:v.g?v.g.size:0}function ef(v,A){return v.h?v.h==A:v.g?v.g.has(A):!1}function ql(v,A){v.g?v.g.add(A):v.h=A}function Lr(v,A){v.h&&v.h==A?v.h=null:v.g&&v.g.has(A)&&v.g.delete(A)}Js.prototype.cancel=function(){if(this.i=nf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function nf(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let A=v.i;for(const I of v.g.values())A=A.concat(I.D);return A}return b(v.i)}function by(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(l(v)){for(var A=[],I=v.length,F=0;F<I;F++)A.push(v[F]);return A}A=[],I=0;for(F in v)A[I++]=v[F];return A}function Yl(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(l(v)||typeof v=="string"){var A=[];v=v.length;for(var I=0;I<v;I++)A.push(I);return A}A=[],I=0;for(const F in v)A[I++]=F;return A}}}function rf(v,A){if(v.forEach&&typeof v.forEach=="function")v.forEach(A,void 0);else if(l(v)||typeof v=="string")Array.prototype.forEach.call(v,A,void 0);else for(var I=Yl(v),F=by(v),$=F.length,at=0;at<$;at++)A.call(void 0,F[at],I&&I[at],v)}var hc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ey(v,A){if(v){v=v.split("&");for(var I=0;I<v.length;I++){var F=v[I].indexOf("="),$=null;if(0<=F){var at=v[I].substring(0,F);$=v[I].substring(F+1)}else at=v[I];A(at,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Mn(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Mn){this.h=v.h,fc(this,v.j),this.o=v.o,this.g=v.g,Ha(this,v.s),this.l=v.l;var A=v.i,I=new ea;I.i=A.i,A.g&&(I.g=new Map(A.g),I.h=A.h),ta(this,I),this.m=v.m}else v&&(A=String(v).match(hc))?(this.h=!1,fc(this,A[1]||"",!0),this.o=xi(A[2]||""),this.g=xi(A[3]||"",!0),Ha(this,A[4]),this.l=xi(A[5]||"",!0),ta(this,A[6]||"",!0),this.m=xi(A[7]||"")):(this.h=!1,this.i=new ea(null,this.h))}Mn.prototype.toString=function(){var v=[],A=this.j;A&&v.push(gc(A,sf,!0),":");var I=this.g;return(I||A=="file")&&(v.push("//"),(A=this.o)&&v.push(gc(A,sf,!0),"@"),v.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&v.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&v.push("/"),v.push(gc(I,I.charAt(0)=="/"?Ay:af,!0))),(I=this.i.toString())&&v.push("?",I),(I=this.m)&&v.push("#",gc(I,Xl)),v.join("")};function ii(v){return new Mn(v)}function fc(v,A,I){v.j=I?xi(A,!0):A,v.j&&(v.j=v.j.replace(/:$/,""))}function Ha(v,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);v.s=A}else v.s=null}function ta(v,A,I){A instanceof ea?(v.i=A,d0(v.i,v.h)):(I||(A=gc(A,Ty)),v.i=new ea(A,v.h))}function Be(v,A,I){v.i.set(A,I)}function dc(v){return Be(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function xi(v,A){return v?A?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function gc(v,A,I){return typeof v=="string"?(v=encodeURI(v).replace(A,f0),I&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function f0(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var sf=/[#\/\?@]/g,af=/[#\?:]/g,Ay=/[#\?]/g,Ty=/[#\?@]/g,Xl=/#/g;function ea(v,A){this.h=this.g=null,this.i=v||null,this.j=!!A}function wi(v){v.g||(v.g=new Map,v.h=0,v.i&&Ey(v.i,function(A,I){v.add(decodeURIComponent(A.replace(/\+/g," ")),I)}))}n=ea.prototype,n.add=function(v,A){wi(this),this.i=null,v=hs(this,v);var I=this.g.get(v);return I||this.g.set(v,I=[]),I.push(A),this.h+=1,this};function na(v,A){wi(v),A=hs(v,A),v.g.has(A)&&(v.i=null,v.h-=v.g.get(A).length,v.g.delete(A))}function ra(v,A){return wi(v),A=hs(v,A),v.g.has(A)}n.forEach=function(v,A){wi(this),this.g.forEach(function(I,F){I.forEach(function($){v.call(A,$,F,this)},this)},this)},n.na=function(){wi(this);const v=Array.from(this.g.values()),A=Array.from(this.g.keys()),I=[];for(let F=0;F<A.length;F++){const $=v[F];for(let at=0;at<$.length;at++)I.push(A[F])}return I},n.V=function(v){wi(this);let A=[];if(typeof v=="string")ra(this,v)&&(A=A.concat(this.g.get(hs(this,v))));else{v=Array.from(this.g.values());for(let I=0;I<v.length;I++)A=A.concat(v[I])}return A},n.set=function(v,A){return wi(this),this.i=null,v=hs(this,v),ra(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[A]),this.h+=1,this},n.get=function(v,A){return v?(v=this.V(v),0<v.length?String(v[0]):A):A};function of(v,A,I){na(v,A),0<I.length&&(v.i=null,v.g.set(hs(v,A),b(I)),v.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],A=Array.from(this.g.keys());for(var I=0;I<A.length;I++){var F=A[I];const at=encodeURIComponent(String(F)),bt=this.V(F);for(F=0;F<bt.length;F++){var $=at;bt[F]!==""&&($+="="+encodeURIComponent(String(bt[F]))),v.push($)}}return this.i=v.join("&")};function hs(v,A){return A=String(A),v.j&&(A=A.toLowerCase()),A}function d0(v,A){A&&!v.j&&(wi(v),v.i=null,v.g.forEach(function(I,F){var $=F.toLowerCase();F!=$&&(na(this,F),of(this,$,I))},v)),v.j=A}function pc(v,A){const I=new _i;if(o.Image){const F=new Image;F.onload=y(bi,I,"TestLoadImage: loaded",!0,A,F),F.onerror=y(bi,I,"TestLoadImage: error",!1,A,F),F.onabort=y(bi,I,"TestLoadImage: abort",!1,A,F),F.ontimeout=y(bi,I,"TestLoadImage: timeout",!1,A,F),o.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=v}else A(!1)}function Wi(v,A){const I=new _i,F=new AbortController,$=setTimeout(()=>{F.abort(),bi(I,"TestPingServer: timeout",!1,A)},1e4);fetch(v,{signal:F.signal}).then(at=>{clearTimeout($),at.ok?bi(I,"TestPingServer: ok",!0,A):bi(I,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout($),bi(I,"TestPingServer: error",!1,A)})}function bi(v,A,I,F,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),F(I)}catch{}}function mc(){this.g=new oc}function fs(v,A,I){const F=I||"";try{rf(v,function($,at){let bt=$;h($)&&(bt=Hi($)),A.push(F+at+"="+encodeURIComponent(bt))})}catch($){throw A.push(F+"type="+encodeURIComponent("_badmap")),$}}function Ga(v){this.l=v.Ub||null,this.j=v.eb||!1}x(Ga,Xh),Ga.prototype.g=function(){return new ia(this.l,this.j)},Ga.prototype.i=function(v){return function(){return v}}({});function ia(v,A){ye.call(this),this.D=v,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(ia,ye),n=ia.prototype,n.open=function(v,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=A,this.readyState=1,gs(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(A.body=v),(this.D||o).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ds(this)),this.readyState=0},n.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,gs(this)),this.g&&(this.readyState=3,gs(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cf(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function cf(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}n.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var A=v.value?v.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!v.done}))&&(this.response=this.responseText+=A)}v.done?ds(this):gs(this),this.readyState==3&&cf(this)}},n.Ra=function(v){this.g&&(this.response=this.responseText=v,ds(this))},n.Qa=function(v){this.g&&(this.response=v,ds(this))},n.ga=function(){this.g&&ds(this)};function ds(v){v.readyState=4,v.l=null,v.j=null,v.v=null,gs(v)}n.setRequestHeader=function(v,A){this.u.append(v,A)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],A=this.h.entries();for(var I=A.next();!I.done;)I=I.value,v.push(I[0]+": "+I[1]),I=A.next();return v.join(`\r
`)};function gs(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(ia.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function lf(v){let A="";return j(v,function(I,F){A+=F,A+=":",A+=I,A+=`\r
`}),A}function tr(v,A,I){t:{for(F in I){var F=!1;break t}F=!0}F||(I=lf(I),typeof v=="string"?I!=null&&encodeURIComponent(String(I)):Be(v,A,I))}function Se(v){ye.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Se,ye);var Kl=/^https?$/i,yc=["POST","PUT"];n=Se.prototype,n.Ha=function(v){this.J=v},n.ea=function(v,A,I,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);A=A?A.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cs.g(),this.v=this.o?Kh(this.o):Kh(cs),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(A,String(v),!0),this.B=!1}catch(at){g0(this,at);return}if(v=I||"",I=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var $ in F)I.set($,F[$]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const at of F.keys())I.set(at,F.get(at));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(I.keys()).find(at=>at.toLowerCase()=="content-type"),$=o.FormData&&v instanceof o.FormData,!(0<=Array.prototype.indexOf.call(yc,A,void 0))||F||$||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[at,bt]of I)this.g.setRequestHeader(at,bt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vc(this),this.u=!0,this.g.send(v),this.u=!1}catch(at){g0(this,at)}};function g0(v,A){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=A,v.m=5,$l(v),ps(v)}function $l(v){v.A||(v.A=!0,oe(v,"complete"),oe(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,oe(this,"complete"),oe(this,"abort"),ps(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ps(this,!0)),Se.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ql(this):this.bb())},n.bb=function(){Ql(this)};function Ql(v){if(v.h&&typeof a<"u"&&(!v.v[1]||Ei(v)!=4||v.Z()!=2)){if(v.u&&Ei(v)==4)br(v.Ea,0,v);else if(oe(v,"readystatechange"),Ei(v)==4){v.h=!1;try{const bt=v.Z();t:switch(bt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break t;default:A=!1}var I;if(!(I=A)){var F;if(F=bt===0){var $=String(v.D).match(hc)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),F=!Kl.test($?$.toLowerCase():"")}I=F}if(I)oe(v,"complete"),oe(v,"success");else{v.m=6;try{var at=2<Ei(v)?v.g.statusText:""}catch{at=""}v.l=at+" ["+v.Z()+"]",$l(v)}}finally{ps(v)}}}}function ps(v,A){if(v.g){vc(v);const I=v.g,F=v.v[0]?()=>{}:null;v.g=null,v.v=null,A||oe(v,"ready");try{I.onreadystatechange=F}catch{}}}function vc(v){v.I&&(o.clearTimeout(v.I),v.I=null)}n.isActive=function(){return!!this.g};function Ei(v){return v.g?v.g.readyState:0}n.Z=function(){try{return 2<Ei(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(v){if(this.g){var A=this.g.responseText;return v&&A.indexOf(v)==0&&(A=A.substring(v.length)),jl(A)}};function p0(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Sy(v){const A={};v=(v.g&&2<=Ei(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<v.length;F++){if(T(v[F]))continue;var I=H(v[F]);const $=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const at=A[$]||[];A[$]=at,at.push(I)}O(A,function(F){return F.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _c(v,A,I){return I&&I.internalChannelParams&&I.internalChannelParams[v]||A}function Zl(v){this.Aa=0,this.i=[],this.j=new _i,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_c("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_c("baseRetryDelayMs",5e3,v),this.cb=_c("retryDelaySeedMs",1e4,v),this.Wa=_c("forwardChannelMaxRetries",2,v),this.wa=_c("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new Js(v&&v.concurrentRequestLimit),this.Da=new mc,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Zl.prototype,n.la=8,n.G=1,n.connect=function(v,A,I,F){nn(0),this.W=v,this.H=A||{},I&&F!==void 0&&(this.H.OSID=I,this.H.OAID=F),this.F=this.X,this.I=b0(this,null,this.W),tu(this)};function uf(v){if(m0(v),v.G==3){var A=v.U++,I=ii(v.I);if(Be(I,"SID",v.K),Be(I,"RID",A),Be(I,"TYPE","terminate"),xc(v,I),A=new kr(v,v.j,A),A.L=2,A.v=dc(ii(I)),I=!1,o.navigator&&o.navigator.sendBeacon)try{I=o.navigator.sendBeacon(A.v.toString(),"")}catch{}!I&&o.Image&&(new Image().src=A.v,I=!0),I||(A.g=E0(A.j,null),A.g.ea(A.v)),A.F=Date.now(),lc(A)}w0(v)}function Jl(v){v.g&&(wc(v),v.g.cancel(),v.g=null)}function m0(v){Jl(v),v.u&&(o.clearTimeout(v.u),v.u=null),eu(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&o.clearTimeout(v.s),v.s=null)}function tu(v){if(!Gl(v.h)&&!v.s){v.s=!0;var A=v.Ga;ct||V(),yt||(ct(),yt=!0),et.add(A,v),v.B=0}}function Cy(v,A){return Wl(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=A.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=On(m(v.Ga,v,A),df(v,v.B)),v.B++,!0)}n.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const $=new kr(this,this.j,v);let at=this.o;if(this.S&&(at?(at=C(at),B(at,this.S)):at=this.S),this.m!==null||this.O||($.H=at,at=null),this.P)t:{for(var A=0,I=0;I<this.i.length;I++){e:{var F=this.i[I];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break e}F=void 0}if(F===void 0)break;if(A+=F,4096<A){A=I;break t}if(A===4096||I===this.i.length-1){A=I+1;break t}}A=1e3}else A=1e3;A=y0(this,$,A),I=ii(this.I),Be(I,"RID",v),Be(I,"CVER",22),this.D&&Be(I,"X-HTTP-Session-Id",this.D),xc(this,I),at&&(this.O?A="headers="+encodeURIComponent(String(lf(at)))+"&"+A:this.m&&tr(I,this.m,at)),ql(this.h,$),this.Ua&&Be(I,"TYPE","init"),this.P?(Be(I,"$req",A),Be(I,"SID","null"),$.T=!0,Gi($,I,null)):Gi($,I,A),this.G=2}}else this.G==3&&(v?hf(this,v):this.i.length==0||Gl(this.h)||hf(this))};function hf(v,A){var I;A?I=A.l:I=v.U++;const F=ii(v.I);Be(F,"SID",v.K),Be(F,"RID",I),Be(F,"AID",v.T),xc(v,F),v.m&&v.o&&tr(F,v.m,v.o),I=new kr(v,v.j,I,v.B+1),v.m===null&&(I.H=v.o),A&&(v.i=A.D.concat(v.i)),A=y0(v,I,1e3),I.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),ql(v.h,I),Gi(I,F,A)}function xc(v,A){v.H&&j(v.H,function(I,F){Be(A,F,I)}),v.l&&rf({},function(I,F){Be(A,F,I)})}function y0(v,A,I){I=Math.min(v.i.length,I);var F=v.l?m(v.l.Na,v.l,v):null;t:{var $=v.i;let at=-1;for(;;){const bt=["count="+I];at==-1?0<I?(at=$[0].g,bt.push("ofs="+at)):at=0:bt.push("ofs="+at);let fe=!0;for(let Un=0;Un<I;Un++){let de=$[Un].g;const er=$[Un].map;if(de-=at,0>de)at=Math.max(0,$[Un].g-100),fe=!1;else try{fs(er,bt,"req"+de+"_")}catch{F&&F(er)}}if(fe){F=bt.join("&");break t}}}return v=v.i.splice(0,I),A.D=v,F}function v0(v){if(!v.g&&!v.u){v.Y=1;var A=v.Fa;ct||V(),yt||(ct(),yt=!0),et.add(A,v),v.v=0}}function ff(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=On(m(v.Fa,v),df(v,v.v)),v.v++,!0)}n.Fa=function(){if(this.u=null,_0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=On(m(this.ab,this),v)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nn(10),Jl(this),_0(this))};function wc(v){v.A!=null&&(o.clearTimeout(v.A),v.A=null)}function _0(v){v.g=new kr(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var A=ii(v.qa);Be(A,"RID","rpc"),Be(A,"SID",v.K),Be(A,"AID",v.T),Be(A,"CI",v.F?"0":"1"),!v.F&&v.ja&&Be(A,"TO",v.ja),Be(A,"TYPE","xmlhttp"),xc(v,A),v.m&&v.o&&tr(A,v.m,v.o),v.L&&(v.g.I=v.L);var I=v.g;v=v.ia,I.L=1,I.v=dc(ii(A)),I.m=null,I.P=!0,Zs(I,v)}n.Za=function(){this.C!=null&&(this.C=null,Jl(this),ff(this),nn(19))};function eu(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function x0(v,A){var I=null;if(v.g==A){eu(v),wc(v),v.g=null;var F=2}else if(ef(v.h,A))I=A.D,Lr(v.h,A),F=1;else return;if(v.G!=0){if(A.o)if(F==1){I=A.m?A.m.length:0,A=Date.now()-A.F;var $=v.B;F=Ba(),oe(F,new Fn(F,I)),tu(v)}else v0(v);else if($=A.s,$==3||$==0&&0<A.X||!(F==1&&Cy(v,A)||F==2&&ff(v)))switch(I&&0<I.length&&(A=v.h,A.i=A.i.concat(I)),$){case 1:sa(v,5);break;case 4:sa(v,10);break;case 3:sa(v,6);break;default:sa(v,2)}}}function df(v,A){let I=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(I*=2),I*A}function sa(v,A){if(v.j.info("Error code "+A),A==2){var I=m(v.fb,v),F=v.Xa;const $=!F;F=new Mn(F||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||fc(F,"https"),dc(F),$?pc(F.toString(),I):Wi(F.toString(),I)}else nn(2);v.G=0,v.l&&v.l.sa(A),w0(v),m0(v)}n.fb=function(v){v?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function w0(v){if(v.G=0,v.ka=[],v.l){const A=nf(v.h);(A.length!=0||v.i.length!=0)&&(E(v.ka,A),E(v.ka,v.i),v.h.i.length=0,b(v.i),v.i.length=0),v.l.ra()}}function b0(v,A,I){var F=I instanceof Mn?ii(I):new Mn(I);if(F.g!="")A&&(F.g=A+"."+F.g),Ha(F,F.s);else{var $=o.location;F=$.protocol,A=A?A+"."+$.hostname:$.hostname,$=+$.port;var at=new Mn(null);F&&fc(at,F),A&&(at.g=A),$&&Ha(at,$),I&&(at.l=I),F=at}return I=v.D,A=v.ya,I&&A&&Be(F,I,A),Be(F,"VER",v.la),xc(v,F),F}function E0(v,A,I){if(A&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=v.Ca&&!v.pa?new Se(new Ga({eb:I})):new Se(v.pa),A.Ha(v.J),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function A0(){}n=A0.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function nu(){}nu.prototype.g=function(v,A){return new Vr(v,A)};function Vr(v,A){ye.call(this),this.g=new Zl(A),this.l=v,this.h=A&&A.messageUrlParams||null,v=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(v?v["X-WebChannel-Content-Type"]=A.messageContentType:v={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(v?v["X-WebChannel-Client-Profile"]=A.va:v={"X-WebChannel-Client-Profile":A.va}),this.g.S=v,(v=A&&A.Sb)&&!T(v)&&(this.g.m=v),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!T(A)&&(this.g.D=A,v=this.h,v!==null&&A in v&&(v=this.h,A in v&&delete v[A])),this.j=new ms(this)}x(Vr,ye),Vr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vr.prototype.close=function(){uf(this.g)},Vr.prototype.o=function(v){var A=this.g;if(typeof v=="string"){var I={};I.__data__=v,v=I}else this.u&&(I={},I.__data__=Hi(v),v=I);A.i.push(new h0(A.Ya++,v)),A.G==3&&tu(A)},Vr.prototype.N=function(){this.g.l=null,delete this.j,uf(this.g),delete this.g,Vr.aa.N.call(this)};function T0(v){$s.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var A=v.__sm__;if(A){t:{for(const I in A){v=I;break t}v=void 0}(this.i=v)&&(v=this.i,A=A!==null&&v in A?A[v]:void 0),this.data=A}else this.data=v}x(T0,$s);function S0(){Qh.call(this),this.status=1}x(S0,Qh);function ms(v){this.g=v}x(ms,A0),ms.prototype.ua=function(){oe(this.g,"a")},ms.prototype.ta=function(v){oe(this.g,new T0(v))},ms.prototype.sa=function(v){oe(this.g,new S0)},ms.prototype.ra=function(){oe(this.g,"b")},nu.prototype.createWebChannel=nu.prototype.g,Vr.prototype.send=Vr.prototype.o,Vr.prototype.open=Vr.prototype.m,Vr.prototype.close=Vr.prototype.close,R8=function(){return new nu},I8=function(){return Ba()},C8=os,U2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ja.NO_ERROR=0,ja.TIMEOUT=8,ja.HTTP_ERROR=6,b1=ja,Qs.COMPLETE="complete",S8=Qs,$h.EventType=Ks,Ks.OPEN="a",Ks.CLOSE="b",Ks.ERROR="c",Ks.MESSAGE="d",ye.prototype.listen=ye.prototype.K,Id=$h,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,T8=Se}).apply(typeof Wp<"u"?Wp:typeof self<"u"?self:typeof window<"u"?window:{});const KR="@firebase/firestore",$R="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Cr.UNAUTHENTICATED=new Cr(null),Cr.GOOGLE_CREDENTIALS=new Cr("google-credentials-uid"),Cr.FIRST_PARTY=new Cr("first-party-uid"),Cr.MOCK_USER=new Cr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zh="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=new Vm("@firebase/firestore");function zu(){return Al.logLevel}function mt(n,...t){if(Al.logLevel<=ue.DEBUG){const e=t.map($b);Al.debug(`Firestore (${zh}): ${n}`,...e)}}function Sn(n,...t){if(Al.logLevel<=ue.ERROR){const e=t.map($b);Al.error(`Firestore (${zh}): ${n}`,...e)}}function Eg(n,...t){if(Al.logLevel<=ue.WARN){const e=t.map($b);Al.warn(`Firestore (${zh}): ${n}`,...e)}}function $b(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,D8(n,r,e)}function D8(n,t,e){let r=`FIRESTORE (${zh}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw Sn(r),new Error(r)}function Lt(n,t,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,n||D8(t,i,r)}function Nt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class St extends as{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class o${getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Cr.UNAUTHENTICATED))}shutdown(){}}class c${constructor(t){this.t=t,this.currentUser=Cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Lt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,e(l)):Promise.resolve();let s=new js;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new js,t.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new js)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt(typeof r.accessToken=="string",31837,{l:r}),new a$(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Lt(t===null||typeof t=="string",2055,{h:t}),new Cr(t)}}class l${constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=Cr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class u${constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new l$(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(Cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QR{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h${constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Lt(this.o===void 0,3512);const r=s=>{s.error!=null&&mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,mt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new QR(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Lt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new QR(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f$(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=f$(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<e&&(r+=t.charAt(i[s]%62))}return r}}function Kt(n,t){return n<t?-1:n>t?1:0}function j2(n,t){const e=Math.min(n.length,t.length);for(let r=0;r<e;r++){const i=n.charAt(r),s=t.charAt(r);if(i!==s)return lx(i)===lx(s)?Kt(i,s):lx(i)?1:-1}return Kt(n.length,t.length)}const d$=55296,g$=57343;function lx(n){const t=n.charCodeAt(0);return t>=d$&&t<=g$}function ph(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function O8(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="__name__";class Ss{constructor(t,e,r){e===void 0?e=0:e>t.length&&It(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&It(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Ss.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ss?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const s=Ss.compareSegments(t.get(i),e.get(i));if(s!==0)return s}return Kt(t.length,e.length)}static compareSegments(t,e){const r=Ss.isNumericId(t),i=Ss.isNumericId(e);return r&&!i?-1:!r&&i?1:r&&i?Ss.extractNumericId(t).compare(Ss.extractNumericId(e)):j2(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Vo.fromString(t.substring(4,t.length-2))}}class Ie extends Ss{construct(t,e,r){return new Ie(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new St(dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new Ie(e)}static emptyPath(){return new Ie([])}}const p$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends Ss{construct(t,e,r){return new fn(t,e,r)}static isValidIdentifier(t){return p$.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ZR}static keyField(){return new fn([ZR])}static fromServerFormat(t){const e=[];let r="",i=0;const s=()=>{if(r.length===0)throw new St(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let a=!1;for(;i<t.length;){const o=t[i];if(o==="\\"){if(i+1===t.length)throw new St(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new St(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new St(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new fn(e)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(t){this.path=t}static fromPath(t){return new Ct(Ie.fromString(t))}static fromName(t){return new Ct(Ie.fromString(t).popFirst(5))}static empty(){return new Ct(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ie.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Ie.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ct(new Ie(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(n,t,e){if(!e)throw new St(dt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function m$(n,t,e,r){if(t===!0&&r===!0)throw new St(dt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function JR(n){if(!Ct.isDocumentKey(n))throw new St(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tD(n){if(Ct.isDocumentKey(n))throw new St(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function N8(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Zb(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":It(12329,{type:typeof n})}function Ws(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new St(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Zb(n);throw new St(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(n,t){const e={typeString:n};return t&&(e.value=t),e}function Yg(n,t){if(!N8(n))throw new St(dt.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){e=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){e=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){e=`Expected '${r}' field to equal '${s.value}'`;break}}if(e)throw new St(dt.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=-62135596800,nD=1e6;class Le{static now(){return Le.fromMillis(Date.now())}static fromDate(t){return Le.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*nD);return new Le(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new St(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new St(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<eD)throw new St(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new St(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nD}_compareTo(t){return this.seconds===t.seconds?Kt(this.nanoseconds,t.nanoseconds):Kt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Yg(t,Le._jsonSchema))return new Le(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-eD;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Le._jsonSchemaVersion="firestore/timestamp/1.0",Le._jsonSchema={type:Vn("string",Le._jsonSchemaVersion),seconds:Vn("number"),nanoseconds:Vn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{static fromTimestamp(t){return new Ft(t)}static min(){return new Ft(new Le(0,0))}static max(){return new Ft(new Le(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=-1;class am{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function z2(n){return n.fields.find(t=>t.kind===2)}function Xc(n){return n.fields.filter(t=>t.kind!==2)}am.UNKNOWN_ID=-1;class E1{constructor(t,e){this.fieldPath=t,this.kind=e}}class Ag{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Ag(0,vi.min())}}function P8(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ft.fromTimestamp(r===1e9?new Le(e+1,0):new Le(e,r));return new vi(i,Ct.empty(),t)}function k8(n){return new vi(n.readTime,n.key,mh)}class vi{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new vi(Ft.min(),Ct.empty(),mh)}static max(){return new vi(Ft.max(),Ct.empty(),mh)}}function Jb(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Ct.comparator(n.documentKey,t.documentKey),e!==0?e:Kt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(n){if(n.code!==dt.FAILED_PRECONDITION||n.message!==L8)throw n;mt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&It(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(e,s).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Q?e:Q.resolve(e)}catch(e){return Q.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Q.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Q.reject(e)}static resolve(t){return new Q((e,r)=>{e(t)})}static reject(t){return new Q((e,r)=>{r(t)})}static waitFor(t){return new Q((e,r)=>{let i=0,s=0,a=!1;t.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&e()},l=>r(l))}),a=!0,s===i&&e()})}static or(t){let e=Q.resolve(!1);for(const r of t)e=e.next(i=>i?Q.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,s)=>{r.push(e.call(this,i,s))}),this.waitFor(r)}static mapArray(t,e){return new Q((r,i)=>{const s=t.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const h=l;e(t[h]).next(d=>{a[h]=d,++o,o===s&&r(a)},d=>i(d))}})}static doWhile(t,e){return new Q((r,i)=>{const s=()=>{t()===!0?e().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di="SimpleDb";class Hm{static open(t,e,r,i){try{return new Hm(e,t.transaction(i,r))}catch(s){throw new $d(e,s)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new js,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new $d(t,e.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=tE(r.target.error);this.S.reject(new $d(t,i))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(mt(di,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new v$(e)}}class Bo{static delete(t){return mt(di,"Removing database:",t),Jc(rP().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!Mb())return!1;if(Bo.F())return!0;const t=Qn(),e=Bo.M(t),r=0<e&&e<10,i=B8(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.N=r,this.B=null,Bo.M(Qn())===12.2&&Sn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(mt(di,"Opening database:",this.name),this.db=await new Promise((e,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;e(a)},i.onblocked=()=>{r(new $d(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new St(dt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new St(dt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new $d(t,a))},i.onupgradeneeded=s=>{mt(di,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next(()=>{mt(di,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,i){const s=e==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(t);const o=Hm.open(this.db,t,s?"readonly":"readwrite",r),l=i(o).next(h=>(o.C(),h)).catch(h=>(o.abort(h),Q.reject(h))).toPromise();return l.catch(()=>{}),await o.D,l}catch(o){const l=o,h=l.name!=="FirebaseError"&&a<3;if(mt(di,"Transaction failed with error:",l.message,"Retrying:",h),this.close(),!h)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function B8(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class y${constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return Jc(this.U.delete())}}class $d extends St{constructor(t,e){super(dt.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function tc(n){return n.name==="IndexedDbTransactionError"}class v${constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(mt(di,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(mt(di,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Jc(r)}add(t){return mt(di,"ADD",this.store.name,t,t),Jc(this.store.add(t))}get(t){return Jc(this.store.get(t)).next(e=>(e===void 0&&(e=null),mt(di,"GET",this.store.name,t,e),e))}delete(t){return mt(di,"DELETE",this.store.name,t),Jc(this.store.delete(t))}count(){return mt(di,"COUNT",this.store.name),Jc(this.store.count())}J(t,e){const r=this.options(t,e),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new Q((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}})}{const s=this.cursor(r),a=[];return this.H(s,(o,l)=>{a.push(l)}).next(()=>a)}}Y(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new Q((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}Z(t,e){mt(di,"DELETE ALL",this.store.name);const r=this.options(t,e);r.X=!1;const i=this.cursor(r);return this.H(i,(s,a,o)=>o.delete())}ee(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.H(i,e)}te(t){const e=this.cursor({});return new Q((r,i)=>{e.onerror=s=>{const a=tE(s.target.error);i(a)},e.onsuccess=s=>{const a=s.target.result;a?t(a.primaryKey,a.value).next(o=>{o?a.continue():r()}):r()}})}H(t,e){const r=[];return new Q((i,s)=>{t.onerror=a=>{s(a.target.error)},t.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new y$(o),h=e(o.primaryKey,o.value,l);if(h instanceof Q){const d=h.catch(g=>(l.done(),Q.reject(g)));r.push(d)}l.isDone?i():l.G===null?o.continue():o.continue(l.G)}}).next(()=>Q.waitFor(r))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Jc(n){return new Q((t,e)=>{n.onsuccess=r=>{const i=r.target.result;t(i)},n.onerror=r=>{const i=tE(r.target.error);e(i)}})}let rD=!1;function tE(n){const t=Bo.M(Qn());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new St("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rD||(rD=!0,setTimeout(()=>{throw r},0)),r}}return n}const Qd="IndexBackfiller";class _${constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){mt(Qd,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{const e=await this.ne.ie();mt(Qd,`Documents written: ${e}`)}catch(e){tc(e)?mt(Qd,"Ignoring IndexedDB error during index backfill: ",e):await Jo(e)}await this.re(6e4)})}}class x${constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.se(e,t))}se(t,e){const r=new Set;let i=e,s=!0;return Q.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(a=>{if(a!==null&&!r.has(a))return mt(Qd,`Processing collection: ${a}`),this.oe(t,a,i).next(o=>{i-=o,r.add(a)});s=!1})).next(()=>e-i)}oe(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(i=>this.localStore.localDocuments.getNextDocuments(t,e,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(t,a).next(()=>this._e(i,s)).next(o=>(mt(Qd,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(t,e,o))).next(()=>a.size)}))}_e(t,e){let r=t;return e.changes.forEach((i,s)=>{const a=k8(s);Jb(a,r)>0&&(r=a)}),new vi(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Jr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=-1;function Gm(n){return n==null}function Tg(n){return n===0&&1/n==-1/0}function F8(n){return typeof n=="number"&&Number.isInteger(n)&&!Tg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="";function Nr(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=iD(t)),t=w$(n.get(e),t);return iD(t)}function w$(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":e+="";break;case om:e+="";break;default:e+=s}}return e}function iD(n){return n+om+""}function Os(n){const t=n.length;if(Lt(t>=2,64408,{path:n}),t===2)return Lt(n.charAt(0)===om&&n.charAt(1)==="",56145,{path:n}),Ie.emptyPath();const e=t-2,r=[];let i="";for(let s=0;s<t;){const a=n.indexOf(om,s);switch((a<0||a>e)&&It(50515,{path:n}),n.charAt(a+1)){case"":const o=n.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:It(61167,{path:n})}s=a+2}return new Ie(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc="remoteDocuments",Xg="owner",Nu="owner",Sg="mutationQueues",b$="userId",Ji="mutations",sD="batchId",ol="userMutationsIndex",aD=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(n,t){return[n,Nr(t)]}function U8(n,t,e){return[n,Nr(t),e]}const E$={},yh="documentMutations",cm="remoteDocumentsV14",A$=["prefixPath","collectionGroup","readTime","documentId"],T1="documentKeyIndex",T$=["prefixPath","collectionGroup","documentId"],j8="collectionGroupIndex",S$=["collectionGroup","readTime","prefixPath","documentId"],Cg="remoteDocumentGlobal",H2="remoteDocumentGlobalKey",vh="targets",z8="queryTargetsIndex",C$=["canonicalId","targetId"],_h="targetDocuments",I$=["targetId","path"],eE="documentTargetsIndex",R$=["path","targetId"],lm="targetGlobalKey",gl="targetGlobal",Ig="collectionParents",D$=["collectionId","parent"],xh="clientMetadata",O$="clientId",Wm="bundles",M$="bundleId",qm="namedQueries",N$="name",nE="indexConfiguration",P$="indexId",G2="collectionGroupIndex",k$="collectionGroup",Zd="indexState",L$=["indexId","uid"],H8="sequenceNumberIndex",V$=["uid","sequenceNumber"],Jd="indexEntries",B$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],G8="documentKeyIndex",F$=["indexId","uid","orderedDocumentKey"],Ym="documentOverlays",U$=["userId","collectionPath","documentId"],W2="collectionPathOverlayIndex",j$=["userId","collectionPath","largestBatchId"],W8="collectionGroupOverlayIndex",z$=["userId","collectionGroup","largestBatchId"],rE="globals",H$="name",q8=[Sg,Ji,yh,Kc,vh,Xg,gl,_h,xh,Cg,Ig,Wm,qm],G$=[...q8,Ym],Y8=[Sg,Ji,yh,cm,vh,Xg,gl,_h,xh,Cg,Ig,Wm,qm,Ym],X8=Y8,iE=[...X8,nE,Zd,Jd],W$=iE,K8=[...iE,rE],q$=K8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2 extends V8{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function Zn(n,t){const e=Nt(n);return Bo.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function ec(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function $8(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t,e){this.comparator=t,this.root=e||_r.EMPTY}insert(t,e){return new $e(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,_r.BLACK,null,null))}remove(t){return new $e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,_r.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new qp(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new qp(this.root,t,this.comparator,!1)}getReverseIterator(){return new qp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new qp(this.root,t,this.comparator,!0)}}class qp{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?r(t.key,e):1,e&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class _r{constructor(t,e,r,i,s){this.key=t,this.value=e,this.color=r??_r.RED,this.left=i??_r.EMPTY,this.right=s??_r.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,s){return new _r(t??this.key,e??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,e,r),null):s===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _r.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return _r.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,_r.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,_r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw It(43730,{key:this.key,value:this.value});if(this.right.isRed())throw It(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw It(27949);return t+(this.isRed()?0:1)}}_r.EMPTY=null,_r.RED=!0,_r.BLACK=!1;_r.EMPTY=new class{constructor(){this.size=0}get key(){throw It(57766)}get value(){throw It(16141)}get color(){throw It(16727)}get left(){throw It(29726)}get right(){throw It(36894)}copy(t,e,r,i,s){return this}insert(t,e,r){return new _r(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(t){this.comparator=t,this.data=new $e(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new cD(this.data.getIterator())}getIteratorFrom(t){return new cD(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Ve)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Ve(this.comparator);return e.data=t,e}}class cD{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pu(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t){this.fields=t,t.sort(fn.comparator)}static empty(){return new ti([])}unionWith(t){let e=new Ve(fn.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new ti(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ph(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Q8("Invalid base64 string: "+s):s}}(t);return new Dn(e)}static fromUint8Array(t){const e=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(t);return new Dn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Kt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Dn.EMPTY_BYTE_STRING=new Dn("");const Y$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ma(n){if(Lt(!!n,39018),typeof n=="string"){let t=0;const e=Y$.exec(n);if(Lt(!!e,46558,{timestamp:n}),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:sn(n.seconds),nanos:sn(n.nanos)}}function sn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Na(n){return typeof n=="string"?Dn.fromBase64String(n):Dn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8="server_timestamp",J8="__type__",t6="__previous_value__",e6="__local_write_time__";function sE(n){var e,r;return((r=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[J8])==null?void 0:r.stringValue)===Z8}function Xm(n){const t=n.mapValue.fields[t6];return sE(t)?Xm(t):t}function Rg(n){const t=Ma(n.mapValue.fields[e6].timestampValue);return new Le(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(t,e,r,i,s,a,o,l,h,d){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=h,this.isUsingEmulator=d}}const um="(default)";class Tl{constructor(t,e){this.projectId=t,this.database=e||um}static empty(){return new Tl("","")}get isDefaultDatabase(){return this.database===um}isEqual(t){return t instanceof Tl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="__type__",n6="__max__",Mo={mapValue:{fields:{__type__:{stringValue:n6}}}},oE="__vector__",wh="value",S1={nullValue:"NULL_VALUE"};function qo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sE(n)?4:r6(n)?9007199254740991:Km(n)?10:11:It(28295,{value:n})}function qs(n,t){if(n===t)return!0;const e=qo(n);if(e!==qo(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Rg(n).isEqual(Rg(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Ma(i.timestampValue),o=Ma(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(i,s){return Na(i.bytesValue).isEqual(Na(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,s){return sn(i.geoPointValue.latitude)===sn(s.geoPointValue.latitude)&&sn(i.geoPointValue.longitude)===sn(s.geoPointValue.longitude)}(n,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return sn(i.integerValue)===sn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=sn(i.doubleValue),o=sn(s.doubleValue);return a===o?Tg(a)===Tg(o):isNaN(a)&&isNaN(o)}return!1}(n,t);case 9:return ph(n.arrayValue.values||[],t.arrayValue.values||[],qs);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(oD(a)!==oD(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!qs(a[l],o[l])))return!1;return!0}(n,t);default:return It(52216,{left:n})}}function Dg(n,t){return(n.values||[]).find(e=>qs(e,t))!==void 0}function Yo(n,t){if(n===t)return 0;const e=qo(n),r=qo(t);if(e!==r)return Kt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,t.booleanValue);case 2:return function(s,a){const o=sn(s.integerValue||s.doubleValue),l=sn(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(n,t);case 3:return lD(n.timestampValue,t.timestampValue);case 4:return lD(Rg(n),Rg(t));case 5:return j2(n.stringValue,t.stringValue);case 6:return function(s,a){const o=Na(s),l=Na(a);return o.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let h=0;h<o.length&&h<l.length;h++){const d=Kt(o[h],l[h]);if(d!==0)return d}return Kt(o.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,a){const o=Kt(sn(s.latitude),sn(a.latitude));return o!==0?o:Kt(sn(s.longitude),sn(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return uD(n.arrayValue,t.arrayValue);case 10:return function(s,a){var m,y,x,b;const o=s.fields||{},l=a.fields||{},h=(m=o[wh])==null?void 0:m.arrayValue,d=(y=l[wh])==null?void 0:y.arrayValue,g=Kt(((x=h==null?void 0:h.values)==null?void 0:x.length)||0,((b=d==null?void 0:d.values)==null?void 0:b.length)||0);return g!==0?g:uD(h,d)}(n.mapValue,t.mapValue);case 11:return function(s,a){if(s===Mo.mapValue&&a===Mo.mapValue)return 0;if(s===Mo.mapValue)return 1;if(a===Mo.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),h=a.fields||{},d=Object.keys(h);l.sort(),d.sort();for(let g=0;g<l.length&&g<d.length;++g){const m=j2(l[g],d[g]);if(m!==0)return m;const y=Yo(o[l[g]],h[d[g]]);if(y!==0)return y}return Kt(l.length,d.length)}(n.mapValue,t.mapValue);default:throw It(23264,{he:e})}}function lD(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Kt(n,t);const e=Ma(n),r=Ma(t),i=Kt(e.seconds,r.seconds);return i!==0?i:Kt(e.nanos,r.nanos)}function uD(n,t){const e=n.values||[],r=t.values||[];for(let i=0;i<e.length&&i<r.length;++i){const s=Yo(e[i],r[i]);if(s)return s}return Kt(e.length,r.length)}function bh(n){return Y2(n)}function Y2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const r=Ma(e);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Na(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Ct.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let r="[",i=!0;for(const s of e.values||[])i?i=!1:r+=",",r+=Y2(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(e){const r=Object.keys(e.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Y2(e.fields[a])}`;return i+"}"}(n.mapValue):It(61005,{value:n})}function C1(n){switch(qo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Xm(n);return t?16+C1(t):16;case 5:return 2*n.stringValue.length;case 6:return Na(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+C1(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ec(r.fields,(s,a)=>{i+=s.length+C1(a)}),i}(n.mapValue);default:throw It(13486,{value:n})}}function cE(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function X2(n){return!!n&&"integerValue"in n}function Og(n){return!!n&&"arrayValue"in n}function hD(n){return!!n&&"nullValue"in n}function fD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function I1(n){return!!n&&"mapValue"in n}function Km(n){var e,r;return((r=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[aE])==null?void 0:r.stringValue)===oE}function tg(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return ec(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=tg(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=tg(n.arrayValue.values[e]);return t}return{...n}}function r6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===n6}const i6={mapValue:{fields:{[aE]:{stringValue:oE},[wh]:{arrayValue:{}}}}};function K$(n){return"nullValue"in n?S1:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?cE(Tl.empty(),Ct.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Km(n)?i6:{mapValue:{}}:It(35942,{value:n})}function $$(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?cE(Tl.empty(),Ct.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?i6:"mapValue"in n?Km(n)?{mapValue:{}}:Mo:It(61959,{value:n})}function dD(n,t){const e=Yo(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function gD(n,t){const e=Yo(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(t){this.value=t}static empty(){return new Rr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!I1(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=tg(e)}setAll(t){let e=fn.emptyPath(),r={},i=[];t.forEach((a,o)=>{if(!e.isImmediateParentOf(o)){const l=this.getFieldsMap(e);this.applyChanges(l,r,i),r={},i=[],e=o.popLast()}a?r[o.lastSegment()]=tg(a):i.push(o.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,r,i)}delete(t){const e=this.field(t.popLast());I1(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return qs(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];I1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){ec(e,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Rr(tg(this.value))}}function s6(n){const t=[];return ec(n.fields,(e,r)=>{const i=new fn([e]);if(I1(r)){const s=s6(r.mapValue).fields;if(s.length===0)t.push(i);else for(const a of s)t.push(i.child(a))}else t.push(i)}),new ti(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t,e,r,i,s,a,o){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(t){return new yn(t,0,Ft.min(),Ft.min(),Ft.min(),Rr.empty(),0)}static newFoundDocument(t,e,r,i){return new yn(t,1,e,Ft.min(),r,i,0)}static newNoDocument(t,e){return new yn(t,2,e,Ft.min(),Ft.min(),Rr.empty(),0)}static newUnknownDocument(t,e){return new yn(t,3,e,Ft.min(),Ft.min(),Rr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ft.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof yn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,e){this.position=t,this.inclusive=e}}function pD(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const s=t[i],a=n.position[i];if(s.field.isKeyField()?r=Ct.comparator(Ct.fromName(a.referenceValue),e.key):r=Yo(a,e.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function mD(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!qs(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(t,e="asc"){this.field=t,this.dir=e}}function Q$(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{}class he extends a6{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new Z$(t,e,r):e==="array-contains"?new eQ(t,r):e==="in"?new f6(t,r):e==="not-in"?new nQ(t,r):e==="array-contains-any"?new rQ(t,r):new he(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new J$(t,r):new tQ(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Yo(e,this.value)):e!==null&&qo(this.value)===qo(e)&&this.matchesComparison(Yo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return It(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class He extends a6{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new He(t,e)}matches(t){return Ah(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ah(n){return n.op==="and"}function K2(n){return n.op==="or"}function lE(n){return o6(n)&&Ah(n)}function o6(n){for(const t of n.filters)if(t instanceof He)return!1;return!0}function $2(n){if(n instanceof he)return n.field.canonicalString()+n.op.toString()+bh(n.value);if(lE(n))return n.filters.map(t=>$2(t)).join(",");{const t=n.filters.map(e=>$2(e)).join(",");return`${n.op}(${t})`}}function c6(n,t){return n instanceof he?function(r,i){return i instanceof he&&r.op===i.op&&r.field.isEqual(i.field)&&qs(r.value,i.value)}(n,t):n instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&c6(a,i.filters[o]),!0):!1}(n,t):void It(19439)}function l6(n,t){const e=n.filters.concat(t);return He.create(e,n.op)}function u6(n){return n instanceof he?function(e){return`${e.field.canonicalString()} ${e.op} ${bh(e.value)}`}(n):n instanceof He?function(e){return e.op.toString()+" {"+e.getFilters().map(u6).join(" ,")+"}"}(n):"Filter"}class Z$ extends he{constructor(t,e,r){super(t,e,r),this.key=Ct.fromName(r.referenceValue)}matches(t){const e=Ct.comparator(t.key,this.key);return this.matchesComparison(e)}}class J$ extends he{constructor(t,e){super(t,"in",e),this.keys=h6("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class tQ extends he{constructor(t,e){super(t,"not-in",e),this.keys=h6("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function h6(n,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map(r=>Ct.fromName(r.referenceValue))}class eQ extends he{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Og(e)&&Dg(e.arrayValue,this.value)}}class f6 extends he{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Dg(this.value.arrayValue,e)}}class nQ extends he{constructor(t,e){super(t,"not-in",e)}matches(t){if(Dg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Dg(this.value.arrayValue,e)}}class rQ extends he{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Og(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>Dg(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iQ{constructor(t,e=null,r=[],i=[],s=null,a=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function Q2(n,t=null,e=[],r=[],i=null,s=null,a=null){return new iQ(n,t,e,r,i,s,a)}function Sl(n){const t=Nt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>$2(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Gm(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>bh(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>bh(r)).join(",")),t.Te=e}return t.Te}function Kg(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!Q$(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!c6(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!mD(n.startAt,t.startAt)&&mD(n.endAt,t.endAt)}function fm(n){return Ct.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function dm(n,t){return n.filters.filter(e=>e instanceof he&&e.field.isEqual(t))}function yD(n,t,e){let r=S1,i=!0;for(const s of dm(n,t)){let a=S1,o=!0;switch(s.op){case"<":case"<=":a=K$(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=S1}dD({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(e!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const a=e.position[s];dD({value:r,inclusive:i},{value:a,inclusive:e.inclusive})<0&&(r=a,i=e.inclusive);break}}return{value:r,inclusive:i}}function vD(n,t,e){let r=Mo,i=!0;for(const s of dm(n,t)){let a=Mo,o=!0;switch(s.op){case">=":case">":a=$$(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Mo}gD({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(e!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const a=e.position[s];gD({value:r,inclusive:i},{value:a,inclusive:e.inclusive})>0&&(r=a,i=e.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(t,e=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function d6(n,t,e,r,i,s,a,o){return new $m(n,t,e,r,i,s,a,o)}function Qm(n){return new $m(n)}function _D(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sQ(n){return n.collectionGroup!==null}function eg(n){const t=Nt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Ve(fn.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(o=o.add(h.field))})}),o})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new hm(s,r))}),e.has(fn.keyField().canonicalString())||t.Ie.push(new hm(fn.keyField(),r))}return t.Ie}function yi(n){const t=Nt(n);return t.Ee||(t.Ee=aQ(t,eg(n))),t.Ee}function aQ(n,t){if(n.limitType==="F")return Q2(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new hm(i.field,s)});const e=n.endAt?new Eh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Eh(n.startAt.position,n.startAt.inclusive):null;return Q2(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function Z2(n,t,e){return new $m(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Zm(n,t){return Kg(yi(n),yi(t))&&n.limitType===t.limitType}function g6(n){return`${Sl(yi(n))}|lt:${n.limitType}`}function Hu(n){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(i=>u6(i)).join(", ")}]`),Gm(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>bh(i)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>bh(i)).join(",")),`Target(${r})`}(yi(n))}; limitType=${n.limitType})`}function $g(n,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ct.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,t)&&function(r,i){for(const s of eg(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,t)&&function(r,i){return!(r.startAt&&!function(a,o,l){const h=pD(a,o,l);return a.inclusive?h<=0:h<0}(r.startAt,eg(r),i)||r.endAt&&!function(a,o,l){const h=pD(a,o,l);return a.inclusive?h>=0:h>0}(r.endAt,eg(r),i))}(n,t)}function p6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function m6(n){return(t,e)=>{let r=!1;for(const i of eg(n)){const s=oQ(i,t,e);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function oQ(n,t,e){const r=n.field.isKeyField()?Ct.comparator(t.key,e.key):function(s,a,o){const l=a.data.field(s),h=o.data.field(s);return l!==null&&h!==null?Yo(l,h):It(42886)}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return It(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){ec(this.inner,(e,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return $8(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cQ=new $e(Ct.comparator);function pi(){return cQ}const y6=new $e(Ct.comparator);function Rd(...n){let t=y6;for(const e of n)t=t.insert(e.key,e);return t}function v6(n){let t=y6;return n.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function Ms(){return ng()}function _6(){return ng()}function ng(){return new ka(n=>n.toString(),(n,t)=>n.isEqual(t))}const lQ=new $e(Ct.comparator),uQ=new Ve(Ct.comparator);function ie(...n){let t=uQ;for(const e of n)t=t.add(e);return t}const hQ=new Ve(Kt);function uE(){return hQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tg(t)?"-0":t}}function x6(n){return{integerValue:""+n}}function fQ(n,t){return F8(t)?x6(t):hE(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this._=void 0}}function dQ(n,t,e){return n instanceof Mg?function(i,s){const a={fields:{[J8]:{stringValue:Z8},[e6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&sE(s)&&(s=Xm(s)),s&&(a.fields[t6]=s),{mapValue:a}}(e,t):n instanceof Th?b6(n,t):n instanceof Sh?E6(n,t):function(i,s){const a=w6(i,s),o=xD(a)+xD(i.Ae);return X2(a)&&X2(i.Ae)?x6(o):hE(i.serializer,o)}(n,t)}function gQ(n,t,e){return n instanceof Th?b6(n,t):n instanceof Sh?E6(n,t):e}function w6(n,t){return n instanceof Ng?function(r){return X2(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class Mg extends Jm{}class Th extends Jm{constructor(t){super(),this.elements=t}}function b6(n,t){const e=A6(t);for(const r of n.elements)e.some(i=>qs(i,r))||e.push(r);return{arrayValue:{values:e}}}class Sh extends Jm{constructor(t){super(),this.elements=t}}function E6(n,t){let e=A6(t);for(const r of n.elements)e=e.filter(i=>!qs(i,r));return{arrayValue:{values:e}}}class Ng extends Jm{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function xD(n){return sn(n.integerValue||n.doubleValue)}function A6(n){return Og(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{constructor(t,e){this.field=t,this.transform=e}}function mQ(n,t){return n.field.isEqual(t.field)&&function(r,i){return r instanceof Th&&i instanceof Th||r instanceof Sh&&i instanceof Sh?ph(r.elements,i.elements,qs):r instanceof Ng&&i instanceof Ng?qs(r.Ae,i.Ae):r instanceof Mg&&i instanceof Mg}(n.transform,t.transform)}class yQ{constructor(t,e){this.version=t,this.transformResults=e}}class Mr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Mr}static exists(t){return new Mr(void 0,t)}static updateTime(t){return new Mr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function R1(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class ty{}function T6(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new ey(n.key,Mr.none()):new Hh(n.key,n.data,Mr.none());{const e=n.data,r=Rr.empty();let i=new Ve(fn.comparator);for(let s of t.fields)if(!i.has(s)){let a=e.field(s);a===null&&s.length>1&&(s=s.popLast(),a=e.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new La(n.key,r,new ti(i.toArray()),Mr.none())}}function vQ(n,t,e){n instanceof Hh?function(i,s,a){const o=i.value.clone(),l=bD(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(n,t,e):n instanceof La?function(i,s,a){if(!R1(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=bD(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(S6(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,t,e):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,e)}function rg(n,t,e,r){return n instanceof Hh?function(s,a,o,l){if(!R1(s.precondition,a))return o;const h=s.value.clone(),d=ED(s.fieldTransforms,l,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(n,t,e,r):n instanceof La?function(s,a,o,l){if(!R1(s.precondition,a))return o;const h=ED(s.fieldTransforms,l,a),d=a.data;return d.setAll(S6(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,t,e,r):function(s,a,o){return R1(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(n,t,e)}function _Q(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),s=w6(r.transform,i||null);s!=null&&(e===null&&(e=Rr.empty()),e.set(r.field,s))}return e||null}function wD(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ph(r,i,(s,a)=>mQ(s,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Hh extends ty{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class La extends ty{constructor(t,e,r,i,s=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function S6(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function bD(n,t,e){const r=new Map;Lt(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let i=0;i<e.length;i++){const s=n[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,gQ(a,o,e[i]))}return r}function ED(n,t,e){const r=new Map;for(const i of n){const s=i.transform,a=e.data.field(i.field);r.set(i.field,dQ(s,a,t))}return r}class ey extends ty{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class C6 extends ty{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&vQ(s,t,r[i])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=rg(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=rg(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=_6();return this.mutations.forEach(i=>{const s=t.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=e.has(i.key)?null:o;const l=T6(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Ft.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),ie())}isEqual(t){return this.batchId===t.batchId&&ph(this.mutations,t.mutations,(e,r)=>wD(e,r))&&ph(this.baseMutations,t.baseMutations,(e,r)=>wD(e,r))}}class dE{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Lt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return lQ}();const s=t.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new dE(t,e,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xQ{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn,pe;function wQ(n){switch(n){case dt.OK:return It(64938);case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0;default:return It(15467,{code:n})}}function I6(n){if(n===void 0)return Sn("GRPC error has no .code"),dt.UNKNOWN;switch(n){case kn.OK:return dt.OK;case kn.CANCELLED:return dt.CANCELLED;case kn.UNKNOWN:return dt.UNKNOWN;case kn.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case kn.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case kn.INTERNAL:return dt.INTERNAL;case kn.UNAVAILABLE:return dt.UNAVAILABLE;case kn.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case kn.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case kn.NOT_FOUND:return dt.NOT_FOUND;case kn.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case kn.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case kn.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case kn.ABORTED:return dt.ABORTED;case kn.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case kn.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case kn.DATA_LOSS:return dt.DATA_LOSS;default:return It(39323,{code:n})}}(pe=kn||(kn={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bQ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EQ=new Vo([4294967295,4294967295],0);function AD(n){const t=bQ().encode(n),e=new A8;return e.update(t),new Uint8Array(e.digest())}function TD(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Vo([e,r],0),new Vo([i,s],0)]}class pE{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Dd(`Invalid padding: ${e}`);if(r<0)throw new Dd(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Dd(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new Dd(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Vo.fromNumber(this.ge)}ye(t,e,r){let i=t.add(e.multiply(Vo.fromNumber(r)));return i.compare(EQ)===1&&(i=new Vo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=AD(t),[r,i]=TD(e);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(t,e,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new pE(s,i,e);return r.forEach(o=>a.insert(o)),a}insert(t){if(this.ge===0)return;const e=AD(t),[r,i]=TD(e);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class Dd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(t,e,r,i,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const i=new Map;return i.set(t,Zg.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new Qg(Ft.min(),i,new $e(Kt),pi(),ie())}}class Zg{constructor(t,e,r,i,s){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new Zg(r,e,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(t,e,r,i){this.be=t,this.removedTargetIds=e,this.key=r,this.De=i}}class R6{constructor(t,e){this.targetId=t,this.Ce=e}}class D6{constructor(t,e,r=Dn.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class SD{constructor(){this.ve=0,this.Fe=CD(),this.Me=Dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ie(),e=ie(),r=ie();return this.Fe.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:It(38017,{changeType:s})}}),new Zg(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=CD()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class AQ{constructor(t){this.Ge=t,this.ze=new Map,this.je=pi(),this.Je=Yp(),this.He=Yp(),this.Ye=new $e(Kt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:It(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach((r,i)=>{this.rt(i)&&e(i)})}st(t){const e=t.targetId,r=t.Ce.count,i=this.ot(e);if(i){const s=i.target;if(fm(s))if(r===0){const a=new Ct(s.path);this.et(e,a,yn.newNoDocument(a,Ft.min()))}else Lt(r===1,20013,{expectedCount:r});else{const a=this._t(e);if(a!==r){const o=this.ut(t),l=o?this.ct(o,t,a):1;if(l!==0){this.it(e);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,h)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=e;let a,o;try{a=Na(r).toUint8Array()}catch(l){if(l instanceof Q8)return Eg("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new pE(a,i,s)}catch(l){return Eg(l instanceof Dd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(e,s,null),i++)}),i}Tt(t){const e=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&fm(o.target)){const l=new Ct(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,yn.newNoDocument(l,t))}s.Be&&(e.set(a,s.ke()),s.qe())}});let r=ie();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const h=this.ot(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const i=new Qg(t,e,this.Ye,this.je,r);return this.je=pi(),this.Je=Yp(),this.He=Yp(),this.Ye=new $e(Kt),i}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,e)?i.Qe(e,1):i.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new SD,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Ve(Kt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Ve(Kt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||mt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new SD),this.Ge.getRemoteKeysForTarget(t).forEach(e=>{this.et(t,e,null)})}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Yp(){return new $e(Ct.comparator)}function CD(){return new $e(Ct.comparator)}const TQ={asc:"ASCENDING",desc:"DESCENDING"},SQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CQ={and:"AND",or:"OR"};class IQ{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function J2(n,t){return n.useProto3Json||Gm(t)?t:{value:t}}function Ch(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function O6(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function RQ(n,t){return Ch(n,t.toTimestamp())}function Hr(n){return Lt(!!n,49232),Ft.fromTimestamp(function(e){const r=Ma(e);return new Le(r.seconds,r.nanos)}(n))}function mE(n,t){return tw(n,t).canonicalString()}function tw(n,t){const e=function(i){return new Ie(["projects",i.projectId,"databases",i.database])}(n).child("documents");return t===void 0?e:e.child(t)}function M6(n){const t=Ie.fromString(n);return Lt(j6(t),10190,{key:t.toString()}),t}function gm(n,t){return mE(n.databaseId,t.path)}function pl(n,t){const e=M6(t);if(e.get(1)!==n.databaseId.projectId)throw new St(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new St(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Ct(k6(e))}function N6(n,t){return mE(n.databaseId,t)}function P6(n){const t=M6(n);return t.length===4?Ie.emptyPath():k6(t)}function ew(n){return new Ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function k6(n){return Lt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ID(n,t,e){return{name:gm(n,t),fields:e.value.mapValue.fields}}function DQ(n,t,e){const r=pl(n,t.name),i=Hr(t.updateTime),s=t.createTime?Hr(t.createTime):Ft.min(),a=new Rr({mapValue:{fields:t.fields}}),o=yn.newFoundDocument(r,i,s,a);return e&&o.setHasCommittedMutations(),e?o.setHasCommittedMutations():o}function OQ(n,t){let e;if("targetChange"in t){t.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:It(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(Lt(d===void 0||typeof d=="string",58123),Dn.fromBase64String(d||"")):(Lt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Dn.fromUint8Array(d||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(h){const d=h.code===void 0?dt.UNKNOWN:I6(h.code);return new St(d,h.message||"")}(a);e=new D6(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=pl(n,r.document.name),s=Hr(r.document.updateTime),a=r.document.createTime?Hr(r.document.createTime):Ft.min(),o=new Rr({mapValue:{fields:r.document.fields}}),l=yn.newFoundDocument(i,s,a,o),h=r.targetIds||[],d=r.removedTargetIds||[];e=new D1(h,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=pl(n,r.document),s=r.readTime?Hr(r.readTime):Ft.min(),a=yn.newNoDocument(i,s),o=r.removedTargetIds||[];e=new D1([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=pl(n,r.document),s=r.removedTargetIds||[];e=new D1([],s,i,null)}else{if(!("filter"in t))return It(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new xQ(i,s),o=r.targetId;e=new R6(o,a)}}return e}function pm(n,t){let e;if(t instanceof Hh)e={update:ID(n,t.key,t.value)};else if(t instanceof ey)e={delete:gm(n,t.key)};else if(t instanceof La)e={update:ID(n,t.key,t.data),updateMask:VQ(t.fieldMask)};else{if(!(t instanceof C6))return It(16599,{Vt:t.type});e={verify:gm(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof Mg)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Th)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Sh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ng)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw It(20930,{transform:a.transform})}(0,r))),t.precondition.isNone||(e.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:RQ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:It(27497)}(n,t.precondition)),e}function nw(n,t){const e=t.currentDocument?function(s){return s.updateTime!==void 0?Mr.updateTime(Hr(s.updateTime)):s.exists!==void 0?Mr.exists(s.exists):Mr.none()}(t.currentDocument):Mr.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(a,o){let l=null;if("setToServerValue"in o)Lt(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new Mg;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];l=new Th(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];l=new Sh(d)}else"increment"in o?l=new Ng(a,o.increment):It(16584,{proto:o});const h=fn.fromServerFormat(o.fieldPath);return new pQ(h,l)}(n,i)):[];if(t.update){t.update.name;const i=pl(n,t.update.name),s=new Rr({mapValue:{fields:t.update.fields}});if(t.updateMask){const a=function(l){const h=l.fieldPaths||[];return new ti(h.map(d=>fn.fromServerFormat(d)))}(t.updateMask);return new La(i,s,a,e,r)}return new Hh(i,s,e,r)}if(t.delete){const i=pl(n,t.delete);return new ey(i,e)}if(t.verify){const i=pl(n,t.verify);return new C6(i,e)}return It(1463,{proto:t})}function MQ(n,t){return n&&n.length>0?(Lt(t!==void 0,14353),n.map(e=>function(i,s){let a=i.updateTime?Hr(i.updateTime):Hr(s);return a.isEqual(Ft.min())&&(a=Hr(s)),new yQ(a,i.transformResults||[])}(e,t))):[]}function L6(n,t){return{documents:[N6(n,t.path)]}}function V6(n,t){const e={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=N6(n,i);const s=function(h){if(h.length!==0)return U6(He.create(h,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:Gu(m.field),direction:PQ(m.dir)}}(d))}(t.orderBy);a&&(e.structuredQuery.orderBy=a);const o=J2(n,t.limit);return o!==null&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:e,parent:i}}function B6(n){let t=P6(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Lt(r===1,65062);const d=e.from[0];d.allDescendants?i=d.collectionId:t=t.child(d.collectionId)}let s=[];e.where&&(s=function(g){const m=F6(g);return m instanceof He&&lE(m)?m.getFilters():[m]}(e.where));let a=[];e.orderBy&&(a=function(g){return g.map(m=>function(x){return new hm(Wu(x.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(e.orderBy));let o=null;e.limit&&(o=function(g){let m;return m=typeof g=="object"?g.value:g,Gm(m)?null:m}(e.limit));let l=null;e.startAt&&(l=function(g){const m=!!g.before,y=g.values||[];return new Eh(y,m)}(e.startAt));let h=null;return e.endAt&&(h=function(g){const m=!g.before,y=g.values||[];return new Eh(y,m)}(e.endAt)),d6(t,i,a,s,o,"F",l,h)}function NQ(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It(28987,{purpose:i})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function F6(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Wu(e.unaryFilter.field);return he.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Wu(e.unaryFilter.field);return he.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Wu(e.unaryFilter.field);return he.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Wu(e.unaryFilter.field);return he.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return It(61313);default:return It(60726)}}(n):n.fieldFilter!==void 0?function(e){return he.create(Wu(e.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return It(58110);default:return It(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return He.create(e.compositeFilter.filters.map(r=>F6(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return It(1026)}}(e.compositeFilter.op))}(n):It(30097,{filter:n})}function PQ(n){return TQ[n]}function kQ(n){return SQ[n]}function LQ(n){return CQ[n]}function Gu(n){return{fieldPath:n.canonicalString()}}function Wu(n){return fn.fromServerFormat(n.fieldPath)}function U6(n){return n instanceof he?function(e){if(e.op==="=="){if(fD(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NAN"}};if(hD(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(fD(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NOT_NAN"}};if(hD(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gu(e.field),op:kQ(e.op),value:e.value}}}(n):n instanceof He?function(e){const r=e.getFilters().map(i=>U6(i));return r.length===1?r[0]:{compositeFilter:{op:LQ(e.op),filters:r}}}(n):It(54877,{filter:n})}function VQ(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function j6(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(t,e,r,i,s=Ft.min(),a=Ft.min(),o=Dn.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(t){return new Ca(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(t){this.yt=t}}function BQ(n,t){let e;if(t.document)e=DQ(n.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=Ct.fromSegments(t.noDocument.path),i=Il(t.noDocument.readTime);e=yn.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return It(56709);{const r=Ct.fromSegments(t.unknownDocument.path),i=Il(t.unknownDocument.version);e=yn.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(i){const s=new Le(i[0],i[1]);return Ft.fromTimestamp(s)}(t.readTime)),e}function RD(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:mm(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(s,a){return{name:gm(s,a.key),fields:a.data.value.mapValue.fields,updateTime:Ch(s,a.version.toTimestamp()),createTime:Ch(s,a.createTime.toTimestamp())}}(n.yt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Cl(t.version)};else{if(!t.isUnknownDocument())return It(57904,{document:t});r.unknownDocument={path:e.path.toArray(),version:Cl(t.version)}}return r}function mm(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Cl(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Il(n){const t=new Le(n.seconds,n.nanoseconds);return Ft.fromTimestamp(t)}function tl(n,t){const e=(t.baseMutations||[]).map(s=>nw(n.yt,s));for(let s=0;s<t.mutations.length-1;++s){const a=t.mutations[s];if(s+1<t.mutations.length&&t.mutations[s+1].transform!==void 0){const o=t.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map(s=>nw(n.yt,s)),i=Le.fromMillis(t.localWriteTimeMs);return new fE(t.batchId,i,e,r)}function Od(n){const t=Il(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?Il(n.lastLimboFreeSnapshotVersion):Ft.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){const a=s.documents.length;return Lt(a===1,1966,{count:a}),yi(Qm(P6(s.documents[0])))}(n.query):function(s){return yi(B6(s))}(n.query),new Ca(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,Dn.fromBase64String(n.resumeToken))}function H6(n,t){const e=Cl(t.snapshotVersion),r=Cl(t.lastLimboFreeSnapshotVersion);let i;i=fm(t.target)?L6(n.yt,t.target):V6(n.yt,t.target).ft;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Sl(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function G6(n){const t=B6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Z2(t,t.limit,"L"):t}function ux(n,t){return new gE(t.largestBatchId,nw(n.yt,t.overlayMutation))}function DD(n,t){const e=t.path.lastSegment();return[n,Nr(t.path.popLast()),e]}function OD(n,t,e,r){return{indexId:n,uid:t,sequenceNumber:e,readTime:Cl(r.readTime),documentKey:Nr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FQ{getBundleMetadata(t,e){return MD(t).get(e).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Il(s.createTime),version:s.version}}(r)})}saveBundleMetadata(t,e){return MD(t).put(function(i){return{bundleId:i.id,createTime:Cl(Hr(i.createTime)),version:i.version}}(e))}getNamedQuery(t,e){return ND(t).get(e).next(r=>{if(r)return function(s){return{name:s.name,query:G6(s.bundledQuery),readTime:Il(s.readTime)}}(r)})}saveNamedQuery(t,e){return ND(t).put(function(i){return{name:i.name,readTime:Cl(Hr(i.readTime)),bundledQuery:i.bundledQuery}}(e))}}function MD(n){return Zn(n,Wm)}function ND(n){return Zn(n,qm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const r=e.uid||"";return new ny(t,r)}getOverlay(t,e){return cd(t).get(DD(this.userId,e)).next(r=>r?ux(this.serializer,r):null)}getOverlays(t,e){const r=Ms();return Q.forEach(e,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,e,r){const i=[];return r.forEach((s,a)=>{const o=new gE(e,a);i.push(this.St(t,o))}),Q.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(a=>i.add(Nr(a.getCollectionPath())));const s=[];return i.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(cd(t).Z(W2,o))}),Q.waitFor(s)}getOverlaysForCollection(t,e,r){const i=Ms(),s=Nr(e),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return cd(t).J(W2,a).next(o=>{for(const l of o){const h=ux(this.serializer,l);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const s=Ms();let a;const o=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return cd(t).ee({index:W8,range:o},(l,h,d)=>{const g=ux(this.serializer,h);s.size()<i||g.largestBatchId===a?(s.set(g.getKey(),g),a=g.largestBatchId):d.done()}).next(()=>s)}St(t,e){return cd(t).put(function(i,s,a){const[o,l,h]=DD(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:pm(i.yt,a.mutation)}}(this.serializer,this.userId,e))}}function cd(n){return Zn(n,Ym)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UQ{bt(t){return Zn(t,rE)}getSessionToken(t){return this.bt(t).get("sessionToken").next(e=>{const r=e==null?void 0:e.value;return r?Dn.fromUint8Array(r):Dn.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(sn(t.integerValue));else if("doubleValue"in t){const r=sn(t.doubleValue);isNaN(r)?this.Ft(e,13):(this.Ft(e,15),Tg(r)?e.Mt(0):e.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(e,20),typeof r=="string"&&(r=Ma(r)),e.xt(`${r.seconds||""}`),e.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Na(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(e,45),e.Mt(r.latitude||0),e.Mt(r.longitude||0)}else"mapValue"in t?r6(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Km(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):It(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const r=t.fields||{};this.Ft(e,55);for(const i of Object.keys(r))this.Ot(i,e),this.Ct(r[i],e)}kt(t,e){var a,o;const r=t.fields||{};this.Ft(e,53);const i=wh,s=((o=(a=r[i].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(e,15),e.Mt(sn(s)),this.Ot(i,e),this.Ct(r[i],e)}Qt(t,e){const r=t.values||[];this.Ft(e,50);for(const i of r)this.Ct(i,e)}Lt(t,e){this.Ft(e,37),Ct.fromName(t).path.forEach(r=>{this.Ft(e,60),this.Ut(r,e)})}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}el.Kt=new el;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=255;function jQ(n){if(n===0)return 8;let t=0;return n>>4||(t+=4,n<<=4),n>>6||(t+=2,n<<=2),n>>7||(t+=1),t}function PD(n){const t=64-function(r){let i=0;for(let s=0;s<8;++s){const a=jQ(255&r[s]);if(i+=a,a!==8)break}return i}(n);return Math.ceil(t/8)}class zQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Gt(r.value),r=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Jt(r.value),r=e.next();this.Ht()}Yt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=e.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=e.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(t){const e=this.en(t),r=PD(e);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}nn(t){const e=this.en(t),r=PD(e);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}rn(){this.sn(ku),this.sn(255)}_n(){this.an(ku),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===ku?(this.sn(ku),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===ku?(this.an(ku),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class HQ{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class GQ{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class ld{constructor(){this.cn=new zQ,this.ln=new HQ(this.cn),this.hn=new GQ(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t,e,r,i){this.Tn=t,this.In=e,this.En=r,this.dn=i}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.dn,0),e!==t?r.set([0],this.dn.length):++r[r.length-1],new nl(this.Tn,this.In,this.En,r)}Rn(t,e,r){return{indexId:this.Tn,uid:t,arrayValue:O1(this.En),directionalValue:O1(this.dn),orderedDocumentKey:O1(e),documentKey:r.path.toArray()}}Vn(t,e,r){const i=this.Rn(t,e,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function go(n,t){let e=n.Tn-t.Tn;return e!==0?e:(e=kD(n.En,t.En),e!==0?e:(e=kD(n.dn,t.dn),e!==0?e:Ct.comparator(n.In,t.In)))}function kD(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(r!==0)return r}return n.length-t.length}function O1(n){return uP()?function(e){let r="";for(let i=0;i<e.length;i++)r+=String.fromCharCode(e[i]);return r}(n):n}function LD(n){return typeof n!="string"?n:function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(n)}class VD{constructor(t){this.mn=new Ve((e,r)=>fn.comparator(e.field,r.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const r=e;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(Lt(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=z2(t);if(e!==void 0&&!this.wn(e))return!1;const r=Xc(t);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=r[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let t=new Ve(fn.comparator);const e=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new E1(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new E1(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new E1(r.field,r.dir==="asc"?0:1)));return new am(am.UNKNOWN_ID,this.collectionId,e,Ag.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(n){var e,r;if(Lt(n instanceof he||n instanceof He,20012),n instanceof he){if(n instanceof f6){const i=((r=(e=n.value.arrayValue)==null?void 0:e.values)==null?void 0:r.map(s=>he.create(n.field,"==",s)))||[];return He.create(i,"or")}return n}const t=n.filters.map(i=>W6(i));return He.create(t,n.op)}function WQ(n){if(n.getFilters().length===0)return[];const t=sw(W6(n));return Lt(q6(t),7391),rw(t)||iw(t)?[t]:t.getFilters()}function rw(n){return n instanceof he}function iw(n){return n instanceof He&&lE(n)}function q6(n){return rw(n)||iw(n)||function(e){if(e instanceof He&&K2(e)){for(const r of e.getFilters())if(!rw(r)&&!iw(r))return!1;return!0}return!1}(n)}function sw(n){if(Lt(n instanceof he||n instanceof He,34018),n instanceof he)return n;if(n.filters.length===1)return sw(n.filters[0]);const t=n.filters.map(r=>sw(r));let e=He.create(t,n.op);return e=ym(e),q6(e)?e:(Lt(e instanceof He,64498),Lt(Ah(e),40251),Lt(e.filters.length>1,57927),e.filters.reduce((r,i)=>yE(r,i)))}function yE(n,t){let e;return Lt(n instanceof he||n instanceof He,38388),Lt(t instanceof he||t instanceof He,25473),e=n instanceof he?t instanceof he?function(i,s){return He.create([i,s],"and")}(n,t):BD(n,t):t instanceof he?BD(t,n):function(i,s){if(Lt(i.filters.length>0&&s.filters.length>0,48005),Ah(i)&&Ah(s))return l6(i,s.getFilters());const a=K2(i)?i:s,o=K2(i)?s:i,l=a.filters.map(h=>yE(h,o));return He.create(l,"or")}(n,t),ym(e)}function BD(n,t){if(Ah(t))return l6(t,n.getFilters());{const e=t.filters.map(r=>yE(n,r));return He.create(e,"or")}}function ym(n){if(Lt(n instanceof he||n instanceof He,11850),n instanceof he)return n;const t=n.getFilters();if(t.length===1)return ym(t[0]);if(o6(n))return n;const e=t.map(i=>ym(i)),r=[];return e.forEach(i=>{i instanceof he?r.push(i):i instanceof He&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:He.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ{constructor(){this.Cn=new vE}addToCollectionParentIndex(t,e){return this.Cn.add(e),Q.resolve()}getCollectionParents(t,e){return Q.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return Q.resolve()}deleteFieldIndex(t,e){return Q.resolve()}deleteAllFieldIndexes(t){return Q.resolve()}createTargetIndexes(t,e){return Q.resolve()}getDocumentsMatchingTarget(t,e){return Q.resolve(null)}getIndexType(t,e){return Q.resolve(0)}getFieldIndexes(t,e){return Q.resolve([])}getNextCollectionGroupToUpdate(t){return Q.resolve(null)}getMinOffset(t,e){return Q.resolve(vi.min())}getMinOffsetFromCollectionGroup(t,e){return Q.resolve(vi.min())}updateCollectionGroup(t,e,r){return Q.resolve()}updateIndexEntries(t,e){return Q.resolve()}}class vE{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new Ve(Ie.comparator),s=!i.has(r);return this.index[e]=i.add(r),s}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Ve(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="IndexedDbIndexManager",Xp=new Uint8Array(0);class YQ{constructor(t,e){this.databaseId=e,this.vn=new vE,this.Fn=new ka(r=>Sl(r),(r,i)=>Kg(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.vn.add(e)});const s={collectionId:r,parent:Nr(i)};return UD(t).put(s)}return Q.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[O8(e),""],!1,!0);return UD(t).J(i).next(s=>{for(const a of s){if(a.collectionId!==e)break;r.push(Os(a.parent))}return r})}addFieldIndex(t,e){const r=ud(t),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(e);delete i.indexId;const s=r.add(i);if(e.indexState){const a=Vu(t);return s.next(o=>{a.put(OD(o,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const r=ud(t),i=Vu(t),s=Lu(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=ud(t),r=Lu(t),i=Vu(t);return e.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(t,e){return Q.forEach(this.Mn(e),r=>this.getIndexType(t,r).next(i=>{if(i===0||i===1){const s=new VD(r).Dn();if(s!=null)return this.addFieldIndex(t,s)}}))}getDocumentsMatchingTarget(t,e){const r=Lu(t);let i=!0;const s=new Map;return Q.forEach(this.Mn(e),a=>this.xn(t,a).next(o=>{i&&(i=!!o),s.set(a,o)})).next(()=>{if(i){let a=ie();const o=[];return Q.forEach(s,(l,h)=>{mt(FD,`Using index ${function(R){return`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(l)} to execute ${Sl(e)}`);const d=function(R,k){const N=z2(k);if(N===void 0)return null;for(const j of dm(R,N.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(h,l),g=function(R,k){const N=new Map;for(const j of Xc(k))for(const O of dm(R,j.fieldPath))switch(O.op){case"==":case"in":N.set(j.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return N.set(j.fieldPath.canonicalString(),O.value),Array.from(N.values())}return null}(h,l),m=function(R,k){const N=[];let j=!0;for(const O of Xc(k)){const C=O.kind===0?yD(R,O.fieldPath,R.startAt):vD(R,O.fieldPath,R.startAt);N.push(C.value),j&&(j=C.inclusive)}return new Eh(N,j)}(h,l),y=function(R,k){const N=[];let j=!0;for(const O of Xc(k)){const C=O.kind===0?vD(R,O.fieldPath,R.endAt):yD(R,O.fieldPath,R.endAt);N.push(C.value),j&&(j=C.inclusive)}return new Eh(N,j)}(h,l),x=this.On(l,h,m),b=this.On(l,h,y),E=this.Nn(l,h,g),S=this.Bn(l.indexId,d,x,m.inclusive,b,y.inclusive,E);return Q.forEach(S,T=>r.Y(T,e.limit).next(R=>{R.forEach(k=>{const N=Ct.fromSegments(k.documentKey);a.has(N)||(a=a.add(N),o.push(N))})}))}).next(()=>o)}return Q.resolve(null)})}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=WQ(He.create(t.filters,"and")).map(r=>Q2(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt)),this.Fn.set(t,e),e)}Bn(t,e,r,i,s,a,o){const l=(e!=null?e.length:1)*Math.max(r.length,s.length),h=l/(e!=null?e.length:1),d=[];for(let g=0;g<l;++g){const m=e?this.Ln(e[g/h]):Xp,y=this.kn(t,m,r[g%h],i),x=this.qn(t,m,s[g%h],a),b=o.map(E=>this.kn(t,m,E,!0));d.push(...this.createRange(y,x,b))}return d}kn(t,e,r,i){const s=new nl(t,Ct.empty(),e,r);return i?s:s.An()}qn(t,e,r,i){const s=new nl(t,Ct.empty(),e,r);return i?s.An():s}xn(t,e){const r=new VD(e),i=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(s=>{let a=null;for(const o of s)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(t,e){let r=2;const i=this.Mn(e);return Q.forEach(i,s=>this.xn(t,s).next(a=>{a?r!==0&&a.fields.length<function(l){let h=new Ve(fn.comparator),d=!1;for(const g of l.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:h=h.add(m.field));for(const g of l.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(e)&&i.length>1&&r===2?1:r)}Qn(t,e){const r=new ld;for(const i of Xc(t)){const s=e.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);el.Kt.Dt(s,a)}return r.un()}Ln(t){const e=new ld;return el.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const r=new ld;return el.Kt.Dt(cE(this.databaseId,e),r.Pn(function(s){const a=Xc(s);return a.length===0?0:a[a.length-1].kind}(t))),r.un()}Nn(t,e,r){if(r===null)return[];let i=[];i.push(new ld);let s=0;for(const a of Xc(t)){const o=r[s++];for(const l of i)if(this.Un(e,a.fieldPath)&&Og(o))i=this.Kn(i,a,o);else{const h=l.Pn(a.kind);el.Kt.Dt(o,h)}}return this.Wn(i)}On(t,e,r){return this.Nn(t,e,r.position)}Wn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].un();return e}Kn(t,e,r){const i=[...t],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const l=new ld;l.seed(o.un()),el.Kt.Dt(a,l.Pn(e.kind)),s.push(l)}return s}Un(t,e){return!!t.filters.find(r=>r instanceof he&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(t,e){const r=ud(t),i=Vu(t);return(e?r.J(G2,IDBKeyRange.bound(e,e)):r.J()).next(s=>{const a=[];return Q.forEach(s,o=>i.get([o.indexId,this.uid]).next(l=>{a.push(function(d,g){const m=g?new Ag(g.sequenceNumber,new vi(Il(g.readTime),new Ct(Os(g.documentKey)),g.largestBatchId)):Ag.empty(),y=d.fields.map(([x,b])=>new E1(fn.fromServerFormat(x),b));return new am(d.indexId,d.collectionGroup,y,m)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Kt(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=ud(t),s=Vu(t);return this.Gn(t).next(a=>i.J(G2,IDBKeyRange.bound(e,e)).next(o=>Q.forEach(o,l=>s.put(OD(l.indexId,this.uid,a,r)))))}updateIndexEntries(t,e){const r=new Map;return Q.forEach(e,(i,s)=>{const a=r.get(i.collectionGroup);return(a?Q.resolve(a):this.getFieldIndexes(t,i.collectionGroup)).next(o=>(r.set(i.collectionGroup,o),Q.forEach(o,l=>this.zn(t,i,l).next(h=>{const d=this.jn(s,l);return h.isEqual(d)?Q.resolve():this.Jn(t,s,l,h,d)}))))})}Hn(t,e,r,i){return Lu(t).put(i.Rn(this.uid,this.$n(r,e.key),e.key))}Yn(t,e,r,i){return Lu(t).delete(i.Vn(this.uid,this.$n(r,e.key),e.key))}zn(t,e,r){const i=Lu(t);let s=new Ve(go);return i.ee({index:G8,range:IDBKeyRange.only([r.indexId,this.uid,O1(this.$n(r,e))])},(a,o)=>{s=s.add(new nl(r.indexId,e,LD(o.arrayValue),LD(o.directionalValue)))}).next(()=>s)}jn(t,e){let r=new Ve(go);const i=this.Qn(e,t);if(i==null)return r;const s=z2(e);if(s!=null){const a=t.data.field(s.fieldPath);if(Og(a))for(const o of a.arrayValue.values||[])r=r.add(new nl(e.indexId,t.key,this.Ln(o),i))}else r=r.add(new nl(e.indexId,t.key,Xp,i));return r}Jn(t,e,r,i,s){mt(FD,"Updating index entries for document '%s'",e.key);const a=[];return function(l,h,d,g,m){const y=l.getIterator(),x=h.getIterator();let b=Pu(y),E=Pu(x);for(;b||E;){let S=!1,T=!1;if(b&&E){const R=d(b,E);R<0?T=!0:R>0&&(S=!0)}else b!=null?T=!0:S=!0;S?(g(E),E=Pu(x)):T?(m(b),b=Pu(y)):(b=Pu(y),E=Pu(x))}}(i,s,go,o=>{a.push(this.Hn(t,e,r,o))},o=>{a.push(this.Yn(t,e,r,o))}),Q.waitFor(a)}Gn(t){let e=1;return Vu(t).ee({index:H8,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((a,o)=>go(a,o)).filter((a,o,l)=>!o||go(a,l[o-1])!==0);const i=[];i.push(t);for(const a of r){const o=go(a,t),l=go(a,e);if(o===0)i[0]=t.An();else if(o>0&&l<0)i.push(a),i.push(a.An());else if(l>0)break}i.push(e);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const o=i[a].Vn(this.uid,Xp,Ct.empty()),l=i[a+1].Vn(this.uid,Xp,Ct.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(t,e){return go(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(jD)}getMinOffset(t,e){return Q.mapArray(this.Mn(e),r=>this.xn(t,r).next(i=>i||It(44426))).next(jD)}}function UD(n){return Zn(n,Ig)}function Lu(n){return Zn(n,Jd)}function ud(n){return Zn(n,nE)}function Vu(n){return Zn(n,Zd)}function jD(n){Lt(n.length!==0,28825);let t=n[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Jb(i,t)<0&&(t=i),e<i.largestBatchId&&(e=i.largestBatchId)}return new vi(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Y6=41943040;class Ir{static withCacheSize(t){return new Ir(t,Ir.DEFAULT_COLLECTION_PERCENTILE,Ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(n,t,e){const r=n.store(Ji),i=n.store(yh),s=[],a=IDBKeyRange.only(e.batchId);let o=0;const l=r.ee({range:a},(d,g,m)=>(o++,m.delete()));s.push(l.next(()=>{Lt(o===1,47070,{batchId:e.batchId})}));const h=[];for(const d of e.mutations){const g=U8(t,d.key.path,e.batchId);s.push(i.delete(g)),h.push(d.key)}return Q.waitFor(s).next(()=>h)}function vm(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw It(14731);t=n.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir.DEFAULT_COLLECTION_PERCENTILE=10,Ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ir.DEFAULT=new Ir(Y6,Ir.DEFAULT_COLLECTION_PERCENTILE,Ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ir.DISABLED=new Ir(-1,0,0);class ry{constructor(t,e,r,i){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(t,e,r,i){Lt(t.uid!=="",64387);const s=t.isAuthenticated()?t.uid:"";return new ry(s,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return po(t).ee({index:ol,range:r},(i,s,a)=>{e=!1,a.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const s=qu(t),a=po(t);return a.add({}).next(o=>{Lt(typeof o=="number",49019);const l=new fE(o,e,r,i),h=function(y,x,b){const E=b.baseMutations.map(T=>pm(y.yt,T)),S=b.mutations.map(T=>pm(y.yt,T));return{userId:x,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:E,mutations:S}}(this.serializer,this.userId,l),d=[];let g=new Ve((m,y)=>Kt(m.canonicalString(),y.canonicalString()));for(const m of i){const y=U8(this.userId,m.key.path,o);g=g.add(m.key.path.popLast()),d.push(a.put(h)),d.push(s.put(y,E$))}return g.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(t,m))}),t.addOnCommittedListener(()=>{this.Xn[o]=l.keys()}),Q.waitFor(d).next(()=>l)})}lookupMutationBatch(t,e){return po(t).get(e).next(r=>r?(Lt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:e}),tl(this.serializer,r)):null)}er(t,e){return this.Xn[e]?Q.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.Xn[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return po(t).ee({index:ol,range:i},(a,o,l)=>{o.userId===this.userId&&(Lt(o.batchId>=r,47524,{tr:r}),s=tl(this.serializer,o)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=dl;return po(t).ee({index:ol,range:e,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,dl],[this.userId,Number.POSITIVE_INFINITY]);return po(t).J(ol,e).next(r=>r.map(i=>tl(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=A1(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return qu(t).ee({range:i},(a,o,l)=>{const[h,d,g]=a,m=Os(d);if(h===this.userId&&e.path.isEqual(m))return po(t).get(g).next(y=>{if(!y)throw It(61480,{nr:a,batchId:g});Lt(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:g}),s.push(tl(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Ve(Kt);const i=[];return e.forEach(s=>{const a=A1(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=qu(t).ee({range:o},(h,d,g)=>{const[m,y,x]=h,b=Os(y);m===this.userId&&s.path.isEqual(b)?r=r.add(x):g.done()});i.push(l)}),Q.waitFor(i).next(()=>this.rr(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,s=A1(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new Ve(Kt);return qu(t).ee({range:a},(l,h,d)=>{const[g,m,y]=l,x=Os(m);g===this.userId&&r.isPrefixOf(x)?x.length===i&&(o=o.add(y)):d.done()}).next(()=>this.rr(t,o))}rr(t,e){const r=[],i=[];return e.forEach(s=>{i.push(po(t).get(s).next(a=>{if(a===null)throw It(35274,{batchId:s});Lt(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(tl(this.serializer,a))}))}),Q.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return X6(t.le,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this.ir(e.batchId)}),Q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Q.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return qu(t).ee({range:r},(s,a,o)=>{if(s[0]===this.userId){const l=Os(s[1]);i.push(l)}else o.done()}).next(()=>{Lt(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(t,e){return K6(t,this.userId,e)}_r(t){return $6(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:dl,lastStreamToken:""})}}function K6(n,t,e){const r=A1(t,e.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return qu(n).ee({range:s,X:!0},(o,l,h)=>{const[d,g,m]=o;d===t&&g===i&&(a=!0),h.done()}).next(()=>a)}function po(n){return Zn(n,Ji)}function qu(n){return Zn(n,yh)}function $6(n){return Zn(n,Sg)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Rl(0)}static cr(){return new Rl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XQ{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next(e=>{const r=new Rl(e.highestTargetId);return e.highestTargetId=r.next(),this.hr(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.lr(t).next(e=>Ft.fromTimestamp(new Le(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.lr(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.lr(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.hr(t,i)))}addTargetData(t,e){return this.Pr(t,e).next(()=>this.lr(t).next(r=>(r.targetCount+=1,this.Tr(e,r),this.hr(t,r))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Bu(t).delete(e.targetId)).next(()=>this.lr(t)).next(r=>(Lt(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r)))}removeTargets(t,e,r){let i=0;const s=[];return Bu(t).ee((a,o)=>{const l=Od(o);l.sequenceNumber<=e&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(t,l)))}).next(()=>Q.waitFor(s)).next(()=>i)}forEachTarget(t,e){return Bu(t).ee((r,i)=>{const s=Od(i);e(s)})}lr(t){return HD(t).get(lm).next(e=>(Lt(e!==null,2888),e))}hr(t,e){return HD(t).put(lm,e)}Pr(t,e){return Bu(t).put(H6(this.serializer,e))}Tr(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next(e=>e.targetCount)}getTargetData(t,e){const r=Sl(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Bu(t).ee({range:i,index:z8},(a,o,l)=>{const h=Od(o);Kg(e,h.target)&&(s=h,l.done())}).next(()=>s)}addMatchingKeys(t,e,r){const i=[],s=Co(t);return e.forEach(a=>{const o=Nr(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(t,r,a))}),Q.waitFor(i)}removeMatchingKeys(t,e,r){const i=Co(t);return Q.forEach(e,s=>{const a=Nr(s.path);return Q.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(t,r,s)])})}removeMatchingKeysForTargetId(t,e){const r=Co(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=Co(t);let s=ie();return i.ee({range:r,X:!0},(a,o,l)=>{const h=Os(a[1]),d=new Ct(h);s=s.add(d)}).next(()=>s)}containsKey(t,e){const r=Nr(e.path),i=IDBKeyRange.bound([r],[O8(r)],!1,!0);let s=0;return Co(t).ee({index:eE,X:!0,range:i},([a,o],l,h)=>{a!==0&&(s++,h.done())}).next(()=>s>0)}At(t,e){return Bu(t).get(e).next(r=>r?Od(r):null)}}function Bu(n){return Zn(n,vh)}function HD(n){return Zn(n,gl)}function Co(n){return Zn(n,_h)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="LruGarbageCollector",Q6=1048576;function WD([n,t],[e,r]){const i=Kt(n,e);return i===0?Kt(t,r):i}class KQ{constructor(t){this.Ir=t,this.buffer=new Ve(WD),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();WD(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Z6{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){mt(GD,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){tc(e)?mt(GD,"Ignoring IndexedDB error during garbage collection: ",e):await Jo(e)}await this.Vr(3e5)})}}class $Q{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return Q.resolve(Jr.ce);const r=new KQ(e);return this.mr.forEachTarget(t,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(t,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(mt("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(zD)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(mt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zD):this.yr(t,e))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,i,s,a,o,l,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(mt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(t,i))).next(g=>(r=g,o=Date.now(),this.removeTargets(t,r,e))).next(g=>(s=g,l=Date.now(),this.removeOrphanedDocuments(t,r))).next(g=>(h=Date.now(),zu()<=ue.DEBUG&&mt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${g} documents in `+(h-l)+`ms
Total Duration: ${h-d}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function J6(n,t){return new $Q(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQ{constructor(t,e){this.db=t,this.garbageCollector=J6(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}wr(t){let e=0;return this.pr(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,(r,i)=>e(i))}addReference(t,e,r){return Kp(t,r)}removeReference(t,e,r){return Kp(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return Kp(t,e)}br(t,e){return function(i,s){let a=!1;return $6(i).te(o=>K6(i,o,s).next(l=>(l&&(a=!0),Q.resolve(!l)))).next(()=>a)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(t,(a,o)=>{if(o<=e){const l=this.br(t,a).next(h=>{if(!h)return s++,r.getEntry(t,a).next(()=>(r.removeEntry(a,Ft.min()),Co(t).delete(function(g){return[0,Nr(g.path)]}(a))))});i.push(l)}}).next(()=>Q.waitFor(i)).next(()=>r.apply(t)).next(()=>s)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return Kp(t,e)}Sr(t,e){const r=Co(t);let i,s=Jr.ce;return r.ee({index:eE},([a,o],{path:l,sequenceNumber:h})=>{a===0?(s!==Jr.ce&&e(new Ct(Os(i)),s),s=h,i=l):s=Jr.ce}).next(()=>{s!==Jr.ce&&e(new Ct(Os(i)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Kp(n,t){return Co(n).put(function(r,i){return{targetId:0,path:Nr(r.path),sequenceNumber:i}}(t,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(){this.changes=new ka(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,yn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?Q.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQ{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return jc(t).put(r)}removeEntry(t,e,r){return jc(t).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],mm(a),o[o.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.Dr(t,r)))}getEntry(t,e){let r=yn.newInvalidDocument(e);return jc(t).ee({index:T1,range:IDBKeyRange.only(hd(e))},(i,s)=>{r=this.Cr(e,s)}).next(()=>r)}vr(t,e){let r={size:0,document:yn.newInvalidDocument(e)};return jc(t).ee({index:T1,range:IDBKeyRange.only(hd(e))},(i,s)=>{r={document:this.Cr(e,s),size:vm(s)}}).next(()=>r)}getEntries(t,e){let r=pi();return this.Fr(t,e,(i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)}).next(()=>r)}Mr(t,e){let r=pi(),i=new $e(Ct.comparator);return this.Fr(t,e,(s,a)=>{const o=this.Cr(s,a);r=r.insert(s,o),i=i.insert(s,vm(a))}).next(()=>({documents:r,Or:i}))}Fr(t,e,r){if(e.isEmpty())return Q.resolve();let i=new Ve(XD);e.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(hd(i.first()),hd(i.last())),a=i.getIterator();let o=a.getNext();return jc(t).ee({index:T1,range:s},(l,h,d)=>{const g=Ct.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;o&&XD(o,g)<0;)r(o,null),o=a.getNext();o&&o.isEqual(g)&&(r(o,h),o=a.hasNext()?a.getNext():null),o?d.j(hd(o)):d.done()}).next(()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(t,e,r,i,s){const a=e.path,o=[a.popLast().toArray(),a.lastSegment(),mm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jc(t).J(IDBKeyRange.bound(o,l,!0)).next(h=>{s==null||s.incrementDocumentReadCount(h.length);let d=pi();for(const g of h){const m=this.Cr(Ct.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&($g(e,m)||i.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(t,e,r,i){let s=pi();const a=YD(e,r),o=YD(e,vi.max());return jc(t).ee({index:j8,range:IDBKeyRange.bound(a,o,!0)},(l,h,d)=>{const g=this.Cr(Ct.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(g.key,g),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(t){return new JQ(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return qD(t).get(H2).next(e=>(Lt(!!e,20021),e))}Dr(t,e){return qD(t).put(H2,e)}Cr(t,e){if(e){const r=BQ(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(Ft.min())))return r}return yn.newInvalidDocument(t)}}function e5(n){return new ZQ(n)}class JQ extends t5{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new ka(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new Ve((s,a)=>Kt(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.Br.get(s);if(e.push(this.Nr.removeEntry(t,s,o.readTime)),a.isValidDocument()){const l=RD(this.Nr.serializer,a);i=i.add(s.path.popLast());const h=vm(l);r+=h-o.size,e.push(this.Nr.addEntry(t,s,l))}else if(r-=o.size,this.trackRemovals){const l=RD(this.Nr.serializer,a.convertToNoDocument(Ft.min()));e.push(this.Nr.addEntry(t,s,l))}}),i.forEach(s=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Nr.updateMetadata(t,r)),Q.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next(r=>(this.Br.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next(({documents:r,Or:i})=>(i.forEach((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function qD(n){return Zn(n,Cg)}function jc(n){return Zn(n,cm)}function hd(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function YD(n,t){const e=t.documentKey.path.toArray();return[n,mm(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function XD(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<e.length-2&&s<r.length-2;++s)if(i=Kt(e[s],r[s]),i)return i;return i=Kt(e.length,r.length),i||(i=Kt(e[e.length-2],r[r.length-2]),i||Kt(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tZ{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(t,e,r,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,e))).next(i=>(r!==null&&rg(r.mutation,i,ti.empty(),Le.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,ie()).next(()=>r))}getLocalViewOfDocuments(t,e,r=ie()){const i=Ms();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,r).next(s=>{let a=Rd();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(t,e){const r=Ms();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,ie()))}populateOverlays(t,e,r){const i=[];return r.forEach(s=>{e.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((a,o)=>{e.set(a,o)})})}computeViews(t,e,r,i){let s=pi();const a=ng(),o=function(){return ng()}();return e.forEach((l,h)=>{const d=r.get(h.key);i.has(h.key)&&(d===void 0||d.mutation instanceof La)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),rg(d.mutation,h,d.mutation.getFieldMask(),Le.now())):a.set(h.key,ti.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((h,d)=>a.set(h,d)),e.forEach((h,d)=>o.set(h,new tZ(d,a.get(h)??null))),o))}recalculateAndSaveOverlays(t,e){const r=ng();let i=new $e((a,o)=>a-o),s=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(a=>{for(const o of a)o.keys().forEach(l=>{const h=e.get(l);if(h===null)return;let d=r.get(l)||ti.empty();d=o.applyToLocalView(h,d),r.set(l,d);const g=(i.get(o.batchId)||ie()).add(l);i=i.insert(o.batchId,g)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),h=l.key,d=l.value,g=_6();d.forEach(m=>{if(!s.has(m)){const y=T6(e.get(m),r.get(m));y!==null&&g.set(m,y),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return Q.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,i){return function(a){return Ct.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):sQ(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,i):this.getDocumentsMatchingCollectionQuery(t,e,r,i)}getNextDocuments(t,e,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,i-s.size):Q.resolve(Ms());let o=mh,l=s;return a.next(h=>Q.forEach(h,(d,g)=>(o<g.largestBatchId&&(o=g.largestBatchId),s.get(d)?Q.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,l,h,ie())).next(d=>({batchId:o,changes:v6(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ct(e)).next(r=>{let i=Rd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,r,i){const s=e.collectionGroup;let a=Rd();return this.indexManager.getCollectionParents(t,s).next(o=>Q.forEach(o,l=>{const h=function(g,m){return new $m(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(e,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,r,i).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,e,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,s,i))).next(a=>{s.forEach((l,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,yn.newInvalidDocument(d)))});let o=Rd();return a.forEach((l,h)=>{const d=s.get(l);d!==void 0&&rg(d.mutation,h,ti.empty(),Le.now()),$g(e,h)&&(o=o.insert(l,h))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return Q.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(i){return{id:i.id,version:i.version,createTime:Hr(i.createTime)}}(e)),Q.resolve()}getNamedQuery(t,e){return Q.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(i){return{name:i.name,query:G6(i.bundledQuery),readTime:Hr(i.readTime)}}(e)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{constructor(){this.overlays=new $e(Ct.comparator),this.qr=new Map}getOverlay(t,e){return Q.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Ms();return Q.forEach(e,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((i,s)=>{this.St(t,e,s)}),Q.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),Q.resolve()}getOverlaysForCollection(t,e,r){const i=Ms(),s=e.length+1,a=new Ct(e.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,h=l.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Q.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let s=new $e((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>r){let d=s.get(h.largestBatchId);d===null&&(d=Ms(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const o=Ms(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,d)=>o.set(h,d)),!(o.size()>=i)););return Q.resolve(o)}St(t,e,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new gE(e,r));let s=this.qr.get(e);s===void 0&&(s=ie(),this.qr.set(e,s)),this.qr.set(e,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(){this.sessionToken=Dn.EMPTY_BYTE_STRING}getSessionToken(t){return Q.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.Qr=new Ve(or.$r),this.Ur=new Ve(or.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new or(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Gr(new or(t,e))}zr(t,e){t.forEach(r=>this.removeReference(r,e))}jr(t){const e=new Ct(new Ie([])),r=new or(e,t),i=new or(e,t+1),s=[];return this.Ur.forEachInRange([r,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new Ct(new Ie([])),r=new or(e,t),i=new or(e,t+1);let s=ie();return this.Ur.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(t){const e=new or(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class or{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return Ct.comparator(t.key,e.key)||Kt(t.Yr,e.Yr)}static Kr(t,e){return Kt(t.Yr,e.Yr)||Ct.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Ve(or.$r)}checkEmpty(t){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new fE(s,e,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new or(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Q.resolve(a)}lookupMutationBatch(t,e){return Q.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=this.ei(r),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?dl:this.tr-1)}getAllMutationBatches(t){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new or(e,0),i=new or(e,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],a=>{const o=this.Xr(a.Yr);s.push(o)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Ve(Kt);return e.forEach(i=>{const s=new or(i,0),a=new or(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{r=r.add(o.Yr)})}),Q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let s=r;Ct.isDocumentKey(s)||(s=s.child(""));const a=new or(new Ct(s),0);let o=new Ve(Kt);return this.Zr.forEachWhile(l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(o=o.add(l.Yr)),!0)},a),Q.resolve(this.ti(o))}ti(t){const e=[];return t.forEach(r=>{const i=this.Xr(r);i!==null&&e.push(i)}),e}removeMutationBatch(t,e){Lt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Q.forEach(e.mutations,i=>{const s=new or(i.key,e.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Zr=r})}ir(t){}containsKey(t,e){const r=new or(e,0),i=this.Zr.firstAfterOrEqual(r);return Q.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Q.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZ{constructor(t){this.ri=t,this.docs=function(){return new $e(Ct.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return Q.resolve(r?r.document.mutableCopy():yn.newInvalidDocument(e))}getEntries(t,e){let r=pi();return e.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():yn.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(t,e,r,i){let s=pi();const a=e.path,o=new Ct(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:h,value:{document:d}}=l.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Jb(k8(d),r)<=0||(i.has(d.key)||$g(e,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Q.resolve(s)}getAllFromCollectionGroup(t,e,r,i){It(9500)}ii(t,e){return Q.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new aZ(this)}getSize(t){return Q.resolve(this.size)}}class aZ extends t5{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(r)}),Q.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ{constructor(t){this.persistence=t,this.si=new ka(e=>Sl(e),Kg),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.oi=0,this._i=new _E,this.targetCount=0,this.ai=Rl.ur()}forEachTarget(t,e){return this.si.forEach((r,i)=>e(i)),Q.resolve()}getLastRemoteSnapshotVersion(t){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Q.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),Q.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Rl(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,Q.resolve()}updateTargetData(t,e){return this.Pr(e),Q.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,Q.resolve()}removeTargets(t,e,r){let i=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=e&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(t){return Q.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return Q.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),Q.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const i=this.persistence.referenceDelegate,s=[];return i&&e.forEach(a=>{s.push(i.markPotentiallyOrphaned(t,a))}),Q.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),Q.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return Q.resolve(r)}containsKey(t,e){return Q.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(t,e){this.ui={},this.overlays={},this.ci=new Jr(0),this.li=!1,this.li=!0,this.hi=new rZ,this.referenceDelegate=t(this),this.Pi=new oZ(this),this.indexManager=new qQ,this.remoteDocumentCache=function(i){return new sZ(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new z6(e),this.Ii=new eZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new nZ,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new iZ(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){mt("MemoryPersistence","Starting transaction:",t);const i=new cZ(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(t,e){return Q.or(Object.values(this.ui).map(r=>()=>r.containsKey(t,e)))}}class cZ extends V8{constructor(t){super(),this.currentSequenceNumber=t}}class iy{constructor(t){this.persistence=t,this.Ri=new _E,this.Vi=null}static mi(t){return new iy(t)}get fi(){if(this.Vi)return this.Vi;throw It(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),Q.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),Q.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,r=>{const i=Ct.fromPath(r);return this.gi(t,i).next(s=>{s||e.removeEntry(i,Ft.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return Q.or([()=>Q.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class _m{constructor(t,e){this.persistence=t,this.pi=new ka(r=>Nr(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=J6(this,e)}static mi(t,e){return new _m(t,e)}Ei(){}di(t){return Q.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}wr(t){let e=0;return this.pr(t,r=>{e++}).next(()=>e)}pr(t,e){return Q.forEach(this.pi,(r,i)=>this.br(t,r,i).next(s=>s?Q.resolve():e(i)))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(t,a=>this.br(t,a,e).next(o=>{o||(r++,s.removeEntry(a,Ft.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),Q.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),Q.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),Q.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),Q.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=C1(t.data.value)),e}br(t,e,r){return Q.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const i=this.pi.get(e);return Q.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lZ{constructor(t){this.serializer=t}k(t,e,r,i){const s=new Hm("createOrUpgrade",e);r<1&&i>=1&&(function(l){l.createObjectStore(Xg)}(t),function(l){l.createObjectStore(Sg,{keyPath:b$}),l.createObjectStore(Ji,{keyPath:sD,autoIncrement:!0}).createIndex(ol,aD,{unique:!0}),l.createObjectStore(yh)}(t),KD(t),function(l){l.createObjectStore(Kc)}(t));let a=Q.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(_h),l.deleteObjectStore(vh),l.deleteObjectStore(gl)}(t),KD(t)),a=a.next(()=>function(l){const h=l.store(gl),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ft.min().toTimestamp(),targetCount:0};return h.put(lm,d)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(l,h){return h.store(Ji).J().next(g=>{l.deleteObjectStore(Ji),l.createObjectStore(Ji,{keyPath:sD,autoIncrement:!0}).createIndex(ol,aD,{unique:!0});const m=h.store(Ji),y=g.map(x=>m.put(x));return Q.waitFor(y)})}(t,s))),a=a.next(()=>{(function(l){l.createObjectStore(xh,{keyPath:O$})})(t)})),r<5&&i>=5&&(a=a.next(()=>this.yi(s))),r<6&&i>=6&&(a=a.next(()=>(function(l){l.createObjectStore(Cg)}(t),this.wi(s)))),r<7&&i>=7&&(a=a.next(()=>this.Si(s))),r<8&&i>=8&&(a=a.next(()=>this.bi(t,s))),r<9&&i>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t)})),r<10&&i>=10&&(a=a.next(()=>this.Di(s))),r<11&&i>=11&&(a=a.next(()=>{(function(l){l.createObjectStore(Wm,{keyPath:M$})})(t),function(l){l.createObjectStore(qm,{keyPath:N$})}(t)})),r<12&&i>=12&&(a=a.next(()=>{(function(l){const h=l.createObjectStore(Ym,{keyPath:U$});h.createIndex(W2,j$,{unique:!1}),h.createIndex(W8,z$,{unique:!1})})(t)})),r<13&&i>=13&&(a=a.next(()=>function(l){const h=l.createObjectStore(cm,{keyPath:A$});h.createIndex(T1,T$),h.createIndex(j8,S$)}(t)).next(()=>this.Ci(t,s)).next(()=>t.deleteObjectStore(Kc))),r<14&&i>=14&&(a=a.next(()=>this.Fi(t,s))),r<15&&i>=15&&(a=a.next(()=>function(l){l.createObjectStore(nE,{keyPath:P$,autoIncrement:!0}).createIndex(G2,k$,{unique:!1}),l.createObjectStore(Zd,{keyPath:L$}).createIndex(H8,V$,{unique:!1}),l.createObjectStore(Jd,{keyPath:B$}).createIndex(G8,F$,{unique:!1})}(t))),r<16&&i>=16&&(a=a.next(()=>{e.objectStore(Zd).clear()}).next(()=>{e.objectStore(Jd).clear()})),r<17&&i>=17&&(a=a.next(()=>{(function(l){l.createObjectStore(rE,{keyPath:H$})})(t)})),r<18&&i>=18&&uP()&&(a=a.next(()=>{e.objectStore(Zd).clear()}).next(()=>{e.objectStore(Jd).clear()})),a}wi(t){let e=0;return t.store(Kc).ee((r,i)=>{e+=vm(i)}).next(()=>{const r={byteSize:e};return t.store(Cg).put(H2,r)})}yi(t){const e=t.store(Sg),r=t.store(Ji);return e.J().next(i=>Q.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,dl],[s.userId,s.lastAcknowledgedBatchId]);return r.J(ol,a).next(o=>Q.forEach(o,l=>{Lt(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const h=tl(this.serializer,l);return X6(t,s.userId,h).next(()=>{})}))}))}Si(t){const e=t.store(_h),r=t.store(Kc);return t.store(gl).get(lm).next(i=>{const s=[];return r.ee((a,o)=>{const l=new Ie(a),h=function(g){return[0,Nr(g)]}(l);s.push(e.get(h).next(d=>d?Q.resolve():(g=>e.put({targetId:0,path:Nr(g),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>Q.waitFor(s))})}bi(t,e){t.createObjectStore(Ig,{keyPath:D$});const r=e.store(Ig),i=new vE,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return r.put({collectionId:o,parent:Nr(l)})}};return e.store(Kc).ee({X:!0},(a,o)=>{const l=new Ie(a);return s(l.popLast())}).next(()=>e.store(yh).ee({X:!0},([a,o,l],h)=>{const d=Os(o);return s(d.popLast())}))}Di(t){const e=t.store(vh);return e.ee((r,i)=>{const s=Od(i),a=H6(this.serializer,s);return e.put(a)})}Ci(t,e){const r=e.store(Kc),i=[];return r.ee((s,a)=>{const o=e.store(cm),l=function(g){return g.document?new Ct(Ie.fromString(g.document.name).popFirst(5)):g.noDocument?Ct.fromSegments(g.noDocument.path):g.unknownDocument?Ct.fromSegments(g.unknownDocument.path):It(36783)}(a).path.toArray(),h={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(h))}).next(()=>Q.waitFor(i))}Fi(t,e){const r=e.store(Ji),i=e5(this.serializer),s=new xE(iy.mi,this.serializer.yt);return r.J().next(a=>{const o=new Map;return a.forEach(l=>{let h=o.get(l.userId)??ie();tl(this.serializer,l).keys().forEach(d=>h=h.add(d)),o.set(l.userId,h)}),Q.forEach(o,(l,h)=>{const d=new Cr(h),g=ny.wt(this.serializer,d),m=s.getIndexManager(d),y=ry.wt(d,this.serializer,m,s.referenceDelegate);return new n5(i,y,g,m).recalculateAndSaveOverlaysForDocumentKeys(new q2(e,Jr.ce),l).next()})})}}function KD(n){n.createObjectStore(_h,{keyPath:I$}).createIndex(eE,R$,{unique:!0}),n.createObjectStore(vh,{keyPath:"targetId"}).createIndex(z8,C$,{unique:!0}),n.createObjectStore(gl)}const mo="IndexedDbPersistence",hx=18e5,fx=5e3,dx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",uZ="main";class wE{constructor(t,e,r,i,s,a,o,l,h,d,g=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Mi=s,this.window=a,this.document=o,this.xi=h,this.Oi=d,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!wE.v())throw new St(dt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new QQ(this,i),this.$i=e+uZ,this.serializer=new z6(l),this.Ui=new Bo(this.$i,this.Ni,new lZ(this.serializer)),this.hi=new UQ,this.Pi=new XQ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=e5(this.serializer),this.Ii=new FQ,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&Sn(mo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new St(dt.FAILED_PRECONDITION,dx);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Pi.getHighestSequenceNumber(t))}).then(t=>{this.ci=new Jr(t,this.xi)}).then(()=>{this.li=!0}).catch(t=>(this.Ui&&this.Ui.close(),Promise.reject(t)))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>$p(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(t).next(e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(t)).next(e=>this.isPrimary&&!e?this.Zi(t).next(()=>!1):!!e&&this.Xi(t).next(()=>!0))).catch(t=>{if(tc(t))return mt(mo,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return mt(mo,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable(()=>this.Qi(t)),this.isPrimary=t})}Hi(t){return fd(t).get(Nu).next(e=>Q.resolve(this.es(e)))}ts(t){return $p(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,hx)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const r=Zn(e,xh);return r.J().next(i=>{const s=this.ss(i,hx),a=i.filter(o=>s.indexOf(o)===-1);return Q.forEach(a,o=>r.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?Q.resolve(!0):fd(t).get(Nu).next(e=>{if(e!==null&&this.rs(e.leaseTimestampMs,fx)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new St(dt.FAILED_PRECONDITION,dx);return!1}}return!(!this.networkEnabled||!this.inForeground)||$p(t).J().next(r=>this.ss(r,fx).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&mt(mo,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Xg,xh],t=>{const e=new q2(t,Jr.ce);return this.Zi(e).next(()=>this.ts(e))}),this.Ui.close(),this.Ps()}ss(t,e){return t.filter(r=>this.rs(r.updateTimeMs,e)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",t=>$p(t).J().next(e=>this.ss(e,hx).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return ry.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new YQ(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return ny.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,r){mt(mo,"Starting transaction:",t);const i=e==="readonly"?"readonly":"readwrite",s=function(l){return l===18?q$:l===17?K8:l===16?W$:l===15?iE:l===14?X8:l===13?Y8:l===12?G$:l===11?q8:void It(60245)}(this.Ni);let a;return this.Ui.runTransaction(t,i,s,o=>(a=new q2(o,this.ci?this.ci.next():Jr.ce),e==="readwrite-primary"?this.Hi(a).next(l=>!!l||this.Yi(a)).next(l=>{if(!l)throw Sn(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new St(dt.FAILED_PRECONDITION,L8);return r(a)}).next(l=>this.Xi(a).next(()=>l)):this.Is(a).next(()=>r(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(t){return fd(t).get(Nu).next(e=>{if(e!==null&&this.rs(e.leaseTimestampMs,fx)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new St(dt.FAILED_PRECONDITION,dx)})}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fd(t).put(Nu,e)}static v(){return Bo.v()}Zi(t){const e=fd(t);return e.get(Nu).next(r=>this.es(r)?(mt(mo,"Releasing primary lease."),e.delete(Nu)):Q.resolve())}rs(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(Sn(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;lP()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var e;try{const r=((e=this.Ki)==null?void 0:e.getItem(this._s(t)))!==null;return mt(mo,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Sn(mo,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){Sn("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function fd(n){return Zn(n,Xg)}function $p(n){return Zn(n,xh)}function r5(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=i}static As(t,e){let r=ie(),i=ie();for(const s of e.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new bE(t,e.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return lP()?8:B8(Qn())>0?6:4}()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,i){const s={result:null};return this.ys(t,e).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,e,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new hZ;return this.Ss(t,e,a).next(o=>{if(s.result=o,this.Vs)return this.bs(t,e,a,o.size)})}).next(()=>s.result)}bs(t,e,r,i){return r.documentReadCount<this.fs?(zu()<=ue.DEBUG&&mt("QueryEngine","SDK will not create cache indexes for query:",Hu(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(zu()<=ue.DEBUG&&mt("QueryEngine","Query:",Hu(e),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(zu()<=ue.DEBUG&&mt("QueryEngine","The SDK decides to create cache indexes for query:",Hu(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,yi(e))):Q.resolve())}ys(t,e){if(_D(e))return Q.resolve(null);let r=yi(e);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(e.limit!==null&&i===1&&(e=Z2(e,null,"F"),r=yi(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const a=ie(...s);return this.ps.getDocuments(t,a).next(o=>this.indexManager.getMinOffset(t,r).next(l=>{const h=this.Ds(e,o);return this.Cs(e,h,a,l.readTime)?this.ys(t,Z2(e,null,"F")):this.vs(t,h,e,l)}))})))}ws(t,e,r,i){return _D(e)||i.isEqual(Ft.min())?Q.resolve(null):this.ps.getDocuments(t,r).next(s=>{const a=this.Ds(e,s);return this.Cs(e,a,r,i)?Q.resolve(null):(zu()<=ue.DEBUG&&mt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hu(e)),this.vs(t,a,e,P8(i,mh)).next(o=>o))})}Ds(t,e){let r=new Ve(m6(t));return e.forEach((i,s)=>{$g(t,s)&&(r=r.add(s))}),r}Cs(t,e,r,i){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(t,e,r){return zu()<=ue.DEBUG&&mt("QueryEngine","Using full collection scan to execute query:",Hu(e)),this.ps.getDocumentsMatchingQuery(t,e,vi.min(),r)}vs(t,e,r,i){return this.ps.getDocumentsMatchingQuery(t,r,i).next(s=>(e.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="LocalStore",fZ=3e8;class dZ{constructor(t,e,r,i){this.persistence=t,this.Fs=e,this.serializer=i,this.Ms=new $e(Kt),this.xs=new ka(s=>Sl(s),Kg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new n5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}function s5(n,t,e,r){return new dZ(n,t,e,r)}async function a5(n,t){const e=Nt(n);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,e.Bs(t),e.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=ie();for(const h of i){a.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}for(const h of s){o.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}return e.localDocuments.getDocuments(r,l).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:o}))})})}function gZ(n,t){const e=Nt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=e.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,h,d){const g=h.batch,m=g.keys();let y=Q.resolve();return m.forEach(x=>{y=y.next(()=>d.getEntry(l,x)).next(b=>{const E=h.docVersions.get(x);Lt(E!==null,48541),b.version.compareTo(E)<0&&(g.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),d.addEntry(b)))})}),y.next(()=>o.mutationQueue.removeMutationBatch(l,g))}(e,r,t,s).next(()=>s.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=ie();for(let h=0;h<o.mutationResults.length;++h)o.mutationResults[h].transformResults.length>0&&(l=l.add(o.batch.mutations[h].key));return l}(t))).next(()=>e.localDocuments.getDocuments(r,i))})}function o5(n){const t=Nt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function pZ(n,t){const e=Nt(n),r=t.snapshotVersion;let i=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=e.Ns.newChangeBuffer({trackRemovals:!0});i=e.Ms;const o=[];t.targetChanges.forEach((d,g)=>{const m=i.get(g);if(!m)return;o.push(e.Pi.removeMatchingKeys(s,d.removedDocuments,g).next(()=>e.Pi.addMatchingKeys(s,d.addedDocuments,g)));let y=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?y=y.withResumeToken(Dn.EMPTY_BYTE_STRING,Ft.min()).withLastLimboFreeSnapshotVersion(Ft.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(g,y),function(b,E,S){return b.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=fZ?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,y,d)&&o.push(e.Pi.updateTargetData(s,y))});let l=pi(),h=ie();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(e.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(mZ(s,a,t.documentUpdates).next(d=>{l=d.ks,h=d.qs})),!r.isEqual(Ft.min())){const d=e.Pi.getLastRemoteSnapshotVersion(s).next(g=>e.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return Q.waitFor(o).next(()=>a.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(e.Ms=i,s))}function mZ(n,t,e){let r=ie(),i=ie();return e.forEach(s=>r=r.add(s)),t.getEntries(n,r).next(s=>{let a=pi();return e.forEach((o,l)=>{const h=s.get(o);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Ft.min())?(t.removeEntry(o,l.readTime),a=a.insert(o,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(l),a=a.insert(o,l)):mt(EE,"Ignoring outdated watch update for ",o,". Current version:",h.version," Watch version:",l.version)}),{ks:a,qs:i}})}function yZ(n,t){const e=Nt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=dl),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function xm(n,t){const e=Nt(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.Pi.getTargetData(r,t).next(s=>s?(i=s,Q.resolve(i)):e.Pi.allocateTargetId(r).next(a=>(i=new Ca(t,a,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r})}async function Ih(n,t,e){const r=Nt(n),i=r.Ms.get(t),s=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!tc(a))throw a;mt(EE,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function aw(n,t,e){const r=Nt(n);let i=Ft.min(),s=ie();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,h,d){const g=Nt(l),m=g.xs.get(d);return m!==void 0?Q.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(r,a,yi(t)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,t,e?i:Ft.min(),e?s:ie())).next(o=>(u5(r,p6(t),o),{documents:o,Qs:s})))}function c5(n,t){const e=Nt(n),r=Nt(e.Pi),i=e.Ms.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",s=>r.At(s,t).next(a=>a?a.target:null))}function l5(n,t){const e=Nt(n),r=e.Os.get(t)||Ft.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.Ns.getAllFromCollectionGroup(i,t,P8(r,mh),Number.MAX_SAFE_INTEGER)).then(i=>(u5(e,t,i),i))}function u5(n,t,e){let r=n.Os.get(t)||Ft.min();e.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(t,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5="firestore_clients";function $D(n,t){return`${h5}_${n}_${t}`}const f5="firestore_mutations";function QD(n,t,e){let r=`${f5}_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const d5="firestore_targets";function gx(n,t){return`${d5}_${n}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="SharedClientState";class wm{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static Ws(t,e,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new St(i.error.code,i.error.message))),a?new wm(t,e,i.state,s):(Sn(Cs,`Failed to parse mutation state for ID '${e}': ${r}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class ig{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ws(t,e){const r=JSON.parse(e);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new St(r.error.code,r.error.message))),s?new ig(t,r.state,i):(Sn(Cs,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class bm{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const r=JSON.parse(e);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=uE();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=F8(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new bm(t,s):(Sn(Cs,`Failed to parse client data for instance '${t}': ${e}`),null)}}class AE{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new AE(e.clientId,e.onlineState):(Sn(Cs,`Failed to parse online state: ${t}`),null)}}class ow{constructor(){this.activeTargetIds=uE()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class px{constructor(t,e,r,i,s){this.window=t,this.Mi=e,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new $e(Kt),this.started=!1,this.Xs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=$D(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new ow),this.ro=new RegExp(`^${h5}_${a}_([^_]*)$`),this.io=new RegExp(`^${f5}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${d5}_${a}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const r of t){if(r===this.Js)continue;const i=this.getItem($D(this.persistenceKey,r));if(i){const s=bm.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const r=this.uo(e);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,r){this.ho(t,e,r),this.Po(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(gx(this.persistenceKey,t));if(i){const s=ig.Ws(t,i);s&&(r=s.state)}}return e&&this.To.zs(t),this.ao(),r}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(gx(this.persistenceKey,t))}updateQueryState(t,e,r){this.Io(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.Po(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return mt(Cs,"READ",t,e),e}setItem(t,e){mt(Cs,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){mt(Cs,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(mt(Cs,"EVENT",e.key,e.newValue),e.key===this.eo)return void Sn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const r=this.Ro(e.key);return this.Vo(r,null)}{const r=this.mo(e.key,e.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(e.key)){if(e.newValue!==null){const r=this.fo(e.key,e.newValue);if(r)return this.po(r)}}else if(this.so.test(e.key)){if(e.newValue!==null){const r=this.yo(e.key,e.newValue);if(r)return this.wo(r)}}else if(e.key===this.oo){if(e.newValue!==null){const r=this.uo(e.newValue);if(r)return this.co(r)}}else if(e.key===this.no){const r=function(s){let a=Jr.ce;if(s!=null)try{const o=JSON.parse(s);Lt(typeof o=="number",30636,{So:s}),a=o}catch(o){Sn(Cs,"Failed to read sequence number from WebStorage",o)}return a}(e.newValue);r!==Jr.ce&&this.sequenceNumberHandler(r)}else if(e.key===this._o){const r=this.bo(e.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(e)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,r){const i=new wm(this.currentUser,t,e,r),s=QD(this.persistenceKey,this.currentUser,t);this.setItem(s,i.Gs())}Po(t){const e=QD(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,r){const i=gx(this.persistenceKey,t),s=new ig(t,e,r);this.setItem(i,s.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const r=this.Ro(t);return bm.Ws(r,e)}fo(t,e){const r=this.io.exec(t),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return wm.Ws(new Cr(s),i,e)}yo(t,e){const r=this.so.exec(t),i=Number(r[1]);return ig.Ws(i,e)}uo(t){return AE.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);mt(Cs,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const r=e?this.Zs.insert(t,e):this.Zs.remove(t),i=this.lo(this.Zs),s=this.lo(r),a=[],o=[];return s.forEach(l=>{i.has(l)||a.push(l)}),i.forEach(l=>{s.has(l)||o.push(l)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=r})}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=uE();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class g5{constructor(){this.Mo=new ow,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new ow,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vZ{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="ConnectivityMonitor";class JD{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){mt(ZD,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){mt(ZD,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qp=null;function cw(){return Qp===null?Qp=function(){return 268435456+Math.round(2147483648*Math.random())}():Qp++,"0x"+Qp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="RestConnection",_Z={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xZ{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===um?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(t,e,r,i,s){const a=cw(),o=this.zo(t,e.toUriEncodedString());mt(mx,`Sending RPC '${t}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:h}=new URL(o),d=Uh(h);return this.Jo(t,o,l,r,d).then(g=>(mt(mx,`Received RPC '${t}' ${a}: `,g),g),g=>{throw Eg(mx,`RPC '${t}' ${a} failed with error: `,g,"url: ",o,"request:",r),g})}Ho(t,e,r,i,s,a){return this.Go(t,e,r,i,s)}jo(t,e,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zh}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,s)=>t[s]=i),r&&r.headers.forEach((i,s)=>t[s]=i)}zo(t,e){const r=_Z[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wZ{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="WebChannelConnection";class bZ extends xZ{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,i,s){const a=cw();return new Promise((o,l)=>{const h=new T8;h.setWithCredentials(!0),h.listenOnce(S8.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case b1.NO_ERROR:const g=h.getResponseJson();mt(Tr,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),o(g);break;case b1.TIMEOUT:mt(Tr,`RPC '${t}' ${a} timed out`),l(new St(dt.DEADLINE_EXCEEDED,"Request time out"));break;case b1.HTTP_ERROR:const m=h.getStatus();if(mt(Tr,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let y=h.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const b=function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(T)>=0?T:dt.UNKNOWN}(x.status);l(new St(b,x.message))}else l(new St(dt.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new St(dt.UNAVAILABLE,"Connection failed."));break;default:It(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{mt(Tr,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(i);mt(Tr,`RPC '${t}' ${a} sending request:`,i),h.send(e,"POST",d,r,15)})}T_(t,e,r){const i=cw(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=R8(),o=I8(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,e,r),l.encodeInitMessageHeaders=!0;const d=s.join("");mt(Tr,`Creating RPC '${t}' stream ${i}: ${d}`,l);const g=a.createWebChannel(d,l);this.I_(g);let m=!1,y=!1;const x=new wZ({Yo:E=>{y?mt(Tr,`Not sending because RPC '${t}' stream ${i} is closed:`,E):(m||(mt(Tr,`Opening RPC '${t}' stream ${i} transport.`),g.open(),m=!0),mt(Tr,`RPC '${t}' stream ${i} sending:`,E),g.send(E))},Zo:()=>g.close()}),b=(E,S,T)=>{E.listen(S,R=>{try{T(R)}catch(k){setTimeout(()=>{throw k},0)}})};return b(g,Id.EventType.OPEN,()=>{y||(mt(Tr,`RPC '${t}' stream ${i} transport opened.`),x.o_())}),b(g,Id.EventType.CLOSE,()=>{y||(y=!0,mt(Tr,`RPC '${t}' stream ${i} transport closed`),x.a_(),this.E_(g))}),b(g,Id.EventType.ERROR,E=>{y||(y=!0,Eg(Tr,`RPC '${t}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),x.a_(new St(dt.UNAVAILABLE,"The operation could not be completed")))}),b(g,Id.EventType.MESSAGE,E=>{var S;if(!y){const T=E.data[0];Lt(!!T,16349);const R=T,k=(R==null?void 0:R.error)||((S=R[0])==null?void 0:S.error);if(k){mt(Tr,`RPC '${t}' stream ${i} received error:`,k);const N=k.status;let j=function(M){const B=kn[M];if(B!==void 0)return I6(B)}(N),O=k.message;j===void 0&&(j=dt.INTERNAL,O="Unknown error status: "+N+" with message "+k.message),y=!0,x.a_(new St(j,O)),g.close()}else mt(Tr,`RPC '${t}' stream ${i} received:`,T),x.u_(T)}}),b(o,C8.STAT_EVENT,E=>{E.stat===U2.PROXY?mt(Tr,`RPC '${t}' stream ${i} detected buffering proxy`):E.stat===U2.NOPROXY&&mt(Tr,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(){return typeof window<"u"?window:null}function M1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(n){return new IQ(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(t,e,r=1e3,i=1.5,s=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,e-r);i>0&&mt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO="PersistentStream";class y5{constructor(t,e,r,i,s,a,o,l){this.Mi=t,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new m5(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===dt.RESOURCE_EXHAUSTED?(Sn(e.toString()),Sn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===e&&this.G_(r,i)},r=>{t(()=>{const i=new St(dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return mt(tO,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget(()=>this.D_===t?e():(mt(tO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EZ extends y5{constructor(t,e,r,i,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,a),this.serializer=s}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=OQ(this.serializer,t),r=function(s){if(!("targetChange"in s))return Ft.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ft.min():a.readTime?Hr(a.readTime):Ft.min()}(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=ew(this.serializer),e.addTarget=function(s,a){let o;const l=a.target;if(o=fm(l)?{documents:L6(s,l)}:{query:V6(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=O6(s,a.resumeToken);const h=J2(s,a.expectedCount);h!==null&&(o.expectedCount=h)}else if(a.snapshotVersion.compareTo(Ft.min())>0){o.readTime=Ch(s,a.snapshotVersion.toTimestamp());const h=J2(s,a.expectedCount);h!==null&&(o.expectedCount=h)}return o}(this.serializer,t);const r=NQ(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=ew(this.serializer),e.removeTarget=t,this.q_(e)}}class AZ extends y5{constructor(t,e,r,i,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Lt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Lt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Lt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=MQ(t.writeResults,t.commitTime),r=Hr(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=ew(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>pm(this.serializer,r))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ{}class SZ extends TZ{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new St(dt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,tw(e,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new St(dt.UNKNOWN,s.toString())})}Ho(t,e,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(t,tw(e,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new St(dt.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class CZ{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Sn(e),this.aa=!1):mt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl="RemoteStore";class IZ{constructor(t,e,r,i,s){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{Vl(this)&&(mt(Dl,"Restarting streams for network reachability change."),await async function(l){const h=Nt(l);h.Ea.add(4),await Jg(h),h.Ra.set("Unknown"),h.Ea.delete(4),await ay(h)}(this))})}),this.Ra=new CZ(r,i)}}async function ay(n){if(Vl(n))for(const t of n.da)await t(!0)}async function Jg(n){for(const t of n.da)await t(!1)}function oy(n,t){const e=Nt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),CE(e)?SE(e):Wh(e).O_()&&TE(e,t))}function Rh(n,t){const e=Nt(n),r=Wh(e);e.Ia.delete(t),r.O_()&&v5(e,t),e.Ia.size===0&&(r.O_()?r.L_():Vl(e)&&e.Ra.set("Unknown"))}function TE(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ft.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Wh(n).Y_(t)}function v5(n,t){n.Va.Ue(t),Wh(n).Z_(t)}function SE(n){n.Va=new AQ({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Wh(n).start(),n.Ra.ua()}function CE(n){return Vl(n)&&!Wh(n).x_()&&n.Ia.size>0}function Vl(n){return Nt(n).Ea.size===0}function _5(n){n.Va=void 0}async function RZ(n){n.Ra.set("Online")}async function DZ(n){n.Ia.forEach((t,e)=>{TE(n,t)})}async function OZ(n,t){_5(n),CE(n)?(n.Ra.ha(t),SE(n)):n.Ra.set("Unknown")}async function MZ(n,t,e){if(n.Ra.set("Online"),t instanceof D6&&t.state===2&&t.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))}(n,t)}catch(r){mt(Dl,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Em(n,r)}else if(t instanceof D1?n.Va.Ze(t):t instanceof R6?n.Va.st(t):n.Va.tt(t),!e.isEqual(Ft.min()))try{const r=await o5(n.localStore);e.compareTo(r)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,h)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(Dn.EMPTY_BYTE_STRING,d.snapshotVersion)),v5(s,l);const g=new Ca(d.target,l,h,d.sequenceNumber);TE(s,g)}),s.remoteSyncer.applyRemoteEvent(o)}(n,e)}catch(r){mt(Dl,"Failed to raise snapshot:",r),await Em(n,r)}}async function Em(n,t,e){if(!tc(t))throw t;n.Ea.add(1),await Jg(n),n.Ra.set("Offline"),e||(e=()=>o5(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{mt(Dl,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await ay(n)})}function x5(n,t){return t().catch(e=>Em(n,e,t))}async function Gh(n){const t=Nt(n),e=Xo(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:dl;for(;NZ(t);)try{const i=await yZ(t.localStore,r);if(i===null){t.Ta.length===0&&e.L_();break}r=i.batchId,PZ(t,i)}catch(i){await Em(t,i)}w5(t)&&b5(t)}function NZ(n){return Vl(n)&&n.Ta.length<10}function PZ(n,t){n.Ta.push(t);const e=Xo(n);e.O_()&&e.X_&&e.ea(t.mutations)}function w5(n){return Vl(n)&&!Xo(n).x_()&&n.Ta.length>0}function b5(n){Xo(n).start()}async function kZ(n){Xo(n).ra()}async function LZ(n){const t=Xo(n);for(const e of n.Ta)t.ea(e.mutations)}async function VZ(n,t,e){const r=n.Ta.shift(),i=dE.from(r,t,e);await x5(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Gh(n)}async function BZ(n,t){t&&Xo(n).X_&&await async function(r,i){if(function(a){return wQ(a)&&a!==dt.ABORTED}(i.code)){const s=r.Ta.shift();Xo(r).B_(),await x5(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Gh(r)}}(n,t),w5(n)&&b5(n)}async function eO(n,t){const e=Nt(n);e.asyncQueue.verifyOperationInProgress(),mt(Dl,"RemoteStore received new credentials");const r=Vl(e);e.Ea.add(3),await Jg(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await ay(e)}async function lw(n,t){const e=Nt(n);t?(e.Ea.delete(2),await ay(e)):t||(e.Ea.add(2),await Jg(e),e.Ra.set("Unknown"))}function Wh(n){return n.ma||(n.ma=function(e,r,i){const s=Nt(e);return s.sa(),new EZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:RZ.bind(null,n),t_:DZ.bind(null,n),r_:OZ.bind(null,n),H_:MZ.bind(null,n)}),n.da.push(async t=>{t?(n.ma.B_(),CE(n)?SE(n):n.Ra.set("Unknown")):(await n.ma.stop(),_5(n))})),n.ma}function Xo(n){return n.fa||(n.fa=function(e,r,i){const s=Nt(e);return s.sa(),new AZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:kZ.bind(null,n),r_:BZ.bind(null,n),ta:LZ.bind(null,n),na:VZ.bind(null,n)}),n.da.push(async t=>{t?(n.fa.B_(),await Gh(n)):(await n.fa.stop(),n.Ta.length>0&&(mt(Dl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(t,e,r,i,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,i,s){const a=Date.now()+r,o=new IE(t,e,a,i,s);return o.start(r),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new St(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function RE(n,t){if(Sn("AsyncQueue",`${t}: ${n}`),tc(n))return new St(dt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{static emptySet(t){return new ch(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||Ct.comparator(e.key,r.key):(e,r)=>Ct.comparator(e.key,r.key),this.keyedMap=Rd(),this.sortedSet=new $e(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ch)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new ch;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.ga=new $e(Ct.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):It(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal((e,r)=>{t.push(r)}),t}}class Dh{constructor(t,e,r,i,s,a,o,l,h){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(t,e,r,i,s){const a=[];return e.forEach(o=>{a.push({type:0,doc:o})}),new Dh(t,e,ch.emptySet(e),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Zm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FZ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class UZ{constructor(){this.queries=rO(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const i=Nt(e),s=i.queries;i.queries=rO(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(r)})})(this,new St(dt.ABORTED,"Firestore shutting down"))}}function rO(){return new ka(n=>g6(n),Zm)}async function E5(n,t){const e=Nt(n);let r=3;const i=t.query;let s=e.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new FZ,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await e.onListen(i,!0);break;case 1:s.wa=await e.onListen(i,!1);break;case 2:await e.onFirstRemoteStoreListen(i)}}catch(a){const o=RE(a,`Initialization of query '${Hu(t.query)}' failed`);return void t.onError(o)}e.queries.set(i,s),s.Sa.push(t),t.va(e.onlineState),s.wa&&t.Fa(s.wa)&&DE(e)}async function A5(n,t){const e=Nt(n),r=t.query;let i=3;const s=e.queries.get(r);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function jZ(n,t){const e=Nt(n);let r=!1;for(const i of t){const s=i.query,a=e.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&DE(e)}function zZ(n,t,e){const r=Nt(n),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(e);r.queries.delete(t)}function DE(n){n.Ca.forEach(t=>{t.next()})}var uw,iO;(iO=uw||(uw={})).Ma="default",iO.Cache="cache";class T5{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Dh(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Dh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==uw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(t){this.key=t}}class C5{constructor(t){this.key=t}}class HZ{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ie(),this.mutatedKeys=ie(),this.eu=m6(t),this.tu=new ch(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new nO,i=e?e.tu:this.tu;let s=e?e.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((d,g)=>{const m=i.get(d),y=$g(this.query,g)?g:null,x=!!m&&this.mutatedKeys.has(m.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let E=!1;m&&y?m.data.isEqual(y.data)?x!==b&&(r.track({type:3,doc:y}),E=!0):this.su(m,y)||(r.track({type:2,doc:y}),E=!0,(l&&this.eu(y,l)>0||h&&this.eu(y,h)<0)&&(o=!0)):!m&&y?(r.track({type:0,doc:y}),E=!0):m&&!y&&(r.track({type:1,doc:m}),E=!0,(l||h)&&(o=!0)),E&&(y?(a=a.add(y),s=b?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,i){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(y,x){const b=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It(20277,{Rt:E})}};return b(y)-b(x)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(r),i=i??!1;const o=e&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,h=l!==this.Za;return this.Za=l,a.length!==0||h?{snapshot:new Dh(this.query,t.tu,s,a,t.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nO,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const e=[];return t.forEach(r=>{this.Xa.has(r)||e.push(new C5(r))}),this.Xa.forEach(r=>{t.has(r)||e.push(new S5(r))}),e}cu(t){this.Ya=t.Qs,this.Xa=ie();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Dh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qh="SyncEngine";class GZ{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class WZ{constructor(t){this.key=t,this.hu=!1}}class qZ{constructor(t,e,r,i,s,a){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ka(o=>g6(o),Zm),this.Iu=new Map,this.Eu=new Set,this.du=new $e(Ct.comparator),this.Au=new Map,this.Ru=new _E,this.Vu={},this.mu=new Map,this.fu=Rl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YZ(n,t,e=!0){const r=cy(n);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await I5(r,t,e,!0),i}async function XZ(n,t){const e=cy(n);await I5(e,t,!0,!1)}async function I5(n,t,e,r){const i=await xm(n.localStore,yi(t)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,e);let o;return r&&(o=await OE(n,t,s,a==="current",i.resumeToken)),n.isPrimaryClient&&e&&oy(n.remoteStore,i),o}async function OE(n,t,e,r,i){n.pu=(g,m,y)=>async function(b,E,S,T){let R=E.view.ru(S);R.Cs&&(R=await aw(b.localStore,E.query,!1).then(({documents:O})=>E.view.ru(O,R)));const k=T&&T.targetChanges.get(E.targetId),N=T&&T.targetMismatches.get(E.targetId)!=null,j=E.view.applyChanges(R,b.isPrimaryClient,k,N);return hw(b,E.targetId,j.au),j.snapshot}(n,g,m,y);const s=await aw(n.localStore,t,!0),a=new HZ(t,s.Qs),o=a.ru(s.documents),l=Zg.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",i),h=a.applyChanges(o,n.isPrimaryClient,l);hw(n,e,h.au);const d=new GZ(t,e,a);return n.Tu.set(t,d),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),h.snapshot}async function KZ(n,t,e){const r=Nt(n),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(a=>!Zm(a,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ih(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),e&&Rh(r.remoteStore,i.targetId),Oh(r,i.targetId)}).catch(Jo)):(Oh(r,i.targetId),await Ih(r.localStore,i.targetId,!0))}async function $Z(n,t){const e=Nt(n),r=e.Tu.get(t),i=e.Iu.get(r.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Rh(e.remoteStore,r.targetId))}async function QZ(n,t,e){const r=kE(n);try{const i=await function(a,o){const l=Nt(a),h=Le.now(),d=o.reduce((y,x)=>y.add(x.key),ie());let g,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=pi(),b=ie();return l.Ns.getEntries(y,d).next(E=>{x=E,x.forEach((S,T)=>{T.isValidDocument()||(b=b.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,x)).next(E=>{g=E;const S=[];for(const T of o){const R=_Q(T,g.get(T.key).overlayedDocument);R!=null&&S.push(new La(T.key,R,s6(R.value.mapValue),Mr.exists(!0)))}return l.mutationQueue.addMutationBatch(y,h,S,o)}).next(E=>{m=E;const S=E.applyToLocalDocumentSet(g,b);return l.documentOverlayCache.saveOverlays(y,E.batchId,S)})}).then(()=>({batchId:m.batchId,changes:v6(g)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let h=a.Vu[a.currentUser.toKey()];h||(h=new $e(Kt)),h=h.insert(o,l),a.Vu[a.currentUser.toKey()]=h}(r,i.batchId,e),await nc(r,i.changes),await Gh(r.remoteStore)}catch(i){const s=RE(i,"Failed to persist write");e.reject(s)}}async function R5(n,t){const e=Nt(n);try{const r=await pZ(e.localStore,t);t.targetChanges.forEach((i,s)=>{const a=e.Au.get(s);a&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Lt(a.hu,14607):i.removedDocuments.size>0&&(Lt(a.hu,42227),a.hu=!1))}),await nc(e,r,t)}catch(r){await Jo(r)}}function sO(n,t,e){const r=Nt(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const i=[];r.Tu.forEach((s,a)=>{const o=a.view.va(t);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=Nt(a);l.onlineState=o;let h=!1;l.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(o)&&(h=!0)}),h&&DE(l)}(r.eventManager,t),i.length&&r.Pu.H_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ZZ(n,t,e){const r=Nt(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.Au.get(t),s=i&&i.key;if(s){let a=new $e(Ct.comparator);a=a.insert(s,yn.newNoDocument(s,Ft.min()));const o=ie().add(s),l=new Qg(Ft.min(),new Map,new $e(Kt),a,o);await R5(r,l),r.du=r.du.remove(s),r.Au.delete(t),PE(r)}else await Ih(r.localStore,t,!1).then(()=>Oh(r,t,e)).catch(Jo)}async function JZ(n,t){const e=Nt(n),r=t.batch.batchId;try{const i=await gZ(e.localStore,t);NE(e,r,null),ME(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await nc(e,i)}catch(i){await Jo(i)}}async function tJ(n,t,e){const r=Nt(n);try{const i=await function(a,o){const l=Nt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return l.mutationQueue.lookupMutationBatch(h,o).next(g=>(Lt(g!==null,37113),d=g.keys(),l.mutationQueue.removeMutationBatch(h,g))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>l.localDocuments.getDocuments(h,d))})}(r.localStore,t);NE(r,t,e),ME(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await nc(r,i)}catch(i){await Jo(i)}}function ME(n,t){(n.mu.get(t)||[]).forEach(e=>{e.resolve()}),n.mu.delete(t)}function NE(n,t,e){const r=Nt(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(e?s.reject(e):s.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Oh(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Iu.get(t))n.Tu.delete(r),e&&n.Pu.yu(r,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach(r=>{n.Ru.containsKey(r)||D5(n,r)})}function D5(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Rh(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),PE(n))}function hw(n,t,e){for(const r of e)r instanceof S5?(n.Ru.addReference(r.key,t),eJ(n,r)):r instanceof C5?(mt(qh,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,t),n.Ru.containsKey(r.key)||D5(n,r.key)):It(19791,{wu:r})}function eJ(n,t){const e=t.key,r=e.path.canonicalString();n.du.get(e)||n.Eu.has(r)||(mt(qh,"New document in limbo: "+e),n.Eu.add(r),PE(n))}function PE(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new Ct(Ie.fromString(t)),r=n.fu.next();n.Au.set(r,new WZ(e)),n.du=n.du.insert(e,r),oy(n.remoteStore,new Ca(yi(Qm(e.path)),r,"TargetPurposeLimboResolution",Jr.ce))}}async function nc(n,t,e){const r=Nt(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{a.push(r.pu(l,t,e).then(h=>{var d;if((h||e)&&r.isPrimaryClient){const g=h?!h.fromCache:(d=e==null?void 0:e.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(h){i.push(h);const g=bE.As(l.targetId,h);s.push(g)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(l,h){const d=Nt(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Q.forEach(h,m=>Q.forEach(m.Es,y=>d.persistence.referenceDelegate.addReference(g,m.targetId,y)).next(()=>Q.forEach(m.ds,y=>d.persistence.referenceDelegate.removeReference(g,m.targetId,y)))))}catch(g){if(!tc(g))throw g;mt(EE,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const y=d.Ms.get(m),x=y.snapshotVersion,b=y.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(m,b)}}}(r.localStore,s))}async function nJ(n,t){const e=Nt(n);if(!e.currentUser.isEqual(t)){mt(qh,"User change. New user:",t.toKey());const r=await a5(e.localStore,t);e.currentUser=t,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new St(dt.CANCELLED,a))})}),s.mu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await nc(e,r.Ls)}}function rJ(n,t){const e=Nt(n),r=e.Au.get(t);if(r&&r.hu)return ie().add(r.key);{let i=ie();const s=e.Iu.get(t);if(!s)return i;for(const a of s){const o=e.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}async function iJ(n,t){const e=Nt(n),r=await aw(e.localStore,t.query,!0),i=t.view.cu(r);return e.isPrimaryClient&&hw(e,t.targetId,i.au),i}async function sJ(n,t){const e=Nt(n);return l5(e.localStore,t).then(r=>nc(e,r))}async function aJ(n,t,e,r){const i=Nt(n),s=await function(o,l){const h=Nt(o),d=Nt(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",g=>d.er(g,l).next(m=>m?h.localDocuments.getDocuments(g,m):Q.resolve(null)))}(i.localStore,t);s!==null?(e==="pending"?await Gh(i.remoteStore):e==="acknowledged"||e==="rejected"?(NE(i,t,r||null),ME(i,t),function(o,l){Nt(Nt(o).mutationQueue).ir(l)}(i.localStore,t)):It(6720,"Unknown batchState",{Su:e}),await nc(i,s)):mt(qh,"Cannot apply mutation batch with id: "+t)}async function oJ(n,t){const e=Nt(n);if(cy(e),kE(e),t===!0&&e.gu!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),i=await aO(e,r.toArray());e.gu=!0,await lw(e.remoteStore,!0);for(const s of i)oy(e.remoteStore,s)}else if(t===!1&&e.gu!==!1){const r=[];let i=Promise.resolve();e.Iu.forEach((s,a)=>{e.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(Oh(e,a),Ih(e.localStore,a,!0))),Rh(e.remoteStore,a)}),await i,await aO(e,r),function(a){const o=Nt(a);o.Au.forEach((l,h)=>{Rh(o.remoteStore,h)}),o.Ru.Jr(),o.Au=new Map,o.du=new $e(Ct.comparator)}(e),e.gu=!1,await lw(e.remoteStore,!1)}}async function aO(n,t,e){const r=Nt(n),i=[],s=[];for(const a of t){let o;const l=r.Iu.get(a);if(l&&l.length!==0){o=await xm(r.localStore,yi(l[0]));for(const h of l){const d=r.Tu.get(h),g=await iJ(r,d);g.snapshot&&s.push(g.snapshot)}}else{const h=await c5(r.localStore,a);o=await xm(r.localStore,h),await OE(r,O5(h),a,!1,o.resumeToken)}i.push(o)}return r.Pu.H_(s),i}function O5(n){return d6(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function cJ(n){return function(e){return Nt(Nt(e).persistence).Ts()}(Nt(n).localStore)}async function lJ(n,t,e,r){const i=Nt(n);if(i.gu)return void mt(qh,"Ignoring unexpected query state notification.");const s=i.Iu.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const a=await l5(i.localStore,p6(s[0])),o=Qg.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Dn.EMPTY_BYTE_STRING);await nc(i,a,o);break}case"rejected":await Ih(i.localStore,t,!0),Oh(i,t,r);break;default:It(64155,e)}}async function uJ(n,t,e){const r=cy(n);if(r.gu){for(const i of t){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){mt(qh,"Adding an already active target "+i);continue}const s=await c5(r.localStore,i),a=await xm(r.localStore,s);await OE(r,O5(s),a.targetId,!1,a.resumeToken),oy(r.remoteStore,a)}for(const i of e)r.Iu.has(i)&&await Ih(r.localStore,i,!1).then(()=>{Rh(r.remoteStore,i),Oh(r,i)}).catch(Jo)}}function cy(n){const t=Nt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=R5.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rJ.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ZZ.bind(null,t),t.Pu.H_=jZ.bind(null,t.eventManager),t.Pu.yu=zZ.bind(null,t.eventManager),t}function kE(n){const t=Nt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=JZ.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tJ.bind(null,t),t}class Pg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=sy(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return s5(this.persistence,new i5,t.initialUser,this.serializer)}Cu(t){return new xE(iy.mi,this.serializer)}Du(t){return new g5}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pg.provider={build:()=>new Pg};class hJ extends Pg{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Lt(this.persistence.referenceDelegate instanceof _m,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Z6(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Ir.withCacheSize(this.cacheSizeBytes):Ir.DEFAULT;return new xE(r=>_m.mi(r,e),this.serializer)}}class M5 extends Pg{constructor(t,e,r){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await kE(this.xu.syncEngine),await Gh(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(t){return s5(this.persistence,new i5,t.initialUser,this.serializer)}Fu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new Z6(r,t.asyncQueue,e)}Mu(t,e){const r=new x$(e,this.persistence);return new _$(t.asyncQueue,r)}Cu(t){const e=r5(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ir.withCacheSize(this.cacheSizeBytes):Ir.DEFAULT;return new wE(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,p5(),M1(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new g5}}class fJ extends M5{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof px&&(this.sharedClientState.syncEngine={Co:aJ.bind(null,e),vo:lJ.bind(null,e),Fo:uJ.bind(null,e),Ts:cJ.bind(null,e),Do:sJ.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await oJ(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(t){const e=p5();if(!px.v(e))throw new St(dt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=r5(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new px(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class kg{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sO(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nJ.bind(null,this.syncEngine),await lw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new UZ}()}createDatastore(t){const e=sy(t.databaseInfo.databaseId),r=function(s){return new bZ(s)}(t.databaseInfo);return function(s,a,o,l){return new SZ(s,a,o,l)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,i,s,a,o){return new IZ(r,i,s,a,o)}(this.localStore,this.datastore,t.asyncQueue,e=>sO(this.syncEngine,e,0),function(){return JD.v()?new JD:new vZ}())}createSyncEngine(t,e){return function(i,s,a,o,l,h,d){const g=new qZ(i,s,a,o,l,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(i){const s=Nt(i);mt(Dl,"RemoteStore shutting down."),s.Ea.add(5),await Jg(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}kg.provider={build:()=>new kg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Sn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="FirestoreClient";class dJ{constructor(t,e,r,i,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=Cr.UNAUTHENTICATED,this.clientId=Qb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{mt(Ko,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(mt(Ko,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=RE(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function yx(n,t){n.asyncQueue.verifyOperationInProgress(),mt(Ko,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await a5(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function oO(n,t){n.asyncQueue.verifyOperationInProgress();const e=await gJ(n);mt(Ko,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(r=>eO(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>eO(t.remoteStore,i)),n._onlineComponents=t}async function gJ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){mt(Ko,"Using user provided OfflineComponentProvider");try{await yx(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(i){return i.name==="FirebaseError"?i.code===dt.FAILED_PRECONDITION||i.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(e))throw e;Eg("Error using user provided cache. Falling back to memory cache: "+e),await yx(n,new Pg)}}else mt(Ko,"Using default OfflineComponentProvider"),await yx(n,new hJ(void 0));return n._offlineComponents}async function P5(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(mt(Ko,"Using user provided OnlineComponentProvider"),await oO(n,n._uninitializedComponentsProvider._online)):(mt(Ko,"Using default OnlineComponentProvider"),await oO(n,new kg))),n._onlineComponents}function pJ(n){return P5(n).then(t=>t.syncEngine)}async function k5(n){const t=await P5(n),e=t.eventManager;return e.onListen=YZ.bind(null,t.syncEngine),e.onUnlisten=KZ.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=XZ.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=$Z.bind(null,t.syncEngine),e}function mJ(n,t,e={}){const r=new js;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,h){const d=new N5({next:m=>{d.Nu(),a.enqueueAndForget(()=>A5(s,g));const y=m.docs.has(o);!y&&m.fromCache?h.reject(new St(dt.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?h.reject(new St(dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new T5(Qm(o.path),d,{includeMetadataChanges:!0,qa:!0});return E5(s,g)}(await k5(n),n.asyncQueue,t,e,r)),r.promise}function yJ(n,t,e={}){const r=new js;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,h){const d=new N5({next:m=>{d.Nu(),a.enqueueAndForget(()=>A5(s,g)),m.fromCache&&l.source==="server"?h.reject(new St(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new T5(o,d,{includeMetadataChanges:!0,qa:!0});return E5(s,g)}(await k5(n),n.asyncQueue,t,e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vJ="firestore.googleapis.com",lO=!0;class uO{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new St(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vJ,this.ssl=lO}else this.host=t.host,this.ssl=t.ssl??lO;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Y6;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Q6)throw new St(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}m$("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=L5(t.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new St(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new St(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new St(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class LE{constructor(t,e,r,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uO({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new St(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new St(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uO(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new o$;switch(r.type){case"firstParty":return new u$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new St(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=cO.get(e);r&&(mt("ComponentProvider","Removing Datastore"),cO.delete(e),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ly(this.firestore,t,this._query)}}class Bn{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Bn(this.firestore,t,this._key)}toJSON(){return{type:Bn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(Yg(e,Bn._jsonSchema))return new Bn(t,r||null,new Ct(Ie.fromString(e.referencePath)))}}Bn._jsonSchemaVersion="firestore/documentReference/1.0",Bn._jsonSchema={type:Vn("string",Bn._jsonSchemaVersion),referencePath:Vn("string")};class Fo extends ly{constructor(t,e,r){super(t,e,Qm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Bn(this.firestore,null,new Ct(t))}withConverter(t){return new Fo(this.firestore,t,this._path)}}function t0(n,t,...e){if(n=_n(n),M8("collection","path",t),n instanceof LE){const r=Ie.fromString(t,...e);return tD(r),new Fo(n,null,r)}{if(!(n instanceof Bn||n instanceof Fo))throw new St(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ie.fromString(t,...e));return tD(r),new Fo(n.firestore,null,r)}}function rc(n,t,...e){if(n=_n(n),arguments.length===1&&(t=Qb.newId()),M8("doc","path",t),n instanceof LE){const r=Ie.fromString(t,...e);return JR(r),new Bn(n,null,new Ct(r))}{if(!(n instanceof Bn||n instanceof Fo))throw new St(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ie.fromString(t,...e));return JR(r),new Bn(n.firestore,n instanceof Fo?n.converter:null,new Ct(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="AsyncQueue";class fO{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new m5(this,"async_queue_retry"),this._c=()=>{const r=M1();r&&mt(hO,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=M1();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=M1();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new js;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!tc(t))throw t;mt(hO,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(r=>{throw this.nc=r,this.rc=!1,Sn("INTERNAL UNHANDLED ERROR: ",dO(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const i=IE.createAndSchedule(this,t,e,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&It(47125,{Pc:dO(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function dO(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class Bl extends LE{constructor(t,e,r,i){super(t,e,r,i),this.type="firestore",this._queue=new fO,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new fO(t),this._firestoreClient=void 0,await t}}}function _J(n,t,e){e||(e=um);const r=Pl(n,"firestore");if(r.isInitialized(e)){const i=r.getImmediate({identifier:e}),s=r.getOptions(e);if(Wo(s,t))return i;throw new St(dt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new St(dt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Q6)throw new St(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&Uh(t.host)&&aP(t.host),r.initialize({options:t,instanceIdentifier:e})}function VE(n){if(n._terminated)throw new St(dt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xJ(n),n._firestoreClient}function xJ(n){var r,i,s;const t=n._freezeSettings(),e=function(o,l,h,d){return new X$(o,l,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,L5(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,t);n._componentsProvider||(i=t.localCache)!=null&&i._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new dJ(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Li(Dn.fromBase64String(t))}catch(e){throw new St(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Li(Dn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Li._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Yg(t,Li._jsonSchema))return Li.fromBase64String(t.bytes)}}Li._jsonSchemaVersion="firestore/bytes/1.0",Li._jsonSchema={type:Vn("string",Li._jsonSchemaVersion),bytes:Vn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new St(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new St(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new St(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Kt(this._lat,t._lat)||Kt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zs._jsonSchemaVersion}}static fromJSON(t){if(Yg(t,zs._jsonSchema))return new zs(t.latitude,t.longitude)}}zs._jsonSchemaVersion="firestore/geoPoint/1.0",zs._jsonSchema={type:Vn("string",zs._jsonSchemaVersion),latitude:Vn("number"),longitude:Vn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Hs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Yg(t,Hs._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new Hs(t.vectorValues);throw new St(dt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hs._jsonSchemaVersion="firestore/vectorValue/1.0",Hs._jsonSchema={type:Vn("string",Hs._jsonSchemaVersion),vectorValues:Vn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wJ=/^__.*__$/;class bJ{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new La(t,this.data,this.fieldMask,e,this.fieldTransforms):new Hh(t,this.data,e,this.fieldTransforms)}}class V5{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new La(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function B5(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It(40011,{Ac:n})}}class FE{constructor(t,e,r,i,s,a){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new FE({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var i;const e=(i=this.path)==null?void 0:i.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){var i;const e=(i=this.path)==null?void 0:i.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Am(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(B5(this.Ac)&&wJ.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class EJ{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||sy(t)}Cc(t,e,r,i=!1){return new FE({Ac:t,methodName:e,Dc:r,path:fn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function UE(n){const t=n._freezeSettings(),e=sy(n._databaseId);return new EJ(n._databaseId,!!t.ignoreUndefinedProperties,e)}function F5(n,t,e,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,t,e,i);jE("Data must be an object, but it was:",a,r);const o=U5(r,a);let l,h;if(s.merge)l=new ti(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=fw(t,g,e);if(!a.contains(m))throw new St(dt.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);z5(d,m)||d.push(m)}l=new ti(d),h=a.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,h=a.fieldTransforms;return new bJ(new Rr(o),l,h)}class hy extends BE{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof hy}}function AJ(n,t,e,r){const i=n.Cc(1,t,e);jE("Data must be an object, but it was:",i,r);const s=[],a=Rr.empty();ec(r,(l,h)=>{const d=zE(t,l,e);h=_n(h);const g=i.yc(d);if(h instanceof hy)s.push(d);else{const m=fy(h,g);m!=null&&(s.push(d),a.set(d,m))}});const o=new ti(s);return new V5(a,o,i.fieldTransforms)}function TJ(n,t,e,r,i,s){const a=n.Cc(1,t,e),o=[fw(t,r,e)],l=[i];if(s.length%2!=0)throw new St(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)o.push(fw(t,s[m])),l.push(s[m+1]);const h=[],d=Rr.empty();for(let m=o.length-1;m>=0;--m)if(!z5(h,o[m])){const y=o[m];let x=l[m];x=_n(x);const b=a.yc(y);if(x instanceof hy)h.push(y);else{const E=fy(x,b);E!=null&&(h.push(y),d.set(y,E))}}const g=new ti(h);return new V5(d,g,a.fieldTransforms)}function fy(n,t){if(j5(n=_n(n)))return jE("Unsupported field value:",t,n),U5(n,t);if(n instanceof BE)return function(r,i){if(!B5(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let l=fy(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(n,t)}return function(r,i){if((r=_n(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fQ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Le.fromDate(r);return{timestampValue:Ch(i.serializer,s)}}if(r instanceof Le){const s=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ch(i.serializer,s)}}if(r instanceof zs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Li)return{bytesValue:O6(i.serializer,r._byteString)};if(r instanceof Bn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Hs)return function(a,o){return{mapValue:{fields:{[aE]:{stringValue:oE},[wh]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw o.Sc("VectorValues must only contain numeric values.");return hE(o.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Zb(r)}`)}(n,t)}function U5(n,t){const e={};return $8(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ec(n,(r,i)=>{const s=fy(i,t.mc(r));s!=null&&(e[r]=s)}),{mapValue:{fields:e}}}function j5(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Le||n instanceof zs||n instanceof Li||n instanceof Bn||n instanceof BE||n instanceof Hs)}function jE(n,t,e){if(!j5(e)||!N8(e)){const r=Zb(e);throw r==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+r)}}function fw(n,t,e){if((t=_n(t))instanceof uy)return t._internalPath;if(typeof t=="string")return zE(n,t);throw Am("Field path arguments must be of type string or ",n,!1,void 0,e)}const SJ=new RegExp("[~\\*/\\[\\]]");function zE(n,t,e){if(t.search(SJ)>=0)throw Am(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new uy(...t.split("."))._internalPath}catch{throw Am(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Am(n,t,e,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${t}() called with invalid data`;e&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new St(dt.INVALID_ARGUMENT,o+n+l)}function z5(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(t,e,r,i,s){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new CJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(G5("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class CJ extends H5{data(){return super.data()}}function G5(n,t){return typeof t=="string"?zE(n,t):t instanceof uy?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IJ(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new St(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class RJ{convertValue(t,e="none"){switch(qo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return sn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Na(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw It(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return ec(t,(i,s)=>{r[i]=this.convertValue(s,e)}),r}convertVectorValue(t){var r,i,s;const e=(s=(i=(r=t.fields)==null?void 0:r[wh].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>sn(a.doubleValue));return new Hs(e)}convertGeoPoint(t){return new zs(sn(t.latitude),sn(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Xm(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Rg(t));default:return null}}convertTimestamp(t){const e=Ma(t);return new Le(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Ie.fromString(t);Lt(j6(r),9688,{name:t});const i=new Tl(r.get(1),r.get(3)),s=new Ct(r.popFirst(5));return i.isEqual(e)||Sn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(n,t,e){let r;return r=n?n.toFirestore(t):t,r}class Md{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ml extends H5{constructor(t,e,r,i,s,a){super(t,e,r,i,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new N1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(G5("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new St(dt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ml._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}ml._jsonSchemaVersion="firestore/documentSnapshot/1.0",ml._jsonSchema={type:Vn("string",ml._jsonSchemaVersion),bundleSource:Vn("string","DocumentSnapshot"),bundleName:Vn("string"),bundle:Vn("string")};class N1 extends ml{data(t={}){return super.data(t)}}class lh{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Md(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new N1(this._firestore,this._userDataWriter,r.key,r,new Md(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new St(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new N1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Md(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new N1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Md(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,d=-1;return o.type!==0&&(h=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:DJ(o.type),doc:l,oldIndex:h,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new St(dt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=lh._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Qb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(e.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function DJ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(n){n=Ws(n,Bn);const t=Ws(n.firestore,Bl);return mJ(VE(t),n._key).then(e=>MJ(t,n,e))}lh._jsonSchemaVersion="firestore/querySnapshot/1.0",lh._jsonSchema={type:Vn("string",lh._jsonSchemaVersion),bundleSource:Vn("string","QuerySnapshot"),bundleName:Vn("string"),bundle:Vn("string")};class Y5 extends RJ{constructor(t){super(),this.firestore=t}convertBytes(t){return new Li(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Bn(this.firestore,null,e)}}function dy(n){n=Ws(n,ly);const t=Ws(n.firestore,Bl),e=VE(t),r=new Y5(t);return IJ(n._query),yJ(e,n._query).then(i=>new lh(t,r,n,i))}function X5(n,t,e){n=Ws(n,Bn);const r=Ws(n.firestore,Bl),i=W5(n.converter,t);return py(r,[F5(UE(r),"setDoc",n._key,i,n.converter!==null,e).toMutation(n._key,Mr.none())])}function gy(n,t,e,...r){n=Ws(n,Bn);const i=Ws(n.firestore,Bl),s=UE(i);let a;return a=typeof(t=_n(t))=="string"||t instanceof uy?TJ(s,"updateDoc",n._key,t,e,r):AJ(s,"updateDoc",n._key,t),py(i,[a.toMutation(n._key,Mr.exists(!0))])}function K5(n){return py(Ws(n.firestore,Bl),[new ey(n._key,Mr.none())])}function OJ(n,t){const e=Ws(n.firestore,Bl),r=rc(n),i=W5(n.converter,t);return py(e,[F5(UE(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Mr.exists(!1))]).then(()=>r)}function py(n,t){return function(r,i){const s=new js;return r.asyncQueue.enqueueAndForget(async()=>QZ(await pJ(r),i,s)),s.promise}(VE(n),t)}function MJ(n,t,e){const r=e.docs.get(t._key),i=new Y5(n);return new ml(n,i,t._key,r,new Md(e.hasPendingWrites,e.fromCache),t.converter)}class NJ{constructor(t){let e;this.kind="persistent",t!=null&&t.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=VJ(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function PJ(n){return new NJ(n)}class kJ{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=kg.provider,this._offlineComponentProvider={build:e=>new M5(e,t==null?void 0:t.cacheSizeBytes,this.forceOwnership)}}}class LJ{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=kg.provider,this._offlineComponentProvider={build:e=>new fJ(e,t==null?void 0:t.cacheSizeBytes)}}}function VJ(n){return new kJ(n==null?void 0:n.forceOwnership)}function BJ(){return new LJ}(function(t,e=!0){(function(i){zh=i})(jh),Gs(new is("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new Bl(new c$(r.getProvider("auth-internal")),new h$(a,r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new St(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(h.options.projectId,d)}(a,i),a);return s={useFetchStreams:e,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Fi(KR,$R,t),Fi(KR,$R,"esm2020")})();const FJ={apiKey:"AIzaSyBc4CZnGGOTDvfPvEwaA0dXFOwbocdwCa8",authDomain:"knowurfood-d2b78.firebaseapp.com",projectId:"knowurfood-d2b78",storageBucket:"knowurfood-d2b78.firebasestorage.app",messagingSenderId:"643565214463",appId:"1:643565214463:web:8681aadcc4f49c6afdcaca",measurementId:"G-HB4L7NXGNE"},HE=gP(FJ);UY(HE);const GE=Kb(HE),zi=_J(HE,{localCache:PJ({tabManager:BJ()})}),$5=n=>Math.floor(n/100)+1,UJ=async(n,t)=>{await OJ(t0(zi,"users",t,"meals"),n);const e=rc(zi,"users",t),r=await q5(e);if(r.exists()){const s=(r.data().xp||0)+10,a=$5(s);await gy(e,{xp:s,level:a})}},vx=async n=>(await dy(t0(zi,"users",n,"meals"))).docs.map(e=>({id:e.id,...e.data()})),jJ=async(n,t)=>{const e=rc(zi,"users",t,"meals",n.id),{id:r,...i}=n;await gy(e,i)},zJ=async(n,t)=>{const e=rc(zi,"users",t,"meals",n);await K5(e)},HJ=async n=>{const t=t0(zi,"users",n,"meals"),r=(await dy(t)).docs.map(i=>K5(i.ref));await Promise.all(r)},gO=async(n,t)=>{const e=rc(zi,"users",n);await gy(e,t)},GJ=async(n,t,e)=>{const r=rc(zi,"users",n,"weightLogs",t);await X5(r,{date:t,weight:e})},Mh=async n=>(await dy(t0(zi,"users",n,"weightLogs"))).docs.map(e=>e.data()),WJ=async({email:n,password:t,...e})=>{const i=(await zX(GE,n,t)).user,{firstName:s,lastName:a,mealOrder:o,unit:l,currentWeight:h,goalWeight:d,height:g,goalDate:m,breakfastTime:y,lunchTime:x,dinnerTime:b,calorieGoal:E,age:S=25,gender:T="male"}=e,R=Math.max(1,Math.ceil((new Date(m)-new Date)/(1e3*60*60*24))),k=T==="male"?10*h+6.25*g-5*S+5:10*h+6.25*g-5*S-161,N=(d-h)*7700/R,j=Math.round(k+N),O=isNaN(E)?j:Number(E);return await X5(rc(zi,"users",i.uid),{firstName:s,lastName:a,mealOrder:o,unit:l,currentWeight:h,goalWeight:d,goalDate:m,height:g,breakfastTime:y,lunchTime:x,dinnerTime:b,xp:0,level:1,streak:1,lastLogin:new Date().toISOString().split("T")[0],badges:[],calorieGoal:O,age:S,gender:T}),{...i,...e,calorieGoal:O}},qJ=async()=>{await KX(GE)},pO=async()=>new Promise(n=>{const t=GE.onAuthStateChanged(async e=>{if(t(),!e)return n(null);const r=rc(zi,"users",e.uid),i=await q5(r);if(!i.exists())return n(e);const s=i.data(),a=new Date().toISOString().split("T")[0],o=s.lastLogin||a,l=YJ(o,a);let h={};h.streak=l===1?(s.streak||0)+1:l>1?1:s.streak||1,h.lastLogin=a;const d=[5,15,30,60,100],g=s.badges||[];if(d.includes(h.streak)){const m=`${h.streak}-Day Streak`;g.includes(m)||(g.push(m),h.badges=g)}try{const y=(await dy(t0(zi,"users",e.uid,"weightLogs"))).docs.map(x=>x.data());if(y.length>0&&s.goalWeight&&s.goalDate&&!g.includes("🎯 Goal Achieved")){const x=y.reduce((S,T)=>S.date>T.date?S:T),b=s.goalWeight>=s.currentWeight&&x.weight>=s.goalWeight||s.goalWeight<s.currentWeight&&x.weight<=s.goalWeight,E=new Date(x.date)<=new Date(s.goalDate);if(b&&E){g.push("🎯 Goal Achieved");const S=(s.xp||0)+50,T=$5(S);h.badges=g,h.xp=S,h.level=T}}}catch(m){console.error("Error checking goal badge:",m)}(h.streak!==s.streak||h.lastLogin!==o||h.badges||h.xp)&&(await gy(r,h),Object.assign(s,h)),n({...e,...s})})}),YJ=(n,t)=>{const e=new Date(n),r=new Date(t);return Math.floor((r-e)/(1e3*60*60*24))};function XJ({user:n}){const[t,e]=rt.useState(""),[r,i]=rt.useState([]),[s,a]=rt.useState(new Date().toISOString().split("T")[0]);rt.useEffect(()=>{n!=null&&n.uid&&Mh(n.uid).then(i)},[n]);const o=async()=>{if(!t||isNaN(t))return;await GJ(n.uid,s,parseFloat(t));const l=await Mh(n.uid);i(l),e("")};return P.jsxs("div",{className:"card bg-dark p-3 mb-3 text-white shadow-sm",children:[P.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Weight Tracker"}),P.jsxs("div",{className:"d-flex gap-2 mb-2",children:[P.jsx("input",{type:"date",className:"form-control",value:s,max:new Date().toISOString().split("T")[0],onChange:l=>a(l.target.value)}),P.jsx("input",{type:"number",placeholder:"Weight (kg)",className:"form-control",value:t,onChange:l=>e(l.target.value)}),P.jsx("button",{className:"btn btn-primary",onClick:o,children:"Save"})]})]})}const Q5=6048e5,KJ=864e5,e0=6e4,n0=36e5,$J=1e3,mO=Symbol.for("constructDateFrom");function xn(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&mO in n?n[mO](t):n instanceof Date?new n.constructor(t):new Date(t)}function $t(n,t){return xn(t||n,n)}function my(n,t,e){const r=$t(n,e==null?void 0:e.in);return isNaN(t)?xn((e==null?void 0:e.in)||n,NaN):(t&&r.setDate(r.getDate()+t),r)}function WE(n,t,e){const r=$t(n,e==null?void 0:e.in);if(isNaN(t))return xn(n,NaN);if(!t)return r;const i=r.getDate(),s=xn(n,r.getTime());s.setMonth(r.getMonth()+t+1,0);const a=s.getDate();return i>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function qE(n,t,e){return xn(n,+$t(n)+t)}function QJ(n,t,e){return qE(n,t*n0)}let ZJ={};function Fl(){return ZJ}function Ys(n,t){var o,l,h,d;const e=Fl(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??e.weekStartsOn??((d=(h=e.locale)==null?void 0:h.options)==null?void 0:d.weekStartsOn)??0,i=$t(n,t==null?void 0:t.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Nh(n,t){return Ys(n,{...t,weekStartsOn:1})}function Z5(n,t){const e=$t(n,t==null?void 0:t.in),r=e.getFullYear(),i=xn(e,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Nh(i),a=xn(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=Nh(a);return e.getTime()>=s.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Tm(n){const t=$t(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function Ul(n,...t){const e=xn.bind(null,t.find(r=>typeof r=="object"));return t.map(e)}function dw(n,t){const e=$t(n,t==null?void 0:t.in);return e.setHours(0,0,0,0),e}function J5(n,t,e){const[r,i]=Ul(e==null?void 0:e.in,n,t),s=dw(r),a=dw(i),o=+s-Tm(s),l=+a-Tm(a);return Math.round((o-l)/KJ)}function JJ(n,t){const e=Z5(n,t),r=xn(n,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Nh(r)}function ttt(n,t,e){const r=$t(n,e==null?void 0:e.in);return r.setTime(r.getTime()+t*e0),r}function ett(n,t,e){return WE(n,t*3,e)}function ntt(n,t,e){return qE(n,t*1e3)}function rtt(n,t,e){return my(n,t*7,e)}function itt(n,t,e){return WE(n,t*12,e)}function sg(n,t){const e=+$t(n)-+$t(t);return e<0?-1:e>0?1:e}function stt(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function tk(n){return!(!stt(n)&&typeof n!="number"||isNaN(+$t(n)))}function att(n,t,e){const[r,i]=Ul(e==null?void 0:e.in,n,t),s=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return s*12+a}function ott(n,t,e){const[r,i]=Ul(e==null?void 0:e.in,n,t);return r.getFullYear()-i.getFullYear()}function ek(n,t,e){const[r,i]=Ul(e==null?void 0:e.in,n,t),s=yO(r,i),a=Math.abs(J5(r,i));r.setDate(r.getDate()-s*a);const o=+(yO(r,i)===-s),l=s*(a-o);return l===0?0:l}function yO(n,t){const e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function r0(n){return t=>{const r=(n?Math[n]:Math.trunc)(t);return r===0?0:r}}function ctt(n,t,e){const[r,i]=Ul(e==null?void 0:e.in,n,t),s=(+r-+i)/n0;return r0(e==null?void 0:e.roundingMethod)(s)}function YE(n,t){return+$t(n)-+$t(t)}function ltt(n,t,e){const r=YE(n,t)/e0;return r0(e==null?void 0:e.roundingMethod)(r)}function nk(n,t){const e=$t(n,t==null?void 0:t.in);return e.setHours(23,59,59,999),e}function rk(n,t){const e=$t(n,t==null?void 0:t.in),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function utt(n,t){const e=$t(n,t==null?void 0:t.in);return+nk(e,t)==+rk(e,t)}function ik(n,t,e){const[r,i,s]=Ul(e==null?void 0:e.in,n,n,t),a=sg(i,s),o=Math.abs(att(i,s));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*o);let l=sg(i,s)===-a;utt(r)&&o===1&&sg(r,s)===1&&(l=!1);const h=a*(o-+l);return h===0?0:h}function htt(n,t,e){const r=ik(n,t,e)/3;return r0(e==null?void 0:e.roundingMethod)(r)}function ftt(n,t,e){const r=YE(n,t)/1e3;return r0(e==null?void 0:e.roundingMethod)(r)}function dtt(n,t,e){const r=ek(n,t,e)/7;return r0(e==null?void 0:e.roundingMethod)(r)}function gtt(n,t,e){const[r,i]=Ul(e==null?void 0:e.in,n,t),s=sg(r,i),a=Math.abs(ott(r,i));r.setFullYear(1584),i.setFullYear(1584);const o=sg(r,i)===-s,l=s*(a-+o);return l===0?0:l}function ptt(n,t){const e=$t(n,t==null?void 0:t.in),r=e.getMonth(),i=r-r%3;return e.setMonth(i,1),e.setHours(0,0,0,0),e}function mtt(n,t){const e=$t(n,t==null?void 0:t.in);return e.setDate(1),e.setHours(0,0,0,0),e}function ytt(n,t){const e=$t(n,t==null?void 0:t.in),r=e.getFullYear();return e.setFullYear(r+1,0,0),e.setHours(23,59,59,999),e}function sk(n,t){const e=$t(n,t==null?void 0:t.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function vtt(n,t){const e=$t(n,t==null?void 0:t.in);return e.setMinutes(59,59,999),e}function _tt(n,t){var o,l;const e=Fl(),r=e.weekStartsOn??((l=(o=e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??0,i=$t(n,t==null?void 0:t.in),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function xtt(n,t){const e=$t(n,t==null?void 0:t.in);return e.setSeconds(59,999),e}function wtt(n,t){const e=$t(n,t==null?void 0:t.in),r=e.getMonth(),i=r-r%3+3;return e.setMonth(i,0),e.setHours(23,59,59,999),e}function btt(n,t){const e=$t(n,t==null?void 0:t.in);return e.setMilliseconds(999),e}const Ett={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Att=(n,t,e)=>{let r;const i=Ett[n];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r};function _x(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const Ttt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Stt={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ctt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Itt={date:_x({formats:Ttt,defaultWidth:"full"}),time:_x({formats:Stt,defaultWidth:"full"}),dateTime:_x({formats:Ctt,defaultWidth:"full"})},Rtt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Dtt=(n,t,e,r)=>Rtt[n];function dd(n){return(t,e)=>{const r=e!=null&&e.context?String(e.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,o=e!=null&&e.width?String(e.width):a;i=n.formattingValues[o]||n.formattingValues[a]}else{const a=n.defaultWidth,o=e!=null&&e.width?String(e.width):n.defaultWidth;i=n.values[o]||n.values[a]}const s=n.argumentCallback?n.argumentCallback(t):t;return i[s]}}const Ott={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Mtt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ntt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ptt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ktt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ltt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Vtt=(n,t)=>{const e=Number(n),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},Btt={ordinalNumber:Vtt,era:dd({values:Ott,defaultWidth:"wide"}),quarter:dd({values:Mtt,defaultWidth:"wide",argumentCallback:n=>n-1}),month:dd({values:Ntt,defaultWidth:"wide"}),day:dd({values:Ptt,defaultWidth:"wide"}),dayPeriod:dd({values:ktt,defaultWidth:"wide",formattingValues:Ltt,defaultFormattingWidth:"wide"})};function gd(n){return(t,e={})=>{const r=e.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?Utt(o,g=>g.test(a)):Ftt(o,g=>g.test(a));let h;h=n.valueCallback?n.valueCallback(l):l,h=e.valueCallback?e.valueCallback(h):h;const d=t.slice(a.length);return{value:h,rest:d}}}function Ftt(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function Utt(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function jtt(n){return(t,e={})=>{const r=t.match(n.matchPattern);if(!r)return null;const i=r[0],s=t.match(n.parsePattern);if(!s)return null;let a=n.valueCallback?n.valueCallback(s[0]):s[0];a=e.valueCallback?e.valueCallback(a):a;const o=t.slice(i.length);return{value:a,rest:o}}}const ztt=/^(\d+)(th|st|nd|rd)?/i,Htt=/\d+/i,Gtt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Wtt={any:[/^b/i,/^(a|c)/i]},qtt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ytt={any:[/1/i,/2/i,/3/i,/4/i]},Xtt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ktt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$tt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Qtt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ztt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Jtt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},tet={ordinalNumber:jtt({matchPattern:ztt,parsePattern:Htt,valueCallback:n=>parseInt(n,10)}),era:gd({matchPatterns:Gtt,defaultMatchWidth:"wide",parsePatterns:Wtt,defaultParseWidth:"any"}),quarter:gd({matchPatterns:qtt,defaultMatchWidth:"wide",parsePatterns:Ytt,defaultParseWidth:"any",valueCallback:n=>n+1}),month:gd({matchPatterns:Xtt,defaultMatchWidth:"wide",parsePatterns:Ktt,defaultParseWidth:"any"}),day:gd({matchPatterns:$tt,defaultMatchWidth:"wide",parsePatterns:Qtt,defaultParseWidth:"any"}),dayPeriod:gd({matchPatterns:Ztt,defaultMatchWidth:"any",parsePatterns:Jtt,defaultParseWidth:"any"})},ak={code:"en-US",formatDistance:Att,formatLong:Itt,formatRelative:Dtt,localize:Btt,match:tet,options:{weekStartsOn:0,firstWeekContainsDate:1}};function eet(n,t){const e=$t(n,t==null?void 0:t.in);return J5(e,sk(e))+1}function ok(n,t){const e=$t(n,t==null?void 0:t.in),r=+Nh(e)-+JJ(e);return Math.round(r/Q5)+1}function XE(n,t){var d,g,m,y;const e=$t(n,t==null?void 0:t.in),r=e.getFullYear(),i=Fl(),s=(t==null?void 0:t.firstWeekContainsDate)??((g=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(m=i.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,a=xn((t==null?void 0:t.in)||n,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=Ys(a,t),l=xn((t==null?void 0:t.in)||n,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const h=Ys(l,t);return+e>=+o?r+1:+e>=+h?r:r-1}function net(n,t){var o,l,h,d;const e=Fl(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??e.firstWeekContainsDate??((d=(h=e.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??1,i=XE(n,t),s=xn((t==null?void 0:t.in)||n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Ys(s,t)}function ck(n,t){const e=$t(n,t==null?void 0:t.in),r=+Ys(e,t)-+net(e,t);return Math.round(r/Q5)+1}function Pe(n,t){const e=n<0?"-":"",r=Math.abs(n).toString().padStart(t,"0");return e+r}const yo={y(n,t){const e=n.getFullYear(),r=e>0?e:1-e;return Pe(t==="yy"?r%100:r,t.length)},M(n,t){const e=n.getMonth();return t==="M"?String(e+1):Pe(e+1,2)},d(n,t){return Pe(n.getDate(),t.length)},a(n,t){const e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return Pe(n.getHours()%12||12,t.length)},H(n,t){return Pe(n.getHours(),t.length)},m(n,t){return Pe(n.getMinutes(),t.length)},s(n,t){return Pe(n.getSeconds(),t.length)},S(n,t){const e=t.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,e-3));return Pe(i,t.length)}},Fu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},vO={G:function(n,t,e){const r=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return e.ordinalNumber(i,{unit:"year"})}return yo.y(n,t)},Y:function(n,t,e,r){const i=XE(n,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return Pe(a,2)}return t==="Yo"?e.ordinalNumber(s,{unit:"year"}):Pe(s,t.length)},R:function(n,t){const e=Z5(n);return Pe(e,t.length)},u:function(n,t){const e=n.getFullYear();return Pe(e,t.length)},Q:function(n,t,e){const r=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Pe(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,t,e){const r=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Pe(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,t,e){const r=n.getMonth();switch(t){case"M":case"MM":return yo.M(n,t);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(n,t,e){const r=n.getMonth();switch(t){case"L":return String(r+1);case"LL":return Pe(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(n,t,e,r){const i=ck(n,r);return t==="wo"?e.ordinalNumber(i,{unit:"week"}):Pe(i,t.length)},I:function(n,t,e){const r=ok(n);return t==="Io"?e.ordinalNumber(r,{unit:"week"}):Pe(r,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):yo.d(n,t)},D:function(n,t,e){const r=eet(n);return t==="Do"?e.ordinalNumber(r,{unit:"dayOfYear"}):Pe(r,t.length)},E:function(n,t,e){const r=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(n,t,e,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Pe(s,2);case"eo":return e.ordinalNumber(s,{unit:"day"});case"eee":return e.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(i,{width:"short",context:"formatting"});case"eeee":default:return e.day(i,{width:"wide",context:"formatting"})}},c:function(n,t,e,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Pe(s,t.length);case"co":return e.ordinalNumber(s,{unit:"day"});case"ccc":return e.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(i,{width:"narrow",context:"standalone"});case"cccccc":return e.day(i,{width:"short",context:"standalone"});case"cccc":default:return e.day(i,{width:"wide",context:"standalone"})}},i:function(n,t,e){const r=n.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return Pe(i,t.length);case"io":return e.ordinalNumber(i,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});case"iiii":default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(n,t,e){const i=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,t,e){const r=n.getHours();let i;switch(r===12?i=Fu.noon:r===0?i=Fu.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,t,e){const r=n.getHours();let i;switch(r>=17?i=Fu.evening:r>=12?i=Fu.afternoon:r>=4?i=Fu.morning:i=Fu.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let r=n.getHours()%12;return r===0&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return yo.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):yo.H(n,t)},K:function(n,t,e){const r=n.getHours()%12;return t==="Ko"?e.ordinalNumber(r,{unit:"hour"}):Pe(r,t.length)},k:function(n,t,e){let r=n.getHours();return r===0&&(r=24),t==="ko"?e.ordinalNumber(r,{unit:"hour"}):Pe(r,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):yo.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):yo.s(n,t)},S:function(n,t){return yo.S(n,t)},X:function(n,t,e){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return xO(r);case"XXXX":case"XX":return $c(r);case"XXXXX":case"XXX":default:return $c(r,":")}},x:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"x":return xO(r);case"xxxx":case"xx":return $c(r);case"xxxxx":case"xxx":default:return $c(r,":")}},O:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_O(r,":");case"OOOO":default:return"GMT"+$c(r,":")}},z:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_O(r,":");case"zzzz":default:return"GMT"+$c(r,":")}},t:function(n,t,e){const r=Math.trunc(+n/1e3);return Pe(r,t.length)},T:function(n,t,e){return Pe(+n,t.length)}};function _O(n,t=""){const e=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?e+String(i):e+String(i)+t+Pe(s,2)}function xO(n,t){return n%60===0?(n>0?"-":"+")+Pe(Math.abs(n)/60,2):$c(n,t)}function $c(n,t=""){const e=n>0?"-":"+",r=Math.abs(n),i=Pe(Math.trunc(r/60),2),s=Pe(r%60,2);return e+i+t+s}const wO=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},lk=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ret=(n,t)=>{const e=n.match(/(P+)(p+)?/)||[],r=e[1],i=e[2];if(!i)return wO(n,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",wO(r,t)).replace("{{time}}",lk(i,t))},gw={p:lk,P:ret},iet=/^D+$/,set=/^Y+$/,aet=["D","DD","YY","YYYY"];function uk(n){return iet.test(n)}function hk(n){return set.test(n)}function pw(n,t,e){const r=oet(n,t,e);if(console.warn(r),aet.includes(n))throw new RangeError(r)}function oet(n,t,e){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${r} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const cet=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uet=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,het=/^'([^]*?)'?$/,fet=/''/g,det=/[a-zA-Z]/;function get(n,t,e){var d,g,m,y,x,b,E,S;const r=Fl(),i=(e==null?void 0:e.locale)??r.locale??ak,s=(e==null?void 0:e.firstWeekContainsDate)??((g=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(m=r.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,a=(e==null?void 0:e.weekStartsOn)??((b=(x=e==null?void 0:e.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((S=(E=r.locale)==null?void 0:E.options)==null?void 0:S.weekStartsOn)??0,o=$t(n,e==null?void 0:e.in);if(!tk(o))throw new RangeError("Invalid time value");let l=t.match(uet).map(T=>{const R=T[0];if(R==="p"||R==="P"){const k=gw[R];return k(T,i.formatLong)}return T}).join("").match(cet).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const R=T[0];if(R==="'")return{isToken:!1,value:pet(T)};if(vO[R])return{isToken:!0,value:T};if(R.match(det))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return{isToken:!1,value:T}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const h={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return l.map(T=>{if(!T.isToken)return T.value;const R=T.value;(!(e!=null&&e.useAdditionalWeekYearTokens)&&hk(R)||!(e!=null&&e.useAdditionalDayOfYearTokens)&&uk(R))&&pw(R,t,String(n));const k=vO[R[0]];return k(o,R,i.localize,h)}).join("")}function pet(n){const t=n.match(het);return t?t[1].replace(fet,"'"):n}function met(){return Object.assign({},Fl())}function yet(n,t){const e=$t(n,t==null?void 0:t.in).getDay();return e===0?7:e}function vet(n,t){const e=_et(t)?new t(0):xn(t,0);return e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e}function _et(n){var t;return typeof n=="function"&&((t=n.prototype)==null?void 0:t.constructor)===n}const xet=10;class fk{constructor(){lt(this,"subPriority",0)}validate(t,e){return!0}}class wet extends fk{constructor(t,e,r,i,s){super(),this.value=t,this.validateValue=e,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,r){return this.setValue(t,e,this.value,r)}}class bet extends fk{constructor(e,r){super();lt(this,"priority",xet);lt(this,"subPriority",-1);this.context=e||(i=>xn(r,i))}set(e,r){return r.timestampIsSet?e:xn(e,vet(e,this.context))}}class Te{run(t,e,r,i){const s=this.parse(t,e,r,i);return s?{setter:new wet(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(t,e,r){return!0}}class Eet extends Te{constructor(){super(...arguments);lt(this,"priority",140);lt(this,"incompatibleTokens",["R","u","t","T"])}parse(e,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"});case"GGGGG":return i.era(e,{width:"narrow"});case"GGGG":default:return i.era(e,{width:"wide"})||i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"})}}set(e,r,i){return r.era=i,e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}const In={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Is={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Rn(n,t){return n&&{value:t(n.value),rest:n.rest}}function dn(n,t){const e=t.match(n);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function Rs(n,t){const e=t.match(n);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};const r=e[1]==="+"?1:-1,i=e[2]?parseInt(e[2],10):0,s=e[3]?parseInt(e[3],10):0,a=e[5]?parseInt(e[5],10):0;return{value:r*(i*n0+s*e0+a*$J),rest:t.slice(e[0].length)}}function dk(n){return dn(In.anyDigitsSigned,n)}function wn(n,t){switch(n){case 1:return dn(In.singleDigit,t);case 2:return dn(In.twoDigits,t);case 3:return dn(In.threeDigits,t);case 4:return dn(In.fourDigits,t);default:return dn(new RegExp("^\\d{1,"+n+"}"),t)}}function Sm(n,t){switch(n){case 1:return dn(In.singleDigitSigned,t);case 2:return dn(In.twoDigitsSigned,t);case 3:return dn(In.threeDigitsSigned,t);case 4:return dn(In.fourDigitsSigned,t);default:return dn(new RegExp("^-?\\d{1,"+n+"}"),t)}}function KE(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function gk(n,t){const e=t>0,r=e?t:1-t;let i;if(r<=50)i=n||100;else{const s=r+50,a=Math.trunc(s/100)*100,o=n>=s%100;i=n+a-(o?100:0)}return e?i:1-i}function pk(n){return n%400===0||n%4===0&&n%100!==0}class Aet extends Te{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,r,i){const s=a=>({year:a,isTwoDigitYear:r==="yy"});switch(r){case"y":return Rn(wn(4,e),s);case"yo":return Rn(i.ordinalNumber(e,{unit:"year"}),s);default:return Rn(wn(r.length,e),s)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,i){const s=e.getFullYear();if(i.isTwoDigitYear){const o=gk(i.year,s);return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}const a=!("era"in r)||r.era===1?i.year:1-i.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class Tet extends Te{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,r,i){const s=a=>({year:a,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Rn(wn(4,e),s);case"Yo":return Rn(i.ordinalNumber(e,{unit:"year"}),s);default:return Rn(wn(r.length,e),s)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,i,s){const a=XE(e,s);if(i.isTwoDigitYear){const l=gk(i.year,a);return e.setFullYear(l,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Ys(e,s)}const o=!("era"in r)||r.era===1?i.year:1-i.year;return e.setFullYear(o,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Ys(e,s)}}class Cet extends Te{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,r){return Sm(r==="R"?4:r.length,e)}set(e,r,i){const s=xn(e,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Nh(s)}}class Iet extends Te{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,r){return Sm(r==="u"?4:r.length,e)}set(e,r,i){return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class Ret extends Te{constructor(){super(...arguments);lt(this,"priority",120);lt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"Q":case"QQ":return wn(r.length,e);case"Qo":return i.ordinalNumber(e,{unit:"quarter"});case"QQQ":return i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(e,{width:"wide",context:"formatting"})||i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=1&&r<=4}set(e,r,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}}class Det extends Te{constructor(){super(...arguments);lt(this,"priority",120);lt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"q":case"qq":return wn(r.length,e);case"qo":return i.ordinalNumber(e,{unit:"quarter"});case"qqq":return i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(e,{width:"wide",context:"standalone"})||i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=1&&r<=4}set(e,r,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}}class Oet extends Te{constructor(){super(...arguments);lt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);lt(this,"priority",110)}parse(e,r,i){const s=a=>a-1;switch(r){case"M":return Rn(dn(In.month,e),s);case"MM":return Rn(wn(2,e),s);case"Mo":return Rn(i.ordinalNumber(e,{unit:"month"}),s);case"MMM":return i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(e,{width:"wide",context:"formatting"})||i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=11}set(e,r,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}}class Met extends Te{constructor(){super(...arguments);lt(this,"priority",110);lt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,r,i){const s=a=>a-1;switch(r){case"L":return Rn(dn(In.month,e),s);case"LL":return Rn(wn(2,e),s);case"Lo":return Rn(i.ordinalNumber(e,{unit:"month"}),s);case"LLL":return i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(e,{width:"wide",context:"standalone"})||i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=11}set(e,r,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}}function Net(n,t,e){const r=$t(n,e==null?void 0:e.in),i=ck(r,e)-t;return r.setDate(r.getDate()-i*7),$t(r,e==null?void 0:e.in)}class Pet extends Te{constructor(){super(...arguments);lt(this,"priority",100);lt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,r,i){switch(r){case"w":return dn(In.week,e);case"wo":return i.ordinalNumber(e,{unit:"week"});default:return wn(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,i,s){return Ys(Net(e,i,s),s)}}function ket(n,t,e){const r=$t(n,e==null?void 0:e.in),i=ok(r,e)-t;return r.setDate(r.getDate()-i*7),r}class Let extends Te{constructor(){super(...arguments);lt(this,"priority",100);lt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,r,i){switch(r){case"I":return dn(In.week,e);case"Io":return i.ordinalNumber(e,{unit:"week"});default:return wn(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,i){return Nh(ket(e,i))}}const Vet=[31,28,31,30,31,30,31,31,30,31,30,31],Bet=[31,29,31,30,31,30,31,31,30,31,30,31];class Fet extends Te{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"subPriority",1);lt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"d":return dn(In.date,e);case"do":return i.ordinalNumber(e,{unit:"date"});default:return wn(r.length,e)}}validate(e,r){const i=e.getFullYear(),s=pk(i),a=e.getMonth();return s?r>=1&&r<=Bet[a]:r>=1&&r<=Vet[a]}set(e,r,i){return e.setDate(i),e.setHours(0,0,0,0),e}}class Uet extends Te{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"subpriority",1);lt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,r,i){switch(r){case"D":case"DD":return dn(In.dayOfYear,e);case"Do":return i.ordinalNumber(e,{unit:"date"});default:return wn(r.length,e)}}validate(e,r){const i=e.getFullYear();return pk(i)?r>=1&&r<=366:r>=1&&r<=365}set(e,r,i){return e.setMonth(0,i),e.setHours(0,0,0,0),e}}function $E(n,t,e){var g,m,y,x;const r=Fl(),i=(e==null?void 0:e.weekStartsOn)??((m=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)??r.weekStartsOn??((x=(y=r.locale)==null?void 0:y.options)==null?void 0:x.weekStartsOn)??0,s=$t(n,e==null?void 0:e.in),a=s.getDay(),l=(t%7+7)%7,h=7-i,d=t<0||t>6?t-(a+h)%7:(l+h)%7-(a+h)%7;return my(s,d,e)}class jet extends Te{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,i,s){return e=$E(e,i,s),e.setHours(0,0,0,0),e}}class zet extends Te{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,r,i,s){const a=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Rn(wn(r.length,e),a);case"eo":return Rn(i.ordinalNumber(e,{unit:"day"}),a);case"eee":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeeee":return i.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,i,s){return e=$E(e,i,s),e.setHours(0,0,0,0),e}}class Het extends Te{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,r,i,s){const a=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Rn(wn(r.length,e),a);case"co":return Rn(i.ordinalNumber(e,{unit:"day"}),a);case"ccc":return i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"ccccc":return i.day(e,{width:"narrow",context:"standalone"});case"cccccc":return i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(e,{width:"wide",context:"standalone"})||i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=6}set(e,r,i,s){return e=$E(e,i,s),e.setHours(0,0,0,0),e}}function Get(n,t,e){const r=$t(n,e==null?void 0:e.in),i=yet(r,e),s=t-i;return my(r,s,e)}class Wet extends Te{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,r,i){const s=a=>a===0?7:a;switch(r){case"i":case"ii":return wn(r.length,e);case"io":return i.ordinalNumber(e,{unit:"day"});case"iii":return Rn(i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return Rn(i.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Rn(i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Rn(i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s)}}validate(e,r){return r>=1&&r<=7}set(e,r,i){return e=Get(e,i),e.setHours(0,0,0,0),e}}class qet extends Te{constructor(){super(...arguments);lt(this,"priority",80);lt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,i){return e.setHours(KE(i),0,0,0),e}}class Yet extends Te{constructor(){super(...arguments);lt(this,"priority",80);lt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,i){return e.setHours(KE(i),0,0,0),e}}class Xet extends Te{constructor(){super(...arguments);lt(this,"priority",80);lt(this,"incompatibleTokens",["a","b","t","T"])}parse(e,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,i){return e.setHours(KE(i),0,0,0),e}}class Ket extends Te{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,r,i){switch(r){case"h":return dn(In.hour12h,e);case"ho":return i.ordinalNumber(e,{unit:"hour"});default:return wn(r.length,e)}}validate(e,r){return r>=1&&r<=12}set(e,r,i){const s=e.getHours()>=12;return s&&i<12?e.setHours(i+12,0,0,0):!s&&i===12?e.setHours(0,0,0,0):e.setHours(i,0,0,0),e}}class $et extends Te{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,r,i){switch(r){case"H":return dn(In.hour23h,e);case"Ho":return i.ordinalNumber(e,{unit:"hour"});default:return wn(r.length,e)}}validate(e,r){return r>=0&&r<=23}set(e,r,i){return e.setHours(i,0,0,0),e}}class Qet extends Te{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,r,i){switch(r){case"K":return dn(In.hour11h,e);case"Ko":return i.ordinalNumber(e,{unit:"hour"});default:return wn(r.length,e)}}validate(e,r){return r>=0&&r<=11}set(e,r,i){return e.getHours()>=12&&i<12?e.setHours(i+12,0,0,0):e.setHours(i,0,0,0),e}}class Zet extends Te{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,r,i){switch(r){case"k":return dn(In.hour24h,e);case"ko":return i.ordinalNumber(e,{unit:"hour"});default:return wn(r.length,e)}}validate(e,r){return r>=1&&r<=24}set(e,r,i){const s=i<=24?i%24:i;return e.setHours(s,0,0,0),e}}class Jet extends Te{constructor(){super(...arguments);lt(this,"priority",60);lt(this,"incompatibleTokens",["t","T"])}parse(e,r,i){switch(r){case"m":return dn(In.minute,e);case"mo":return i.ordinalNumber(e,{unit:"minute"});default:return wn(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,i){return e.setMinutes(i,0,0),e}}class tnt extends Te{constructor(){super(...arguments);lt(this,"priority",50);lt(this,"incompatibleTokens",["t","T"])}parse(e,r,i){switch(r){case"s":return dn(In.second,e);case"so":return i.ordinalNumber(e,{unit:"second"});default:return wn(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,i){return e.setSeconds(i,0),e}}class ent extends Te{constructor(){super(...arguments);lt(this,"priority",30);lt(this,"incompatibleTokens",["t","T"])}parse(e,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Rn(wn(r.length,e),i)}set(e,r,i){return e.setMilliseconds(i),e}}class nnt extends Te{constructor(){super(...arguments);lt(this,"priority",10);lt(this,"incompatibleTokens",["t","T","x"])}parse(e,r){switch(r){case"X":return Rs(Is.basicOptionalMinutes,e);case"XX":return Rs(Is.basic,e);case"XXXX":return Rs(Is.basicOptionalSeconds,e);case"XXXXX":return Rs(Is.extendedOptionalSeconds,e);case"XXX":default:return Rs(Is.extended,e)}}set(e,r,i){return r.timestampIsSet?e:xn(e,e.getTime()-Tm(e)-i)}}class rnt extends Te{constructor(){super(...arguments);lt(this,"priority",10);lt(this,"incompatibleTokens",["t","T","X"])}parse(e,r){switch(r){case"x":return Rs(Is.basicOptionalMinutes,e);case"xx":return Rs(Is.basic,e);case"xxxx":return Rs(Is.basicOptionalSeconds,e);case"xxxxx":return Rs(Is.extendedOptionalSeconds,e);case"xxx":default:return Rs(Is.extended,e)}}set(e,r,i){return r.timestampIsSet?e:xn(e,e.getTime()-Tm(e)-i)}}class int extends Te{constructor(){super(...arguments);lt(this,"priority",40);lt(this,"incompatibleTokens","*")}parse(e){return dk(e)}set(e,r,i){return[xn(e,i*1e3),{timestampIsSet:!0}]}}class snt extends Te{constructor(){super(...arguments);lt(this,"priority",20);lt(this,"incompatibleTokens","*")}parse(e){return dk(e)}set(e,r,i){return[xn(e,i),{timestampIsSet:!0}]}}const ant={G:new Eet,y:new Aet,Y:new Tet,R:new Cet,u:new Iet,Q:new Ret,q:new Det,M:new Oet,L:new Met,w:new Pet,I:new Let,d:new Fet,D:new Uet,E:new jet,e:new zet,c:new Het,i:new Wet,a:new qet,b:new Yet,B:new Xet,h:new Ket,H:new $et,K:new Qet,k:new Zet,m:new Jet,s:new tnt,S:new ent,X:new nnt,x:new rnt,t:new int,T:new snt},ont=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cnt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lnt=/^'([^]*?)'?$/,unt=/''/g,hnt=/\S/,fnt=/[a-zA-Z]/;function dnt(n,t,e,r){var E,S,T,R,k,N,j,O;const i=()=>xn((r==null?void 0:r.in)||e,NaN),s=met(),a=(r==null?void 0:r.locale)??s.locale??ak,o=(r==null?void 0:r.firstWeekContainsDate)??((S=(E=r==null?void 0:r.locale)==null?void 0:E.options)==null?void 0:S.firstWeekContainsDate)??s.firstWeekContainsDate??((R=(T=s.locale)==null?void 0:T.options)==null?void 0:R.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((N=(k=r==null?void 0:r.locale)==null?void 0:k.options)==null?void 0:N.weekStartsOn)??s.weekStartsOn??((O=(j=s.locale)==null?void 0:j.options)==null?void 0:O.weekStartsOn)??0;if(!t)return n?i():$t(e,r==null?void 0:r.in);const h={firstWeekContainsDate:o,weekStartsOn:l,locale:a},d=[new bet(r==null?void 0:r.in,e)],g=t.match(cnt).map(C=>{const M=C[0];if(M in gw){const B=gw[M];return B(C,a.formatLong)}return C}).join("").match(ont),m=[];for(let C of g){!(r!=null&&r.useAdditionalWeekYearTokens)&&hk(C)&&pw(C,t,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&uk(C)&&pw(C,t,n);const M=C[0],B=ant[M];if(B){const{incompatibleTokens:H}=B;if(Array.isArray(H)){const U=m.find(_t=>H.includes(_t.token)||_t.token===M);if(U)throw new RangeError(`The format string mustn't contain \`${U.fullToken}\` and \`${C}\` at the same time`)}else if(B.incompatibleTokens==="*"&&m.length>0)throw new RangeError(`The format string mustn't contain \`${C}\` and any other token at the same time`);m.push({token:M,fullToken:C});const G=B.run(n,C,a.match,h);if(!G)return i();d.push(G.setter),n=G.rest}else{if(M.match(fnt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");if(C==="''"?C="'":M==="'"&&(C=gnt(C)),n.indexOf(C)===0)n=n.slice(C.length);else return i()}}if(n.length>0&&hnt.test(n))return i();const y=d.map(C=>C.priority).sort((C,M)=>M-C).filter((C,M,B)=>B.indexOf(C)===M).map(C=>d.filter(M=>M.priority===C).sort((M,B)=>B.subPriority-M.subPriority)).map(C=>C[0]);let x=$t(e,r==null?void 0:r.in);if(isNaN(+x))return i();const b={};for(const C of y){if(!C.validate(x,h))return i();const M=C.set(x,b,h);Array.isArray(M)?(x=M[0],Object.assign(b,M[1])):x=M}return x}function gnt(n){return n.match(lnt)[1].replace(unt,"'")}function pnt(n,t){const e=$t(n,t==null?void 0:t.in);return e.setMinutes(0,0,0),e}function mnt(n,t){const e=$t(n,t==null?void 0:t.in);return e.setSeconds(0,0),e}function ynt(n,t){const e=$t(n,t==null?void 0:t.in);return e.setMilliseconds(0),e}function vnt(n,t){const e=()=>xn(t==null?void 0:t.in,NaN),r=(t==null?void 0:t.additionalDigits)??2,i=bnt(n);let s;if(i.date){const h=Ent(i.date,r);s=Ant(h.restDateString,h.year)}if(!s||isNaN(+s))return e();const a=+s;let o=0,l;if(i.time&&(o=Tnt(i.time),isNaN(o)))return e();if(i.timezone){if(l=Snt(i.timezone),isNaN(l))return e()}else{const h=new Date(a+o),d=$t(0,t==null?void 0:t.in);return d.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),d.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),d}return $t(a+o+l,t==null?void 0:t.in)}const Zp={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},_nt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,xnt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,wnt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function bnt(n){const t={},e=n.split(Zp.dateTimeDelimiter);let r;if(e.length>2)return t;if(/:/.test(e[0])?r=e[0]:(t.date=e[0],r=e[1],Zp.timeZoneDelimiter.test(t.date)&&(t.date=n.split(Zp.timeZoneDelimiter)[0],r=n.substr(t.date.length,n.length))),r){const i=Zp.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function Ent(n,t){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=n.match(e);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function Ant(n,t){if(t===null)return new Date(NaN);const e=n.match(_nt);if(!e)return new Date(NaN);const r=!!e[4],i=pd(e[1]),s=pd(e[2])-1,a=pd(e[3]),o=pd(e[4]),l=pd(e[5])-1;if(r)return Ont(t,o,l)?Cnt(t,o,l):new Date(NaN);{const h=new Date(0);return!Rnt(t,s,a)||!Dnt(t,i)?new Date(NaN):(h.setUTCFullYear(t,s,Math.max(i,a)),h)}}function pd(n){return n?parseInt(n):1}function Tnt(n){const t=n.match(xnt);if(!t)return NaN;const e=xx(t[1]),r=xx(t[2]),i=xx(t[3]);return Mnt(e,r,i)?e*n0+r*e0+i*1e3:NaN}function xx(n){return n&&parseFloat(n.replace(",","."))||0}function Snt(n){if(n==="Z")return 0;const t=n.match(wnt);if(!t)return 0;const e=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return Nnt(r,i)?e*(r*n0+i*e0):NaN}function Cnt(n,t,e){const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+e+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const Int=[31,null,31,30,31,30,31,31,30,31,30,31];function mk(n){return n%400===0||n%4===0&&n%100!==0}function Rnt(n,t,e){return t>=0&&t<=11&&e>=1&&e<=(Int[t]||(mk(n)?29:28))}function Dnt(n,t){return t>=1&&t<=(mk(n)?366:365)}function Ont(n,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function Mnt(n,t,e){return n===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&n>=0&&n<25}function Nnt(n,t){return t>=0&&t<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const Pnt={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};eM._date.override({_id:"date-fns",formats:function(){return Pnt},parse:function(n,t){if(n===null||typeof n>"u")return null;const e=typeof n;return e==="number"||n instanceof Date?n=$t(n):e==="string"&&(typeof t=="string"?n=dnt(n,t,new Date,this.options):n=vnt(n,this.options)),tk(n)?n.getTime():null},format:function(n,t){return get(n,t,this.options)},add:function(n,t,e){switch(e){case"millisecond":return qE(n,t);case"second":return ntt(n,t);case"minute":return ttt(n,t);case"hour":return QJ(n,t);case"day":return my(n,t);case"week":return rtt(n,t);case"month":return WE(n,t);case"quarter":return ett(n,t);case"year":return itt(n,t);default:return n}},diff:function(n,t,e){switch(e){case"millisecond":return YE(n,t);case"second":return ftt(n,t);case"minute":return ltt(n,t);case"hour":return ctt(n,t);case"day":return ek(n,t);case"week":return dtt(n,t);case"month":return ik(n,t);case"quarter":return htt(n,t);case"year":return gtt(n,t);default:return 0}},startOf:function(n,t,e){switch(t){case"second":return ynt(n);case"minute":return mnt(n);case"hour":return pnt(n);case"day":return dw(n);case"week":return Ys(n);case"isoWeek":return Ys(n,{weekStartsOn:+e});case"month":return mtt(n);case"quarter":return ptt(n);case"year":return sk(n);default:return n}},endOf:function(n,t){switch(t){case"second":return btt(n);case"minute":return xtt(n);case"hour":return vtt(n);case"day":return nk(n);case"week":return _tt(n);case"month":return rk(n);case"quarter":return wtt(n);case"year":return ytt(n);default:return n}}});Ml.register(Ed,f1,W1,dg,Zw,Qw);function knt({user:n}){const[t,e]=rt.useState([]);if(rt.useEffect(()=>{n!=null&&n.uid&&Mh(n.uid).then(e)},[n]),!n.goalDate||!n.goalWeight)return null;const r=[...t].sort((a,o)=>new Date(a.date)-new Date(o.date)),i={labels:r.map(a=>a.date),datasets:[{label:"Weight (kg)",data:r.map(a=>a.weight),borderColor:"deepskyblue",backgroundColor:"rgba(0, 191, 255, 0.2)",tension:.2},{label:`Goal (${n.goalWeight}kg by ${n.goalDate})`,data:r.map(()=>n.goalWeight),borderDash:[5,5],borderColor:"lime",pointRadius:0,borderWidth:1}]},s={responsive:!0,scales:{x:{type:"time",time:{unit:"day",tooltipFormat:"PP"},ticks:{color:"white"},grid:{color:"#444"}},y:{ticks:{color:"white"},grid:{color:"#444"},beginAtZero:!1}},plugins:{legend:{labels:{color:"white"}}}};return P.jsxs("div",{className:"card bg-dark text-white p-3 mb-2 shadow-sm",children:[P.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Weight Progress"}),P.jsx(LF,{data:i,options:s})]})}const Lnt=n=>{const t=Math.floor(n/100)+1,e=n%100,r=100,i=e/r*100;return{level:t,currentXP:e,nextXP:r,percent:i}};function Vnt({meals:n,onEditMeal:t,onDeleteMeal:e,user:r}){const{level:i,currentXP:s,nextXP:a,percent:o}=Lnt(r.xp||0),l=new Date().toISOString().split("T")[0],[h,d]=rt.useState(r.currentWeight||null);rt.useEffect(()=>{r!=null&&r.uid&&Mh(r.uid).then(j=>{if(j.length>0){const O=[...j].sort((C,M)=>new Date(M.date)-new Date(C.date))[0];d(O.weight)}})},[r]);const g=j=>n.filter(O=>O.mealType===j&&O.date===l),m=j=>{const O=new Date(j),C=O.getDay(),M=O.getDate()-C+(C===0?-6:1);return new Date(O.setDate(M))},[y,x]=rt.useState(m(new Date)),b=j=>{const O=new Date(y);O.setDate(y.getDate()+j),x(O)},E=j=>new Date(j).toLocaleDateString("en-GB"),S=(j,O)=>{if(!j||!O)return null;const C=O/100;return j/(C*C)},T=j=>j<18.5?"Underweight":j<25?"Normal":j<30?"Overweight":"Obese",R=S(h,r.height),k=T(R),N=Math.min(R/40*100,100);return P.jsxs("div",{className:"home-container",children:[P.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-3",children:[P.jsxs("p",{className:"TitleName mb-1",children:["Hello ",r.firstName]}),P.jsxs("div",{className:"text-end",children:[P.jsxs("span",{className:"small fw-bold",style:{color:"deepskyblue"},children:["Level ",i]}),P.jsx("div",{className:"progress",style:{height:"6px",width:"150px",background:"#444"},children:P.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${o}%`,backgroundColor:"deepskyblue"},"aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":a})})]})]}),P.jsxs("div",{className:"CalBarCharSection bg-dark",children:[P.jsxs("div",{className:"d-flex col-md-12 mb-2 justify-content-between",children:[P.jsx("p",{className:"SubTitleName mb-0",children:"Calories Consumed"}),P.jsxs("div",{className:"d-flex align-items-center DateRangePicker",children:[P.jsx("span",{style:{cursor:"pointer",marginRight:"10px"},onClick:()=>b(-7),children:"◀"}),E(y)," – ",E(new Date(y.getTime()+6*864e5)),P.jsx("span",{style:{cursor:"pointer",marginLeft:"10px"},onClick:()=>b(7),children:"▶"})]})]}),P.jsx(xM,{meals:n,startOfWeek:y})]}),P.jsx(knt,{user:r}),R&&P.jsxs("div",{className:"card bg-dark text-white p-3 mb-3 shadow-sm text-center",children:[P.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Your BMI"}),P.jsxs("p",{className:"fs-5 mb-1",children:[R.toFixed(1)," – ",P.jsx("span",{className:"fw-bold text-info",children:k})]}),P.jsx("div",{className:"progress bmi-progress mb-1",style:{height:"15px"},children:P.jsx("div",{className:`progress-bar ${k.toLowerCase()}-bar`,role:"progressbar",style:{width:`${N}%`},"aria-valuenow":N,"aria-valuemin":0,"aria-valuemax":100})}),P.jsxs("div",{className:"d-flex justify-content-between text-muted small px-2",children:[P.jsx("span",{children:"Underweight"}),P.jsx("span",{children:"Normal"}),P.jsx("span",{children:"Overweight"}),P.jsx("span",{children:"Obese"})]})]}),P.jsxs("div",{className:"TodayChartsSection col-md-12",children:[P.jsxs("div",{className:"CalDonutSection bg-dark",children:[P.jsx("p",{className:"SubTitleName",children:"Calorie Intake"}),P.jsx(wM,{meals:n,selectedDate:l,goal:r.calorieGoal})]}),P.jsxs("div",{className:"NutriDonutSection bg-dark",children:[P.jsx("p",{className:"SubTitleName",children:"Nutrition Intake"}),P.jsx(bM,{meals:n,selectedDate:l})]})]}),P.jsx("div",{className:"FoodItemList bg-dark",children:(r.mealOrder||["Breakfast","Lunch","Dinner"]).map(j=>P.jsxs("div",{className:"mb-3",children:[P.jsx("p",{className:"SubTitleName",children:j}),g(j).map(O=>O.foodItems.map((C,M)=>P.jsx(RG,{name:C.name,nutrients:C.nutrients,kcal:O.kcal||null,onEdit:()=>t(O),onDelete:()=>e(O.id),unit:r.unit||"g"},`${j}-${O.id}-${M}`)))]},j))})]})}function Bnt({user:n,meals:t}){var S;const[e,r]=rt.useState(new Date().toISOString().split("T")[0]),[i,s]=rt.useState(""),a=t.filter(T=>T.date===e),[o,l]=rt.useState([]);rt.useEffect(()=>{n!=null&&n.uid&&Mh(n.uid).then(l)},[n]);const h=T=>{const R=new Date(e);R.setDate(R.getDate()+T);const k=new Date;k.setHours(0,0,0,0),!(R>k)&&r(R.toISOString().split("T")[0])},d=(T,R)=>{const k=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),N=document.createElement("a");N.href=URL.createObjectURL(k),N.download=`meals-${R}.json`,N.click()},g=(T,R)=>{const k=[["Food Name","Calories","Protein","Fat","Carbohydrate","Sugar","Salt","Fibre"]];T.forEach(C=>{C.foodItems.forEach(M=>{const B=[M.name,M.kcal||"",...["Protein","Fat","Carbohydrate","Sugar","Salt","Fibre"].map(H=>{const G=M.nutrients.find(U=>U.type===H);return(G==null?void 0:G.total)||""})];k.push(B)})});const N=k.map(C=>C.join(",")).join(`
`),j=new Blob([N],{type:"text/csv"}),O=document.createElement("a");O.href=URL.createObjectURL(j),O.download=`meals-${R}.csv`,O.click()},m=a.filter(T=>T.foodItems.some(R=>R.name.toLowerCase().includes(i.toLowerCase())||R.nutrients.some(k=>k.type.toLowerCase().includes(i.toLowerCase())))),y={Protein:50,Carbohydrate:260,Fat:70,Sugar:30,Fibre:30,Salt:6},b=(()=>{const T={};return a.forEach(R=>R.foodItems.forEach(k=>k.nutrients.forEach(N=>{const j=parseFloat(N.total)||0;T[N.type]=(T[N.type]||0)+j}))),T})(),E=((S=o.find(T=>T.date===e))==null?void 0:S.weight)||null;return P.jsxs("div",{className:"home-container",children:[P.jsx("h5",{className:"TitleName",children:"History"}),P.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2 DateRangePicker",children:[P.jsx("span",{style:{cursor:"pointer",marginRight:"10px"},onClick:()=>h(-1),children:"◀"}),P.jsx("input",{type:"date",className:"form-control",value:e,max:new Date().toISOString().split("T")[0],onChange:T=>r(T.target.value),style:{maxWidth:"150px"}}),P.jsx("span",{style:{cursor:"pointer",marginLeft:"10px"},onClick:()=>h(1),children:"▶"})]}),P.jsxs("div",{className:"d-flex gap-2 mb-2",children:[P.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>d(a,e),children:"Export JSON"}),P.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>g(a,e),children:"Export CSV"})]}),P.jsx("input",{type:"text",className:"form-control mb-3",placeholder:"🔍 Search food or nutrient...",value:i,onChange:T=>s(T.target.value)}),E!==null&&P.jsxs("div",{className:"mb-2 text-white FoodItemList",children:[P.jsx("strong",{children:"Weight Logged:"})," ",E," kg"]}),a.length===0?P.jsxs("div",{className:"text-center text-white mt-4",children:[P.jsxs("p",{className:"fw-bold",children:["📅 No data available for ",e]}),P.jsx("p",{className:"small ",children:"Try selecting a different date or log a meal to see your history."})]}):P.jsxs(P.Fragment,{children:[P.jsxs("div",{className:"TodayChartsSection mb-3",children:[P.jsx("div",{className:"CalDonutSection",children:P.jsx(wM,{meals:a,goal:n.calorieGoal,selectedDate:e})}),P.jsx("div",{className:"NutriDonutSection",children:P.jsx(bM,{meals:a,selectedDate:e})})]}),P.jsxs("div",{className:"bg-dark p-3 rounded mb-3",children:[P.jsx("p",{className:"SubTitleName mb-2",children:"Daily Goal Progress"}),Object.entries(y).map(([T,R])=>{const k=b[T]||0,N=Math.min(k/R*100,100);return P.jsxs("div",{className:"mb-2",children:[P.jsxs("div",{className:"d-flex justify-content-between small text-white",children:[P.jsx("span",{children:T}),P.jsxs("span",{children:[k.toFixed(1)," / ",R,"g"]})]}),P.jsx("div",{className:"progress",style:{height:"8px"},children:P.jsx("div",{className:`progress-bar ${k>=R?"bg-success":"bg-warning"} progress-bar-striped progress-bar-animated`,style:{width:`${N}%`}})})]},T)})]}),m.map((T,R)=>P.jsxs("div",{className:"FoodItemList",children:[P.jsx("h6",{className:"SubTitleName",children:T.mealType}),T.foodItems.map((k,N)=>P.jsxs("div",{className:"card bg-dark text-white p-2 mb-2",children:[P.jsx("p",{className:"fw-bold mb-1",children:k.name}),P.jsxs("p",{className:"mb-1",children:["Calories: ",k.kcal," kcal"]}),k.nutrients.map((j,O)=>P.jsxs("p",{className:"mb-0",children:[j.type,": ",j.total," ",j.unit||"g"]},O))]},N))]},R))]})]})}function Fnt(n,t){var e=Object.setPrototypeOf;e?e(n,t):n.__proto__=t}function Unt(n,t){t===void 0&&(t=n.constructor);var e=Error.captureStackTrace;e&&e(n,t)}var jnt=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])},n(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),znt=function(n){jnt(t,n);function t(e,r){var i=this.constructor,s=n.call(this,e,r)||this;return Object.defineProperty(s,"name",{value:i.name,enumerable:!1,configurable:!0}),Fnt(s,i.prototype),Unt(s),s}return t}(Error),Hnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ni=function(n){Hnt(t,n);function t(e){e===void 0&&(e=void 0);var r=n.call(this,e)||this;return r.message=e,r}return t.prototype.getKind=function(){var e=this.constructor;return e.kind},t.kind="Exception",t}(znt),Gnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$i=function(n){Gnt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArgumentException",t}(ni),Wnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),jt=function(n){Wnt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalArgumentException",t}(ni),qnt=function(){function n(t){if(this.binarizer=t,t===null)throw new jt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(t,e){return this.binarizer.getBlackRow(t,e)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(t,e,r,i){var s=this.binarizer.getLuminanceSource().crop(t,e,r,i);return new n(this.binarizer.createBinarizer(s))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(t))},n.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(t))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),Ynt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lr=function(n){Ynt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(ni),Xnt=function(){function n(t){this.source=t}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),Ke=function(){function n(){}return n.arraycopy=function(t,e,r,i,s){for(;s--;)r[i++]=t[e++]},n.currentTimeMillis=function(){return Date.now()},n}(),Knt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),QE=function(n){Knt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IndexOutOfBoundsException",t}(ni),$nt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bO=function(n){$nt(t,n);function t(e,r){e===void 0&&(e=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=e,i.message=r,i}return t.kind="ArrayIndexOutOfBoundsException",t}(QE),Qnt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xn=function(){function n(){}return n.fill=function(t,e){for(var r=0,i=t.length;r<i;r++)t[r]=e},n.fillWithin=function(t,e,r,i){n.rangeCheck(t.length,e,r);for(var s=e;s<r;s++)t[s]=i},n.rangeCheck=function(t,e,r){if(e>r)throw new jt("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new bO(e);if(r>t)throw new bO(r)},n.asList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},n.create=function(t,e,r){var i=Array.from({length:t});return i.map(function(s){return Array.from({length:e}).fill(r)})},n.createInt32Array=function(t,e,r){var i=Array.from({length:t});return i.map(function(s){return Int32Array.from({length:e}).fill(r)})},n.equals=function(t,e){if(!t||!e||!t.length||!e.length||t.length!==e.length)return!1;for(var r=0,i=t.length;r<i;r++)if(t[r]!==e[r])return!1;return!0},n.hashCode=function(t){var e,r;if(t===null)return 0;var i=1;try{for(var s=Qnt(t),a=s.next();!a.done;a=s.next()){var o=a.value;i=31*i+o}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},n.fillUint8Array=function(t,e){for(var r=0;r!==t.length;r++)t[r]=e},n.copyOf=function(t,e){return t.slice(0,e)},n.copyOfUint8Array=function(t,e){if(t.length<=e){var r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)},n.copyOfRange=function(t,e,r){var i=r-e,s=new Int32Array(i);return Ke.arraycopy(t,e,s,0,i),s},n.binarySearch=function(t,e,r){r===void 0&&(r=n.numberComparator);for(var i=0,s=t.length-1;i<=s;){var a=s+i>>1,o=r(e,t[a]);if(o>0)i=a+1;else if(o<0)s=a-1;else return a}return-i-1},n.numberComparator=function(t,e){return t-e},n}(),ae=function(){function n(){}return n.numberOfTrailingZeros=function(t){var e;if(t===0)return 32;var r=31;return e=t<<16,e!==0&&(r-=16,t=e),e=t<<8,e!==0&&(r-=8,t=e),e=t<<4,e!==0&&(r-=4,t=e),e=t<<2,e!==0&&(r-=2,t=e),r-(t<<1>>>31)},n.numberOfLeadingZeros=function(t){if(t===0)return 32;var e=1;return t>>>16||(e+=16,t<<=16),t>>>24||(e+=8,t<<=8),t>>>28||(e+=4,t<<=4),t>>>30||(e+=2,t<<=2),e-=t>>>31,e},n.toHexString=function(t){return t.toString(16)},n.toBinaryString=function(t){return String(parseInt(String(t),2))},n.bitCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63},n.truncDivision=function(t,e){return Math.trunc(t/e)},n.parseInt=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),ur=function(){function n(t,e){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,e==null?this.bits=n.makeArray(t):this.bits=e)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(t){if(t>this.bits.length*32){var e=n.makeArray(t);Ke.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}},n.prototype.get=function(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0},n.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(t&31)},n.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(t&31)},n.prototype.getNextSet=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),s=r[i];s&=~((1<<(t&31))-1);for(var a=r.length;s===0;){if(++i===a)return e;s=r[i]}var o=i*32+ae.numberOfTrailingZeros(s);return o>e?e:o},n.prototype.getNextUnset=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),s=~r[i];s&=~((1<<(t&31))-1);for(var a=r.length;s===0;){if(++i===a)return e;s=~r[i]}var o=i*32+ae.numberOfTrailingZeros(s);return o>e?e:o},n.prototype.setBulk=function(t,e){this.bits[Math.floor(t/32)]=e},n.prototype.setRange=function(t,e){if(e<t||t<0||e>this.size)throw new jt;if(e!==t){e--;for(var r=Math.floor(t/32),i=Math.floor(e/32),s=this.bits,a=r;a<=i;a++){var o=a>r?0:t&31,l=a<i?31:e&31,h=(2<<l)-(1<<o);s[a]|=h}}},n.prototype.clear=function(){for(var t=this.bits.length,e=this.bits,r=0;r<t;r++)e[r]=0},n.prototype.isRange=function(t,e,r){if(e<t||t<0||e>this.size)throw new jt;if(e===t)return!0;e--;for(var i=Math.floor(t/32),s=Math.floor(e/32),a=this.bits,o=i;o<=s;o++){var l=o>i?0:t&31,h=o<s?31:e&31,d=(2<<h)-(1<<l)&4294967295;if((a[o]&d)!==(r?d:0))return!1}return!0},n.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(t,e){if(e<0||e>32)throw new jt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(var r=e;r>0;r--)this.appendBit((t>>r-1&1)===1)},n.prototype.appendBitArray=function(t){var e=t.size;this.ensureCapacity(this.size+e);for(var r=0;r<e;r++)this.appendBit(t.get(r))},n.prototype.xor=function(t){if(this.size!==t.size)throw new jt("Sizes don't match");for(var e=this.bits,r=0,i=e.length;r<i;r++)e[r]^=t.bits[r]},n.prototype.toBytes=function(t,e,r,i){for(var s=0;s<i;s++){for(var a=0,o=0;o<8;o++)this.get(t)&&(a|=1<<7-o),t++;e[r+s]=a}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,i=this.bits,s=0;s<r;s++){var a=i[s];a=a>>1&1431655765|(a&1431655765)<<1,a=a>>2&858993459|(a&858993459)<<2,a=a>>4&252645135|(a&252645135)<<4,a=a>>8&16711935|(a&16711935)<<8,a=a>>16&65535|(a&65535)<<16,t[e-s]=a}if(this.size!==r*32){for(var o=r*32-this.size,l=t[0]>>>o,s=1;s<r;s++){var h=t[s];l|=h<<32-o,t[s-1]=l,l=h>>>o}t[r-1]=l}this.bits=t},n.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.size===e.size&&Xn.equals(this.bits,e.bits)},n.prototype.hashCode=function(){return 31*this.size+Xn.hashCode(this.bits)},n.prototype.toString=function(){for(var t="",e=0,r=this.size;e<r;e++)(e&7)===0&&(t+=" "),t+=this.get(e)?"X":".";return t},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var t=[],e=0,r=this.size;e<r;e++)t.push(this.get(e));return t},n}(),mw;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(mw||(mw={}));const on=mw;var Znt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Et=function(n){Znt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(ni),Jnt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Me;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Me||(Me={}));var Yn=function(){function n(t,e,r){for(var i,s,a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];this.valueIdentifier=t,this.name=r,typeof e=="number"?this.values=Int32Array.from([e]):this.values=e,this.otherEncodingNames=a,n.VALUE_IDENTIFIER_TO_ECI.set(t,this),n.NAME_TO_ECI.set(r,this);for(var l=this.values,h=0,d=l.length;h!==d;h++){var g=l[h];n.VALUES_TO_ECI.set(g,this)}try{for(var m=Jnt(a),y=m.next();!y.done;y=m.next()){var x=y.value;n.NAME_TO_ECI.set(x,this)}}catch(b){i={error:b}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new Et("incorect value");var e=n.VALUES_TO_ECI.get(t);if(e===void 0)throw new Et("incorect value");return e},n.getCharacterSetECIByName=function(t){var e=n.NAME_TO_ECI.get(t);if(e===void 0)throw new Et("incorect value");return e},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.getName()===e.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Me.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Me.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Me.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Me.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Me.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Me.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Me.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Me.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Me.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Me.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Me.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Me.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Me.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Me.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Me.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Me.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Me.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Me.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Me.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Me.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Me.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Me.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Me.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Me.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Me.Big5,28,"Big5"),n.GB18030=new n(Me.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Me.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),trt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),P1=function(n){trt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="UnsupportedOperationException",t}(ni),Ui=function(){function n(){}return n.decode=function(t,e){var r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)},n.shouldDecodeOnFallback=function(t){return!n.isBrowser()&&t==="ISO-8859-1"},n.encode=function(t,e){var r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(t){return typeof t=="string"?t:t.getName()},n.encodingCharacterSet=function(t){return t instanceof Yn?t:Yn.getCharacterSetECIByName(t)},n.decodeFallback=function(t,e){var r=this.encodingCharacterSet(e);if(n.isDecodeFallbackSupported(r)){for(var i="",s=0,a=t.length;s<a;s++){var o=t[s].toString(16);o.length<2&&(o="0"+o),i+="%"+o}return decodeURIComponent(i)}if(r.equals(Yn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new P1("Encoding "+this.encodingName(e)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(t){return t.equals(Yn.UTF8)||t.equals(Yn.ISO8859_1)||t.equals(Yn.ASCII)},n.encodeFallback=function(t){for(var e=btoa(unescape(encodeURIComponent(t))),r=e.split(""),i=[],s=0;s<r.length;s++)i.push(r[s].charCodeAt(0));return new Uint8Array(i)},n}(),me=function(){function n(){}return n.castAsNonUtf8Char=function(t,e){e===void 0&&(e=null);var r=e?e.getName():this.ISO88591;return Ui.decode(new Uint8Array([t]),r)},n.guessEncoding=function(t,e){if(e!=null&&e.get(on.CHARACTER_SET)!==void 0)return e.get(on.CHARACTER_SET).toString();for(var r=t.length,i=!0,s=!0,a=!0,o=0,l=0,h=0,d=0,g=0,m=0,y=0,x=0,b=0,E=0,S=0,T=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191,R=0;R<r&&(i||s||a);R++){var k=t[R]&255;a&&(o>0?(k&128)===0?a=!1:o--:(k&128)!==0&&((k&64)===0?a=!1:(o++,(k&32)===0?l++:(o++,(k&16)===0?h++:(o++,(k&8)===0?d++:a=!1))))),i&&(k>127&&k<160?i=!1:k>159&&(k<192||k===215||k===247)&&S++),s&&(g>0?k<64||k===127||k>252?s=!1:g--:k===128||k===160||k>239?s=!1:k>160&&k<224?(m++,x=0,y++,y>b&&(b=y)):k>127?(g++,y=0,x++,x>E&&(E=x)):(y=0,x=0))}return a&&o>0&&(a=!1),s&&g>0&&(s=!1),a&&(T||l+h+d>0)?n.UTF8:s&&(n.ASSUME_SHIFT_JIS||b>=3||E>=3)?n.SHIFT_JIS:i&&s?b===2&&m===2||S*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:s?n.SHIFT_JIS:a?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=-1;function s(o,l,h,d,g,m){if(o==="%%")return"%";if(e[++i]!==void 0){o=d?parseInt(d.substr(1)):void 0;var y=g?parseInt(g.substr(1)):void 0,x;switch(m){case"s":x=e[i];break;case"c":x=e[i][0];break;case"f":x=parseFloat(e[i]).toFixed(o);break;case"p":x=parseFloat(e[i]).toPrecision(o);break;case"e":x=parseFloat(e[i]).toExponential(o);break;case"x":x=parseInt(e[i]).toString(y||16);break;case"d":x=parseFloat(parseInt(e[i],y||10).toPrecision(o)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(y);for(var b=parseInt(h),E=h&&h[0]+""=="0"?"0":" ";x.length<b;)x=l!==void 0?x+E:E+x;return x}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(a,s)},n.getBytes=function(t,e){return Ui.encode(t,e)},n.getCharCode=function(t,e){return e===void 0&&(e=0),t.charCodeAt(e)},n.getCharAt=function(t){return String.fromCharCode(t)},n.SHIFT_JIS=Yn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Yn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Yn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),ne=function(){function n(t){t===void 0&&(t=""),this.value=t}return n.prototype.enableDecoding=function(t){return this.encoding=t,this},n.prototype.append=function(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=me.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this},n.prototype.appendChars=function(t,e,r){for(var i=e;e<e+r;i++)this.append(t[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(t){return this.value.charAt(t)},n.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},n.prototype.setCharAt=function(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)},n.prototype.substring=function(t,e){return this.value.substring(t,e)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(t,e){this.value=this.value.substring(0,t)+e+this.value.substring(t)},n}(),Xs=function(){function n(t,e,r,i){if(this.width=t,this.height=e,this.rowSize=r,this.bits=i,e==null&&(e=t),this.height=e,t<1||e<1)throw new jt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((t+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(t){for(var e=t.length,r=t[0].length,i=new n(r,e),s=0;s<e;s++)for(var a=t[s],o=0;o<r;o++)a[o]&&i.set(o,s);return i},n.parseFromString=function(t,e,r){if(t===null)throw new jt("stringRepresentation cannot be null");for(var i=new Array(t.length),s=0,a=0,o=-1,l=0,h=0;h<t.length;)if(t.charAt(h)===`
`||t.charAt(h)==="\r"){if(s>a){if(o===-1)o=s-a;else if(s-a!==o)throw new jt("row lengths do not match");a=s,l++}h++}else if(t.substring(h,h+e.length)===e)h+=e.length,i[s]=!0,s++;else if(t.substring(h,h+r.length)===r)h+=r.length,i[s]=!1,s++;else throw new jt("illegal character encountered: "+t.substring(h));if(s>a){if(o===-1)o=s-a;else if(s-a!==o)throw new jt("row lengths do not match");l++}for(var d=new n(o,l),g=0;g<s;g++)i[g]&&d.set(Math.floor(g%o),Math.floor(g/o));return d},n.prototype.get=function(t,e){var r=e*this.rowSize+Math.floor(t/32);return(this.bits[r]>>>(t&31)&1)!==0},n.prototype.set=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(t&31)&4294967295},n.prototype.unset=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(t&31)&4294967295)},n.prototype.flip=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(t&31)&4294967295},n.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new jt("input matrix dimensions do not match");for(var e=new ur(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,s=0,a=this.height;s<a;s++)for(var o=s*r,l=t.getRow(s,e).getBitArray(),h=0;h<r;h++)i[o+h]^=l[h]},n.prototype.clear=function(){for(var t=this.bits,e=t.length,r=0;r<e;r++)t[r]=0},n.prototype.setRegion=function(t,e,r,i){if(e<0||t<0)throw new jt("Left and top must be nonnegative");if(i<1||r<1)throw new jt("Height and width must be at least 1");var s=t+r,a=e+i;if(a>this.height||s>this.width)throw new jt("The region must fit inside the matrix");for(var o=this.rowSize,l=this.bits,h=e;h<a;h++)for(var d=h*o,g=t;g<s;g++)l[d+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(t,e){e==null||e.getSize()<this.width?e=new ur(this.width):e.clear();for(var r=this.rowSize,i=this.bits,s=t*r,a=0;a<r;a++)e.setBulk(a*32,i[s+a]);return e},n.prototype.setRow=function(t,e){Ke.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var t=this.getWidth(),e=this.getHeight(),r=new ur(t),i=new ur(t),s=0,a=Math.floor((e+1)/2);s<a;s++)r=this.getRow(s,r),i=this.getRow(e-1-s,i),r.reverse(),i.reverse(),this.setRow(s,i),this.setRow(e-1-s,r)},n.prototype.getEnclosingRectangle=function(){for(var t=this.width,e=this.height,r=this.rowSize,i=this.bits,s=t,a=e,o=-1,l=-1,h=0;h<e;h++)for(var d=0;d<r;d++){var g=i[h*r+d];if(g!==0){if(h<a&&(a=h),h>l&&(l=h),d*32<s){for(var m=0;(g<<31-m&4294967295)===0;)m++;d*32+m<s&&(s=d*32+m)}if(d*32+31>o){for(var m=31;!(g>>>m);)m--;d*32+m>o&&(o=d*32+m)}}}return o<s||l<a?null:Int32Array.from([s,a,o-s+1,l-a+1])},n.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,e=this.bits,r=0;r<e.length&&e[r]===0;)r++;if(r===e.length)return null;for(var i=r/t,s=r%t*32,a=e[r],o=0;(a<<31-o&4294967295)===0;)o++;return s+=o,Int32Array.from([s,i])},n.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,e=this.bits,r=e.length-1;r>=0&&e[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/t),s=Math.floor(r%t)*32,a=e[r],o=31;!(a>>>o);)o--;return s+=o,Int32Array.from([s,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&Xn.equals(this.bits,e.bits)},n.prototype.hashCode=function(){var t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+Xn.hashCode(this.bits),t},n.prototype.toString=function(t,e,r){return t===void 0&&(t="X "),e===void 0&&(e="  "),r===void 0&&(r=`
`),this.buildToString(t,e,r)},n.prototype.buildToString=function(t,e,r){for(var i=new ne,s=0,a=this.height;s<a;s++){for(var o=0,l=this.width;o<l;o++)i.append(this.get(o,s)?t:e);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),ert=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ut=function(n){ert(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(ni),nrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rrt=function(n){nrt(t,n);function t(e){var r=n.call(this,e)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return t.prototype.getBlackRow=function(e,r){var i=this.getLuminanceSource(),s=i.getWidth();r==null||r.getSize()<s?r=new ur(s):r.clear(),this.initArrays(s);for(var a=i.getRow(e,this.luminances),o=this.buckets,l=0;l<s;l++)o[(a[l]&255)>>t.LUMINANCE_SHIFT]++;var h=t.estimateBlackPoint(o);if(s<3)for(var l=0;l<s;l++)(a[l]&255)<h&&r.set(l);else for(var d=a[0]&255,g=a[1]&255,l=1;l<s-1;l++){var m=a[l+1]&255;(g*4-d-m)/2<h&&r.set(l),d=g,g=m}return r},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight(),s=new Xs(r,i);this.initArrays(r);for(var a=this.buckets,o=1;o<5;o++)for(var l=Math.floor(i*o/5),h=e.getRow(l,this.luminances),d=Math.floor(r*4/5),g=Math.floor(r/5);g<d;g++){var m=h[g]&255;a[m>>t.LUMINANCE_SHIFT]++}for(var y=t.estimateBlackPoint(a),x=e.getMatrix(),o=0;o<i;o++)for(var b=o*r,g=0;g<r;g++){var m=x[b+g]&255;m<y&&s.set(g,o)}return s},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var r=this.buckets,i=0;i<t.LUMINANCE_BUCKETS;i++)r[i]=0},t.estimateBlackPoint=function(e){for(var r=e.length,i=0,s=0,a=0,o=0;o<r;o++)e[o]>a&&(s=o,a=e[o]),e[o]>i&&(i=e[o]);for(var l=0,h=0,o=0;o<r;o++){var d=o-s,g=e[o]*d*d;g>h&&(l=o,h=g)}if(s>l){var m=s;s=l,l=m}if(l-s<=r/16)throw new ut;for(var y=l-1,x=-1,o=l-1;o>s;o--){var b=o-s,g=b*b*(l-o)*(i-e[o]);g>x&&(y=o,x=g)}return y<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(Xnt),irt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),srt=function(n){irt(t,n);function t(e){var r=n.call(this,e)||this;return r.matrix=null,r}return t.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight();if(r>=t.MINIMUM_DIMENSION&&i>=t.MINIMUM_DIMENSION){var s=e.getMatrix(),a=r>>t.BLOCK_SIZE_POWER;(r&t.BLOCK_SIZE_MASK)!==0&&a++;var o=i>>t.BLOCK_SIZE_POWER;(i&t.BLOCK_SIZE_MASK)!==0&&o++;var l=t.calculateBlackPoints(s,a,o,r,i),h=new Xs(r,i);t.calculateThresholdForBlock(s,a,o,r,i,l,h),this.matrix=h}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,r,i,s,a,o,l){for(var h=a-t.BLOCK_SIZE,d=s-t.BLOCK_SIZE,g=0;g<i;g++){var m=g<<t.BLOCK_SIZE_POWER;m>h&&(m=h);for(var y=t.cap(g,2,i-3),x=0;x<r;x++){var b=x<<t.BLOCK_SIZE_POWER;b>d&&(b=d);for(var E=t.cap(x,2,r-3),S=0,T=-2;T<=2;T++){var R=o[y+T];S+=R[E-2]+R[E-1]+R[E]+R[E+1]+R[E+2]}var k=S/25;t.thresholdBlock(e,b,m,k,s,l)}}},t.cap=function(e,r,i){return e<r?r:e>i?i:e},t.thresholdBlock=function(e,r,i,s,a,o){for(var l=0,h=i*a+r;l<t.BLOCK_SIZE;l++,h+=a)for(var d=0;d<t.BLOCK_SIZE;d++)(e[h+d]&255)<=s&&o.set(r+d,i+l)},t.calculateBlackPoints=function(e,r,i,s,a){for(var o=a-t.BLOCK_SIZE,l=s-t.BLOCK_SIZE,h=new Array(i),d=0;d<i;d++){h[d]=new Int32Array(r);var g=d<<t.BLOCK_SIZE_POWER;g>o&&(g=o);for(var m=0;m<r;m++){var y=m<<t.BLOCK_SIZE_POWER;y>l&&(y=l);for(var x=0,b=255,E=0,S=0,T=g*s+y;S<t.BLOCK_SIZE;S++,T+=s){for(var R=0;R<t.BLOCK_SIZE;R++){var k=e[T+R]&255;x+=k,k<b&&(b=k),k>E&&(E=k)}if(E-b>t.MIN_DYNAMIC_RANGE)for(S++,T+=s;S<t.BLOCK_SIZE;S++,T+=s)for(var R=0;R<t.BLOCK_SIZE;R++)x+=e[T+R]&255}var N=x>>t.BLOCK_SIZE_POWER*2;if(E-b<=t.MIN_DYNAMIC_RANGE&&(N=b/2,d>0&&m>0)){var j=(h[d-1][m]+2*h[d][m-1]+h[d-1][m-1])/4;b<j&&(N=j)}h[d][m]=N}}return h},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=t.BLOCK_SIZE*5,t.MIN_DYNAMIC_RANGE=24,t}(rrt),yy=function(){function n(t,e){this.width=t,this.height=e}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(t,e,r,i){throw new P1("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new P1("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new P1("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var t=new Uint8ClampedArray(this.width),e=new ne,r=0;r<this.height;r++){for(var i=this.getRow(r,t),s=0;s<this.width;s++){var a=i[s]&255,o=void 0;a<64?o="#":a<128?o="+":a<192?o=".":o=" ",e.append(o)}e.append(`
`)}return e.toString()},n}(),art=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ZE=function(n){art(t,n);function t(e){var r=n.call(this,e.getWidth(),e.getHeight())||this;return r.delegate=e,r}return t.prototype.getRow=function(e,r){for(var i=this.delegate.getRow(e,r),s=this.getWidth(),a=0;a<s;a++)i[a]=255-(i[a]&255);return i},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),s=0;s<r;s++)i[s]=255-(e[s]&255);return i},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,r,i,s){return new t(this.delegate.crop(e,r,i,s))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(yy),ort=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),crt=function(n){ort(t,n);function t(e,r){r===void 0&&(r=!1);var i=n.call(this,e.width,e.height)||this;return i.canvas=e,i.tempCanvasElement=null,i.buffer=t.makeBufferFromCanvasImageData(e,r),i}return t.makeBufferFromCanvasImageData=function(e,r){r===void 0&&(r=!1);var i=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(i.data,e.width,e.height,r)},t.toGrayscaleBuffer=function(e,r,i,s){s===void 0&&(s=!1);var a=new Uint8ClampedArray(r*i);if(t.FRAME_INDEX=!t.FRAME_INDEX,t.FRAME_INDEX||!s)for(var o=0,l=0,h=e.length;o<h;o+=4,l++){var d=void 0,g=e[o+3];if(g===0)d=255;else{var m=e[o],y=e[o+1],x=e[o+2];d=306*m+601*y+117*x+512>>10}a[l]=d}else for(var o=0,l=0,b=e.length;o<b;o+=4,l++){var d=void 0,g=e[o+3];if(g===0)d=255;else{var m=e[o],y=e[o+1],x=e[o+2];d=306*m+601*y+117*x+512>>10}a[l]=255-d}return a},t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new jt("Requested row is outside the image: "+e);var i=this.getWidth(),s=e*i;return r===null?r=this.buffer.slice(s,s+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(s,s+i))),r},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,s){return n.prototype.crop.call(this,e,r,i,s),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var r=this.getTempCanvasElement(),i=r.getContext("2d"),s=e*t.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(s))*a+Math.abs(Math.sin(s))*o),h=Math.ceil(Math.abs(Math.sin(s))*a+Math.abs(Math.cos(s))*o);return r.width=l,r.height=h,i.translate(l/2,h/2),i.rotate(s),i.drawImage(this.canvas,a/-2,o/-2),this.buffer=t.makeBufferFromCanvasImageData(r),this},t.prototype.invert=function(){return new ZE(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t.FRAME_INDEX=!0,t}(yy),lrt=function(){function n(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),Fr=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(a){a(s)})}return new(e||(e=Promise))(function(s,a){function o(d){try{h(r.next(d))}catch(g){a(g)}}function l(d){try{h(r.throw(d))}catch(g){a(g)}}function h(d){d.done?s(d.value):i(d.value).then(o,l)}h((r=r.apply(n,t||[])).next())})},Ur=function(n,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(h){return function(d){return l([h,d])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return e.label++,{value:h[1],done:!1};case 5:e.label++,i=h[1],h=[0];continue;case 7:h=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){e=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){e.label=h[1];break}if(h[0]===6&&e.label<s[1]){e.label=s[1],s=h;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(h);break}s[2]&&e.ops.pop(),e.trys.pop();continue}h=t.call(n,e)}catch(d){h=[6,d],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},urt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Yh=function(){function n(t,e,r){e===void 0&&(e=500),this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(t){this._timeBetweenDecodingAttempts=t<0?0:t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(t){this._hints=t||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Fr(this,void 0,void 0,function(){var t,e,r,i,s,a,o,l,h,d,g,m;return Ur(this,function(y){switch(y.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=y.sent(),e=[];try{for(r=urt(t),i=r.next();!i.done;i=r.next())s=i.value,a=s.kind==="video"?"videoinput":s.kind,a==="videoinput"&&(o=s.deviceId||s.id,l=s.label||"Video device "+(e.length+1),h=s.groupId,d={deviceId:o,label:l,kind:a,groupId:h},e.push(d))}catch(x){g={error:x}}finally{try{i&&!i.done&&(m=r.return)&&m.call(r)}finally{if(g)throw g.error}}return[2,e]}})})},n.prototype.getVideoInputDevices=function(){return Fr(this,void 0,void 0,function(){var t;return Ur(this,function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=e.sent(),[2,t.map(function(r){return new lrt(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(t){return Fr(this,void 0,void 0,function(){var e;return Ur(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),e?[2,e.find(function(i){return i.deviceId===t})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(t,e){return Fr(this,void 0,void 0,function(){return Ur(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(t,e)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(t,e){return Fr(this,void 0,void 0,function(){var r,i;return Ur(this,function(s){switch(s.label){case 0:return this.reset(),t?r={deviceId:{exact:t}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,e)];case 1:return[2,s.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(t,e){return Fr(this,void 0,void 0,function(){var r;return Ur(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,e)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(t,e){return Fr(this,void 0,void 0,function(){var r,i;return Ur(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return r=s.sent(),[4,this.decodeOnce(r)];case 2:return i=s.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(t,e,r){return Fr(this,void 0,void 0,function(){return Ur(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(t,e,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(t,e,r){return Fr(this,void 0,void 0,function(){var i,s;return Ur(this,function(a){switch(a.label){case 0:return t?i={deviceId:{exact:t}}:i={facingMode:"environment"},s={video:i},[4,this.decodeFromConstraints(s,e,r)];case 1:return[2,a.sent()]}})})},n.prototype.decodeFromConstraints=function(t,e,r){return Fr(this,void 0,void 0,function(){var i;return Ur(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return i=s.sent(),[4,this.decodeFromStream(i,e,r)];case 2:return[2,s.sent()]}})})},n.prototype.decodeFromStream=function(t,e,r){return Fr(this,void 0,void 0,function(){var i;return Ur(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return i=s.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,s.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(t,e){return Fr(this,void 0,void 0,function(){var r;return Ur(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(e),this.addVideoSource(r,t),this.videoElement=r,this.stream=t,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(t){var e=this;return new Promise(function(r,i){return e.playVideoOnLoad(t,function(){return r()})})},n.prototype.playVideoOnLoad=function(t,e){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(t)},t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)},n.prototype.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},n.prototype.tryPlayVideo=function(t){return Fr(this,void 0,void 0,function(){return Ur(this,function(e){switch(e.label){case 0:if(this.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.play()];case 2:return e.sent(),[3,4];case 3:return e.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(t,e){var r=document.getElementById(t);if(!r)throw new $i("element with id '"+t+"' not found");if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new $i("element with id '"+t+"' must be an "+e+" element");return r},n.prototype.decodeFromImage=function(t,e){if(!t&&!e)throw new $i("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)},n.prototype.decodeFromVideo=function(t,e){if(!t&&!e)throw new $i("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)},n.prototype.decodeFromVideoContinuously=function(t,e,r){if(t===void 0&&e===void 0)throw new $i("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)},n.prototype.decodeFromImageElement=function(t){if(!t)throw new $i("An image element must be provided.");this.reset();var e=this.prepareImageElement(t);this.imageElement=e;var r;return this.isImageLoaded(e)?r=this.decodeOnce(e,!1,!0):r=this._decodeOnLoadImage(e),r},n.prototype.decodeFromVideoElement=function(t){var e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)},n.prototype.decodeFromVideoElementContinuously=function(t,e){var r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)},n.prototype._decodeFromVideoElementSetup=function(t){if(!t)throw new $i("A video element must be provided.");this.reset();var e=this.prepareVideoElement(t);return this.videoElement=e,e},n.prototype.decodeFromImageUrl=function(t){if(!t)throw new $i("An URL must be provided.");this.reset();var e=this.prepareImageElement();this.imageElement=e;var r=this._decodeOnLoadImage(e);return e.src=t,r},n.prototype.decodeFromVideoUrl=function(t){if(!t)throw new $i("An URL must be provided.");this.reset();var e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r},n.prototype.decodeFromVideoUrlContinuously=function(t,e){if(!t)throw new $i("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,e);return r.src=t,i},n.prototype._decodeOnLoadImage=function(t){var e=this;return new Promise(function(r,i){e.imageLoadedListener=function(){return e.decodeOnce(t,!1,!0).then(r,i)},t.addEventListener("load",e.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(t){return Fr(this,void 0,void 0,function(){return Ur(this,function(e){switch(e.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return e.sent(),[4,this.decodeOnce(t)];case 2:return[2,e.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(t,e){return Fr(this,void 0,void 0,function(){return Ur(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return r.sent(),this.decodeContinuously(t,e),[2]}})})},n.prototype.isImageLoaded=function(t){return!(!t.complete||t.naturalWidth===0)},n.prototype.prepareImageElement=function(t){var e;return typeof t>"u"&&(e=document.createElement("img"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e},n.prototype.prepareVideoElement=function(t){var e;return!t&&typeof document<"u"&&(e=document.createElement("video"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e},n.prototype.decodeOnce=function(t,e,r){var i=this;e===void 0&&(e=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var s=function(a,o){if(i._stopAsyncDecode){o(new ut("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(t);a(l)}catch(m){var h=e&&m instanceof ut,d=m instanceof lr||m instanceof Et,g=d&&r;if(h||g)return setTimeout(s,i._timeBetweenDecodingAttempts,a,o);o(m)}};return new Promise(function(a,o){return s(a,o)})},n.prototype.decodeContinuously=function(t,e){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var s=r.decode(t);e(s,null),setTimeout(i,r.timeBetweenScansMillis)}catch(l){e(null,l);var a=l instanceof lr||l instanceof Et,o=l instanceof ut;(a||o)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(t){var e=this.createBinaryBitmap(t);return this.decodeBitmap(e)},n.prototype.createBinaryBitmap=function(t){this.getCaptureCanvasContext(t);var e=!1;t instanceof HTMLVideoElement?(this.drawFrameOnCanvas(t),e=!0):this.drawImageOnCanvas(t);var r=this.getCaptureCanvas(t),i=new crt(r,e),s=new srt(i);return new qnt(s)},n.prototype.getCaptureCanvasContext=function(t){if(!this.captureCanvasContext){var e=this.getCaptureCanvas(t),r=void 0;try{r=e.getContext("2d",{willReadFrequently:!0})}catch{r=e.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(t){if(!this.captureCanvas){var e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.drawImageOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.decodeBitmap=function(t){return this.reader.decode(t,this._hints)},n.prototype.createCaptureCanvas=function(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var e=document.createElement("canvas"),r,i;return typeof t<"u"&&(t instanceof HTMLVideoElement?(r=t.videoWidth,i=t.videoHeight):t instanceof HTMLImageElement&&(r=t.naturalWidth||t.width,i=t.naturalHeight||t.height)),e.style.width=r+"px",e.style.height=i+"px",e.width=r,e.height=i,e},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(t,e){try{t.srcObject=e}catch{t.src=URL.createObjectURL(e)}},n.prototype.cleanVideoSource=function(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")},n}(),Pr=function(){function n(t,e,r,i,s,a){r===void 0&&(r=e==null?0:8*e.length),a===void 0&&(a=Ke.currentTimeMillis()),this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=i,this.format=s,this.timestamp=a,this.text=t,this.rawBytes=e,r==null?this.numBits=e==null?0:8*e.length:this.numBits=r,this.resultPoints=i,this.format=s,this.resultMetadata=null,a==null?this.timestamp=Ke.currentTimeMillis():this.timestamp=a}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(t,e){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)},n.prototype.putAllMetadata=function(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))},n.prototype.addResultPoints=function(t){var e=this.resultPoints;if(e===null)this.resultPoints=t;else if(t!==null&&t.length>0){var r=new Array(e.length+t.length);Ke.arraycopy(e,0,r,0,e.length),Ke.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),yw;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(yw||(yw={}));const Ut=yw;var vw;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(vw||(vw={}));const xr=vw;var vy=function(){function n(t,e,r,i,s,a){s===void 0&&(s=-1),a===void 0&&(a=-1),this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=a,this.numBits=t==null?0:8*t.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(t){this.numBits=t},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(t){this.errorsCorrected=t},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(t){this.erasures=t},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(t){this.other=t},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),Nd=function(){function n(){}return n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new jt;return this.logTable[t]},n.addOrSubtract=function(t,e){return t^e},n}(),Uo=function(){function n(t,e){if(e.length===0)throw new jt;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Ke.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){if(t===0)return this.getCoefficient(0);var e=this.coefficients,r;if(t===1){r=0;for(var i=0,s=e.length;i!==s;i++){var a=e[i];r=Nd.addOrSubtract(r,a)}return r}r=e[0];for(var o=e.length,l=this.field,i=1;i<o;i++)r=Nd.addOrSubtract(l.multiply(t,r),e[i]);return r},n.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new jt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var s=new Int32Array(r.length),a=r.length-e.length;Ke.arraycopy(r,0,s,0,a);for(var o=a;o<r.length;o++)s[o]=Nd.addOrSubtract(e[o-a],r[o]);return new n(this.field,s)},n.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new jt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var e=this.coefficients,r=e.length,i=t.coefficients,s=i.length,a=new Int32Array(r+s-1),o=this.field,l=0;l<r;l++)for(var h=e[l],d=0;d<s;d++)a[l+d]=Nd.addOrSubtract(a[l+d],o.multiply(h,i[d]));return new n(o,a)},n.prototype.multiplyScalar=function(t){if(t===0)return this.field.getZero();if(t===1)return this;for(var e=this.coefficients.length,r=this.field,i=new Int32Array(e),s=this.coefficients,a=0;a<e;a++)i[a]=r.multiply(s[a],t);return new n(r,i)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new jt;if(e===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,s=new Int32Array(i+t),a=this.field,o=0;o<i;o++)s[o]=a.multiply(r[o],e);return new n(a,s)},n.prototype.divide=function(t){if(!this.field.equals(t.field))throw new jt("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new jt("Divide by 0");for(var e=this.field,r=e.getZero(),i=this,s=t.getCoefficient(t.getDegree()),a=e.inverse(s);i.getDegree()>=t.getDegree()&&!i.isZero();){var o=i.getDegree()-t.getDegree(),l=e.multiply(i.getCoefficient(i.getDegree()),a),h=t.multiplyByMonomial(o,l),d=e.buildMonomial(o,l);r=r.addOrSubtract(d),i=i.addOrSubtract(h)}return[r,i]},n.prototype.toString=function(){for(var t="",e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);if(r!==0){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),e===0||r!==1){var i=this.field.log(r);i===0?t+="1":i===1?t+="a":(t+="a^",t+=i)}e!==0&&(e===1?t+="x":(t+="x^",t+=e))}}return t},n}(),hrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),yk=function(n){hrt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArithmeticException",t}(ni),frt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$r=function(n){frt(t,n);function t(e,r,i){var s=n.call(this)||this;s.primitive=e,s.size=r,s.generatorBase=i;for(var a=new Int32Array(r),o=1,l=0;l<r;l++)a[l]=o,o*=2,o>=r&&(o^=e,o&=r-1);s.expTable=a;for(var h=new Int32Array(r),l=0;l<r-1;l++)h[a[l]]=l;return s.logTable=h,s.zero=new Uo(s,Int32Array.from([0])),s.one=new Uo(s,Int32Array.from([1])),s}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new jt;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new Uo(this,i)},t.prototype.inverse=function(e){if(e===0)throw new yk;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+ae.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(Nd),drt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jp=function(n){drt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReedSolomonException",t}(ni),grt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),i0=function(n){grt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalStateException",t}(ni),_y=function(){function n(t){this.field=t}return n.prototype.decode=function(t,e){for(var r=this.field,i=new Uo(r,t),s=new Int32Array(e),a=!0,o=0;o<e;o++){var l=i.evaluateAt(r.exp(o+r.getGeneratorBase()));s[s.length-1-o]=l,l!==0&&(a=!1)}if(!a)for(var h=new Uo(r,s),d=this.runEuclideanAlgorithm(r.buildMonomial(e,1),h,e),g=d[0],m=d[1],y=this.findErrorLocations(g),x=this.findErrorMagnitudes(m,y),o=0;o<y.length;o++){var b=t.length-1-r.log(y[o]);if(b<0)throw new Jp("Bad error location");t[b]=$r.addOrSubtract(t[b],x[o])}},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var s=this.field,a=t,o=e,l=s.getZero(),h=s.getOne();o.getDegree()>=(r/2|0);){var d=a,g=l;if(a=o,l=h,a.isZero())throw new Jp("r_{i-1} was zero");o=d;for(var m=s.getZero(),y=a.getCoefficient(a.getDegree()),x=s.inverse(y);o.getDegree()>=a.getDegree()&&!o.isZero();){var b=o.getDegree()-a.getDegree(),E=s.multiply(o.getCoefficient(o.getDegree()),x);m=m.addOrSubtract(s.buildMonomial(b,E)),o=o.addOrSubtract(a.multiplyByMonomial(b,E))}if(h=m.multiply(l).addOrSubtract(g),o.getDegree()>=a.getDegree())throw new i0("Division algorithm failed to reduce polynomial?")}var S=h.getCoefficient(0);if(S===0)throw new Jp("sigmaTilde(0) was zero");var T=s.inverse(S),R=h.multiplyScalar(T),k=o.multiplyScalar(T);return[R,k]},n.prototype.findErrorLocations=function(t){var e=t.getDegree();if(e===1)return Int32Array.from([t.getCoefficient(1)]);for(var r=new Int32Array(e),i=0,s=this.field,a=1;a<s.getSize()&&i<e;a++)t.evaluateAt(a)===0&&(r[i]=s.inverse(a),i++);if(i!==e)throw new Jp("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(t,e){for(var r=e.length,i=new Int32Array(r),s=this.field,a=0;a<r;a++){for(var o=s.inverse(e[a]),l=1,h=0;h<r;h++)if(a!==h){var d=s.multiply(e[h],o),g=(d&1)===0?d|1:d&-2;l=s.multiply(l,g)}i[a]=s.multiply(t.evaluateAt(o),s.inverse(l)),s.getGeneratorBase()!==0&&(i[a]=s.multiply(i[a],o))}return i},n}(),mr;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(mr||(mr={}));var EO=function(){function n(){}return n.prototype.decode=function(t){this.ddata=t;var e=t.getBits(),r=this.extractBits(e),i=this.correctBits(r),s=n.convertBoolArrayToByteArray(i),a=n.getEncodedData(i),o=new vy(s,a,null,null);return o.setNumBits(i.length),o},n.highLevelDecode=function(t){return this.getEncodedData(t)},n.getEncodedData=function(t){for(var e=t.length,r=mr.UPPER,i=mr.UPPER,s="",a=0;a<e;)if(i===mr.BINARY){if(e-a<5)break;var o=n.readCode(t,a,5);if(a+=5,o===0){if(e-a<11)break;o=n.readCode(t,a,11)+31,a+=11}for(var l=0;l<o;l++){if(e-a<8){a=e;break}var h=n.readCode(t,a,8);s+=me.castAsNonUtf8Char(h),a+=8}i=r}else{var d=i===mr.DIGIT?4:5;if(e-a<d)break;var h=n.readCode(t,a,d);a+=d;var g=n.getCharacter(i,h);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(s+=g,i=r)}return s},n.getTable=function(t){switch(t){case"L":return mr.LOWER;case"P":return mr.PUNCT;case"M":return mr.MIXED;case"D":return mr.DIGIT;case"B":return mr.BINARY;case"U":default:return mr.UPPER}},n.getCharacter=function(t,e){switch(t){case mr.UPPER:return n.UPPER_TABLE[e];case mr.LOWER:return n.LOWER_TABLE[e];case mr.MIXED:return n.MIXED_TABLE[e];case mr.PUNCT:return n.PUNCT_TABLE[e];case mr.DIGIT:return n.DIGIT_TABLE[e];default:throw new i0("Bad table")}},n.prototype.correctBits=function(t){var e,r;this.ddata.getNbLayers()<=2?(r=6,e=$r.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,e=$r.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,e=$r.AZTEC_DATA_10):(r=12,e=$r.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),s=t.length/r;if(s<i)throw new Et;for(var a=t.length%r,o=new Int32Array(s),l=0;l<s;l++,a+=r)o[l]=n.readCode(t,a,r);try{var h=new _y(e);h.decode(o,s-i)}catch(E){throw new Et(E)}for(var d=(1<<r)-1,g=0,l=0;l<i;l++){var m=o[l];if(m===0||m===d)throw new Et;(m===1||m===d-1)&&g++}for(var y=new Array(i*r-g),x=0,l=0;l<i;l++){var m=o[l];if(m===1||m===d-1)y.fill(m>1,x,x+r-1),x+=r-1;else for(var b=r-1;b>=0;--b)y[x++]=(m&1<<b)!==0}return y},n.prototype.extractBits=function(t){var e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(e?11:14)+r*4,s=new Int32Array(i),a=new Array(this.totalBitsInLayer(r,e));if(e)for(var o=0;o<s.length;o++)s[o]=o;else for(var l=i+1+2*ae.truncDivision(ae.truncDivision(i,2)-1,15),h=i/2,d=ae.truncDivision(l,2),o=0;o<h;o++){var g=o+ae.truncDivision(o,15);s[h-o-1]=d-g-1,s[h+o]=d+g+1}for(var o=0,m=0;o<r;o++){for(var y=(r-o)*4+(e?9:12),x=o*2,b=i-1-x,E=0;E<y;E++)for(var S=E*2,T=0;T<2;T++)a[m+S+T]=t.get(s[x+T],s[x+E]),a[m+2*y+S+T]=t.get(s[x+E],s[b-T]),a[m+4*y+S+T]=t.get(s[b-T],s[b-E]),a[m+6*y+S+T]=t.get(s[b-E],s[x+T]);m+=y*8}return a},n.readCode=function(t,e,r){for(var i=0,s=e;s<e+r;s++)i<<=1,t[s]&&(i|=1);return i},n.readByte=function(t,e){var r=t.length-e;return r>=8?n.readCode(t,e,8):n.readCode(t,e,r)<<8-r},n.convertBoolArrayToByteArray=function(t){for(var e=new Uint8Array((t.length+7)/8),r=0;r<e.length;r++)e[r]=n.readByte(t,8*r);return e},n.prototype.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),we=function(){function n(){}return n.round=function(t){return isNaN(t)?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},n.distance=function(t,e,r,i){var s=t-r,a=e-i;return Math.sqrt(s*s+a*a)},n.sum=function(t){for(var e=0,r=0,i=t.length;r!==i;r++){var s=t[r];e+=s}return e},n}(),_w=function(){function n(){}return n.floatToIntBits=function(t){return t},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Mt=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(t){if(t instanceof n){var e=t;return this.x===e.x&&this.y===e.y}return!1},n.prototype.hashCode=function(){return 31*_w.floatToIntBits(this.x)+_w.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(t){var e=this.distance(t[0],t[1]),r=this.distance(t[1],t[2]),i=this.distance(t[0],t[2]),s,a,o;if(r>=e&&r>=i?(a=t[0],s=t[1],o=t[2]):i>=r&&i>=e?(a=t[1],s=t[0],o=t[2]):(a=t[2],s=t[0],o=t[1]),this.crossProductZ(s,a,o)<0){var l=s;s=o,o=l}t[0]=s,t[1]=a,t[2]=o},n.distance=function(t,e){return we.distance(t.x,t.y,e.x,e.y)},n.crossProductZ=function(t,e,r){var i=e.x,s=e.y;return(r.x-i)*(t.y-s)-(r.y-s)*(t.x-i)},n}(),JE=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),prt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mrt=function(n){prt(t,n);function t(e,r,i,s,a){var o=n.call(this,e,r)||this;return o.compact=i,o.nbDatablocks=s,o.nbLayers=a,o}return t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(JE),xw=function(){function n(t,e,r,i){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),e==null&&(e=n.INIT_SIZE),r==null&&(r=t.getWidth()/2|0),i==null&&(i=t.getHeight()/2|0);var s=e/2|0;if(this.leftInit=r-s,this.rightInit=r+s,this.upInit=i-s,this.downInit=i+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ut}return n.prototype.detect=function(){for(var t=this.leftInit,e=this.rightInit,r=this.upInit,i=this.downInit,s=!1,a=!0,o=!1,l=!1,h=!1,d=!1,g=!1,m=this.width,y=this.height;a;){a=!1;for(var x=!0;(x||!l)&&e<m;)x=this.containsBlackPoint(r,i,e,!1),x?(e++,a=!0,l=!0):l||e++;if(e>=m){s=!0;break}for(var b=!0;(b||!h)&&i<y;)b=this.containsBlackPoint(t,e,i,!0),b?(i++,a=!0,h=!0):h||i++;if(i>=y){s=!0;break}for(var E=!0;(E||!d)&&t>=0;)E=this.containsBlackPoint(r,i,t,!1),E?(t--,a=!0,d=!0):d||t--;if(t<0){s=!0;break}for(var S=!0;(S||!g)&&r>=0;)S=this.containsBlackPoint(t,e,r,!0),S?(r--,a=!0,g=!0):g||r--;if(r<0){s=!0;break}a&&(o=!0)}if(!s&&o){for(var T=e-t,R=null,k=1;R===null&&k<T;k++)R=this.getBlackPointOnSegment(t,i-k,t+k,i);if(R==null)throw new ut;for(var N=null,k=1;N===null&&k<T;k++)N=this.getBlackPointOnSegment(t,r+k,t+k,r);if(N==null)throw new ut;for(var j=null,k=1;j===null&&k<T;k++)j=this.getBlackPointOnSegment(e,r+k,e-k,r);if(j==null)throw new ut;for(var O=null,k=1;O===null&&k<T;k++)O=this.getBlackPointOnSegment(e,i-k,e-k,i);if(O==null)throw new ut;return this.centerEdges(O,R,j,N)}else throw new ut},n.prototype.getBlackPointOnSegment=function(t,e,r,i){for(var s=we.round(we.distance(t,e,r,i)),a=(r-t)/s,o=(i-e)/s,l=this.image,h=0;h<s;h++){var d=we.round(t+h*a),g=we.round(e+h*o);if(l.get(d,g))return new Mt(d,g)}return null},n.prototype.centerEdges=function(t,e,r,i){var s=t.getX(),a=t.getY(),o=e.getX(),l=e.getY(),h=r.getX(),d=r.getY(),g=i.getX(),m=i.getY(),y=n.CORR;return s<this.width/2?[new Mt(g-y,m+y),new Mt(o+y,l+y),new Mt(h-y,d-y),new Mt(s+y,a-y)]:[new Mt(g+y,m+y),new Mt(o+y,l-y),new Mt(h-y,d+y),new Mt(s-y,a-y)]},n.prototype.containsBlackPoint=function(t,e,r,i){var s=this.image;if(i){for(var a=t;a<=e;a++)if(s.get(a,r))return!0}else for(var o=t;o<=e;o++)if(s.get(r,o))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),AO=function(){function n(){}return n.checkAndNudgePoints=function(t,e){for(var r=t.getWidth(),i=t.getHeight(),s=!0,a=0;a<e.length&&s;a+=2){var o=Math.floor(e[a]),l=Math.floor(e[a+1]);if(o<-1||o>r||l<-1||l>i)throw new ut;s=!1,o===-1?(e[a]=0,s=!0):o===r&&(e[a]=r-1,s=!0),l===-1?(e[a+1]=0,s=!0):l===i&&(e[a+1]=i-1,s=!0)}s=!0;for(var a=e.length-2;a>=0&&s;a-=2){var o=Math.floor(e[a]),l=Math.floor(e[a+1]);if(o<-1||o>r||l<-1||l>i)throw new ut;s=!1,o===-1?(e[a]=0,s=!0):o===r&&(e[a]=r-1,s=!0),l===-1?(e[a+1]=0,s=!0):l===i&&(e[a+1]=i-1,s=!0)}},n}(),vk=function(){function n(t,e,r,i,s,a,o,l,h){this.a11=t,this.a21=e,this.a31=r,this.a12=i,this.a22=s,this.a32=a,this.a13=o,this.a23=l,this.a33=h}return n.quadrilateralToQuadrilateral=function(t,e,r,i,s,a,o,l,h,d,g,m,y,x,b,E){var S=n.quadrilateralToSquare(t,e,r,i,s,a,o,l),T=n.squareToQuadrilateral(h,d,g,m,y,x,b,E);return T.times(S)},n.prototype.transformPoints=function(t){for(var e=t.length,r=this.a11,i=this.a12,s=this.a13,a=this.a21,o=this.a22,l=this.a23,h=this.a31,d=this.a32,g=this.a33,m=0;m<e;m+=2){var y=t[m],x=t[m+1],b=s*y+l*x+g;t[m]=(r*y+a*x+h)/b,t[m+1]=(i*y+o*x+d)/b}},n.prototype.transformPointsWithValues=function(t,e){for(var r=this.a11,i=this.a12,s=this.a13,a=this.a21,o=this.a22,l=this.a23,h=this.a31,d=this.a32,g=this.a33,m=t.length,y=0;y<m;y++){var x=t[y],b=e[y],E=s*x+l*b+g;t[y]=(r*x+a*b+h)/E,e[y]=(i*x+o*b+d)/E}},n.squareToQuadrilateral=function(t,e,r,i,s,a,o,l){var h=t-r+s-o,d=e-i+a-l;if(h===0&&d===0)return new n(r-t,s-r,t,i-e,a-i,e,0,0,1);var g=r-s,m=o-s,y=i-a,x=l-a,b=g*x-m*y,E=(h*x-m*d)/b,S=(g*d-h*y)/b;return new n(r-t+E*r,o-t+S*o,t,i-e+E*i,l-e+S*l,e,E,S,1)},n.quadrilateralToSquare=function(t,e,r,i,s,a,o,l){return n.squareToQuadrilateral(t,e,r,i,s,a,o,l).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(t){return new n(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},n}(),yrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vrt=function(n){yrt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.sampleGrid=function(e,r,i,s,a,o,l,h,d,g,m,y,x,b,E,S,T,R,k){var N=vk.quadrilateralToQuadrilateral(s,a,o,l,h,d,g,m,y,x,b,E,S,T,R,k);return this.sampleGridWithTransform(e,r,i,N)},t.prototype.sampleGridWithTransform=function(e,r,i,s){if(r<=0||i<=0)throw new ut;for(var a=new Xs(r,i),o=new Float32Array(2*r),l=0;l<i;l++){for(var h=o.length,d=l+.5,g=0;g<h;g+=2)o[g]=g/2+.5,o[g+1]=d;s.transformPoints(o),AO.checkAndNudgePoints(e,o);try{for(var g=0;g<h;g+=2)e.get(Math.floor(o[g]),Math.floor(o[g+1]))&&a.set(g/2,l)}catch{throw new ut}}return a},t}(AO),tA=function(){function n(){}return n.setGridSampler=function(t){n.gridSampler=t},n.getInstance=function(){return n.gridSampler},n.gridSampler=new vrt,n}(),Xr=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.toResultPoint=function(){return new Mt(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),_rt=function(){function n(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(t){var e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var s=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),a=this.getMatrixCornerPoints(r);return new mrt(s,a,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new ut;var e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);for(var i=0,s=0;s<4;s++){var a=r[(this.shift+s)%4];this.compact?(i<<=7,i+=a>>1&127):(i<<=10,i+=(a>>2&992)+(a>>1&31))}var o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},n.prototype.getRotation=function(t,e){var r=0;t.forEach(function(s,a,o){var l=(s>>e-2<<1)+(s&1);r=(r<<3)+l}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(ae.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ut},n.prototype.getCorrectedParameterData=function(t,e){var r,i;e?(r=7,i=2):(r=10,i=4);for(var s=r-i,a=new Int32Array(r),o=r-1;o>=0;--o)a[o]=t&15,t>>=4;try{var l=new _y($r.AZTEC_PARAM);l.decode(a,s)}catch{throw new ut}for(var h=0,o=0;o<i;o++)h=(h<<4)+a[o];return h},n.prototype.getBullsEyeCorners=function(t){var e=t,r=t,i=t,s=t,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(e,a,1,-1),l=this.getFirstDifferent(r,a,1,1),h=this.getFirstDifferent(i,a,-1,1),d=this.getFirstDifferent(s,a,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(d,o)*this.nbCenterLayers/(this.distancePoint(s,e)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(o,l,h,d))break}e=o,r=l,i=h,s=d,a=!a}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ut;this.compact=this.nbCenterLayers===5;var m=new Mt(e.getX()+.5,e.getY()-.5),y=new Mt(r.getX()+.5,r.getY()+.5),x=new Mt(i.getX()-.5,i.getY()+.5),b=new Mt(s.getX()-.5,s.getY()-.5);return this.expandSquare([m,y,x,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var t,e,r,i;try{var s=new xw(this.image).detect();t=s[0],e=s[1],r=s[2],i=s[3]}catch{var a=this.image.getWidth()/2,o=this.image.getHeight()/2;t=this.getFirstDifferent(new Xr(a+7,o-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Xr(a+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Xr(a-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Xr(a-7,o-7),!1,-1,-1).toResultPoint()}var l=we.round((t.getX()+i.getX()+e.getX()+r.getX())/4),h=we.round((t.getY()+i.getY()+e.getY()+r.getY())/4);try{var s=new xw(this.image,15,l,h).detect();t=s[0],e=s[1],r=s[2],i=s[3]}catch{t=this.getFirstDifferent(new Xr(l+7,h-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Xr(l+7,h+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Xr(l-7,h+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Xr(l-7,h-7),!1,-1,-1).toResultPoint()}return l=we.round((t.getX()+i.getX()+e.getX()+r.getX())/4),h=we.round((t.getY()+i.getY()+e.getY()+r.getY())/4),new Xr(l,h)},n.prototype.getMatrixCornerPoints=function(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(t,e,r,i,s){var a=tA.getInstance(),o=this.getDimension(),l=o/2-this.nbCenterLayers,h=o/2+this.nbCenterLayers;return a.sampleGrid(t,o,o,l,l,h,l,h,h,l,h,e.getX(),e.getY(),r.getX(),r.getY(),i.getX(),i.getY(),s.getX(),s.getY())},n.prototype.sampleLine=function(t,e,r){for(var i=0,s=this.distanceResultPoint(t,e),a=s/r,o=t.getX(),l=t.getY(),h=a*(e.getX()-t.getX())/s,d=a*(e.getY()-t.getY())/s,g=0;g<r;g++)this.image.get(we.round(o+g*h),we.round(l+g*d))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(t,e,r,i){var s=3;t=new Xr(t.getX()-s,t.getY()+s),e=new Xr(e.getX()-s,e.getY()-s),r=new Xr(r.getX()+s,r.getY()-s),i=new Xr(i.getX()+s,i.getY()+s);var a=this.getColor(i,t);if(a===0)return!1;var o=this.getColor(t,e);return o!==a||(o=this.getColor(e,r),o!==a)?!1:(o=this.getColor(r,i),o===a)},n.prototype.getColor=function(t,e){for(var r=this.distancePoint(t,e),i=(e.getX()-t.getX())/r,s=(e.getY()-t.getY())/r,a=0,o=t.getX(),l=t.getY(),h=this.image.get(t.getX(),t.getY()),d=Math.ceil(r),g=0;g<d;g++)o+=i,l+=s,this.image.get(we.round(o),we.round(l))!==h&&a++;var m=a/r;return m>.1&&m<.9?0:m<=.1===h?1:-1},n.prototype.getFirstDifferent=function(t,e,r,i){for(var s=t.getX()+r,a=t.getY()+i;this.isValid(s,a)&&this.image.get(s,a)===e;)s+=r,a+=i;for(s-=r,a-=i;this.isValid(s,a)&&this.image.get(s,a)===e;)s+=r;for(s-=r;this.isValid(s,a)&&this.image.get(s,a)===e;)a+=i;return a-=i,new Xr(s,a)},n.prototype.expandSquare=function(t,e,r){var i=r/(2*e),s=t[0].getX()-t[2].getX(),a=t[0].getY()-t[2].getY(),o=(t[0].getX()+t[2].getX())/2,l=(t[0].getY()+t[2].getY())/2,h=new Mt(o+i*s,l+i*a),d=new Mt(o-i*s,l-i*a);s=t[1].getX()-t[3].getX(),a=t[1].getY()-t[3].getY(),o=(t[1].getX()+t[3].getX())/2,l=(t[1].getY()+t[3].getY())/2;var g=new Mt(o+i*s,l+i*a),m=new Mt(o-i*s,l-i*a),y=[h,g,d,m];return y},n.prototype.isValid=function(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()},n.prototype.isValidPoint=function(t){var e=we.round(t.getX()),r=we.round(t.getY());return this.isValid(e,r)},n.prototype.distancePoint=function(t,e){return we.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.distanceResultPoint=function(t,e){return we.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ae.truncDivision(this.nbLayers-4,8)+1)+15},n}(),ww=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=null,i=new _rt(t.getBlackMatrix()),s=null,a=null;try{var o=i.detectMirror(!1);s=o.getPoints(),this.reportFoundResultPoints(e,s),a=new EO().decode(o)}catch(g){r=g}if(a==null)try{var o=i.detectMirror(!0);s=o.getPoints(),this.reportFoundResultPoints(e,s),a=new EO().decode(o)}catch(g){throw r??g}var l=new Pr(a.getText(),a.getRawBytes(),a.getNumBits(),s,Ut.AZTEC,Ke.currentTimeMillis()),h=a.getByteSegments();h!=null&&l.putMetadata(xr.BYTE_SEGMENTS,h);var d=a.getECLevel();return d!=null&&l.putMetadata(xr.ERROR_CORRECTION_LEVEL,d),l},n.prototype.reportFoundResultPoints=function(t,e){if(t!=null){var r=t.get(on.NEED_RESULT_POINT_CALLBACK);r!=null&&e.forEach(function(i,s,a){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),xrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){xrt(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new ww,e)||this}return t})(Yh);var $n=function(){function n(){}return n.prototype.decode=function(t,e){try{return this.doDecode(t,e)}catch{var r=e&&e.get(on.TRY_HARDER)===!0;if(r&&t.isRotateSupported()){var i=t.rotateCounterClockwise(),s=this.doDecode(i,e),a=s.getResultMetadata(),o=270;a!==null&&a.get(xr.ORIENTATION)===!0&&(o=o+a.get(xr.ORIENTATION)%360),s.putMetadata(xr.ORIENTATION,o);var l=s.getResultPoints();if(l!==null)for(var h=i.getHeight(),d=0;d<l.length;d++)l[d]=new Mt(h-l[d].getY()-1,l[d].getX());return s}else throw new ut}},n.prototype.reset=function(){},n.prototype.doDecode=function(t,e){var r=t.getWidth(),i=t.getHeight(),s=new ur(r),a=e&&e.get(on.TRY_HARDER)===!0,o=Math.max(1,i>>(a?8:5)),l;a?l=i:l=15;for(var h=Math.trunc(i/2),d=0;d<l;d++){var g=Math.trunc((d+1)/2),m=(d&1)===0,y=h+o*(m?g:-g);if(y<0||y>=i)break;try{s=t.getBlackRow(y,s)}catch{continue}for(var x=function(T){if(T===1&&(s.reverse(),e&&e.get(on.NEED_RESULT_POINT_CALLBACK)===!0)){var R=new Map;e.forEach(function(j,O){return R.set(O,j)}),R.delete(on.NEED_RESULT_POINT_CALLBACK),e=R}try{var k=b.decodeRow(y,s,e);if(T===1){k.putMetadata(xr.ORIENTATION,180);var N=k.getResultPoints();N!==null&&(N[0]=new Mt(r-N[0].getX()-1,N[0].getY()),N[1]=new Mt(r-N[1].getX()-1,N[1].getY()))}return{value:k}}catch{}},b=this,E=0;E<2;E++){var S=x(E);if(typeof S=="object")return S.value}}throw new ut},n.recordPattern=function(t,e,r){for(var i=r.length,s=0;s<i;s++)r[s]=0;var a=t.getSize();if(e>=a)throw new ut;for(var o=!t.get(e),l=0,h=e;h<a;){if(t.get(h)!==o)r[l]++;else{if(++l===i)break;r[l]=1,o=!o}h++}if(!(l===i||l===i-1&&h===a))throw new ut},n.recordPatternInReverse=function(t,e,r){for(var i=r.length,s=t.get(e);e>0&&i>=0;)t.get(--e)!==s&&(i--,s=!s);if(i>=0)throw new ut;n.recordPattern(t,e+1,r)},n.patternMatchVariance=function(t,e,r){for(var i=t.length,s=0,a=0,o=0;o<i;o++)s+=t[o],a+=e[o];if(s<a)return Number.POSITIVE_INFINITY;var l=s/a;r*=l;for(var h=0,d=0;d<i;d++){var g=t[d],m=e[d]*l,y=g>m?g-m:m-g;if(y>r)return Number.POSITIVE_INFINITY;h+=y}return h/s},n}(),wrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),TO=function(n){wrt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.findStartPattern=function(e){for(var r=e.getSize(),i=e.getNextSet(0),s=0,a=Int32Array.from([0,0,0,0,0,0]),o=i,l=!1,h=6,d=i;d<r;d++)if(e.get(d)!==l)a[s]++;else{if(s===h-1){for(var g=t.MAX_AVG_VARIANCE,m=-1,y=t.CODE_START_A;y<=t.CODE_START_C;y++){var x=$n.patternMatchVariance(a,t.CODE_PATTERNS[y],t.MAX_INDIVIDUAL_VARIANCE);x<g&&(g=x,m=y)}if(m>=0&&e.isRange(Math.max(0,o-(d-o)/2),o,!1))return Int32Array.from([o,d,m]);o+=a[0]+a[1],a=a.slice(2,a.length),a[s-1]=0,a[s]=0,s--}else s++;a[s]=1,l=!l}throw new ut},t.decodeCode=function(e,r,i){$n.recordPattern(e,i,r);for(var s=t.MAX_AVG_VARIANCE,a=-1,o=0;o<t.CODE_PATTERNS.length;o++){var l=t.CODE_PATTERNS[o],h=this.patternMatchVariance(r,l,t.MAX_INDIVIDUAL_VARIANCE);h<s&&(s=h,a=o)}if(a>=0)return a;throw new ut},t.prototype.decodeRow=function(e,r,i){var s=i&&i.get(on.ASSUME_GS1)===!0,a=t.findStartPattern(r),o=a[2],l=0,h=new Uint8Array(20);h[l++]=o;var d;switch(o){case t.CODE_START_A:d=t.CODE_CODE_A;break;case t.CODE_START_B:d=t.CODE_CODE_B;break;case t.CODE_START_C:d=t.CODE_CODE_C;break;default:throw new Et}for(var g=!1,m=!1,y="",x=a[0],b=a[1],E=Int32Array.from([0,0,0,0,0,0]),S=0,T=0,R=o,k=0,N=!0,j=!1,O=!1;!g;){var C=m;switch(m=!1,S=T,T=t.decodeCode(r,E,b),h[l++]=T,T!==t.CODE_STOP&&(N=!0),T!==t.CODE_STOP&&(k++,R+=k*T),x=b,b+=E.reduce(function(ct,yt){return ct+yt},0),T){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new Et}switch(d){case t.CODE_CODE_A:if(T<64)O===j?y+=String.fromCharCode(32+T):y+=String.fromCharCode(32+T+128),O=!1;else if(T<96)O===j?y+=String.fromCharCode(T-64):y+=String.fromCharCode(T+64),O=!1;else switch(T!==t.CODE_STOP&&(N=!1),T){case t.CODE_FNC_1:s&&(y.length===0?y+="]C1":y+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!j&&O?(j=!0,O=!1):j&&O?(j=!1,O=!1):O=!0;break;case t.CODE_SHIFT:m=!0,d=t.CODE_CODE_B;break;case t.CODE_CODE_B:d=t.CODE_CODE_B;break;case t.CODE_CODE_C:d=t.CODE_CODE_C;break;case t.CODE_STOP:g=!0;break}break;case t.CODE_CODE_B:if(T<96)O===j?y+=String.fromCharCode(32+T):y+=String.fromCharCode(32+T+128),O=!1;else switch(T!==t.CODE_STOP&&(N=!1),T){case t.CODE_FNC_1:s&&(y.length===0?y+="]C1":y+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!j&&O?(j=!0,O=!1):j&&O?(j=!1,O=!1):O=!0;break;case t.CODE_SHIFT:m=!0,d=t.CODE_CODE_A;break;case t.CODE_CODE_A:d=t.CODE_CODE_A;break;case t.CODE_CODE_C:d=t.CODE_CODE_C;break;case t.CODE_STOP:g=!0;break}break;case t.CODE_CODE_C:if(T<100)T<10&&(y+="0"),y+=T;else switch(T!==t.CODE_STOP&&(N=!1),T){case t.CODE_FNC_1:s&&(y.length===0?y+="]C1":y+="");break;case t.CODE_CODE_A:d=t.CODE_CODE_A;break;case t.CODE_CODE_B:d=t.CODE_CODE_B;break;case t.CODE_STOP:g=!0;break}break}C&&(d=d===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var M=b-x;if(b=r.getNextUnset(b),!r.isRange(b,Math.min(r.getSize(),b+(b-x)/2),!1))throw new ut;if(R-=k*S,R%103!==S)throw new lr;var B=y.length;if(B===0)throw new ut;B>0&&N&&(d===t.CODE_CODE_C?y=y.substring(0,B-2):y=y.substring(0,B-1));for(var H=(a[1]+a[0])/2,G=x+M/2,U=h.length,_t=new Uint8Array(U),xt=0;xt<U;xt++)_t[xt]=h[xt];var K=[new Mt(H,e),new Mt(G,e)];return new Pr(y,_t,0,K,Ut.CODE_128,new Date().getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}($n),brt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},SO=function(n){brt(t,n);function t(e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=e,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return t.prototype.decodeRow=function(e,r,i){var s,a,o,l,h=this.counters;h.fill(0),this.decodeRowResult="";var d=t.findAsteriskPattern(r,h),g=r.getNextSet(d[1]),m=r.getSize(),y,x;do{t.recordPattern(r,g,h);var b=t.toNarrowWidePattern(h);if(b<0)throw new ut;y=t.patternToChar(b),this.decodeRowResult+=y,x=g;try{for(var E=(s=void 0,wx(h)),S=E.next();!S.done;S=E.next()){var T=S.value;g+=T}}catch(U){s={error:U}}finally{try{S&&!S.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}g=r.getNextSet(g)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var R=0;try{for(var k=wx(h),N=k.next();!N.done;N=k.next()){var T=N.value;R+=T}}catch(U){o={error:U}}finally{try{N&&!N.done&&(l=k.return)&&l.call(k)}finally{if(o)throw o.error}}var j=g-x-R;if(g!==m&&j*2<R)throw new ut;if(this.usingCheckDigit){for(var O=this.decodeRowResult.length-1,C=0,M=0;M<O;M++)C+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(M));if(this.decodeRowResult.charAt(O)!==t.ALPHABET_STRING.charAt(C%43))throw new lr;this.decodeRowResult=this.decodeRowResult.substring(0,O)}if(this.decodeRowResult.length===0)throw new ut;var B;this.extendedMode?B=t.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;var H=(d[1]+d[0])/2,G=x+R/2;return new Pr(B,null,0,[new Mt(H,e),new Mt(G,e)],Ut.CODE_39,new Date().getTime())},t.findAsteriskPattern=function(e,r){for(var i=e.getSize(),s=e.getNextSet(0),a=0,o=s,l=!1,h=r.length,d=s;d<i;d++)if(e.get(d)!==l)r[a]++;else{if(a===h-1){if(this.toNarrowWidePattern(r)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((d-o)/2)),o,!1))return[o,d];o+=r[0]+r[1],r.copyWithin(0,2,2+a-1),r[a-1]=0,r[a]=0,a--}else a++;r[a]=1,l=!l}throw new ut},t.toNarrowWidePattern=function(e){var r,i,s=e.length,a=0,o;do{var l=2147483647;try{for(var h=(r=void 0,wx(e)),d=h.next();!d.done;d=h.next()){var g=d.value;g<l&&g>a&&(l=g)}}catch(b){r={error:b}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}a=l,o=0;for(var m=0,y=0,x=0;x<s;x++){var g=e[x];g>a&&(y|=1<<s-1-x,o++,m+=g)}if(o===3){for(var x=0;x<s&&o>0;x++){var g=e[x];if(g>a&&(o--,g*2>=m))return-1}return y}}while(o>3);return-1},t.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);if(e===t.ASTERISK_ENCODING)return"*";throw new ut},t.decodeExtended=function(e){for(var r=e.length,i="",s=0;s<r;s++){var a=e.charAt(s);if(a==="+"||a==="$"||a==="%"||a==="/"){var o=e.charAt(s+1),l="\0";switch(a){case"+":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new Et;break;case"$":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new Et;break;case"%":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o==="X"||o==="Y"||o==="Z")l="";else throw new Et;break;case"/":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new Et;break}i+=l,s++}else i+=a}return i},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}($n),Ert=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},CO=function(n){Ert(t,n);function t(){var e=n.call(this)||this;return e.decodeRowResult="",e.counters=new Int32Array(6),e}return t.prototype.decodeRow=function(e,r,i){var s,a,o,l,h=this.findAsteriskPattern(r),d=r.getNextSet(h[1]),g=r.getSize(),m=this.counters;m.fill(0),this.decodeRowResult="";var y,x;do{t.recordPattern(r,d,m);var b=this.toPattern(m);if(b<0)throw new ut;y=this.patternToChar(b),this.decodeRowResult+=y,x=d;try{for(var E=(s=void 0,bx(m)),S=E.next();!S.done;S=E.next()){var T=S.value;d+=T}}catch(M){s={error:M}}finally{try{S&&!S.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}d=r.getNextSet(d)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var R=0;try{for(var k=bx(m),N=k.next();!N.done;N=k.next()){var T=N.value;R+=T}}catch(M){o={error:M}}finally{try{N&&!N.done&&(l=k.return)&&l.call(k)}finally{if(o)throw o.error}}if(d===g||!r.get(d))throw new ut;if(this.decodeRowResult.length<2)throw new ut;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var j=this.decodeExtended(this.decodeRowResult),O=(h[1]+h[0])/2,C=x+R/2;return new Pr(j,null,0,[new Mt(O,e),new Mt(C,e)],Ut.CODE_93,new Date().getTime())},t.prototype.findAsteriskPattern=function(e){var r=e.getSize(),i=e.getNextSet(0);this.counters.fill(0);for(var s=this.counters,a=i,o=!1,l=s.length,h=0,d=i;d<r;d++)if(e.get(d)!==o)s[h]++;else{if(h===l-1){if(this.toPattern(s)===t.ASTERISK_ENCODING)return new Int32Array([a,d]);a+=s[0]+s[1],s.copyWithin(0,2,2+h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,o=!o}throw new ut},t.prototype.toPattern=function(e){var r,i,s=0;try{for(var a=bx(e),o=a.next();!o.done;o=a.next()){var l=o.value;s+=l}}catch(x){r={error:x}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}for(var h=0,d=e.length,g=0;g<d;g++){var m=Math.round(e[g]*9/s);if(m<1||m>4)return-1;if((g&1)===0)for(var y=0;y<m;y++)h=h<<1|1;else h<<=m}return h},t.prototype.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);throw new ut},t.prototype.decodeExtended=function(e){for(var r=e.length,i="",s=0;s<r;s++){var a=e.charAt(s);if(a>="a"&&a<="d"){if(s>=r-1)throw new Et;var o=e.charAt(s+1),l="\0";switch(a){case"d":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new Et;break;case"a":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new Et;break;case"b":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o>="X"&&o<="Z")l="";else throw new Et;break;case"c":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new Et;break}i+=l,s++}else i+=a}return i},t.prototype.checkChecksums=function(e){var r=e.length;this.checkOneChecksum(e,r-2,20),this.checkOneChecksum(e,r-1,15)},t.prototype.checkOneChecksum=function(e,r,i){for(var s=1,a=0,o=r-1;o>=0;o--)a+=s*t.ALPHABET_STRING.indexOf(e.charAt(o)),++s>i&&(s=1);if(e.charAt(r)!==t.ALPHABET_STRING[a%47])throw new lr},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t}($n),Art=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Trt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},IO=function(n){Art(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.narrowLineWidth=-1,e}return t.prototype.decodeRow=function(e,r,i){var s,a,o=this.decodeStart(r),l=this.decodeEnd(r),h=new ne;t.decodeMiddle(r,o[1],l[0],h);var d=h.toString(),g=null;i!=null&&(g=i.get(on.ALLOWED_LENGTHS)),g==null&&(g=t.DEFAULT_ALLOWED_LENGTHS);var m=d.length,y=!1,x=0;try{for(var b=Trt(g),E=b.next();!E.done;E=b.next()){var S=E.value;if(m===S){y=!0;break}S>x&&(x=S)}}catch(k){s={error:k}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}if(!y&&m>x&&(y=!0),!y)throw new Et;var T=[new Mt(o[1],e),new Mt(l[0],e)],R=new Pr(d,null,0,T,Ut.ITF,new Date().getTime());return R},t.decodeMiddle=function(e,r,i,s){var a=new Int32Array(10),o=new Int32Array(5),l=new Int32Array(5);for(a.fill(0),o.fill(0),l.fill(0);r<i;){$n.recordPattern(e,r,a);for(var h=0;h<5;h++){var d=2*h;o[h]=a[d],l[h]=a[d+1]}var g=t.decodeDigit(o);s.append(g.toString()),g=this.decodeDigit(l),s.append(g.toString()),a.forEach(function(m){r+=m})}},t.prototype.decodeStart=function(e){var r=t.skipWhiteSpace(e),i=t.findGuardPattern(e,r,t.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i},t.prototype.validateQuietZone=function(e,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var s=r-1;i>0&&s>=0&&!e.get(s);s--)i--;if(i!==0)throw new ut},t.skipWhiteSpace=function(e){var r=e.getSize(),i=e.getNextSet(0);if(i===r)throw new ut;return i},t.prototype.decodeEnd=function(e){e.reverse();try{var r=t.skipWhiteSpace(e),i=void 0;try{i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[0])}catch(a){a instanceof ut&&(i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);var s=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-s,i}finally{e.reverse()}},t.findGuardPattern=function(e,r,i){var s=i.length,a=new Int32Array(s),o=e.getSize(),l=!1,h=0,d=r;a.fill(0);for(var g=r;g<o;g++)if(e.get(g)!==l)a[h]++;else{if(h===s-1){if($n.patternMatchVariance(a,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[d,g];d+=a[0]+a[1],Ke.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,l=!l}throw new ut},t.decodeDigit=function(e){for(var r=t.MAX_AVG_VARIANCE,i=-1,s=t.PATTERNS.length,a=0;a<s;a++){var o=t.PATTERNS[a],l=$n.patternMatchVariance(e,o,t.MAX_INDIVIDUAL_VARIANCE);l<r?(r=l,i=a):l===r&&(i=-1)}if(i>=0)return i%10;throw new ut},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}($n),Srt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ph=function(n){Srt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.decodeRowStringBuffer="",e}return t.findStartGuardPattern=function(e){for(var r=!1,i,s=0,a=Int32Array.from([0,0,0]);!r;){a=Int32Array.from([0,0,0]),i=t.findGuardPattern(e,s,!1,this.START_END_PATTERN,a);var o=i[0];s=i[1];var l=o-(s-o);l>=0&&(r=e.isRange(l,o,!1))}return i},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,s=r-1;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new Et;i+=a}i*=3;for(var s=r-2;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new Et;i+=a}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,r,i,s){return this.findGuardPattern(e,r,i,s,new Int32Array(s.length))},t.findGuardPattern=function(e,r,i,s,a){var o=e.getSize();r=i?e.getNextUnset(r):e.getNextSet(r);for(var l=0,h=r,d=s.length,g=i,m=r;m<o;m++)if(e.get(m)!==g)a[l]++;else{if(l===d-1){if($n.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([h,m]);h+=a[0]+a[1];for(var y=a.slice(2,a.length),x=0;x<l-1;x++)a[x]=y[x];a[l-1]=0,a[l]=0,l--}else l++;a[l]=1,g=!g}throw new ut},t.decodeDigit=function(e,r,i,s){this.recordPattern(e,i,r);for(var a=this.MAX_AVG_VARIANCE,o=-1,l=s.length,h=0;h<l;h++){var d=s[h],g=$n.patternMatchVariance(r,d,t.MAX_INDIVIDUAL_VARIANCE);g<a&&(a=g,o=h)}if(o>=0)return o;throw new ut},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}($n),Crt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Irt=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(e,r,i),a=i.toString(),o=n.parseExtensionString(a),l=[new Mt((r[0]+r[1])/2,t),new Mt(s,t)],h=new Pr(a,null,0,l,Ut.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&h.putAllMetadata(o),h},n.prototype.decodeMiddle=function(t,e,r){var i,s,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var o=t.getSize(),l=e[1],h=0,d=0;d<5&&l<o;d++){var g=Ph.decodeDigit(t,a,l,Ph.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var m=(i=void 0,Crt(a)),y=m.next();!y.done;y=m.next()){var x=y.value;l+=x}}catch(E){i={error:E}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}g>=10&&(h|=1<<4-d),d!==4&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(r.length!==5)throw new ut;var b=this.determineCheckDigit(h);if(n.extensionChecksum(r.toString())!==b)throw new ut;return l},n.extensionChecksum=function(t){for(var e=t.length,r=0,i=e-2;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;r*=3;for(var i=e-1;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(t){for(var e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new ut},n.parseExtensionString=function(t){if(t.length!==5)return null;var e=n.parseExtension5String(t);return e==null?null:new Map([[xr.SUGGESTED_PRICE,e]])},n.parseExtension5String=function(t){var e;switch(t.charAt(0)){case"0":e="£";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e="";break}var r=parseInt(t.substring(1)),i=(r/100).toString(),s=r%100,a=s<10?"0"+s:s.toString();return e+i+"."+a},n}(),Rrt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Drt=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(e,r,i),a=i.toString(),o=n.parseExtensionString(a),l=[new Mt((r[0]+r[1])/2,t),new Mt(s,t)],h=new Pr(a,null,0,l,Ut.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&h.putAllMetadata(o),h},n.prototype.decodeMiddle=function(t,e,r){var i,s,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var o=t.getSize(),l=e[1],h=0,d=0;d<2&&l<o;d++){var g=Ph.decodeDigit(t,a,l,Ph.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var m=(i=void 0,Rrt(a)),y=m.next();!y.done;y=m.next()){var x=y.value;l+=x}}catch(b){i={error:b}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}g>=10&&(h|=1<<1-d),d!==1&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(r.length!==2)throw new ut;if(parseInt(r.toString())%4!==h)throw new ut;return l},n.parseExtensionString=function(t){return t.length!==2?null:new Map([[xr.ISSUE_NUMBER,parseInt(t)]])},n}(),Ort=function(){function n(){}return n.decodeRow=function(t,e,r){var i=Ph.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new Irt;return s.decodeRow(t,e,i)}catch{var a=new Drt;return a.decodeRow(t,e,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),Mrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),qn=function(n){Mrt(t,n);function t(){var e=n.call(this)||this;e.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var r=10;r<20;r++){for(var i=t.L_PATTERNS[r-10],s=new Int32Array(i.length),a=0;a<i.length;a++)s[a]=i[i.length-a-1];t.L_AND_G_PATTERNS[r]=s}return e}return t.prototype.decodeRow=function(e,r,i){var s=t.findStartGuardPattern(r),a=i==null?null:i.get(on.NEED_RESULT_POINT_CALLBACK);if(a!=null){var o=new Mt((s[0]+s[1])/2,e);a.foundPossibleResultPoint(o)}var l=this.decodeMiddle(r,s,this.decodeRowStringBuffer),h=l.rowOffset,d=l.resultString;if(a!=null){var g=new Mt(h,e);a.foundPossibleResultPoint(g)}var m=t.decodeEnd(r,h);if(a!=null){var y=new Mt((m[0]+m[1])/2,e);a.foundPossibleResultPoint(y)}var x=m[1],b=x+(x-m[0]);if(b>=r.getSize()||!r.isRange(x,b,!1))throw new ut;var E=d.toString();if(E.length<8)throw new Et;if(!t.checkChecksum(E))throw new lr;var S=(s[1]+s[0])/2,T=(m[1]+m[0])/2,R=this.getBarcodeFormat(),k=[new Mt(S,e),new Mt(T,e)],N=new Pr(E,null,0,k,R,new Date().getTime()),j=0;try{var O=Ort.decodeRow(e,r,m[1]);N.putMetadata(xr.UPC_EAN_EXTENSION,O.getText()),N.putAllMetadata(O.getResultMetadata()),N.addResultPoints(O.getResultPoints()),j=O.getText().length}catch{}var C=i==null?null:i.get(on.ALLOWED_EAN_EXTENSIONS);if(C!=null){var M=!1;for(var B in C)if(j.toString()===B){M=!0;break}if(!M)throw new ut}return R===Ut.EAN_13||Ut.UPC_A,N},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,s=r-1;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new Et;i+=a}i*=3;for(var s=r-2;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new Et;i+=a}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(Ph),Nrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),RO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bw=function(n){Nrt(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var s,a,o,l,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var d=e.getSize(),g=r[1],m=0,y=0;y<6&&g<d;y++){var x=qn.decodeDigit(e,h,g,qn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+x%10);try{for(var b=(s=void 0,RO(h)),E=b.next();!E.done;E=b.next()){var S=E.value;g+=S}}catch(N){s={error:N}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}x>=10&&(m|=1<<5-y)}i=t.determineFirstDigit(i,m);var T=qn.findGuardPattern(e,g,!0,qn.MIDDLE_PATTERN,new Int32Array(qn.MIDDLE_PATTERN.length).fill(0));g=T[1];for(var y=0;y<6&&g<d;y++){var x=qn.decodeDigit(e,h,g,qn.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var R=(o=void 0,RO(h)),k=R.next();!k.done;k=R.next()){var S=k.value;g+=S}}catch(O){o={error:O}}finally{try{k&&!k.done&&(l=R.return)&&l.call(R)}finally{if(o)throw o.error}}}return{rowOffset:g,resultString:i}},t.prototype.getBarcodeFormat=function(){return Ut.EAN_13},t.determineFirstDigit=function(e,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new ut},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(qn),Prt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),DO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},OO=function(n){Prt(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var s,a,o,l,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var d=e.getSize(),g=r[1],m=0;m<4&&g<d;m++){var y=qn.decodeDigit(e,h,g,qn.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var x=(s=void 0,DO(h)),b=x.next();!b.done;b=x.next()){var E=b.value;g+=E}}catch(k){s={error:k}}finally{try{b&&!b.done&&(a=x.return)&&a.call(x)}finally{if(s)throw s.error}}}var S=qn.findGuardPattern(e,g,!0,qn.MIDDLE_PATTERN,new Int32Array(qn.MIDDLE_PATTERN.length).fill(0));g=S[1];for(var m=0;m<4&&g<d;m++){var y=qn.decodeDigit(e,h,g,qn.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var T=(o=void 0,DO(h)),R=T.next();!R.done;R=T.next()){var E=R.value;g+=E}}catch(j){o={error:j}}finally{try{R&&!R.done&&(l=T.return)&&l.call(T)}finally{if(o)throw o.error}}}return{rowOffset:g,resultString:i}},t.prototype.getBarcodeFormat=function(){return Ut.EAN_8},t}(qn),krt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MO=function(n){krt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.ean13Reader=new bw,e}return t.prototype.getBarcodeFormat=function(){return Ut.UPC_A},t.prototype.decode=function(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,i))},t.prototype.decodeMiddle=function(e,r,i){return this.ean13Reader.decodeMiddle(e,r,i)},t.prototype.maybeReturnResult=function(e){var r=e.getText();if(r.charAt(0)==="0"){var i=new Pr(r.substring(1),null,null,e.getResultPoints(),Ut.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new ut},t.prototype.reset=function(){this.ean13Reader.reset()},t}(qn),Lrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vrt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},NO=function(n){Lrt(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=new Int32Array(4),e}return t.prototype.decodeMiddle=function(e,r,i){var s,a,o=this.decodeMiddleCounters.map(function(E){return E});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),h=r[1],d=0,g=0;g<6&&h<l;g++){var m=t.decodeDigit(e,o,h,t.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var y=(s=void 0,Vrt(o)),x=y.next();!x.done;x=y.next()){var b=x.value;h+=b}}catch(E){s={error:E}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}m>=10&&(d|=1<<5-g)}return t.determineNumSysAndCheckDigit(new ne(i),d),h},t.prototype.decodeEnd=function(e,r){return t.findGuardPatternWithoutCounters(e,r,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return qn.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,r){for(var i=0;i<=1;i++)for(var s=0;s<10;s++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][s]){e.insert(0,"0"+i),e.append("0"+s);return}throw ut.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return Ut.UPC_E},t.convertUPCEtoUPCA=function(e){var r=e.slice(1,7).split("").map(function(a){return a.charCodeAt(0)}),i=new ne;i.append(e.charAt(0));var s=r[5];switch(s){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(s),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(s);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(qn),Brt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),PO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ex=function(n){Brt(t,n);function t(e){var r=n.call(this)||this,i=e==null?null:e.get(on.POSSIBLE_FORMATS),s=[];return i!=null&&(i.indexOf(Ut.EAN_13)>-1&&s.push(new bw),i.indexOf(Ut.UPC_A)>-1&&s.push(new MO),i.indexOf(Ut.EAN_8)>-1&&s.push(new OO),i.indexOf(Ut.UPC_E)>-1&&s.push(new NO)),s.length===0&&(s.push(new bw),s.push(new MO),s.push(new OO),s.push(new NO)),r.readers=s,r}return t.prototype.decodeRow=function(e,r,i){var s,a;try{for(var o=PO(this.readers),l=o.next();!l.done;l=o.next()){var h=l.value;try{var d=h.decodeRow(e,r,i),g=d.getBarcodeFormat()===Ut.EAN_13&&d.getText().charAt(0)==="0",m=i==null?null:i.get(on.POSSIBLE_FORMATS),y=m==null||m.includes(Ut.UPC_A);if(g&&y){var x=d.getRawBytes(),b=new Pr(d.getText().substring(1),x,x?x.length:null,d.getResultPoints(),Ut.UPC_A);return b.putAllMetadata(d.getResultMetadata()),b}return d}catch{}}}catch(E){s={error:E}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(s)throw s.error}}throw new ut},t.prototype.reset=function(){var e,r;try{for(var i=PO(this.readers),s=i.next();!s.done;s=i.next()){var a=s.value;a.reset()}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t}($n),Frt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Urt=function(n){Frt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},e}return t.prototype.decodeRow=function(e,r,i){var s=this.getValidRowData(r);if(!s)throw new ut;var a=this.codaBarDecodeRow(s.row);if(!a)throw new ut;return new Pr(a,null,0,[new Mt(s.left,e),new Mt(s.right,e)],Ut.CODABAR,new Date().getTime())},t.prototype.getValidRowData=function(e){var r=e.toArray(),i=r.indexOf(!0);if(i===-1)return null;var s=r.lastIndexOf(!0);if(s<=i)return null;r=r.slice(i,s+1);for(var a=[],o=r[0],l=1,h=1;h<r.length;h++)r[h]===o?l++:(o=r[h],a.push(l),l=1);return a.push(l),a.length<23&&(a.length+1)%8!==0?null:{row:a,left:i,right:s}},t.prototype.codaBarDecodeRow=function(e){for(var r=[],i=Math.ceil(e.reduce(function(l,h){return(l+h)/2},0));e.length>0;){var s=e.splice(0,8).splice(0,7),a=s.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[a]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[a])}var o=r.join("");return this.validCodaBarString(o)?o:null},t.prototype.validCodaBarString=function(e){var r=/^[A-D].{1,}[A-D]$/;return r.test(e)},t}($n),jrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zrt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Qc=function(n){jrt(t,n);function t(){var e=n.call(this)||this;return e.decodeFinderCounters=new Int32Array(4),e.dataCharacterCounters=new Int32Array(8),e.oddRoundingErrors=new Array(4),e.evenRoundingErrors=new Array(4),e.oddCounts=new Array(e.dataCharacterCounters.length/2),e.evenCounts=new Array(e.dataCharacterCounters.length/2),e}return t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,r){for(var i=0;i<r.length;i++)if($n.patternMatchVariance(e,r[i],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return i;throw new ut},t.count=function(e){return we.sum(new Int32Array(e))},t.increment=function(e,r){for(var i=0,s=r[0],a=1;a<e.length;a++)r[a]>s&&(s=r[a],i=a);e[i]++},t.decrement=function(e,r){for(var i=0,s=r[0],a=1;a<e.length;a++)r[a]<s&&(s=r[a],i=a);e[i]--},t.isFinderPattern=function(e){var r,i,s=e[0]+e[1],a=s+e[2]+e[3],o=s/a;if(o>=t.MIN_FINDER_PATTERN_RATIO&&o<=t.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;try{for(var d=zrt(e),g=d.next();!g.done;g=d.next()){var m=g.value;m>h&&(h=m),m<l&&(l=m)}}catch(y){r={error:y}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return h<10*l}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}($n),Cm=function(){function n(t,e){this.value=t,this.checksumPortion=e}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value&&this.checksumPortion===e.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),_k=function(){function n(t,e,r,i,s){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new Mt(r,s)),this.resultPoints.push(new Mt(i,s))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.hashCode=function(){return this.value},n}(),Hrt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},eh=function(){function n(){}return n.getRSSvalue=function(t,e,r){var i,s,a=0;try{for(var o=Hrt(t),l=o.next();!l.done;l=o.next()){var h=l.value;a+=h}}catch(T){i={error:T}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}for(var d=0,g=0,m=t.length,y=0;y<m-1;y++){var x=void 0;for(x=1,g|=1<<y;x<t[y];x++,g&=~(1<<y)){var b=n.combins(a-x-1,m-y-2);if(r&&g===0&&a-x-(m-y-1)>=m-y-1&&(b-=n.combins(a-x-(m-y),m-y-2)),m-y-1>1){for(var E=0,S=a-x-(m-y-2);S>e;S--)E+=n.combins(a-x-S-1,m-y-3);b-=E*(m-1-y)}else a-x>e&&b--;d+=b}a-=x}return d},n.combins=function(t,e){var r,i;t-e>e?(i=e,r=t-e):(i=t-e,r=e);for(var s=1,a=1,o=t;o>r;o--)s*=o,a<=i&&(s/=a,a++);for(;a<=i;)s/=a,a++;return s},n}(),Grt=function(){function n(){}return n.buildBitArray=function(t){var e=t.length*2-1;t[t.length-1].getRightChar()==null&&(e-=1);for(var r=12*e,i=new ur(r),s=0,a=t[0],o=a.getRightChar().getValue(),l=11;l>=0;--l)(o&1<<l)!==0&&i.set(s),s++;for(var l=1;l<t.length;++l){for(var h=t[l],d=h.getLeftChar().getValue(),g=11;g>=0;--g)(d&1<<g)!==0&&i.set(s),s++;if(h.getRightChar()!==null)for(var m=h.getRightChar().getValue(),g=11;g>=0;--g)(m&1<<g)!==0&&i.set(s),s++}return i},n}(),zc=function(){function n(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),eA=function(){function n(t){this.newPosition=t}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),Wrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ki=function(n){Wrt(t,n);function t(e,r){var i=n.call(this,e)||this;return i.value=r,i}return t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(eA),qrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hc=function(n){qrt(t,n);function t(e,r,i){var s=n.call(this,e)||this;return i?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=r,s}return t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(eA),Yrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Uu=function(n){Yrt(t,n);function t(e,r,i){var s=n.call(this,e)||this;if(r<0||r>10||i<0||i>10)throw new Et;return s.firstDigit=r,s.secondDigit=i,s}return t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(eA),t1=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xrt=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(t){var e,r,i,s,a,o,l,h;if(!t)return null;if(t.length<2)throw new ut;var d=t.substring(0,2);try{for(var g=t1(n.TWO_DIGIT_DATA_LENGTH),m=g.next();!m.done;m=g.next()){var y=m.value;if(y[0]===d)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,y[2],t):n.processFixedAI(2,y[1],t)}}catch(j){e={error:j}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(e)throw e.error}}if(t.length<3)throw new ut;var x=t.substring(0,3);try{for(var b=t1(n.THREE_DIGIT_DATA_LENGTH),E=b.next();!E.done;E=b.next()){var y=E.value;if(y[0]===x)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,y[2],t):n.processFixedAI(3,y[1],t)}}catch(j){i={error:j}}finally{try{E&&!E.done&&(s=b.return)&&s.call(b)}finally{if(i)throw i.error}}try{for(var S=t1(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),T=S.next();!T.done;T=S.next()){var y=T.value;if(y[0]===x)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],t):n.processFixedAI(4,y[1],t)}}catch(j){a={error:j}}finally{try{T&&!T.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}if(t.length<4)throw new ut;var R=t.substring(0,4);try{for(var k=t1(n.FOUR_DIGIT_DATA_LENGTH),N=k.next();!N.done;N=k.next()){var y=N.value;if(y[0]===R)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],t):n.processFixedAI(4,y[1],t)}}catch(j){l={error:j}}finally{try{N&&!N.done&&(h=k.return)&&h.call(k)}finally{if(l)throw l.error}}throw new ut},n.processFixedAI=function(t,e,r){if(r.length<t)throw new ut;var i=r.substring(0,t);if(r.length<t+e)throw new ut;var s=r.substring(t,t+e),a=r.substring(t+e),o="("+i+")"+s,l=n.parseFieldsInGeneralPurpose(a);return l==null?o:o+l},n.processVariableAI=function(t,e,r){var i=r.substring(0,t),s;r.length<t+e?s=r.length:s=t+e;var a=r.substring(t,s),o=r.substring(s),l="("+i+")"+a,h=n.parseFieldsInGeneralPurpose(o);return h==null?l:l+h},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),k1=function(){function n(t){this.buffer=new ne,this.information=t}return n.prototype.decodeAllCodes=function(t,e){var r=e,i=null;do{var s=this.decodeGeneralPurposeField(r,i),a=Xrt.parseFieldsInGeneralPurpose(s.getNewString());if(a!=null&&t.append(a),s.isRemaining()?i=""+s.getRemainingValue():i=null,r===s.getNewPosition())break;r=s.getNewPosition()}while(!0);return t.toString()},n.prototype.isStillNumeric=function(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(var e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)},n.prototype.decodeNumeric=function(t){if(t+7>this.information.getSize()){var e=this.extractNumericValueFromBitArray(t,4);return e===0?new Uu(this.information.getSize(),Uu.FNC1,Uu.FNC1):new Uu(this.information.getSize(),e-1,Uu.FNC1)}var r=this.extractNumericValueFromBitArray(t,7),i=(r-8)/11,s=(r-8)%11;return new Uu(t+7,i,s)},n.prototype.extractNumericValueFromBitArray=function(t,e){return n.extractNumericValueFromBitArray(this.information,t,e)},n.extractNumericValueFromBitArray=function(t,e,r){for(var i=0,s=0;s<r;++s)t.get(e+s)&&(i|=1<<r-s-1);return i},n.prototype.decodeGeneralPurposeField=function(t,e){this.buffer.setLengthToZero(),e!=null&&this.buffer.append(e),this.current.setPosition(t);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Hc(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Hc(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var t,e;do{var r=this.current.getPosition();this.current.isAlpha()?(e=this.parseAlphaBlock(),t=e.isFinished()):this.current.isIsoIec646()?(e=this.parseIsoIec646Block(),t=e.isFinished()):(e=this.parseNumericBlock(),t=e.isFinished());var i=r!==this.current.getPosition();if(!i&&!t)break}while(!t);return e.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){var e=void 0;return t.isSecondDigitFNC1()?e=new Hc(this.current.getPosition(),this.buffer.toString()):e=new Hc(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new zc(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){var e=new Hc(this.current.getPosition(),this.buffer.toString());return new zc(!0,e)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new zc(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new Hc(this.current.getPosition(),this.buffer.toString());return new zc(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new zc(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new Hc(this.current.getPosition(),this.buffer.toString());return new zc(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new zc(!1)},n.prototype.isStillIsoIec646=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(t,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new Ki(t+5,Ki.FNC1);if(e>=5&&e<15)return new Ki(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<90)return new Ki(t+7,""+(r+1));if(r>=90&&r<116)return new Ki(t+7,""+(r+7));var i=this.extractNumericValueFromBitArray(t,8),s;switch(i){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new Et}return new Ki(t+8,s)},n.prototype.isStillAlpha=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new Ki(t+5,Ki.FNC1);if(e>=5&&e<15)return new Ki(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,6);if(r>=32&&r<58)return new Ki(t+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new i0("Decoding invalid alphanumeric value: "+r)}return new Ki(t+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<5&&e+t<this.information.getSize();++e)if(e===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(t){if(t+3>this.information.getSize())return!1;for(var e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0},n}(),xk=function(){function n(t){this.information=t,this.generalDecoder=new k1(t)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),Krt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ts=function(n){Krt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedGtin=function(e,r){e.append("(01)");var i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,i)},t.prototype.encodeCompressedGtinWithoutAI=function(e,r,i){for(var s=0;s<4;++s){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*s,10);a/100===0&&e.append("0"),a/10===0&&e.append("0"),e.append(a)}t.appendCheckDigit(e,i)},t.appendCheckDigit=function(e,r){for(var i=0,s=0;s<13;s++){var a=e.charAt(s+r).charCodeAt(0)-48;i+=(s&1)===0?3*a:a}i=10-i%10,i===10&&(i=0),e.append(i)},t.GTIN_SIZE=40,t}(xk),$rt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qrt=function(n){$rt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new ne;e.append("(01)");var r=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(ts),Zrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jrt=function(n){Zrt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new ne;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(xk),tit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),L1=function(n){tit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedWeight=function(e,r,i){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(e,s);for(var a=this.checkWeight(s),o=1e5,l=0;l<5;++l)a/o===0&&e.append("0"),o/=10;e.append(a)},t}(ts),eit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wk=function(n){eit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+L1.GTIN_SIZE+t.WEIGHT_SIZE)throw new ut;var e=new ne;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+L1.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(L1),nit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rit=function(n){nit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t}(wk),iit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),sit=function(n){iit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t}(wk),ait=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),oit=function(n){ait(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+ts.GTIN_SIZE)throw new ut;var e=new ne;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+ts.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+ts.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(ts),cit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lit=function(n){cit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+ts.GTIN_SIZE)throw new ut;var e=new ne;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+ts.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+ts.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i);var s=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+ts.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(s.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(ts),uit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vo=function(n){uit(t,n);function t(e,r,i){var s=n.call(this,e)||this;return s.dateCode=i,s.firstAIdigits=r,s}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new ut;var e=new ne;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,t.DATE_SIZE);if(i!==38400){e.append("("),e.append(this.dateCode),e.append(")");var s=i%32;i/=32;var a=i%12+1;i/=12;var o=i;o/10===0&&e.append("0"),e.append(o),a/10===0&&e.append("0"),e.append(a),s/10===0&&e.append("0"),e.append(s)}},t.prototype.addWeightCode=function(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(L1);function hit(n){try{if(n.get(1))return new Qrt(n);if(!n.get(2))return new Jrt(n);var t=k1.extractNumericValueFromBitArray(n,1,4);switch(t){case 4:return new rit(n);case 5:return new sit(n)}var e=k1.extractNumericValueFromBitArray(n,1,5);switch(e){case 12:return new oit(n);case 13:return new lit(n)}var r=k1.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new vo(n,"310","11");case 57:return new vo(n,"320","11");case 58:return new vo(n,"310","13");case 59:return new vo(n,"320","13");case 60:return new vo(n,"310","15");case 61:return new vo(n,"320","15");case 62:return new vo(n,"310","17");case 63:return new vo(n,"320","17")}}catch(i){throw console.log(i),new i0("unknown decoder: "+n)}}var kO=function(){function n(t,e,r,i){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(t,e){return t instanceof n?n.equalsOrNull(t.leftchar,e.leftchar)&&n.equalsOrNull(t.rightchar,e.rightchar)&&n.equalsOrNull(t.finderpattern,e.finderpattern):!1},n.equalsOrNull=function(t,e){return t===null?e===null:n.equals(t,e)},n.prototype.hashCode=function(){var t=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return t},n}(),fit=function(){function n(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(t){return this.checkEqualitity(this,t)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(t,e){return t instanceof n?this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed:!1},n.prototype.checkEqualitity=function(t,e){if(!(!t||!e)){var r;return t.forEach(function(i,s){e.forEach(function(a){i.getLeftChar().getValue()===a.getLeftChar().getValue()&&i.getRightChar().getValue()===a.getRightChar().getValue()&&i.getFinderPatter().getValue()===a.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),dit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_o=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},git=function(n){dit(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.pairs=new Array(t.MAX_PAIRS),e.rows=new Array,e.startEnd=[2],e}return t.prototype.decodeRow=function(e,r,i){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,r))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(o){if(o instanceof ut){if(!this.pairs.length)throw new ut;i=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(e,!1),s){var a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new ut},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return e&&(this.rows=this.rows.reverse()),r},t.prototype.checkRows=function(e,r){for(var i,s,a=r;a<this.rows.length;a++){var o=this.rows[a];this.pairs.length=0;try{for(var l=(i=void 0,_o(e)),h=l.next();!h.done;h=l.next()){var d=h.value;this.pairs.push(d.getPairs())}}catch(m){i={error:m}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(o.getPairs()),!!t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(e);g.push(o);try{return this.checkRows(g,a+1)}catch(m){console.log(m)}}}throw new ut},t.isValidSequence=function(e){var r,i;try{for(var s=_o(t.FINDER_PATTERN_SEQUENCES),a=s.next();!a.done;a=s.next()){var o=a.value;if(!(e.length>o.length)){for(var l=!0,h=0;h<e.length;h++)if(e[h].getFinderPattern().getValue()!==o[h]){l=!1;break}if(l)return!0}}}catch(d){r={error:d}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return!1},t.prototype.storeRow=function(e,r){for(var i=0,s=!1,a=!1;i<this.rows.length;){var o=this.rows[i];if(o.getRowNumber()>e){a=o.isEquivalent(this.pairs);break}s=o.isEquivalent(this.pairs),i++}a||s||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new fit(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,r){var i,s,a,o,l,h;try{for(var d=_o(r),g=d.next();!g.done;g=d.next()){var m=g.value;if(m.getPairs().length!==e.length){var y=!0;try{for(var x=(a=void 0,_o(m.getPairs())),b=x.next();!b.done;b=x.next()){var E=b.value,S=!1;try{for(var T=(l=void 0,_o(e)),R=T.next();!R.done;R=T.next()){var k=R.value;if(kO.equals(E,k)){S=!0;break}}}catch(N){l={error:N}}finally{try{R&&!R.done&&(h=T.return)&&h.call(T)}finally{if(l)throw l.error}}S||(y=!1)}}catch(N){a={error:N}}finally{try{b&&!b.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}}}}catch(N){i={error:N}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}},t.isPartialRow=function(e,r){var i,s,a,o,l,h;try{for(var d=_o(r),g=d.next();!g.done;g=d.next()){var m=g.value,y=!0;try{for(var x=(a=void 0,_o(e)),b=x.next();!b.done;b=x.next()){var E=b.value,S=!1;try{for(var T=(l=void 0,_o(m.getPairs())),R=T.next();!R.done;R=T.next()){var k=R.value;if(E.equals(k)){S=!0;break}}}catch(N){l={error:N}}finally{try{R&&!R.done&&(h=T.return)&&h.call(T)}finally{if(l)throw l.error}}if(!S){y=!1;break}}}catch(N){a={error:N}}finally{try{b&&!b.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}if(y)return!0}}catch(N){i={error:N}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var r=Grt.buildBitArray(e),i=hit(r),s=i.parseInformation(),a=e[0].getFinderPattern().getResultPoints(),o=e[e.length-1].getFinderPattern().getResultPoints(),l=[a[0],a[1],o[0],o[1]];return new Pr(s,null,null,l,Ut.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),r=e.getLeftChar(),i=e.getRightChar();if(i===null)return!1;for(var s=i.getChecksumPortion(),a=2,o=1;o<this.pairs.size();++o){var l=this.pairs.get(o);s+=l.getLeftChar().getChecksumPortion(),a++;var h=l.getRightChar();h!=null&&(s+=h.getChecksumPortion(),a++)}s%=211;var d=211*(a-4)+s;return d===r.getValue()},t.getNextSecondBar=function(e,r){var i;return e.get(r)?(i=e.getNextUnset(r),i=e.getNextSet(i)):(i=e.getNextSet(r),i=e.getNextUnset(i)),i},t.prototype.retrieveNextPair=function(e,r,i){var s=r.length%2===0;this.startFromEven&&(s=!s);var a,o=!0,l=-1;do this.findNextPair(e,r,l),a=this.parseFoundFinderPattern(e,i,s),a===null?l=t.getNextSecondBar(e,this.startEnd[0]):o=!1;while(o);var h=this.decodeDataCharacter(e,a,s,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ut;var d;try{d=this.decodeDataCharacter(e,a,s,!1)}catch(g){d=null,console.log(g)}return new kO(h,d,a,!0)},t.prototype.isEmptyPair=function(e){return e.length===0},t.prototype.findNextPair=function(e,r,i){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var a=e.getSize(),o;if(i>=0)o=i;else if(this.isEmptyPair(r))o=0;else{var l=r[r.length-1];o=l.getFinderPattern().getStartEnd()[1]}var h=r.length%2!==0;this.startFromEven&&(h=!h);for(var d=!1;o<a&&(d=!e.get(o),!!d);)o++;for(var g=0,m=o,y=o;y<a;y++)if(e.get(y)!==d)s[g]++;else{if(g===3){if(h&&t.reverseCounters(s),t.isFinderPattern(s)){this.startEnd[0]=m,this.startEnd[1]=y;return}h&&t.reverseCounters(s),m+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,g--}else g++;s[g]=1,d=!d}throw new ut},t.reverseCounters=function(e){for(var r=e.length,i=0;i<r/2;++i){var s=e[i];e[i]=e[r-i-1],e[r-i-1]=s}},t.prototype.parseFoundFinderPattern=function(e,r,i){var s,a,o;if(i){for(var l=this.startEnd[0]-1;l>=0&&!e.get(l);)l--;l++,s=this.startEnd[0]-l,a=l,o=this.startEnd[1]}else a=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),s=o-this.startEnd[1];var h=this.getDecodeFinderCounters();Ke.arraycopy(h,0,h,1,h.length-1),h[0]=s;var d;try{d=this.parseFinderValue(h,t.FINDER_PATTERNS)}catch{return null}return new _k(d,[a,o],a,o,r)},t.prototype.decodeDataCharacter=function(e,r,i,s){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(s)t.recordPatternInReverse(e,r.getStartEnd()[0],a);else{t.recordPattern(e,r.getStartEnd()[1],a);for(var l=0,h=a.length-1;l<h;l++,h--){var d=a[l];a[l]=a[h],a[h]=d}}var g=17,m=we.sum(new Int32Array(a))/g,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(m-y)/y>.3)throw new ut;for(var x=this.getOddCounts(),b=this.getEvenCounts(),E=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var T=1*a[l]/m,R=T+.5;if(R<1){if(T<.3)throw new ut;R=1}else if(R>8){if(T>8.7)throw new ut;R=8}var k=l/2;(l&1)===0?(x[k]=R,E[k]=T-R):(b[k]=R,S[k]=T-R)}this.adjustOddEvenCounts(g);for(var N=4*r.getValue()+(i?0:2)+(s?0:1)-1,j=0,O=0,l=x.length-1;l>=0;l--){if(t.isNotA1left(r,i,s)){var C=t.WEIGHTS[N][2*l];O+=x[l]*C}j+=x[l]}for(var M=0,l=b.length-1;l>=0;l--)if(t.isNotA1left(r,i,s)){var C=t.WEIGHTS[N][2*l+1];M+=b[l]*C}var B=O+M;if((j&1)!==0||j>13||j<4)throw new ut;var H=(13-j)/2,G=t.SYMBOL_WIDEST[H],U=9-G,_t=eh.getRSSvalue(x,G,!0),xt=eh.getRSSvalue(b,U,!1),K=t.EVEN_TOTAL_SUBSET[H],ct=t.GSUM[H],yt=_t*K+xt+ct;return new Cm(yt,B)},t.isNotA1left=function(e,r,i){return!(e.getValue()===0&&r&&i)},t.prototype.adjustOddEvenCounts=function(e){var r=we.sum(new Int32Array(this.getOddCounts())),i=we.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1;r>13?a=!0:r<4&&(s=!0);var o=!1,l=!1;i>13?l=!0:i<4&&(o=!0);var h=r+i-e,d=(r&1)===1,g=(i&1)===0;if(h===1)if(d){if(g)throw new ut;a=!0}else{if(!g)throw new ut;l=!0}else if(h===-1)if(d){if(g)throw new ut;s=!0}else{if(!g)throw new ut;o=!0}else if(h===0){if(d){if(!g)throw new ut;r<i?(s=!0,l=!0):(a=!0,o=!0)}else if(g)throw new ut}else throw new ut;if(s){if(a)throw new ut;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(l)throw new ut;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(Qc),pit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mit=function(n){pit(t,n);function t(e,r,i){var s=n.call(this,e,r)||this;return s.count=0,s.finderPattern=i,s}return t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(Cm),yit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ax=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},LO=function(n){yit(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.possibleLeftPairs=[],e.possibleRightPairs=[],e}return t.prototype.decodeRow=function(e,r,i){var s,a,o,l,h=this.decodePair(r,!1,e,i);t.addOrTally(this.possibleLeftPairs,h),r.reverse();var d=this.decodePair(r,!0,e,i);t.addOrTally(this.possibleRightPairs,d),r.reverse();try{for(var g=Ax(this.possibleLeftPairs),m=g.next();!m.done;m=g.next()){var y=m.value;if(y.getCount()>1)try{for(var x=(o=void 0,Ax(this.possibleRightPairs)),b=x.next();!b.done;b=x.next()){var E=b.value;if(E.getCount()>1&&t.checkChecksum(y,E))return t.constructResult(y,E)}}catch(S){o={error:S}}finally{try{b&&!b.done&&(l=x.return)&&l.call(x)}finally{if(o)throw o.error}}}}catch(S){s={error:S}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(s)throw s.error}}throw new ut},t.addOrTally=function(e,r){var i,s;if(r!=null){var a=!1;try{for(var o=Ax(e),l=o.next();!l.done;l=o.next()){var h=l.value;if(h.getValue()===r.getValue()){h.incrementCount(),a=!0;break}}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}a||e.push(r)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,r){for(var i=4537077*e.getValue()+r.getValue(),s=new String(i).toString(),a=new ne,o=13-s.length;o>0;o--)a.append("0");a.append(s);for(var l=0,o=0;o<13;o++){var h=a.charAt(o).charCodeAt(0)-48;l+=(o&1)===0?3*h:h}l=10-l%10,l===10&&(l=0),a.append(l.toString());var d=e.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new Pr(a.toString(),null,0,[d[0],d[1],g[0],g[1]],Ut.RSS_14,new Date().getTime())},t.checkChecksum=function(e,r){var i=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,s=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,i===s},t.prototype.decodePair=function(e,r,i,s){try{var a=this.findFinderPattern(e,r),o=this.parseFoundFinderPattern(e,i,r,a),l=s==null?null:s.get(on.NEED_RESULT_POINT_CALLBACK);if(l!=null){var h=(a[0]+a[1])/2;r&&(h=e.getSize()-1-h),l.foundPossibleResultPoint(new Mt(h,i))}var d=this.decodeDataCharacter(e,o,!0),g=this.decodeDataCharacter(e,o,!1);return new mit(1597*d.getValue()+g.getValue(),d.getChecksumPortion()+4*g.getChecksumPortion(),o)}catch{return null}},t.prototype.decodeDataCharacter=function(e,r,i){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(i)$n.recordPatternInReverse(e,r.getStartEnd()[0],s);else{$n.recordPattern(e,r.getStartEnd()[1]+1,s);for(var o=0,l=s.length-1;o<l;o++,l--){var h=s[o];s[o]=s[l],s[l]=h}}for(var d=i?16:15,g=we.sum(new Int32Array(s))/d,m=this.getOddCounts(),y=this.getEvenCounts(),x=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors(),o=0;o<s.length;o++){var E=s[o]/g,S=Math.floor(E+.5);S<1?S=1:S>8&&(S=8);var T=Math.floor(o/2);(o&1)===0?(m[T]=S,x[T]=E-S):(y[T]=S,b[T]=E-S)}this.adjustOddEvenCounts(i,d);for(var R=0,k=0,o=m.length-1;o>=0;o--)k*=9,k+=m[o],R+=m[o];for(var N=0,j=0,o=y.length-1;o>=0;o--)N*=9,N+=y[o],j+=y[o];var O=k+3*N;if(i){if((R&1)!==0||R>12||R<4)throw new ut;var C=(12-R)/2,M=t.OUTSIDE_ODD_WIDEST[C],B=9-M,H=eh.getRSSvalue(m,M,!1),G=eh.getRSSvalue(y,B,!0),U=t.OUTSIDE_EVEN_TOTAL_SUBSET[C],_t=t.OUTSIDE_GSUM[C];return new Cm(H*U+G+_t,O)}else{if((j&1)!==0||j>10||j<4)throw new ut;var C=(10-j)/2,M=t.INSIDE_ODD_WIDEST[C],B=9-M,H=eh.getRSSvalue(m,M,!0),G=eh.getRSSvalue(y,B,!1),xt=t.INSIDE_ODD_TOTAL_SUBSET[C],_t=t.INSIDE_GSUM[C];return new Cm(G*xt+H+_t,O)}},t.prototype.findFinderPattern=function(e,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var s=e.getSize(),a=!1,o=0;o<s&&(a=!e.get(o),r!==a);)o++;for(var l=0,h=o,d=o;d<s;d++)if(e.get(d)!==a)i[l]++;else{if(l===3){if(Qc.isFinderPattern(i))return[h,d];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,a=!a}throw new ut},t.prototype.parseFoundFinderPattern=function(e,r,i,s){for(var a=e.get(s[0]),o=s[0]-1;o>=0&&a!==e.get(o);)o--;o++;var l=s[0]-o,h=this.getDecodeFinderCounters(),d=new Int32Array(h.length);Ke.arraycopy(h,0,d,1,h.length-1),d[0]=l;var g=this.parseFinderValue(d,t.FINDER_PATTERNS),m=o,y=s[1];return i&&(m=e.getSize()-1-m,y=e.getSize()-1-y),new _k(g,[o,s[1]],m,y,r)},t.prototype.adjustOddEvenCounts=function(e,r){var i=we.sum(new Int32Array(this.getOddCounts())),s=we.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1,l=!1,h=!1;e?(i>12?o=!0:i<4&&(a=!0),s>12?h=!0:s<4&&(l=!0)):(i>11?o=!0:i<5&&(a=!0),s>10?h=!0:s<4&&(l=!0));var d=i+s-r,g=(i&1)===(e?1:0),m=(s&1)===1;if(d===1)if(g){if(m)throw new ut;o=!0}else{if(!m)throw new ut;h=!0}else if(d===-1)if(g){if(m)throw new ut;a=!0}else{if(!m)throw new ut;l=!0}else if(d===0){if(g){if(!m)throw new ut;i<s?(a=!0,h=!0):(o=!0,l=!0)}else if(m)throw new ut}else throw new ut;if(a){if(o)throw new ut;Qc.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Qc.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(h)throw new ut;Qc.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&Qc.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(Qc),vit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pd=function(n){vit(t,n);function t(e){var r=n.call(this)||this;r.readers=[];var i=e?e.get(on.POSSIBLE_FORMATS):null,s=e&&e.get(on.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,a=e&&e.get(on.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Ut.EAN_13)||i.includes(Ut.UPC_A)||i.includes(Ut.EAN_8)||i.includes(Ut.UPC_E))&&r.readers.push(new Ex(e)),i.includes(Ut.CODE_39)&&r.readers.push(new SO(s,a)),i.includes(Ut.CODE_93)&&r.readers.push(new CO),i.includes(Ut.CODE_128)&&r.readers.push(new TO),i.includes(Ut.ITF)&&r.readers.push(new IO),i.includes(Ut.CODABAR)&&r.readers.push(new Urt),i.includes(Ut.RSS_14)&&r.readers.push(new LO),i.includes(Ut.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new git))),r.readers.length===0&&(r.readers.push(new Ex(e)),r.readers.push(new SO),r.readers.push(new CO),r.readers.push(new Ex(e)),r.readers.push(new TO),r.readers.push(new IO),r.readers.push(new LO)),r}return t.prototype.decodeRow=function(e,r,i){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(e,r,i)}catch{}throw new ut},t.prototype.reset=function(){this.readers.forEach(function(e){return e.reset()})},t}($n),_it=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){_it(t,n);function t(e,r){return e===void 0&&(e=500),n.call(this,new Pd(r),e,r)||this}return t})(Yh);var VO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ce=function(){function n(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),Ee=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),xit=function(){function n(t,e,r,i,s,a){var o,l;this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=s,this.ecBlocks=a;var h=0,d=a.getECCodewords(),g=a.getECBlocks();try{for(var m=VO(g),y=m.next();!y.done;y=m.next()){var x=y.value;h+=x.getCount()*(x.getDataCodewords()+d)}}catch(b){o={error:b}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}this.totalCodewords=h}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(t,e){var r,i;if((t&1)!==0||(e&1)!==0)throw new Et;try{for(var s=VO(n.VERSIONS),a=s.next();!a.done;a=s.next()){var o=a.value;if(o.symbolSizeRows===t&&o.symbolSizeColumns===e)return o}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}throw new Et},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new Ce(5,new Ee(1,3))),new n(2,12,12,10,10,new Ce(7,new Ee(1,5))),new n(3,14,14,12,12,new Ce(10,new Ee(1,8))),new n(4,16,16,14,14,new Ce(12,new Ee(1,12))),new n(5,18,18,16,16,new Ce(14,new Ee(1,18))),new n(6,20,20,18,18,new Ce(18,new Ee(1,22))),new n(7,22,22,20,20,new Ce(20,new Ee(1,30))),new n(8,24,24,22,22,new Ce(24,new Ee(1,36))),new n(9,26,26,24,24,new Ce(28,new Ee(1,44))),new n(10,32,32,14,14,new Ce(36,new Ee(1,62))),new n(11,36,36,16,16,new Ce(42,new Ee(1,86))),new n(12,40,40,18,18,new Ce(48,new Ee(1,114))),new n(13,44,44,20,20,new Ce(56,new Ee(1,144))),new n(14,48,48,22,22,new Ce(68,new Ee(1,174))),new n(15,52,52,24,24,new Ce(42,new Ee(2,102))),new n(16,64,64,14,14,new Ce(56,new Ee(2,140))),new n(17,72,72,16,16,new Ce(36,new Ee(4,92))),new n(18,80,80,18,18,new Ce(48,new Ee(4,114))),new n(19,88,88,20,20,new Ce(56,new Ee(4,144))),new n(20,96,96,22,22,new Ce(68,new Ee(4,174))),new n(21,104,104,24,24,new Ce(56,new Ee(6,136))),new n(22,120,120,18,18,new Ce(68,new Ee(6,175))),new n(23,132,132,20,20,new Ce(62,new Ee(8,163))),new n(24,144,144,22,22,new Ce(62,new Ee(8,156),new Ee(2,155))),new n(25,8,18,6,16,new Ce(7,new Ee(1,5))),new n(26,8,32,6,14,new Ce(11,new Ee(1,10))),new n(27,12,26,10,24,new Ce(14,new Ee(1,16))),new n(28,12,36,10,16,new Ce(18,new Ee(1,22))),new n(29,16,36,14,16,new Ce(24,new Ee(1,32))),new n(30,16,48,14,22,new Ce(28,new Ee(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),wit=function(){function n(t){var e=t.getHeight();if(e<8||e>144||(e&1)!==0)throw new Et;this.version=n.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Xs(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(t){var e=t.getHeight(),r=t.getWidth();return xit.getVersionForDimensions(e,r)},n.prototype.readCodewords=function(){var t=new Int8Array(this.version.getTotalCodewords()),e=0,r=4,i=0,s=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),o=!1,l=!1,h=!1,d=!1;do if(r===s&&i===0&&!o)t[e++]=this.readCorner1(s,a)&255,r-=2,i+=2,o=!0;else if(r===s-2&&i===0&&(a&3)!==0&&!l)t[e++]=this.readCorner2(s,a)&255,r-=2,i+=2,l=!0;else if(r===s+4&&i===2&&(a&7)===0&&!h)t[e++]=this.readCorner3(s,a)&255,r-=2,i+=2,h=!0;else if(r===s-2&&i===0&&(a&7)===4&&!d)t[e++]=this.readCorner4(s,a)&255,r-=2,i+=2,d=!0;else{do r<s&&i>=0&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,s,a)&255),r-=2,i+=2;while(r>=0&&i<a);r+=1,i+=3;do r>=0&&i<a&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,s,a)&255),r+=2,i-=2;while(r<s&&i>=0);r+=3,i+=1}while(r<s||i<a);if(e!==this.version.getTotalCodewords())throw new Et;return t},n.prototype.readModule=function(t,e,r,i){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=i,t+=4-(i+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)},n.prototype.readUtah=function(t,e,r,i){var s=0;return this.readModule(t-2,e-2,r,i)&&(s|=1),s<<=1,this.readModule(t-2,e-1,r,i)&&(s|=1),s<<=1,this.readModule(t-1,e-2,r,i)&&(s|=1),s<<=1,this.readModule(t-1,e-1,r,i)&&(s|=1),s<<=1,this.readModule(t-1,e,r,i)&&(s|=1),s<<=1,this.readModule(t,e-2,r,i)&&(s|=1),s<<=1,this.readModule(t,e-1,r,i)&&(s|=1),s<<=1,this.readModule(t,e,r,i)&&(s|=1),s},n.prototype.readCorner1=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.readCorner2=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner3=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner4=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.extractDataRegion=function(t){var e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new jt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),a=e/i|0,o=r/s|0,l=a*i,h=o*s,d=new Xs(h,l),g=0;g<a;++g)for(var m=g*i,y=0;y<o;++y)for(var x=y*s,b=0;b<i;++b)for(var E=g*(i+2)+1+b,S=m+b,T=0;T<s;++T){var R=y*(s+2)+1+T;if(t.get(R,E)){var k=x+T;d.set(k,S)}}return d},n}(),BO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bit=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e){var r,i,s,a,o=e.getECBlocks(),l=0,h=o.getECBlocks();try{for(var d=BO(h),g=d.next();!g.done;g=d.next()){var m=g.value;l+=m.getCount()}}catch(_t){r={error:_t}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var y=new Array(l),x=0;try{for(var b=BO(h),E=b.next();!E.done;E=b.next())for(var m=E.value,S=0;S<m.getCount();S++){var T=m.getDataCodewords(),R=o.getECCodewords()+T;y[x++]=new n(T,new Uint8Array(R))}}catch(_t){s={error:_t}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}for(var k=y[0].codewords.length,N=k-o.getECCodewords(),j=N-1,O=0,S=0;S<j;S++)for(var C=0;C<x;C++)y[C].codewords[S]=t[O++];for(var M=e.getVersionNumber()===24,B=M?8:x,C=0;C<B;C++)y[C].codewords[N-1]=t[O++];for(var H=y[0].codewords.length,S=N;S<H;S++)for(var C=0;C<x;C++){var G=M?(C+8)%x:C,U=M&&G>7?S-1:S;y[G].codewords[U]=t[O++]}if(O!==t.length)throw new jt;return y},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),bk=function(){function n(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new jt(""+t);var e=0,r=this.bitOffset,i=this.byteOffset,s=this.bytes;if(r>0){var a=8-r,o=t<a?t:a,l=a-o,h=255>>8-o<<l;e=(s[i]&h)>>l,t-=o,r+=o,r===8&&(r=0,i++)}if(t>0){for(;t>=8;)e=e<<8|s[i]&255,i++,t-=8;if(t>0){var l=8-t,h=255>>l<<l;e=e<<t|(s[i]&h)>>l,r+=t}}return this.bitOffset=r,this.byteOffset=i,e},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),Gn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Gn||(Gn={}));var Eit=function(){function n(){}return n.decode=function(t){var e=new bk(t),r=new ne,i=new ne,s=new Array,a=Gn.ASCII_ENCODE;do if(a===Gn.ASCII_ENCODE)a=this.decodeAsciiSegment(e,r,i);else{switch(a){case Gn.C40_ENCODE:this.decodeC40Segment(e,r);break;case Gn.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case Gn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case Gn.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case Gn.BASE256_ENCODE:this.decodeBase256Segment(e,r,s);break;default:throw new Et}a=Gn.ASCII_ENCODE}while(a!==Gn.PAD_ENCODE&&e.available()>0);return i.length()>0&&r.append(i.toString()),new vy(t,r.toString(),s.length===0?null:s,null)},n.decodeAsciiSegment=function(t,e,r){var i=!1;do{var s=t.readBits(8);if(s===0)throw new Et;if(s<=128)return i&&(s+=128),e.append(String.fromCharCode(s-1)),Gn.ASCII_ENCODE;if(s===129)return Gn.PAD_ENCODE;if(s<=229){var a=s-130;a<10&&e.append("0"),e.append(""+a)}else switch(s){case 230:return Gn.C40_ENCODE;case 231:return Gn.BASE256_ENCODE;case 232:e.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:e.append("[)>05"),r.insert(0,"");break;case 237:e.append("[)>06"),r.insert(0,"");break;case 238:return Gn.ANSIX12_ENCODE;case 239:return Gn.TEXT_ENCODE;case 240:return Gn.EDIFACT_ENCODE;case 241:break;default:if(s!==254||t.available()!==0)throw new Et;break}}while(t.available()>0);return Gn.ASCII_ENCODE},n.decodeC40Segment=function(t,e){var r=!1,i=[],s=0;do{if(t.available()===8)return;var a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(s){case 0:if(l<3)s=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var h=this.C40_BASIC_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else throw new Et;break;case 1:r?(e.append(String.fromCharCode(l+128)),r=!1):e.append(String.fromCharCode(l)),s=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var h=this.C40_SHIFT2_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else switch(l){case 27:e.append("");break;case 30:r=!0;break;default:throw new Et}s=0;break;case 3:r?(e.append(String.fromCharCode(l+224)),r=!1):e.append(String.fromCharCode(l+96)),s=0;break;default:throw new Et}}}while(t.available()>0)},n.decodeTextSegment=function(t,e){var r=!1,i=[],s=0;do{if(t.available()===8)return;var a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(s){case 0:if(l<3)s=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var h=this.TEXT_BASIC_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else throw new Et;break;case 1:r?(e.append(String.fromCharCode(l+128)),r=!1):e.append(String.fromCharCode(l)),s=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var h=this.TEXT_SHIFT2_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else switch(l){case 27:e.append("");break;case 30:r=!0;break;default:throw new Et}s=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var h=this.TEXT_SHIFT3_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h),s=0}else throw new Et;break;default:throw new Et}}}while(t.available()>0)},n.decodeAnsiX12Segment=function(t,e){var r=[];do{if(t.available()===8)return;var i=t.readBits(8);if(i===254)return;this.parseTwoBytes(i,t.readBits(8),r);for(var s=0;s<3;s++){var a=r[s];switch(a){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(a<14)e.append(String.fromCharCode(a+44));else if(a<40)e.append(String.fromCharCode(a+51));else throw new Et;break}}}while(t.available()>0)},n.parseTwoBytes=function(t,e,r){var i=(t<<8)+e-1,s=Math.floor(i/1600);r[0]=s,i-=s*1600,s=Math.floor(i/40),r[1]=s,r[2]=i-s*40},n.decodeEdifactSegment=function(t,e){do{if(t.available()<=16)return;for(var r=0;r<4;r++){var i=t.readBits(6);if(i===31){var s=8-t.getBitOffset();s!==8&&t.readBits(s);return}(i&32)===0&&(i|=64),e.append(String.fromCharCode(i))}}while(t.available()>0)},n.decodeBase256Segment=function(t,e,r){var i=1+t.getByteOffset(),s=this.unrandomize255State(t.readBits(8),i++),a;if(s===0?a=t.available()/8|0:s<250?a=s:a=250*(s-249)+this.unrandomize255State(t.readBits(8),i++),a<0)throw new Et;for(var o=new Uint8Array(a),l=0;l<a;l++){if(t.available()<8)throw new Et;o[l]=this.unrandomize255State(t.readBits(8),i++)}r.push(o);try{e.append(Ui.decode(o,me.ISO88591))}catch(h){throw new i0("Platform does not support required encoding: "+h.message)}},n.unrandomize255State=function(t,e){var r=149*e%255+1,i=t-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),Ait=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Tit=function(){function n(){this.rsDecoder=new _y($r.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(t){var e,r,i=new wit(t),s=i.getVersion(),a=i.readCodewords(),o=bit.getDataBlocks(a,s),l=0;try{for(var h=Ait(o),d=h.next();!d.done;d=h.next()){var g=d.value;l+=g.getNumDataCodewords()}}catch(R){e={error:R}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}for(var m=new Uint8Array(l),y=o.length,x=0;x<y;x++){var b=o[x],E=b.getCodewords(),S=b.getNumDataCodewords();this.correctErrors(E,S);for(var T=0;T<S;T++)m[T*y+x]=E[T]}return Eit.decode(m)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new lr}for(var i=0;i<e;i++)t[i]=r[i]},n}(),Sit=function(){function n(t){this.image=t,this.rectangleDetector=new xw(this.image)}return n.prototype.detect=function(){var t=this.rectangleDetector.detect(),e=this.detectSolid1(t);if(e=this.detectSolid2(e),e[3]=this.correctTopRight(e),!e[3])throw new ut;e=this.shiftToModuleCenter(e);var r=e[0],i=e[1],s=e[2],a=e[3],o=this.transitionsBetween(r,a)+1,l=this.transitionsBetween(s,a)+1;(o&1)===1&&(o+=1),(l&1)===1&&(l+=1),4*o<7*l&&4*l<7*o&&(o=l=Math.max(o,l));var h=n.sampleGrid(this.image,r,i,s,a,o,l);return new JE(h,[r,i,s,a])},n.shiftPoint=function(t,e,r){var i=(e.getX()-t.getX())/(r+1),s=(e.getY()-t.getY())/(r+1);return new Mt(t.getX()+i,t.getY()+s)},n.moveAway=function(t,e,r){var i=t.getX(),s=t.getY();return i<e?i-=1:i+=1,s<r?s-=1:s+=1,new Mt(i,s)},n.prototype.detectSolid1=function(t){var e=t[0],r=t[1],i=t[3],s=t[2],a=this.transitionsBetween(e,r),o=this.transitionsBetween(r,i),l=this.transitionsBetween(i,s),h=this.transitionsBetween(s,e),d=a,g=[s,e,r,i];return d>o&&(d=o,g[0]=e,g[1]=r,g[2]=i,g[3]=s),d>l&&(d=l,g[0]=r,g[1]=i,g[2]=s,g[3]=e),d>h&&(g[0]=i,g[1]=s,g[2]=e,g[3]=r),g},n.prototype.detectSolid2=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(e,s),o=n.shiftPoint(r,i,(a+1)*4),l=n.shiftPoint(i,r,(a+1)*4),h=this.transitionsBetween(o,e),d=this.transitionsBetween(l,s);return h<d?(t[0]=e,t[1]=r,t[2]=i,t[3]=s):(t[0]=r,t[1]=i,t[2]=s,t[3]=e),t},n.prototype.correctTopRight=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(e,s),o=this.transitionsBetween(r,s),l=n.shiftPoint(e,r,(o+1)*4),h=n.shiftPoint(i,r,(a+1)*4);a=this.transitionsBetween(l,s),o=this.transitionsBetween(h,s);var d=new Mt(s.getX()+(i.getX()-r.getX())/(a+1),s.getY()+(i.getY()-r.getY())/(a+1)),g=new Mt(s.getX()+(e.getX()-r.getX())/(o+1),s.getY()+(e.getY()-r.getY())/(o+1));if(!this.isValid(d))return this.isValid(g)?g:null;if(!this.isValid(g))return d;var m=this.transitionsBetween(l,d)+this.transitionsBetween(h,d),y=this.transitionsBetween(l,g)+this.transitionsBetween(h,g);return m>y?d:g},n.prototype.shiftToModuleCenter=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(e,s)+1,o=this.transitionsBetween(i,s)+1,l=n.shiftPoint(e,r,o*4),h=n.shiftPoint(i,r,a*4);a=this.transitionsBetween(l,s)+1,o=this.transitionsBetween(h,s)+1,(a&1)===1&&(a+=1),(o&1)===1&&(o+=1);var d=(e.getX()+r.getX()+i.getX()+s.getX())/4,g=(e.getY()+r.getY()+i.getY()+s.getY())/4;e=n.moveAway(e,d,g),r=n.moveAway(r,d,g),i=n.moveAway(i,d,g),s=n.moveAway(s,d,g);var m,y;return l=n.shiftPoint(e,r,o*4),l=n.shiftPoint(l,s,a*4),m=n.shiftPoint(r,e,o*4),m=n.shiftPoint(m,i,a*4),h=n.shiftPoint(i,s,o*4),h=n.shiftPoint(h,r,a*4),y=n.shiftPoint(s,i,o*4),y=n.shiftPoint(y,e,a*4),[l,m,h,y]},n.prototype.isValid=function(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()},n.sampleGrid=function(t,e,r,i,s,a,o){var l=tA.getInstance();return l.sampleGrid(t,a,o,.5,.5,a-.5,.5,a-.5,o-.5,.5,o-.5,e.getX(),e.getY(),s.getX(),s.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(t,e){var r=Math.trunc(t.getX()),i=Math.trunc(t.getY()),s=Math.trunc(e.getX()),a=Math.trunc(e.getY()),o=Math.abs(a-i)>Math.abs(s-r);if(o){var l=r;r=i,i=l,l=s,s=a,a=l}for(var h=Math.abs(s-r),d=Math.abs(a-i),g=-h/2,m=i<a?1:-1,y=r<s?1:-1,x=0,b=this.image.get(o?i:r,o?r:i),E=r,S=i;E!==s;E+=y){var T=this.image.get(o?S:E,o?E:S);if(T!==b&&(x++,b=T),g+=d,g>0){if(S===a)break;S+=m,g-=h}}return x},n}(),Ew=function(){function n(){this.decoder=new Tit}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r,i;if(e!=null&&e.has(on.PURE_BARCODE)){var s=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(s),i=n.NO_POINTS}else{var a=new Sit(t.getBlackMatrix()).detect();r=this.decoder.decode(a.getBits()),i=a.getPoints()}var o=r.getRawBytes(),l=new Pr(r.getText(),o,8*o.length,i,Ut.DATA_MATRIX,Ke.currentTimeMillis()),h=r.getByteSegments();h!=null&&l.putMetadata(xr.BYTE_SEGMENTS,h);var d=r.getECLevel();return d!=null&&l.putMetadata(xr.ERROR_CORRECTION_LEVEL,d),l},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e==null||r==null)throw new ut;var i=this.moduleSize(e,t),s=e[1],a=r[1],o=e[0],l=r[0],h=(l-o+1)/i,d=(a-s+1)/i;if(h<=0||d<=0)throw new ut;var g=i/2;s+=g,o+=g;for(var m=new Xs(h,d),y=0;y<d;y++)for(var x=s+y*i,b=0;b<h;b++)t.get(o+b*i,x)&&m.set(b,y);return m},n.moduleSize=function(t,e){for(var r=e.getWidth(),i=t[0],s=t[1];i<r&&e.get(i,s);)i++;if(i===r)throw new ut;var a=i-t[0];if(a===0)throw new ut;return a},n.NO_POINTS=[],n}(),Cit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Cit(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Ew,e)||this}return t})(Yh);var nh;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(nh||(nh={}));var Iit=function(){function n(t,e,r){this.value=t,this.stringValue=e,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(t,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(t){switch(t){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new $i(t+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.forBits=function(t){if(t<0||t>=n.FOR_BITS.size)throw new jt;return n.FOR_BITS.get(t)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(nh.L,"L",1),n.M=new n(nh.M,"M",0),n.Q=new n(nh.Q,"Q",3),n.H=new n(nh.H,"H",2),n}(),Rit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ek=function(){function n(t){this.errorCorrectionLevel=Iit.forBits(t>>3&3),this.dataMask=t&7}return n.numBitsDiffering=function(t,e){return ae.bitCount(t^e)},n.decodeFormatInformation=function(t,e){var r=n.doDecodeFormatInformation(t,e);return r!==null?r:n.doDecodeFormatInformation(t^n.FORMAT_INFO_MASK_QR,e^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(t,e){var r,i,s=Number.MAX_SAFE_INTEGER,a=0;try{for(var o=Rit(n.FORMAT_INFO_DECODE_LOOKUP),l=o.next();!l.done;l=o.next()){var h=l.value,d=h[0];if(d===t||d===e)return new n(h[1]);var g=n.numBitsDiffering(t,d);g<s&&(a=h[1],s=g),t!==e&&(g=n.numBitsDiffering(e,d),g<s&&(a=h[1],s=g))}}catch(m){r={error:m}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s<=3?new n(a):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),Dit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tt=function(){function n(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.ecCodewordsPerBlock=t,this.ecBlocks=e}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var t,e,r=0,i=this.ecBlocks;try{for(var s=Dit(i),a=s.next();!a.done;a=s.next()){var o=a.value;r+=o.getCount()}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),z=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),Oit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},yl=function(){function n(t,e){for(var r,i,s=[],a=2;a<arguments.length;a++)s[a-2]=arguments[a];this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=s;var o=0,l=s[0].getECCodewordsPerBlock(),h=s[0].getECBlocks();try{for(var d=Oit(h),g=d.next();!g.done;g=d.next()){var m=g.value;o+=m.getCount()*(m.getDataCodewords()+l)}}catch(y){r={error:y}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}this.totalCodewords=o}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},n.getProvisionalVersionForDimension=function(t){if(t%4!==1)throw new Et;try{return this.getVersionForNumber((t-17)/4)}catch{throw new Et}},n.getVersionForNumber=function(t){if(t<1||t>40)throw new jt;return n.VERSIONS[t-1]},n.decodeVersionInformation=function(t){for(var e=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var s=n.VERSION_DECODE_INFO[i];if(s===t)return n.getVersionForNumber(i+7);var a=Ek.numBitsDiffering(t,s);a<e&&(r=i+7,e=a)}return e<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),e=new Xs(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var s=this.alignmentPatternCenters[i]-2,a=0;a<r;a++)i===0&&(a===0||a===r-1)||i===r-1&&a===0||e.setRegion(this.alignmentPatternCenters[a]-2,s,5,5);return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new tt(7,new z(1,19)),new tt(10,new z(1,16)),new tt(13,new z(1,13)),new tt(17,new z(1,9))),new n(2,Int32Array.from([6,18]),new tt(10,new z(1,34)),new tt(16,new z(1,28)),new tt(22,new z(1,22)),new tt(28,new z(1,16))),new n(3,Int32Array.from([6,22]),new tt(15,new z(1,55)),new tt(26,new z(1,44)),new tt(18,new z(2,17)),new tt(22,new z(2,13))),new n(4,Int32Array.from([6,26]),new tt(20,new z(1,80)),new tt(18,new z(2,32)),new tt(26,new z(2,24)),new tt(16,new z(4,9))),new n(5,Int32Array.from([6,30]),new tt(26,new z(1,108)),new tt(24,new z(2,43)),new tt(18,new z(2,15),new z(2,16)),new tt(22,new z(2,11),new z(2,12))),new n(6,Int32Array.from([6,34]),new tt(18,new z(2,68)),new tt(16,new z(4,27)),new tt(24,new z(4,19)),new tt(28,new z(4,15))),new n(7,Int32Array.from([6,22,38]),new tt(20,new z(2,78)),new tt(18,new z(4,31)),new tt(18,new z(2,14),new z(4,15)),new tt(26,new z(4,13),new z(1,14))),new n(8,Int32Array.from([6,24,42]),new tt(24,new z(2,97)),new tt(22,new z(2,38),new z(2,39)),new tt(22,new z(4,18),new z(2,19)),new tt(26,new z(4,14),new z(2,15))),new n(9,Int32Array.from([6,26,46]),new tt(30,new z(2,116)),new tt(22,new z(3,36),new z(2,37)),new tt(20,new z(4,16),new z(4,17)),new tt(24,new z(4,12),new z(4,13))),new n(10,Int32Array.from([6,28,50]),new tt(18,new z(2,68),new z(2,69)),new tt(26,new z(4,43),new z(1,44)),new tt(24,new z(6,19),new z(2,20)),new tt(28,new z(6,15),new z(2,16))),new n(11,Int32Array.from([6,30,54]),new tt(20,new z(4,81)),new tt(30,new z(1,50),new z(4,51)),new tt(28,new z(4,22),new z(4,23)),new tt(24,new z(3,12),new z(8,13))),new n(12,Int32Array.from([6,32,58]),new tt(24,new z(2,92),new z(2,93)),new tt(22,new z(6,36),new z(2,37)),new tt(26,new z(4,20),new z(6,21)),new tt(28,new z(7,14),new z(4,15))),new n(13,Int32Array.from([6,34,62]),new tt(26,new z(4,107)),new tt(22,new z(8,37),new z(1,38)),new tt(24,new z(8,20),new z(4,21)),new tt(22,new z(12,11),new z(4,12))),new n(14,Int32Array.from([6,26,46,66]),new tt(30,new z(3,115),new z(1,116)),new tt(24,new z(4,40),new z(5,41)),new tt(20,new z(11,16),new z(5,17)),new tt(24,new z(11,12),new z(5,13))),new n(15,Int32Array.from([6,26,48,70]),new tt(22,new z(5,87),new z(1,88)),new tt(24,new z(5,41),new z(5,42)),new tt(30,new z(5,24),new z(7,25)),new tt(24,new z(11,12),new z(7,13))),new n(16,Int32Array.from([6,26,50,74]),new tt(24,new z(5,98),new z(1,99)),new tt(28,new z(7,45),new z(3,46)),new tt(24,new z(15,19),new z(2,20)),new tt(30,new z(3,15),new z(13,16))),new n(17,Int32Array.from([6,30,54,78]),new tt(28,new z(1,107),new z(5,108)),new tt(28,new z(10,46),new z(1,47)),new tt(28,new z(1,22),new z(15,23)),new tt(28,new z(2,14),new z(17,15))),new n(18,Int32Array.from([6,30,56,82]),new tt(30,new z(5,120),new z(1,121)),new tt(26,new z(9,43),new z(4,44)),new tt(28,new z(17,22),new z(1,23)),new tt(28,new z(2,14),new z(19,15))),new n(19,Int32Array.from([6,30,58,86]),new tt(28,new z(3,113),new z(4,114)),new tt(26,new z(3,44),new z(11,45)),new tt(26,new z(17,21),new z(4,22)),new tt(26,new z(9,13),new z(16,14))),new n(20,Int32Array.from([6,34,62,90]),new tt(28,new z(3,107),new z(5,108)),new tt(26,new z(3,41),new z(13,42)),new tt(30,new z(15,24),new z(5,25)),new tt(28,new z(15,15),new z(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new tt(28,new z(4,116),new z(4,117)),new tt(26,new z(17,42)),new tt(28,new z(17,22),new z(6,23)),new tt(30,new z(19,16),new z(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new tt(28,new z(2,111),new z(7,112)),new tt(28,new z(17,46)),new tt(30,new z(7,24),new z(16,25)),new tt(24,new z(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new tt(30,new z(4,121),new z(5,122)),new tt(28,new z(4,47),new z(14,48)),new tt(30,new z(11,24),new z(14,25)),new tt(30,new z(16,15),new z(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new tt(30,new z(6,117),new z(4,118)),new tt(28,new z(6,45),new z(14,46)),new tt(30,new z(11,24),new z(16,25)),new tt(30,new z(30,16),new z(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new tt(26,new z(8,106),new z(4,107)),new tt(28,new z(8,47),new z(13,48)),new tt(30,new z(7,24),new z(22,25)),new tt(30,new z(22,15),new z(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new tt(28,new z(10,114),new z(2,115)),new tt(28,new z(19,46),new z(4,47)),new tt(28,new z(28,22),new z(6,23)),new tt(30,new z(33,16),new z(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new tt(30,new z(8,122),new z(4,123)),new tt(28,new z(22,45),new z(3,46)),new tt(30,new z(8,23),new z(26,24)),new tt(30,new z(12,15),new z(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new tt(30,new z(3,117),new z(10,118)),new tt(28,new z(3,45),new z(23,46)),new tt(30,new z(4,24),new z(31,25)),new tt(30,new z(11,15),new z(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new tt(30,new z(7,116),new z(7,117)),new tt(28,new z(21,45),new z(7,46)),new tt(30,new z(1,23),new z(37,24)),new tt(30,new z(19,15),new z(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new tt(30,new z(5,115),new z(10,116)),new tt(28,new z(19,47),new z(10,48)),new tt(30,new z(15,24),new z(25,25)),new tt(30,new z(23,15),new z(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new tt(30,new z(13,115),new z(3,116)),new tt(28,new z(2,46),new z(29,47)),new tt(30,new z(42,24),new z(1,25)),new tt(30,new z(23,15),new z(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new tt(30,new z(17,115)),new tt(28,new z(10,46),new z(23,47)),new tt(30,new z(10,24),new z(35,25)),new tt(30,new z(19,15),new z(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new tt(30,new z(17,115),new z(1,116)),new tt(28,new z(14,46),new z(21,47)),new tt(30,new z(29,24),new z(19,25)),new tt(30,new z(11,15),new z(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new tt(30,new z(13,115),new z(6,116)),new tt(28,new z(14,46),new z(23,47)),new tt(30,new z(44,24),new z(7,25)),new tt(30,new z(59,16),new z(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new tt(30,new z(12,121),new z(7,122)),new tt(28,new z(12,47),new z(26,48)),new tt(30,new z(39,24),new z(14,25)),new tt(30,new z(22,15),new z(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new tt(30,new z(6,121),new z(14,122)),new tt(28,new z(6,47),new z(34,48)),new tt(30,new z(46,24),new z(10,25)),new tt(30,new z(2,15),new z(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new tt(30,new z(17,122),new z(4,123)),new tt(28,new z(29,46),new z(14,47)),new tt(30,new z(49,24),new z(10,25)),new tt(30,new z(24,15),new z(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new tt(30,new z(4,122),new z(18,123)),new tt(28,new z(13,46),new z(32,47)),new tt(30,new z(48,24),new z(14,25)),new tt(30,new z(42,15),new z(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new tt(30,new z(20,117),new z(4,118)),new tt(28,new z(40,47),new z(7,48)),new tt(30,new z(43,24),new z(22,25)),new tt(30,new z(10,15),new z(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new tt(30,new z(19,118),new z(6,119)),new tt(28,new z(18,47),new z(31,48)),new tt(30,new z(34,24),new z(34,25)),new tt(30,new z(20,15),new z(61,16)))],n}(),sr;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(sr||(sr={}));var FO=function(){function n(t,e){this.value=t,this.isMasked=e}return n.prototype.unmaskBitMatrix=function(t,e){for(var r=0;r<e;r++)for(var i=0;i<e;i++)this.isMasked(r,i)&&t.flip(i,r)},n.values=new Map([[sr.DATA_MASK_000,new n(sr.DATA_MASK_000,function(t,e){return(t+e&1)===0})],[sr.DATA_MASK_001,new n(sr.DATA_MASK_001,function(t,e){return(t&1)===0})],[sr.DATA_MASK_010,new n(sr.DATA_MASK_010,function(t,e){return e%3===0})],[sr.DATA_MASK_011,new n(sr.DATA_MASK_011,function(t,e){return(t+e)%3===0})],[sr.DATA_MASK_100,new n(sr.DATA_MASK_100,function(t,e){return(Math.floor(t/2)+Math.floor(e/3)&1)===0})],[sr.DATA_MASK_101,new n(sr.DATA_MASK_101,function(t,e){return t*e%6===0})],[sr.DATA_MASK_110,new n(sr.DATA_MASK_110,function(t,e){return t*e%6<3})],[sr.DATA_MASK_111,new n(sr.DATA_MASK_111,function(t,e){return(t+e+t*e%3&1)===0})]]),n}(),Mit=function(){function n(t){var e=t.getHeight();if(e<21||(e&3)!==1)throw new Et;this.bitMatrix=t}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var t=0,e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var r=5;r>=0;r--)t=this.copyBit(8,r,t);for(var i=this.bitMatrix.getHeight(),s=0,a=i-7,r=i-1;r>=a;r--)s=this.copyBit(8,r,s);for(var e=i-8;e<i;e++)s=this.copyBit(e,8,s);if(this.parsedFormatInfo=Ek.decodeFormatInformation(t,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Et},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return yl.getVersionForNumber(e);for(var r=0,i=t-11,s=5;s>=0;s--)for(var a=t-9;a>=i;a--)r=this.copyBit(a,s,r);var o=yl.decodeVersionInformation(r);if(o!==null&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;r=0;for(var a=5;a>=0;a--)for(var s=t-9;s>=i;s--)r=this.copyBit(a,s,r);if(o=yl.decodeVersionInformation(r),o!==null&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;throw new Et},n.prototype.copyBit=function(t,e,r){var i=this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var t=this.readFormatInformation(),e=this.readVersion(),r=FO.values.get(t.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var s=e.buildFunctionPattern(),a=!0,o=new Uint8Array(e.getTotalCodewords()),l=0,h=0,d=0,g=i-1;g>0;g-=2){g===6&&g--;for(var m=0;m<i;m++)for(var y=a?i-1-m:m,x=0;x<2;x++)s.get(g-x,y)||(d++,h<<=1,this.bitMatrix.get(g-x,y)&&(h|=1),d===8&&(o[l++]=h,d=0,h=0));a=!a}if(l!==e.getTotalCodewords())throw new Et;return o},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var t=FO.values.get(this.parsedFormatInfo.getDataMask()),e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}},n.prototype.setMirror=function(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t},n.prototype.mirror=function(){for(var t=this.bitMatrix,e=0,r=t.getWidth();e<r;e++)for(var i=e+1,s=t.getHeight();i<s;i++)t.get(e,i)!==t.get(i,e)&&(t.flip(i,e),t.flip(e,i))},n}(),UO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Nit=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e,r){var i,s,a,o;if(t.length!==e.getTotalCodewords())throw new jt;var l=e.getECBlocksForLevel(r),h=0,d=l.getECBlocks();try{for(var g=UO(d),m=g.next();!m.done;m=g.next()){var y=m.value;h+=y.getCount()}}catch(U){i={error:U}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}var x=new Array(h),b=0;try{for(var E=UO(d),S=E.next();!S.done;S=E.next())for(var y=S.value,T=0;T<y.getCount();T++){var R=y.getDataCodewords(),k=l.getECCodewordsPerBlock()+R;x[b++]=new n(R,new Uint8Array(k))}}catch(U){a={error:U}}finally{try{S&&!S.done&&(o=E.return)&&o.call(E)}finally{if(a)throw a.error}}for(var N=x[0].codewords.length,j=x.length-1;j>=0;){var O=x[j].codewords.length;if(O===N)break;j--}j++;for(var C=N-l.getECCodewordsPerBlock(),M=0,T=0;T<C;T++)for(var B=0;B<b;B++)x[B].codewords[T]=t[M++];for(var B=j;B<b;B++)x[B].codewords[C]=t[M++];for(var H=x[0].codewords.length,T=C;T<H;T++)for(var B=0;B<b;B++){var G=B<j?T:T+1;x[B].codewords[G]=t[M++]}return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),Pi;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(Pi||(Pi={}));var Je=function(){function n(t,e,r,i){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(t,this)}return n.forBits=function(t){var e=n.FOR_BITS.get(t);if(e===void 0)throw new jt;return e},n.prototype.getCharacterCountBits=function(t){var e=t.getVersionNumber(),r;return e<=9?r=0:e<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Pi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Pi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Pi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Pi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Pi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Pi.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Pi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Pi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Pi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Pi.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),Pit=function(){function n(){}return n.decode=function(t,e,r,i){var s=new bk(t),a=new ne,o=new Array,l=-1,h=-1;try{var d=null,g=!1,m=void 0;do{if(s.available()<4)m=Je.TERMINATOR;else{var y=s.readBits(4);m=Je.forBits(y)}switch(m){case Je.TERMINATOR:break;case Je.FNC1_FIRST_POSITION:case Je.FNC1_SECOND_POSITION:g=!0;break;case Je.STRUCTURED_APPEND:if(s.available()<16)throw new Et;l=s.readBits(8),h=s.readBits(8);break;case Je.ECI:var x=n.parseECIValue(s);if(d=Yn.getCharacterSetECIByValue(x),d===null)throw new Et;break;case Je.HANZI:var b=s.readBits(4),E=s.readBits(m.getCharacterCountBits(e));b===n.GB2312_SUBSET&&n.decodeHanziSegment(s,a,E);break;default:var S=s.readBits(m.getCharacterCountBits(e));switch(m){case Je.NUMERIC:n.decodeNumericSegment(s,a,S);break;case Je.ALPHANUMERIC:n.decodeAlphanumericSegment(s,a,S,g);break;case Je.BYTE:n.decodeByteSegment(s,a,S,d,o,i);break;case Je.KANJI:n.decodeKanjiSegment(s,a,S);break;default:throw new Et}break}}while(m!==Je.TERMINATOR)}catch{throw new Et}return new vy(t,a.toString(),o.length===0?null:o,r===null?null:r.toString(),l,h)},n.decodeHanziSegment=function(t,e,r){if(r*13>t.available())throw new Et;for(var i=new Uint8Array(2*r),s=0;r>0;){var a=t.readBits(13),o=a/96<<8&4294967295|a%96;o<959?o+=41377:o+=42657,i[s]=o>>8&255,i[s+1]=o&255,s+=2,r--}try{e.append(Ui.decode(i,me.GB2312))}catch(l){throw new Et(l)}},n.decodeKanjiSegment=function(t,e,r){if(r*13>t.available())throw new Et;for(var i=new Uint8Array(2*r),s=0;r>0;){var a=t.readBits(13),o=a/192<<8&4294967295|a%192;o<7936?o+=33088:o+=49472,i[s]=o>>8,i[s+1]=o,s+=2,r--}try{e.append(Ui.decode(i,me.SHIFT_JIS))}catch(l){throw new Et(l)}},n.decodeByteSegment=function(t,e,r,i,s,a){if(8*r>t.available())throw new Et;for(var o=new Uint8Array(r),l=0;l<r;l++)o[l]=t.readBits(8);var h;i===null?h=me.guessEncoding(o,a):h=i.getName();try{e.append(Ui.decode(o,h))}catch(d){throw new Et(d)}s.push(o)},n.toAlphaNumericChar=function(t){if(t>=n.ALPHANUMERIC_CHARS.length)throw new Et;return n.ALPHANUMERIC_CHARS[t]},n.decodeAlphanumericSegment=function(t,e,r,i){for(var s=e.length();r>1;){if(t.available()<11)throw new Et;var a=t.readBits(11);e.append(n.toAlphaNumericChar(Math.floor(a/45))),e.append(n.toAlphaNumericChar(a%45)),r-=2}if(r===1){if(t.available()<6)throw new Et;e.append(n.toAlphaNumericChar(t.readBits(6)))}if(i)for(var o=s;o<e.length();o++)e.charAt(o)==="%"&&(o<e.length()-1&&e.charAt(o+1)==="%"?e.deleteCharAt(o+1):e.setCharAt(o,""))},n.decodeNumericSegment=function(t,e,r){for(;r>=3;){if(t.available()<10)throw new Et;var i=t.readBits(10);if(i>=1e3)throw new Et;e.append(n.toAlphaNumericChar(Math.floor(i/100))),e.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),e.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(t.available()<7)throw new Et;var s=t.readBits(7);if(s>=100)throw new Et;e.append(n.toAlphaNumericChar(Math.floor(s/10))),e.append(n.toAlphaNumericChar(s%10))}else if(r===1){if(t.available()<4)throw new Et;var a=t.readBits(4);if(a>=10)throw new Et;e.append(n.toAlphaNumericChar(a))}},n.parseECIValue=function(t){var e=t.readBits(8);if((e&128)===0)return e&127;if((e&192)===128){var r=t.readBits(8);return(e&63)<<8&4294967295|r}if((e&224)===192){var i=t.readBits(16);return(e&31)<<16&4294967295|i}throw new Et},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),Ak=function(){function n(t){this.mirrored=t}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(t){if(!(!this.mirrored||t===null||t.length<3)){var e=t[0];t[0]=t[2],t[2]=e}},n}(),jO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},kit=function(){function n(){this.rsDecoder=new _y($r.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(t,e){return this.decodeBitMatrix(Xs.parseFromBooleanArray(t),e)},n.prototype.decodeBitMatrix=function(t,e){var r=new Mit(t),i=null;try{return this.decodeBitMatrixParser(r,e)}catch(a){i=a}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var s=this.decodeBitMatrixParser(r,e);return s.setOther(new Ak(!0)),s}catch(a){throw i!==null?i:a}},n.prototype.decodeBitMatrixParser=function(t,e){var r,i,s,a,o=t.readVersion(),l=t.readFormatInformation().getErrorCorrectionLevel(),h=t.readCodewords(),d=Nit.getDataBlocks(h,o,l),g=0;try{for(var m=jO(d),y=m.next();!y.done;y=m.next()){var x=y.value;g+=x.getNumDataCodewords()}}catch(j){r={error:j}}finally{try{y&&!y.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}var b=new Uint8Array(g),E=0;try{for(var S=jO(d),T=S.next();!T.done;T=S.next()){var x=T.value,R=x.getCodewords(),k=x.getNumDataCodewords();this.correctErrors(R,k);for(var N=0;N<k;N++)b[E++]=R[N]}}catch(j){s={error:j}}finally{try{T&&!T.done&&(a=S.return)&&a.call(S)}finally{if(s)throw s.error}}return Pit.decode(b,o,l,e)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new lr}for(var i=0;i<e;i++)t[i]=r[i]},n}(),Lit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vit=function(n){Lit(t,n);function t(e,r,i){var s=n.call(this,e,r)||this;return s.estimatedModuleSize=i,s}return t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var s=Math.abs(e-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var s=(this.getX()+r)/2,a=(this.getY()+e)/2,o=(this.estimatedModuleSize+i)/2;return new t(s,a,o)},t}(Mt),Bit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fit=function(){function n(t,e,r,i,s,a,o){this.image=t,this.startX=e,this.startY=r,this.width=i,this.height=s,this.moduleSize=a,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var t=this.startX,e=this.height,r=this.width,i=t+r,s=this.startY+e/2,a=new Int32Array(3),o=this.image,l=0;l<e;l++){var h=s+((l&1)===0?Math.floor((l+1)/2):-Math.floor((l+1)/2));a[0]=0,a[1]=0,a[2]=0;for(var d=t;d<i&&!o.get(d,h);)d++;for(var g=0;d<i;){if(o.get(d,h))if(g===1)a[1]++;else if(g===2){if(this.foundPatternCross(a)){var m=this.handlePossibleCenter(a,h,d);if(m!==null)return m}a[0]=a[2],a[1]=1,a[2]=0,g=1}else a[++g]++;else g===1&&g++,a[g]++;d++}if(this.foundPatternCross(a)){var m=this.handlePossibleCenter(a,h,i);if(m!==null)return m}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ut},n.centerFromEnd=function(t,e){return e-t[2]-t[1]/2},n.prototype.foundPatternCross=function(t){for(var e=this.moduleSize,r=e/2,i=0;i<3;i++)if(Math.abs(e-t[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(t,e,r,i){var s=this.image,a=s.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var l=t;l>=0&&s.get(e,l)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&!s.get(e,l)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=t+1;l<a&&s.get(e,l)&&o[1]<=r;)o[1]++,l++;if(l===a||o[1]>r)return NaN;for(;l<a&&!s.get(e,l)&&o[2]<=r;)o[2]++,l++;if(o[2]>r)return NaN;var h=o[0]+o[1]+o[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.handlePossibleCenter=function(t,e,r){var i,s,a=t[0]+t[1]+t[2],o=n.centerFromEnd(t,r),l=this.crossCheckVertical(e,o,2*t[1],a);if(!isNaN(l)){var h=(t[0]+t[1]+t[2])/3;try{for(var d=Bit(this.possibleCenters),g=d.next();!g.done;g=d.next()){var m=g.value;if(m.aboutEquals(h,l,o))return m.combineEstimate(l,o,h)}}catch(x){i={error:x}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}var y=new Vit(o,l,h);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null},n}(),Uit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),jit=function(n){Uit(t,n);function t(e,r,i,s){var a=n.call(this,e,r)||this;return a.estimatedModuleSize=i,a.count=s,s===void 0&&(a.count=1),a}return t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var s=Math.abs(e-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var s=this.count+1,a=(this.count*this.getX()+r)/s,o=(this.count*this.getY()+e)/s,l=(this.count*this.estimatedModuleSize+i)/s;return new t(a,o,l,s)},t}(Mt),zit=function(){function n(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),md=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Hit=function(){function n(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(t){var e=t!=null&&t.get(on.TRY_HARDER)!==void 0,r=t!=null&&t.get(on.PURE_BARCODE)!==void 0,i=this.image,s=i.getHeight(),a=i.getWidth(),o=Math.floor(3*s/(4*n.MAX_MODULES));(o<n.MIN_SKIP||e)&&(o=n.MIN_SKIP);for(var l=!1,h=new Int32Array(5),d=o-1;d<s&&!l;d+=o){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;for(var g=0,m=0;m<a;m++)if(i.get(m,d))(g&1)===1&&g++,h[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(h)){var y=this.handlePossibleCenter(h,d,m,r);if(y===!0)if(o=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var x=this.findRowSkip();x>h[2]&&(d+=x-h[2]-o,m=a-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;continue}g=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;else h[++g]++;else h[g]++;if(n.foundPatternCross(h)){var y=this.handlePossibleCenter(h,d,a,r);y===!0&&(o=h[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var b=this.selectBestPatterns();return Mt.orderBestPatterns(b),new zit(b)},n.centerFromEnd=function(t,e){return e-t[4]-t[3]-t[2]/2},n.foundPatternCross=function(t){for(var e=0,r=0;r<5;r++){var i=t[r];if(i===0)return!1;e+=i}if(e<7)return!1;var s=e/7,a=s/2;return Math.abs(s-t[0])<a&&Math.abs(s-t[1])<a&&Math.abs(3*s-t[2])<3*a&&Math.abs(s-t[3])<a&&Math.abs(s-t[4])<a},n.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},n.prototype.crossCheckDiagonal=function(t,e,r,i){for(var s=this.getCrossCheckStateCount(),a=0,o=this.image;t>=a&&e>=a&&o.get(e-a,t-a);)s[2]++,a++;if(t<a||e<a)return!1;for(;t>=a&&e>=a&&!o.get(e-a,t-a)&&s[1]<=r;)s[1]++,a++;if(t<a||e<a||s[1]>r)return!1;for(;t>=a&&e>=a&&o.get(e-a,t-a)&&s[0]<=r;)s[0]++,a++;if(s[0]>r)return!1;var l=o.getHeight(),h=o.getWidth();for(a=1;t+a<l&&e+a<h&&o.get(e+a,t+a);)s[2]++,a++;if(t+a>=l||e+a>=h)return!1;for(;t+a<l&&e+a<h&&!o.get(e+a,t+a)&&s[3]<r;)s[3]++,a++;if(t+a>=l||e+a>=h||s[3]>=r)return!1;for(;t+a<l&&e+a<h&&o.get(e+a,t+a)&&s[4]<r;)s[4]++,a++;if(s[4]>=r)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-i)<2*i&&n.foundPatternCross(s)},n.prototype.crossCheckVertical=function(t,e,r,i){for(var s=this.image,a=s.getHeight(),o=this.getCrossCheckStateCount(),l=t;l>=0&&s.get(e,l);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!s.get(e,l)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&s.get(e,l)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=t+1;l<a&&s.get(e,l);)o[2]++,l++;if(l===a)return NaN;for(;l<a&&!s.get(e,l)&&o[3]<r;)o[3]++,l++;if(l===a||o[3]>=r)return NaN;for(;l<a&&s.get(e,l)&&o[4]<r;)o[4]++,l++;if(o[4]>=r)return NaN;var h=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(h-i)>=2*i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.crossCheckHorizontal=function(t,e,r,i){for(var s=this.image,a=s.getWidth(),o=this.getCrossCheckStateCount(),l=t;l>=0&&s.get(l,e);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!s.get(l,e)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&s.get(l,e)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=t+1;l<a&&s.get(l,e);)o[2]++,l++;if(l===a)return NaN;for(;l<a&&!s.get(l,e)&&o[3]<r;)o[3]++,l++;if(l===a||o[3]>=r)return NaN;for(;l<a&&s.get(l,e)&&o[4]<r;)o[4]++,l++;if(o[4]>=r)return NaN;var h=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(h-i)>=i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.handlePossibleCenter=function(t,e,r,i){var s=t[0]+t[1]+t[2]+t[3]+t[4],a=n.centerFromEnd(t,r),o=this.crossCheckVertical(e,Math.floor(a),t[2],s);if(!isNaN(o)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(o),t[2],s),!isNaN(a)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(a),t[2],s)))){for(var l=s/7,h=!1,d=this.possibleCenters,g=0,m=d.length;g<m;g++){var y=d[g];if(y.aboutEquals(l,o,a)){d[g]=y.combineEstimate(o,a,l),h=!0;break}}if(!h){var x=new jit(a,o,l);d.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1},n.prototype.findRowSkip=function(){var t,e,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var s=md(this.possibleCenters),a=s.next();!a.done;a=s.next()){var o=a.value;if(o.getCount()>=n.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var t,e,r,i,s=0,a=0,o=this.possibleCenters.length;try{for(var l=md(this.possibleCenters),h=l.next();!h.done;h=l.next()){var d=h.value;d.getCount()>=n.CENTER_QUORUM&&(s++,a+=d.getEstimatedModuleSize())}}catch(b){t={error:b}}finally{try{h&&!h.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}if(s<3)return!1;var g=a/o,m=0;try{for(var y=md(this.possibleCenters),x=y.next();!x.done;x=y.next()){var d=x.value;m+=Math.abs(d.getEstimatedModuleSize()-g)}}catch(b){r={error:b}}finally{try{x&&!x.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return m<=.05*a},n.prototype.selectBestPatterns=function(){var t,e,r,i,s=this.possibleCenters.length;if(s<3)throw new ut;var a=this.possibleCenters,o;if(s>3){var l=0,h=0;try{for(var d=md(this.possibleCenters),g=d.next();!g.done;g=d.next()){var m=g.value,y=m.getEstimatedModuleSize();l+=y,h+=y*y}}catch(N){t={error:N}}finally{try{g&&!g.done&&(e=d.return)&&e.call(d)}finally{if(t)throw t.error}}o=l/s;var x=Math.sqrt(h/s-o*o);a.sort(function(N,j){var O=Math.abs(j.getEstimatedModuleSize()-o),C=Math.abs(N.getEstimatedModuleSize()-o);return O<C?-1:O>C?1:0});for(var b=Math.max(.2*o,x),E=0;E<a.length&&a.length>3;E++){var S=a[E];Math.abs(S.getEstimatedModuleSize()-o)>b&&(a.splice(E,1),E--)}}if(a.length>3){var l=0;try{for(var T=md(a),R=T.next();!R.done;R=T.next()){var k=R.value;l+=k.getEstimatedModuleSize()}}catch(j){r={error:j}}finally{try{R&&!R.done&&(i=T.return)&&i.call(T)}finally{if(r)throw r.error}}o=l/a.length,a.sort(function(j,O){if(O.getCount()===j.getCount()){var C=Math.abs(O.getEstimatedModuleSize()-o),M=Math.abs(j.getEstimatedModuleSize()-o);return C<M?1:C>M?-1:0}else return O.getCount()-j.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),Git=function(){function n(t){this.image=t}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(t){this.resultPointCallback=t==null?null:t.get(on.NEED_RESULT_POINT_CALLBACK);var e=new Hit(this.image,this.resultPointCallback),r=e.find(t);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(t){var e=t.getTopLeft(),r=t.getTopRight(),i=t.getBottomLeft(),s=this.calculateModuleSize(e,r,i);if(s<1)throw new ut("No pattern found in proccess finder.");var a=n.computeDimension(e,r,i,s),o=yl.getProvisionalVersionForDimension(a),l=o.getDimensionForVersion()-7,h=null;if(o.getAlignmentPatternCenters().length>0)for(var d=r.getX()-e.getX()+i.getX(),g=r.getY()-e.getY()+i.getY(),m=1-3/l,y=Math.floor(e.getX()+m*(d-e.getX())),x=Math.floor(e.getY()+m*(g-e.getY())),b=4;b<=16;b<<=1)try{h=this.findAlignmentInRegion(s,y,x,b);break}catch(R){if(!(R instanceof ut))throw R}var E=n.createTransform(e,r,i,h,a),S=n.sampleGrid(this.image,E,a),T;return h===null?T=[i,e,r]:T=[i,e,r,h],new JE(S,T)},n.createTransform=function(t,e,r,i,s){var a=s-3.5,o,l,h,d;return i!==null?(o=i.getX(),l=i.getY(),h=a-3,d=h):(o=e.getX()-t.getX()+r.getX(),l=e.getY()-t.getY()+r.getY(),h=a,d=a),vk.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,h,d,3.5,a,t.getX(),t.getY(),e.getX(),e.getY(),o,l,r.getX(),r.getY())},n.sampleGrid=function(t,e,r){var i=tA.getInstance();return i.sampleGridWithTransform(t,r,r,e)},n.computeDimension=function(t,e,r,i){var s=we.round(Mt.distance(t,e)/i),a=we.round(Mt.distance(t,r)/i),o=Math.floor((s+a)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new ut("Dimensions could be not found.")}return o},n.prototype.calculateModuleSize=function(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2},n.prototype.calculateModuleSizeOneWay=function(t,e){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,e,r,i){var s=this.sizeOfBlackWhiteBlackRun(t,e,r,i),a=1,o=t-(r-t);o<0?(a=t/(t-o),o=0):o>=this.image.getWidth()&&(a=(this.image.getWidth()-1-t)/(o-t),o=this.image.getWidth()-1);var l=Math.floor(e-(i-e)*a);return a=1,l<0?(a=e/(e-l),l=0):l>=this.image.getHeight()&&(a=(this.image.getHeight()-1-e)/(l-e),l=this.image.getHeight()-1),o=Math.floor(t+(o-t)*a),s+=this.sizeOfBlackWhiteBlackRun(t,e,o,l),s-1},n.prototype.sizeOfBlackWhiteBlackRun=function(t,e,r,i){var s=Math.abs(i-e)>Math.abs(r-t);if(s){var a=t;t=e,e=a,a=r,r=i,i=a}for(var o=Math.abs(r-t),l=Math.abs(i-e),h=-o/2,d=t<r?1:-1,g=e<i?1:-1,m=0,y=r+d,x=t,b=e;x!==y;x+=d){var E=s?b:x,S=s?x:b;if(m===1===this.image.get(E,S)){if(m===2)return we.distance(x,b,t,e);m++}if(h+=l,h>0){if(b===i)break;b+=g,h-=o}}return m===2?we.distance(r+d,i,t,e):NaN},n.prototype.findAlignmentInRegion=function(t,e,r,i){var s=Math.floor(i*t),a=Math.max(0,e-s),o=Math.min(this.image.getWidth()-1,e+s);if(o-a<t*3)throw new ut("Alignment top exceeds estimated module size.");var l=Math.max(0,r-s),h=Math.min(this.image.getHeight()-1,r+s);if(h-l<t*3)throw new ut("Alignment bottom exceeds estimated module size.");var d=new Fit(this.image,a,l,o-a,h-l,t,this.resultPointCallback);return d.find()},n}(),Aw=function(){function n(){this.decoder=new kit}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(t,e){var r,i;if(e!=null&&e.get(on.PURE_BARCODE)!==void 0){var s=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(s,e),i=n.NO_POINTS}else{var a=new Git(t.getBlackMatrix()).detect(e);r=this.decoder.decodeBitMatrix(a.getBits(),e),i=a.getPoints()}r.getOther()instanceof Ak&&r.getOther().applyMirroredCorrection(i);var o=new Pr(r.getText(),r.getRawBytes(),void 0,i,Ut.QR_CODE,void 0),l=r.getByteSegments();l!==null&&o.putMetadata(xr.BYTE_SEGMENTS,l);var h=r.getECLevel();return h!==null&&o.putMetadata(xr.ERROR_CORRECTION_LEVEL,h),r.hasStructuredAppend()&&(o.putMetadata(xr.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(xr.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e===null||r===null)throw new ut;var i=this.moduleSize(e,t),s=e[1],a=r[1],o=e[0],l=r[0];if(o>=l||s>=a)throw new ut;if(a-s!==l-o&&(l=o+(a-s),l>=t.getWidth()))throw new ut;var h=Math.round((l-o+1)/i),d=Math.round((a-s+1)/i);if(h<=0||d<=0)throw new ut;if(d!==h)throw new ut;var g=Math.floor(i/2);s+=g,o+=g;var m=o+Math.floor((h-1)*i)-l;if(m>0){if(m>g)throw new ut;o-=m}var y=s+Math.floor((d-1)*i)-a;if(y>0){if(y>g)throw new ut;s-=y}for(var x=new Xs(h,d),b=0;b<d;b++)for(var E=s+Math.floor(b*i),S=0;S<h;S++)t.get(o+Math.floor(S*i),E)&&x.set(S,b);return x},n.moduleSize=function(t,e){for(var r=e.getHeight(),i=e.getWidth(),s=t[0],a=t[1],o=!0,l=0;s<i&&a<r;){if(o!==e.get(s,a)){if(++l===5)break;o=!o}s++,a++}if(s===i||a===r)throw new ut;return(s-t[0])/7},n.NO_POINTS=new Array,n}(),Wit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ve=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(t){return we.sum(t)},n.toIntArray=function(t){var e,r;if(t==null||!t.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(t.length),s=0;try{for(var a=Wit(t),o=a.next();!o.done;o=a.next()){var l=o.value;i[s++]=l}}catch(h){e={error:h}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},n.getCodeword=function(t){var e=Xn.binarySearch(n.SYMBOL_TABLE,t&262143);return e<0?-1:(n.CODEWORD_TABLE[e]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),qit=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),Yit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xit=function(){function n(){}return n.detectMultiple=function(t,e,r){var i=t.getBlackMatrix(),s=n.detect(r,i);return s.length||(i=i.clone(),i.rotate180(),s=n.detect(r,i)),new qit(i,s)},n.detect=function(t,e){for(var r,i,s=new Array,a=0,o=0,l=!1;a<e.getHeight();){var h=n.findVertices(e,a,o);if(h[0]==null&&h[3]==null){if(!l)break;l=!1,o=0;try{for(var d=(r=void 0,Yit(s)),g=d.next();!g.done;g=d.next()){var m=g.value;m[1]!=null&&(a=Math.trunc(Math.max(a,m[1].getY()))),m[3]!=null&&(a=Math.max(a,Math.trunc(m[3].getY())))}}catch(y){r={error:y}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}a+=n.ROW_STEP;continue}if(l=!0,s.push(h),!t)break;h[2]!=null?(o=Math.trunc(h[2].getX()),a=Math.trunc(h[2].getY())):(o=Math.trunc(h[4].getX()),a=Math.trunc(h[4].getY()))}return s},n.findVertices=function(t,e,r){var i=t.getHeight(),s=t.getWidth(),a=new Array(8);return n.copyToResult(a,n.findRowsWithPattern(t,i,s,e,r,n.START_PATTERN),n.INDEXES_START_PATTERN),a[4]!=null&&(r=Math.trunc(a[4].getX()),e=Math.trunc(a[4].getY())),n.copyToResult(a,n.findRowsWithPattern(t,i,s,e,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),a},n.copyToResult=function(t,e,r){for(var i=0;i<r.length;i++)t[r[i]]=e[i]},n.findRowsWithPattern=function(t,e,r,i,s,a){for(var o=new Array(4),l=!1,h=new Int32Array(a.length);i<e;i+=n.ROW_STEP){var d=n.findGuardPattern(t,s,i,r,!1,a,h);if(d!=null){for(;i>0;){var g=n.findGuardPattern(t,s,--i,r,!1,a,h);if(g!=null)d=g;else{i++;break}}o[0]=new Mt(d[0],i),o[1]=new Mt(d[1],i),l=!0;break}}var m=i+1;if(l){for(var y=0,g=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);m<e;m++){var d=n.findGuardPattern(t,g[0],m,r,!1,a,h);if(d!=null&&Math.abs(g[0]-d[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-d[1])<n.MAX_PATTERN_DRIFT)g=d,y=0;else{if(y>n.SKIPPED_ROW_COUNT_MAX)break;y++}}m-=y+1,o[2]=new Mt(g[0],m),o[3]=new Mt(g[1],m)}return m-i<n.BARCODE_MIN_HEIGHT&&Xn.fill(o,null),o},n.findGuardPattern=function(t,e,r,i,s,a,o){Xn.fillWithin(o,0,o.length,0);for(var l=e,h=0;t.get(l,r)&&l>0&&h++<n.MAX_PIXEL_DRIFT;)l--;for(var d=l,g=0,m=a.length,y=s;d<i;d++){var x=t.get(d,r);if(x!==y)o[g]++;else{if(g===m-1){if(n.patternMatchVariance(o,a,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([l,d]);l+=o[0]+o[1],Ke.arraycopy(o,2,o,0,g-1),o[g-1]=0,o[g]=0,g--}else g++;o[g]=1,y=!y}}return g===m-1&&n.patternMatchVariance(o,a,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([l,d-1]):null},n.patternMatchVariance=function(t,e,r){for(var i=t.length,s=0,a=0,o=0;o<i;o++)s+=t[o],a+=e[o];if(s<a)return 1/0;var l=s/a;r*=l;for(var h=0,d=0;d<i;d++){var g=t[d],m=e[d]*l,y=g>m?g-m:m-g;if(y>r)return 1/0;h+=y}return h/s},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),Kit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cl=function(){function n(t,e){if(e.length===0)throw new jt;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Ke.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){var e,r;if(t===0)return this.getCoefficient(0);if(t===1){var i=0;try{for(var s=Kit(this.coefficients),a=s.next();!a.done;a=s.next()){var o=a.value;i=this.field.add(i,o)}}catch(g){e={error:g}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i}for(var l=this.coefficients[0],h=this.coefficients.length,d=1;d<h;d++)l=this.field.add(this.field.multiply(t,l),this.coefficients[d]);return l},n.prototype.add=function(t){if(!this.field.equals(t.field))throw new jt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var s=new Int32Array(r.length),a=r.length-e.length;Ke.arraycopy(r,0,s,0,a);for(var o=a;o<r.length;o++)s[o]=this.field.add(e[o-a],r[o]);return new n(this.field,s)},n.prototype.subtract=function(t){if(!this.field.equals(t.field))throw new jt("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())},n.prototype.multiply=function(t){return t instanceof n?this.multiplyOther(t):this.multiplyScalar(t)},n.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new jt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new n(this.field,new Int32Array([0]));for(var e=this.coefficients,r=e.length,i=t.coefficients,s=i.length,a=new Int32Array(r+s-1),o=0;o<r;o++)for(var l=e[o],h=0;h<s;h++)a[o+h]=this.field.add(a[o+h],this.field.multiply(l,i[h]));return new n(this.field,a)},n.prototype.negative=function(){for(var t=this.coefficients.length,e=new Int32Array(t),r=0;r<t;r++)e[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,e)},n.prototype.multiplyScalar=function(t){if(t===0)return new n(this.field,new Int32Array([0]));if(t===1)return this;for(var e=this.coefficients.length,r=new Int32Array(e),i=0;i<e;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new jt;if(e===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+t),s=0;s<r;s++)i[s]=this.field.multiply(this.coefficients[s],e);return new n(this.field,i)},n.prototype.toString=function(){for(var t=new ne,e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);r!==0&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),(e===0||r!==1)&&t.append(r),e!==0&&(e===1?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()},n}(),$it=function(){function n(){}return n.prototype.add=function(t,e){return(t+e)%this.modulus},n.prototype.subtract=function(t,e){return(this.modulus+t-e)%this.modulus},n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new jt;return this.logTable[t]},n.prototype.inverse=function(t){if(t===0)throw new yk;return this.expTable[this.modulus-this.logTable[t]-1]},n.prototype.multiply=function(t,e){return t===0||e===0?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(t){return t===this},n}(),Qit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zit=function(n){Qit(t,n);function t(e,r){var i=n.call(this)||this;i.modulus=e,i.expTable=new Int32Array(e),i.logTable=new Int32Array(e);for(var s=1,a=0;a<e;a++)i.expTable[a]=s,s=s*r%e;for(var a=0;a<e-1;a++)i.logTable[i.expTable[a]]=a;return i.zero=new cl(i,new Int32Array([0])),i.one=new cl(i,new Int32Array([1])),i}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new jt;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new cl(this,i)},t.PDF417_GF=new t(ve.NUMBER_OF_CODEWORDS,3),t}($it),Jit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tst=function(){function n(){this.field=Zit.PDF417_GF}return n.prototype.decode=function(t,e,r){for(var i,s,a=new cl(this.field,t),o=new Int32Array(e),l=!1,h=e;h>0;h--){var d=a.evaluateAt(this.field.exp(h));o[e-h]=d,d!==0&&(l=!0)}if(!l)return 0;var g=this.field.getOne();if(r!=null)try{for(var m=Jit(r),y=m.next();!y.done;y=m.next()){var x=y.value,b=this.field.exp(t.length-1-x),E=new cl(this.field,new Int32Array([this.field.subtract(0,b),1]));g=g.multiply(E)}}catch(C){i={error:C}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}for(var S=new cl(this.field,o),T=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),S,e),R=T[0],k=T[1],N=this.findErrorLocations(R),j=this.findErrorMagnitudes(k,R,N),h=0;h<N.length;h++){var O=t.length-1-this.field.log(N[h]);if(O<0)throw lr.getChecksumInstance();t[O]=this.field.subtract(t[O],j[h])}return N.length},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var s=t,a=e,o=this.field.getZero(),l=this.field.getOne();a.getDegree()>=Math.round(r/2);){var h=s,d=o;if(s=a,o=l,s.isZero())throw lr.getChecksumInstance();a=h;for(var g=this.field.getZero(),m=s.getCoefficient(s.getDegree()),y=this.field.inverse(m);a.getDegree()>=s.getDegree()&&!a.isZero();){var x=a.getDegree()-s.getDegree(),b=this.field.multiply(a.getCoefficient(a.getDegree()),y);g=g.add(this.field.buildMonomial(x,b)),a=a.subtract(s.multiplyByMonomial(x,b))}l=g.multiply(o).subtract(d).negative()}var E=l.getCoefficient(0);if(E===0)throw lr.getChecksumInstance();var S=this.field.inverse(E),T=l.multiply(S),R=a.multiply(S);return[T,R]},n.prototype.findErrorLocations=function(t){for(var e=t.getDegree(),r=new Int32Array(e),i=0,s=1;s<this.field.getSize()&&i<e;s++)t.evaluateAt(s)===0&&(r[i]=this.field.inverse(s),i++);if(i!==e)throw lr.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(t,e,r){for(var i=e.getDegree(),s=new Int32Array(i),a=1;a<=i;a++)s[i-a]=this.field.multiply(a,e.getCoefficient(a));for(var o=new cl(this.field,s),l=r.length,h=new Int32Array(l),a=0;a<l;a++){var d=this.field.inverse(r[a]),g=this.field.subtract(0,t.evaluateAt(d)),m=this.field.inverse(o.evaluateAt(d));h[a]=this.field.multiply(g,m)}return h},n}(),Tw=function(){function n(t,e,r,i,s){t instanceof n?this.constructor_2(t):this.constructor_1(t,e,r,i,s)}return n.prototype.constructor_1=function(t,e,r,i,s){var a=e==null||r==null,o=i==null||s==null;if(a&&o)throw new ut;a?(e=new Mt(0,i.getY()),r=new Mt(0,s.getY())):o&&(i=new Mt(t.getWidth()-1,e.getY()),s=new Mt(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=i,this.bottomRight=s,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),s.getX())),this.minY=Math.trunc(Math.min(e.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),s.getY()))},n.prototype.constructor_2=function(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()},n.merge=function(t,e){return t==null?e:e==null?t:new n(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)},n.prototype.addMissingRows=function(t,e,r){var i=this.topLeft,s=this.bottomLeft,a=this.topRight,o=this.bottomRight;if(t>0){var l=r?this.topLeft:this.topRight,h=Math.trunc(l.getY()-t);h<0&&(h=0);var d=new Mt(l.getX(),h);r?i=d:a=d}if(e>0){var g=r?this.bottomLeft:this.bottomRight,m=Math.trunc(g.getY()+e);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);var y=new Mt(g.getX(),m);r?s=y:o=y}return new n(this.image,i,s,a,o)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),est=function(){function n(t,e,r,i){this.columnCount=t,this.errorCorrectionLevel=i,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),nA=function(){function n(){this.buffer=""}return n.form=function(t,e){var r=-1;function i(a,o,l,h,d,g){if(a==="%%")return"%";if(e[++r]!==void 0){a=h?parseInt(h.substr(1)):void 0;var m=d?parseInt(d.substr(1)):void 0,y;switch(g){case"s":y=e[r];break;case"c":y=e[r][0];break;case"f":y=parseFloat(e[r]).toFixed(a);break;case"p":y=parseFloat(e[r]).toPrecision(a);break;case"e":y=parseFloat(e[r]).toExponential(a);break;case"x":y=parseInt(e[r]).toString(m||16);break;case"d":y=parseFloat(parseInt(e[r],m||10).toPrecision(a)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(m);for(var x=parseInt(l),b=l&&l[0]+""=="0"?"0":" ";y.length<x;)y=o!==void 0?y+b:b+y;return y}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(s,i)},n.prototype.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.buffer+=n.form(t,e)},n.prototype.toString=function(){return this.buffer},n}(),nst=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Tk=function(){function n(t){this.boundingBox=new Tw(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}return n.prototype.getCodewordNearby=function(t){var e=this.getCodeword(t);if(e!=null)return e;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(t)-r;if(i>=0&&(e=this.codewords[i],e!=null)||(i=this.imageRowToCodewordIndex(t)+r,i<this.codewords.length&&(e=this.codewords[i],e!=null)))return e}return null},n.prototype.imageRowToCodewordIndex=function(t){return t-this.boundingBox.getMinY()},n.prototype.setCodeword=function(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e},n.prototype.getCodeword=function(t){return this.codewords[this.imageRowToCodewordIndex(t)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var t,e,r=new nA,i=0;try{for(var s=nst(this.codewords),a=s.next();!a.done;a=s.next()){var o=a.value;if(o==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),rst=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ist=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return s},kd=function(){function n(){this.values=new Map}return n.prototype.setValue=function(t){t=Math.trunc(t);var e=this.values.get(t);e==null&&(e=0),e++,this.values.set(t,e)},n.prototype.getValue=function(){var t,e,r=-1,i=new Array,s=function(g,m){var y={getKey:function(){return g},getValue:function(){return m}};y.getValue()>r?(r=y.getValue(),i=[],i.push(y.getKey())):y.getValue()===r&&i.push(y.getKey())};try{for(var a=rst(this.values.entries()),o=a.next();!o.done;o=a.next()){var l=ist(o.value,2),h=l[0],d=l[1];s(h,d)}}catch(g){t={error:g}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return ve.toIntArray(i)},n.prototype.getConfidence=function(t){return this.values.get(t)},n}(),sst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zO=function(n){sst(t,n);function t(e,r){var i=n.call(this,e)||this;return i._isLeft=r,i}return t.prototype.setRowNumbers=function(){var e,r;try{for(var i=Tx(this.getCodewords()),s=i.next();!s.done;s=i.next()){var a=s.value;a!=null&&a.setRowNumberAsRowIndicatorColumn()}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);for(var i=this.getBoundingBox(),s=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=-1,d=1,g=0,m=o;m<l;m++)if(r[m]!=null){var y=r[m],x=y.getRowNumber()-h;if(x===0)g++;else if(x===1)d=Math.max(d,g),g=1,h=y.getRowNumber();else if(x<0||y.getRowNumber()>=e.getRowCount()||x>m)r[m]=null;else{var b=void 0;d>2?b=(d-2)*x:b=x;for(var E=b>=m,S=1;S<=b&&!E;S++)E=r[m-S]!=null;E?r[m]=null:(h=y.getRowNumber(),g=1)}}},t.prototype.getRowHeights=function(){var e,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var s=new Int32Array(i.getRowCount());try{for(var a=Tx(this.getCodewords()),o=a.next();!o.done;o=a.next()){var l=o.value;if(l!=null){var h=l.getRowNumber();if(h>=s.length)continue;s[h]++}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return s},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),s=this._isLeft?r.getBottomLeft():r.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=this.getCodewords(),h=-1,d=a;d<o;d++)if(l[d]!=null){var g=l[d];g.setRowNumberAsRowIndicatorColumn();var m=g.getRowNumber()-h;m===0||(m===1?h=g.getRowNumber():g.getRowNumber()>=e.getRowCount()?l[d]=null:h=g.getRowNumber())}},t.prototype.getBarcodeMetadata=function(){var e,r,i=this.getCodewords(),s=new kd,a=new kd,o=new kd,l=new kd;try{for(var h=Tx(i),d=h.next();!d.done;d=h.next()){var g=d.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var m=g.getValue()%30,y=g.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:a.setValue(m*3+1);break;case 1:l.setValue(m/3),o.setValue(m%3);break;case 2:s.setValue(m+1);break}}}}catch(b){e={error:b}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}if(s.getValue().length===0||a.getValue().length===0||o.getValue().length===0||l.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+o.getValue()[0]<ve.MIN_ROWS_IN_BARCODE||a.getValue()[0]+o.getValue()[0]>ve.MAX_ROWS_IN_BARCODE)return null;var x=new est(s.getValue()[0],a.getValue()[0],o.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,x),x},t.prototype.removeIncorrectCodewords=function(e,r){for(var i=0;i<e.length;i++){var s=e[i];if(e[i]!=null){var a=s.getValue()%30,o=s.getRowNumber();if(o>r.getRowCount()){e[i]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:a*3+1!==r.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(a/3)!==r.getErrorCorrectionLevel()||a%3!==r.getRowCountLowerPart())&&(e[i]=null);break;case 2:a+1!==r.getColumnCount()&&(e[i]=null);break}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},t}(Tk),ast=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ost=function(){function n(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t=ve.MAX_CODEWORDS_IN_BARCODE,e;do e=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<e);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(t===0)return 0;for(var e=1;e<this.barcodeColumnCount+1;e++)for(var r=this.detectionResultColumns[e].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(e,i,r));return t},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var t=this.adjustRowNumbersFromLRI();return t+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null&&e[r]!=null&&t[r].getRowNumber()===e[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var s=this.detectionResultColumns[i].getCodewords()[r];s!=null&&(s.setRowNumber(t[r].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),s=0,a=this.barcodeColumnCount+1;a>0&&s<this.ADJUST_ROW_NUMBER_SKIP;a--){var o=this.detectionResultColumns[a].getCodewords()[r];o!=null&&(s=n.adjustRowNumberIfValid(i,s,o),o.hasValidRowNumber()||t++)}return t},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var t=0,e=this.detectionResultColumns[0].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),s=0,a=1;a<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;a++){var o=this.detectionResultColumns[a].getCodewords()[r];o!=null&&(s=n.adjustRowNumberIfValid(i,s,o),o.hasValidRowNumber()||t++)}return t},n.adjustRowNumberIfValid=function(t,e,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e},n.prototype.adjustRowNumbers=function(t,e,r){var i,s;if(this.detectionResultColumns[t-1]!=null){var a=r[e],o=this.detectionResultColumns[t-1].getCodewords(),l=o;this.detectionResultColumns[t+1]!=null&&(l=this.detectionResultColumns[t+1].getCodewords());var h=new Array(14);h[2]=o[e],h[3]=l[e],e>0&&(h[0]=r[e-1],h[4]=o[e-1],h[5]=l[e-1]),e>1&&(h[8]=r[e-2],h[10]=o[e-2],h[11]=l[e-2]),e<r.length-1&&(h[1]=r[e+1],h[6]=o[e+1],h[7]=l[e+1]),e<r.length-2&&(h[9]=r[e+2],h[12]=o[e+2],h[13]=l[e+2]);try{for(var d=ast(h),g=d.next();!g.done;g=d.next()){var m=g.value;if(n.adjustRowNumber(a,m))return}}catch(y){i={error:y}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(t,e){return e==null?!1:e.hasValidRowNumber()&&e.getBucket()===t.getBucket()?(t.setRowNumber(e.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(t){this.boundingBox=t},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(t,e){this.detectionResultColumns[t]=e},n.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},n.prototype.toString=function(){var t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var e=new nA,r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){e.format("    |   ");continue}var s=this.detectionResultColumns[i].getCodewords()[r];if(s==null){e.format("    |   ");continue}e.format(" %3d|%3d",s.getRowNumber(),s.getValue())}e.format("%n")}return e.toString()},n}(),cst=function(){function n(t,e,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(t){return t!==n.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(t){this.rowNumber=t},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),lst=function(){function n(){}return n.initialize=function(){for(var t=0;t<ve.SYMBOL_TABLE.length;t++)for(var e=ve.SYMBOL_TABLE[t],r=e&1,i=0;i<ve.BARS_IN_MODULE;i++){for(var s=0;(e&1)===r;)s+=1,e>>=1;r=e&1,n.RATIOS_TABLE[t]||(n.RATIOS_TABLE[t]=new Array(ve.BARS_IN_MODULE)),n.RATIOS_TABLE[t][ve.BARS_IN_MODULE-i-1]=Math.fround(s/ve.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(t){var e=n.getDecodedCodewordValue(n.sampleBitCounts(t));return e!==-1?e:n.getClosestDecodedValue(t)},n.sampleBitCounts=function(t){for(var e=we.sum(t),r=new Int32Array(ve.BARS_IN_MODULE),i=0,s=0,a=0;a<ve.MODULES_IN_CODEWORD;a++){var o=e/(2*ve.MODULES_IN_CODEWORD)+a*e/ve.MODULES_IN_CODEWORD;s+t[i]<=o&&(s+=t[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(t){var e=n.getBitValue(t);return ve.getCodeword(e)===-1?-1:e},n.getBitValue=function(t){for(var e=0,r=0;r<t.length;r++)for(var i=0;i<t[r];i++)e=e<<1|(r%2===0?1:0);return Math.trunc(e)},n.getClosestDecodedValue=function(t){var e=we.sum(t),r=new Array(ve.BARS_IN_MODULE);if(e>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(t[i]/e);var s=_w.MAX_VALUE,a=-1;this.bSymbolTableReady||n.initialize();for(var o=0;o<n.RATIOS_TABLE.length;o++){for(var l=0,h=n.RATIOS_TABLE[o],d=0;d<ve.BARS_IN_MODULE;d++){var g=Math.fround(h[d]-r[d]);if(l+=Math.fround(g*g),l>=s)break}l<s&&(s=l,a=ve.SYMBOL_TABLE[o])}return a},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(ve.SYMBOL_TABLE.length).map(function(t){return new Array(ve.BARS_IN_MODULE)}),n}(),ust=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(t){this.segmentIndex=t},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(t){this.fileId=t},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(t){this.optionalData=t},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(t){this.lastSegment=t},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(t){this.segmentCount=t},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(t){this.sender=t},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(t){this.addressee=t},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(t){this.fileName=t},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(t){this.fileSize=t},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(t){this.checksum=t},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(t){this.timestamp=t},n}(),HO=function(){function n(){}return n.parseLong=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n}(),hst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),fst=function(n){hst(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="NullPointerException",t}(ni),dst=function(){function n(){}return n.prototype.writeBytes=function(t){this.writeBytesOffset(t,0,t.length)},n.prototype.writeBytesOffset=function(t,e,r){if(t==null)throw new fst;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new QE;if(r===0)return;for(var i=0;i<r;i++)this.write(t[e+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),gst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),pst=function(n){gst(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t}(ni),mst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),yst=function(n){mst(t,n);function t(e){e===void 0&&(e=32);var r=n.call(this)||this;if(r.count=0,e<0)throw new jt("Negative initial size: "+e);return r.buf=new Uint8Array(e),r}return t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var r=this.buf.length,i=r<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new pst;i=ae.MAX_VALUE}this.buf=Xn.copyOfUint8Array(this.buf,i)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,r,i){if(r<0||r>e.length||i<0||r+i-e.length>0)throw new QE;this.ensureCapacity(this.count+i),Ke.arraycopy(e,r,this.buf,this.count,i),this.count+=i},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return Xn.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t}(dst),ze;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ze||(ze={}));function Sk(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var e1;function bo(n){if(typeof e1>"u"&&(e1=Sk()),e1===null)throw new Error("BigInt is not supported!");return e1(n)}function vst(){var n=[];n[0]=bo(1);var t=bo(900);n[1]=t;for(var e=2;e<16;e++)n[e]=n[e-1]*t;return n}var _st=function(){function n(){}return n.decode=function(t,e){var r=new ne(""),i=Yn.ISO8859_1;r.enableDecoding(i);for(var s=1,a=t[s++],o=new ust;s<t[0];){switch(a){case n.TEXT_COMPACTION_MODE_LATCH:s=n.textCompaction(t,s,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:s=n.byteCompaction(a,t,i,s,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:s=n.numericCompaction(t,s,r);break;case n.ECI_CHARSET:Yn.getCharacterSetECIByValue(t[s++]);break;case n.ECI_GENERAL_PURPOSE:s+=2;break;case n.ECI_USER_DEFINED:s++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=n.decodeMacroBlock(t,s,o);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new Et;default:s--,s=n.textCompaction(t,s,r);break}if(s<t.length)a=t[s++];else throw Et.getFormatInstance()}if(r.length()===0)throw Et.getFormatInstance();var l=new vy(null,r.toString(),null,e);return l.setOther(o),l},n.decodeMacroBlock=function(t,e,r){if(e+n.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw Et.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<n.NUMBER_OF_SEQUENCE_CODEWORDS;s++,e++)i[s]=t[e];r.setSegmentIndex(ae.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new ne;e=n.textCompaction(t,e,a),r.setFileId(a.toString());var o=-1;for(t[e]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=e+1);e<t[0];)switch(t[e]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e++,t[e]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new ne;e=n.textCompaction(t,e+1,l),r.setFileName(l.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var h=new ne;e=n.textCompaction(t,e+1,h),r.setSender(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new ne;e=n.textCompaction(t,e+1,d),r.setAddressee(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new ne;e=n.numericCompaction(t,e+1,g),r.setSegmentCount(ae.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var m=new ne;e=n.numericCompaction(t,e+1,m),r.setTimestamp(HO.parseLong(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var y=new ne;e=n.numericCompaction(t,e+1,y),r.setChecksum(ae.parseInt(y.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var x=new ne;e=n.numericCompaction(t,e+1,x),r.setFileSize(HO.parseLong(x.toString()));break;default:throw Et.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:e++,r.setLastSegment(!0);break;default:throw Et.getFormatInstance()}if(o!==-1){var b=e-o;r.isLastSegment()&&b--,r.setOptionalData(Xn.copyOfRange(t,o,o+b))}return e},n.textCompaction=function(t,e,r){for(var i=new Int32Array((t[0]-e)*2),s=new Int32Array((t[0]-e)*2),a=0,o=!1;e<t[0]&&!o;){var l=t[e++];if(l<n.TEXT_COMPACTION_MODE_LATCH)i[a]=l/30,i[a+1]=l%30,a+=2;else switch(l){case n.TEXT_COMPACTION_MODE_LATCH:i[a++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,o=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[a]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=t[e++],s[a]=l,a++;break}}return n.decodeTextCompaction(i,s,a,r),e},n.decodeTextCompaction=function(t,e,r,i){for(var s=ze.ALPHA,a=ze.ALPHA,o=0;o<r;){var l=t[o],h="";switch(s){case ze.ALPHA:if(l<26)h=String.fromCharCode(65+l);else switch(l){case 26:h=" ";break;case n.LL:s=ze.LOWER;break;case n.ML:s=ze.MIXED;break;case n.PS:a=s,s=ze.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=ze.ALPHA;break}break;case ze.LOWER:if(l<26)h=String.fromCharCode(97+l);else switch(l){case 26:h=" ";break;case n.AS:a=s,s=ze.ALPHA_SHIFT;break;case n.ML:s=ze.MIXED;break;case n.PS:a=s,s=ze.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=ze.ALPHA;break}break;case ze.MIXED:if(l<n.PL)h=n.MIXED_CHARS[l];else switch(l){case n.PL:s=ze.PUNCT;break;case 26:h=" ";break;case n.LL:s=ze.LOWER;break;case n.AL:s=ze.ALPHA;break;case n.PS:a=s,s=ze.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=ze.ALPHA;break}break;case ze.PUNCT:if(l<n.PAL)h=n.PUNCT_CHARS[l];else switch(l){case n.PAL:s=ze.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=ze.ALPHA;break}break;case ze.ALPHA_SHIFT:if(s=a,l<26)h=String.fromCharCode(65+l);else switch(l){case 26:h=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:s=ze.ALPHA;break}break;case ze.PUNCT_SHIFT:if(s=a,l<n.PAL)h=n.PUNCT_CHARS[l];else switch(l){case n.PAL:s=ze.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=ze.ALPHA;break}break}h!==""&&i.append(h),o++}},n.byteCompaction=function(t,e,r,i,s){var a=new yst,o=0,l=0,h=!1;switch(t){case n.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),g=e[i++];i<e[0]&&!h;)switch(d[o++]=g,l=900*l+g,g=e[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break;default:if(o%5===0&&o>0){for(var m=0;m<6;++m)a.write(Number(bo(l)>>bo(8*(5-m))));l=0,o=0}break}i===e[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(d[o++]=g);for(var y=0;y<o;y++)a.write(d[y]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<e[0]&&!h;){var x=e[i++];if(x<n.TEXT_COMPACTION_MODE_LATCH)o++,l=900*l+x;else switch(x){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break}if(o%5===0&&o>0){for(var m=0;m<6;++m)a.write(Number(bo(l)>>bo(8*(5-m))));l=0,o=0}}break}return s.append(Ui.decode(a.toByteArray(),r)),i},n.numericCompaction=function(t,e,r){for(var i=0,s=!1,a=new Int32Array(n.MAX_NUMERIC_CODEWORDS);e<t[0]&&!s;){var o=t[e++];if(e===t[0]&&(s=!0),o<n.TEXT_COMPACTION_MODE_LATCH)a[i]=o,i++;else switch(o){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,s=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||o===n.NUMERIC_COMPACTION_MODE_LATCH||s)&&i>0&&(r.append(n.decodeBase900toBase10(a,i)),i=0)}return e},n.decodeBase900toBase10=function(t,e){for(var r=bo(0),i=0;i<e;i++)r+=n.EXP900[e-i-1]*bo(t[i]);var s=r.toString();if(s.charAt(0)!=="1")throw new Et;return s.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=Sk()?vst():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),yd=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xst=function(){function n(){}return n.decode=function(t,e,r,i,s,a,o){for(var l=new Tw(t,e,r,i,s),h=null,d=null,g,m=!0;;m=!1){if(e!=null&&(h=n.getRowIndicatorColumn(t,l,e,!0,a,o)),i!=null&&(d=n.getRowIndicatorColumn(t,l,i,!1,a,o)),g=n.merge(h,d),g==null)throw ut.getNotFoundInstance();var y=g.getBoundingBox();if(m&&y!=null&&(y.getMinY()<l.getMinY()||y.getMaxY()>l.getMaxY()))l=y;else break}g.setBoundingBox(l);var x=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,h),g.setDetectionResultColumn(x,d);for(var b=h!=null,E=1;E<=x;E++){var S=b?E:x-E;if(g.getDetectionResultColumn(S)===void 0){var T=void 0;S===0||S===x?T=new zO(l,S===0):T=new Tk(l),g.setDetectionResultColumn(S,T);for(var R=-1,k=R,N=l.getMinY();N<=l.getMaxY();N++){if(R=n.getStartColumn(g,S,N,b),R<0||R>l.getMaxX()){if(k===-1)continue;R=k}var j=n.detectCodeword(t,l.getMinX(),l.getMaxX(),b,R,N,a,o);j!=null&&(T.setCodeword(N,j),k=R,a=Math.min(a,j.getWidth()),o=Math.max(o,j.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(t,e){if(t==null&&e==null)return null;var r=n.getBarcodeMetadata(t,e);if(r==null)return null;var i=Tw.merge(n.adjustBoundingBox(t),n.adjustBoundingBox(e));return new ost(r,i)},n.adjustBoundingBox=function(t){var e,r;if(t==null)return null;var i=t.getRowHeights();if(i==null)return null;var s=n.getMax(i),a=0;try{for(var o=yd(i),l=o.next();!l.done;l=o.next()){var h=l.value;if(a+=s-h,h>0)break}}catch(y){e={error:y}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}for(var d=t.getCodewords(),g=0;a>0&&d[g]==null;g++)a--;for(var m=0,g=i.length-1;g>=0&&(m+=s-i[g],!(i[g]>0));g--);for(var g=d.length-1;m>0&&d[g]==null;g--)m--;return t.getBoundingBox().addMissingRows(a,m,t.isLeft())},n.getMax=function(t){var e,r,i=-1;try{for(var s=yd(t),a=s.next();!a.done;a=s.next()){var o=a.value;i=Math.max(i,o)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},n.getBarcodeMetadata=function(t,e){var r;if(t==null||(r=t.getBarcodeMetadata())==null)return e==null?null:e.getBarcodeMetadata();var i;return e==null||(i=e.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(t,e,r,i,s,a){for(var o=new zO(e,i),l=0;l<2;l++)for(var h=l===0?1:-1,d=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=e.getMaxY()&&g>=e.getMinY();g+=h){var m=n.detectCodeword(t,0,t.getWidth(),i,d,g,s,a);m!=null&&(o.setCodeword(g,m),i?d=m.getStartX():d=m.getEndX())}return o},n.adjustCodewordCount=function(t,e){var r=e[0][1],i=r.getValue(),s=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-n.getNumberOfECCodeWords(t.getBarcodeECLevel());if(i.length===0){if(s<1||s>ve.MAX_CODEWORDS_IN_BARCODE)throw ut.getNotFoundInstance();r.setValue(s)}else i[0]!==s&&r.setValue(s)},n.createDecoderResult=function(t){var e=n.createBarcodeMatrix(t);n.adjustCodewordCount(t,e);for(var r=new Array,i=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),s=[],a=new Array,o=0;o<t.getBarcodeRowCount();o++)for(var l=0;l<t.getBarcodeColumnCount();l++){var h=e[o][l+1].getValue(),d=o*t.getBarcodeColumnCount()+l;h.length===0?r.push(d):h.length===1?i[d]=h[0]:(a.push(d),s.push(h))}for(var g=new Array(s.length),m=0;m<g.length;m++)g[m]=s[m];return n.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),i,ve.toIntArray(r),ve.toIntArray(a),g)},n.createDecoderResultFromAmbiguousValues=function(t,e,r,i,s){for(var a=new Int32Array(i.length),o=100;o-- >0;){for(var l=0;l<a.length;l++)e[i[l]]=s[l][a[l]];try{return n.decodeCodewords(e,t,r)}catch(d){var h=d instanceof lr;if(!h)throw d}if(a.length===0)throw lr.getChecksumInstance();for(var l=0;l<a.length;l++)if(a[l]<s[l].length-1){a[l]++;break}else if(a[l]=0,l===a.length-1)throw lr.getChecksumInstance()}throw lr.getChecksumInstance()},n.createBarcodeMatrix=function(t){for(var e,r,i,s,a=Array.from({length:t.getBarcodeRowCount()},function(){return new Array(t.getBarcodeColumnCount()+2)}),o=0;o<a.length;o++)for(var l=0;l<a[o].length;l++)a[o][l]=new kd;var h=0;try{for(var d=yd(t.getDetectionResultColumns()),g=d.next();!g.done;g=d.next()){var m=g.value;if(m!=null)try{for(var y=(i=void 0,yd(m.getCodewords())),x=y.next();!x.done;x=y.next()){var b=x.value;if(b!=null){var E=b.getRowNumber();if(E>=0){if(E>=a.length)continue;a[E][h].setValue(b.getValue())}}}}catch(S){i={error:S}}finally{try{x&&!x.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}h++}}catch(S){e={error:S}}finally{try{g&&!g.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}return a},n.isValidBarcodeColumn=function(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1},n.getStartColumn=function(t,e,r,i){var s,a,o=i?1:-1,l=null;if(n.isValidBarcodeColumn(t,e-o)&&(l=t.getDetectionResultColumn(e-o).getCodeword(r)),l!=null)return i?l.getEndX():l.getStartX();if(l=t.getDetectionResultColumn(e).getCodewordNearby(r),l!=null)return i?l.getStartX():l.getEndX();if(n.isValidBarcodeColumn(t,e-o)&&(l=t.getDetectionResultColumn(e-o).getCodewordNearby(r)),l!=null)return i?l.getEndX():l.getStartX();for(var h=0;n.isValidBarcodeColumn(t,e-o);){e-=o;try{for(var d=(s=void 0,yd(t.getDetectionResultColumn(e).getCodewords())),g=d.next();!g.done;g=d.next()){var m=g.value;if(m!=null)return(i?m.getEndX():m.getStartX())+o*h*(m.getEndX()-m.getStartX())}}catch(y){s={error:y}}finally{try{g&&!g.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}h++}return i?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},n.detectCodeword=function(t,e,r,i,s,a,o,l){s=n.adjustCodewordStartColumn(t,e,r,i,s,a);var h=n.getModuleBitCount(t,e,r,i,s,a);if(h==null)return null;var d,g=we.sum(h);if(i)d=s+g;else{for(var m=0;m<h.length/2;m++){var y=h[m];h[m]=h[h.length-1-m],h[h.length-1-m]=y}d=s,s=d-g}if(!n.checkCodewordSkew(g,o,l))return null;var x=lst.getDecodedValue(h),b=ve.getCodeword(x);return b===-1?null:new cst(s,d,n.getCodewordBucketNumber(x),b)},n.getModuleBitCount=function(t,e,r,i,s,a){for(var o=s,l=new Int32Array(8),h=0,d=i?1:-1,g=i;(i?o<r:o>=e)&&h<l.length;)t.get(o,a)===g?(l[h]++,o+=d):(h++,g=!g);return h===l.length||o===(i?r:e)&&h===l.length-1?l:null},n.getNumberOfECCodeWords=function(t){return 2<<t},n.adjustCodewordStartColumn=function(t,e,r,i,s,a){for(var o=s,l=i?-1:1,h=0;h<2;h++){for(;(i?o>=e:o<r)&&i===t.get(o,a);){if(Math.abs(s-o)>n.CODEWORD_SKEW_SIZE)return s;o+=l}l=-l,i=!i}return o},n.checkCodewordSkew=function(t,e,r){return e-n.CODEWORD_SKEW_SIZE<=t&&t<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(t,e,r){if(t.length===0)throw Et.getFormatInstance();var i=1<<e+1,s=n.correctErrors(t,r,i);n.verifyCodewordCount(t,i);var a=_st.decode(t,""+e);return a.setErrorsCorrected(s),a.setErasures(r.length),a},n.correctErrors=function(t,e,r){if(e!=null&&e.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw lr.getChecksumInstance();return n.errorCorrection.decode(t,r,e)},n.verifyCodewordCount=function(t,e){if(t.length<4)throw Et.getFormatInstance();var r=t[0];if(r>t.length)throw Et.getFormatInstance();if(r===0)if(e<t.length)t[0]=t.length-e;else throw Et.getFormatInstance()},n.getBitCountForCodeword=function(t){for(var e=new Int32Array(8),r=0,i=e.length-1;!((t&1)!==r&&(r=t&1,i--,i<0));)e[i]++,t>>=1;return e},n.getCodewordBucketNumber=function(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)},n.getCodewordBucketNumber_number=function(t){return n.getCodewordBucketNumber(n.getBitCountForCodeword(t))},n.getCodewordBucketNumber_Int32Array=function(t){return(t[0]-t[2]+t[4]-t[6]+9)%9},n.toString=function(t){for(var e=new nA,r=0;r<t.length;r++){e.format("Row %2d: ",r);for(var i=0;i<t[r].length;i++){var s=t[r][i];s.getValue().length===0?e.format("        ",null):e.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}e.format("%n")}return e.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new tst,n}(),wst=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Sw=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=n.decode(t,e,!1);if(r==null||r.length===0||r[0]==null)throw ut.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(t,e){e===void 0&&(e=null);try{return n.decode(t,e,!0)}catch(r){throw r instanceof Et||r instanceof lr?ut.getNotFoundInstance():r}},n.decode=function(t,e,r){var i,s,a=new Array,o=Xit.detectMultiple(t,e,r);try{for(var l=wst(o.getPoints()),h=l.next();!h.done;h=l.next()){var d=h.value,g=xst.decode(o.getBits(),d[4],d[5],d[6],d[7],n.getMinCodewordWidth(d),n.getMaxCodewordWidth(d)),m=new Pr(g.getText(),g.getRawBytes(),void 0,d,Ut.PDF_417);m.putMetadata(xr.ERROR_CORRECTION_LEVEL,g.getECLevel());var y=g.getOther();y!=null&&m.putMetadata(xr.PDF417_EXTRA_METADATA,y),a.push(m)}}catch(x){i={error:x}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a.map(function(x){return x})},n.getMaxWidth=function(t,e){return t==null||e==null?0:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMinWidth=function(t,e){return t==null||e==null?ae.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(n.getMaxWidth(t[0],t[4]),n.getMaxWidth(t[6],t[2])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(t[1],t[5]),n.getMaxWidth(t[7],t[3])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(n.getMinWidth(t[0],t[4]),n.getMinWidth(t[6],t[2])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(t[1],t[5]),n.getMinWidth(t[7],t[3])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),bst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),GO=function(n){bst(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReaderException",t}(ni),WO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Est=function(){function n(){}return n.prototype.decode=function(t,e){return this.setHints(e),this.decodeInternal(t)},n.prototype.decodeWithState=function(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)},n.prototype.setHints=function(t){this.hints=t;var e=t!=null&&t.get(on.TRY_HARDER)!==void 0,r=t==null?null:t.get(on.POSSIBLE_FORMATS),i=new Array;if(r!=null){var s=r.some(function(a){return a===Ut.UPC_A||a===Ut.UPC_E||a===Ut.EAN_13||a===Ut.EAN_8||a===Ut.CODABAR||a===Ut.CODE_39||a===Ut.CODE_93||a===Ut.CODE_128||a===Ut.ITF||a===Ut.RSS_14||a===Ut.RSS_EXPANDED});s&&!e&&i.push(new Pd(t)),r.includes(Ut.QR_CODE)&&i.push(new Aw),r.includes(Ut.DATA_MATRIX)&&i.push(new Ew),r.includes(Ut.AZTEC)&&i.push(new ww),r.includes(Ut.PDF_417)&&i.push(new Sw),s&&e&&i.push(new Pd(t))}i.length===0&&(e||i.push(new Pd(t)),i.push(new Aw),i.push(new Ew),i.push(new ww),i.push(new Sw),e&&i.push(new Pd(t))),this.readers=i},n.prototype.reset=function(){var t,e;if(this.readers!==null)try{for(var r=WO(this.readers),i=r.next();!i.done;i=r.next()){var s=i.value;s.reset()}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},n.prototype.decodeInternal=function(t){var e,r;if(this.readers===null)throw new GO("No readers where selected, nothing can be read.");try{for(var i=WO(this.readers),s=i.next();!s.done;s=i.next()){var a=s.value;try{return a.decode(t,this.hints)}catch(o){if(o instanceof GO)continue}}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}throw new ut("No MultiFormat Readers were able to detect the code.")},n}(),Ast=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tst=function(n){Ast(t,n);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=500);var i=this,s=new Est;return s.setHints(e),i=n.call(this,s,r)||this,i}return t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t}(Yh),Sst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Sst(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Sw,e)||this}return t})(Yh);var Cst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Cst(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Aw,e)||this}return t})(Yh);var Cw;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Cw||(Cw={}));const n1=Cw;var Ck=function(){function n(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Uo(t,Int32Array.from([1])))}return n.prototype.buildGenerator=function(t){var e=this.cachedGenerators;if(t>=e.length)for(var r=e[e.length-1],i=this.field,s=e.length;s<=t;s++){var a=r.multiply(new Uo(i,Int32Array.from([1,i.exp(s-1+i.getGeneratorBase())])));e.push(a),r=a}return e[t]},n.prototype.encode=function(t,e){if(e===0)throw new jt("No error correction bytes");var r=t.length-e;if(r<=0)throw new jt("No data bytes provided");var i=this.buildGenerator(e),s=new Int32Array(r);Ke.arraycopy(t,0,s,0,r);var a=new Uo(this.field,s);a=a.multiplyByMonomial(e,1);for(var o=a.divide(i)[1],l=o.getCoefficients(),h=e-l.length,d=0;d<h;d++)t[r+d]=0;Ke.arraycopy(l,0,t,r+h,l.length)},n}(),Ld=function(){function n(){}return n.applyMaskPenaltyRule1=function(t){return n.applyMaskPenaltyRule1Internal(t,!0)+n.applyMaskPenaltyRule1Internal(t,!1)},n.applyMaskPenaltyRule2=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),s=t.getHeight(),a=0;a<s-1;a++)for(var o=r[a],l=0;l<i-1;l++){var h=o[l];h===o[l+1]&&h===r[a+1][l]&&h===r[a+1][l+1]&&e++}return n.N2*e},n.applyMaskPenaltyRule3=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),s=t.getHeight(),a=0;a<s;a++)for(var o=0;o<i;o++){var l=r[a];o+6<i&&l[o]===1&&l[o+1]===0&&l[o+2]===1&&l[o+3]===1&&l[o+4]===1&&l[o+5]===0&&l[o+6]===1&&(n.isWhiteHorizontal(l,o-4,o)||n.isWhiteHorizontal(l,o+7,o+11))&&e++,a+6<s&&r[a][o]===1&&r[a+1][o]===0&&r[a+2][o]===1&&r[a+3][o]===1&&r[a+4][o]===1&&r[a+5][o]===0&&r[a+6][o]===1&&(n.isWhiteVertical(r,o,a-4,a)||n.isWhiteVertical(r,o,a+7,a+11))&&e++}return e*n.N3},n.isWhiteHorizontal=function(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(var i=e;i<r;i++)if(t[i]===1)return!1;return!0},n.isWhiteVertical=function(t,e,r,i){r=Math.max(r,0),i=Math.min(i,t.length);for(var s=r;s<i;s++)if(t[s][e]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),s=t.getHeight(),a=0;a<s;a++)for(var o=r[a],l=0;l<i;l++)o[l]===1&&e++;var h=t.getHeight()*t.getWidth(),d=Math.floor(Math.abs(e*2-h)*10/h);return d*n.N4},n.getDataMaskBit=function(t,e,r){var i,s;switch(t){case 0:i=r+e&1;break;case 1:i=r&1;break;case 2:i=e%3;break;case 3:i=(r+e)%3;break;case 4:i=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:s=r*e,i=(s&1)+s%3;break;case 6:s=r*e,i=(s&1)+s%3&1;break;case 7:s=r*e,i=s%3+(r+e&1)&1;break;default:throw new jt("Invalid mask pattern: "+t)}return i===0},n.applyMaskPenaltyRule1Internal=function(t,e){for(var r=0,i=e?t.getHeight():t.getWidth(),s=e?t.getWidth():t.getHeight(),a=t.getArray(),o=0;o<i;o++){for(var l=0,h=-1,d=0;d<s;d++){var g=e?a[o][d]:a[d][o];g===h?l++:(l>=5&&(r+=n.N1+(l-5)),l=1,h=g)}l>=5&&(r+=n.N1+(l-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),Ist=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Rst=function(){function n(t,e){this.width=t,this.height=e;for(var r=new Array(e),i=0;i!==e;i++)r[i]=new Uint8Array(t);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(t,e){return this.bytes[e][t]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(t,e,r){this.bytes[e][t]=r},n.prototype.setBoolean=function(t,e,r){this.bytes[e][t]=r?1:0},n.prototype.clear=function(t){var e,r;try{for(var i=Ist(this.bytes),s=i.next();!s.done;s=i.next()){var a=s.value;Xn.fill(a,t)}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;if(this.width!==e.width||this.height!==e.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var s=this.bytes[r],a=e.bytes[r],o=0,l=this.width;o<l;++o)if(s[o]!==a[o])return!1;return!0},n.prototype.toString=function(){for(var t=new ne,e=0,r=this.height;e<r;++e){for(var i=this.bytes[e],s=0,a=this.width;s<a;++s)switch(i[s]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()},n}(),Iw=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var t=new ne;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()},n.prototype.setMode=function(t){this.mode=t},n.prototype.setECLevel=function(t){this.ecLevel=t},n.prototype.setVersion=function(t){this.version=t},n.prototype.setMaskPattern=function(t){this.maskPattern=t},n.prototype.setMatrix=function(t){this.matrix=t},n.isValidMaskPattern=function(t){return t>=0&&t<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),Dst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ze=function(n){Dst(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="WriterException",t}(ni),qO=function(){function n(){}return n.clearMatrix=function(t){t.clear(255)},n.buildMatrix=function(t,e,r,i,s){n.clearMatrix(s),n.embedBasicPatterns(r,s),n.embedTypeInfo(e,i,s),n.maybeEmbedVersionInfo(r,s),n.embedDataBits(t,i,s)},n.embedBasicPatterns=function(t,e){n.embedPositionDetectionPatternsAndSeparators(e),n.embedDarkDotAtLeftBottomCorner(e),n.maybeEmbedPositionAdjustmentPatterns(t,e),n.embedTimingPatterns(e)},n.embedTypeInfo=function(t,e,r){var i=new ur;n.makeTypeInfoBits(t,e,i);for(var s=0,a=i.getSize();s<a;++s){var o=i.get(i.getSize()-1-s),l=n.TYPE_INFO_COORDINATES[s],h=l[0],d=l[1];if(r.setBoolean(h,d,o),s<8){var g=r.getWidth()-s-1,m=8;r.setBoolean(g,m,o)}else{var g=8,m=r.getHeight()-7+(s-8);r.setBoolean(g,m,o)}}},n.maybeEmbedVersionInfo=function(t,e){if(!(t.getVersionNumber()<7)){var r=new ur;n.makeVersionInfoBits(t,r);for(var i=6*3-1,s=0;s<6;++s)for(var a=0;a<3;++a){var o=r.get(i);i--,e.setBoolean(s,e.getHeight()-11+a,o),e.setBoolean(e.getHeight()-11+a,s,o)}}},n.embedDataBits=function(t,e,r){for(var i=0,s=-1,a=r.getWidth()-1,o=r.getHeight()-1;a>0;){for(a===6&&(a-=1);o>=0&&o<r.getHeight();){for(var l=0;l<2;++l){var h=a-l;if(n.isEmpty(r.get(h,o))){var d=void 0;i<t.getSize()?(d=t.get(i),++i):d=!1,e!==255&&Ld.getDataMaskBit(e,h,o)&&(d=!d),r.setBoolean(h,o,d)}}o+=s}s=-s,o+=s,a-=2}if(i!==t.getSize())throw new Ze("Not all bits consumed: "+i+"/"+t.getSize())},n.findMSBSet=function(t){return 32-ae.numberOfLeadingZeros(t)},n.calculateBCHCode=function(t,e){if(e===0)throw new jt("0 polynomial");var r=n.findMSBSet(e);for(t<<=r-1;n.findMSBSet(t)>=r;)t^=e<<n.findMSBSet(t)-r;return t},n.makeTypeInfoBits=function(t,e,r){if(!Iw.isValidMaskPattern(e))throw new Ze("Invalid mask pattern");var i=t.getBits()<<3|e;r.appendBits(i,5);var s=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(s,10);var a=new ur;if(a.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(a),r.getSize()!==15)throw new Ze("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(t,e){e.appendBits(t.getVersionNumber(),6);var r=n.calculateBCHCode(t.getVersionNumber(),n.VERSION_INFO_POLY);if(e.appendBits(r,12),e.getSize()!==18)throw new Ze("should not happen but we got: "+e.getSize())},n.isEmpty=function(t){return t===255},n.embedTimingPatterns=function(t){for(var e=8;e<t.getWidth()-8;++e){var r=(e+1)%2;n.isEmpty(t.get(e,6))&&t.setNumber(e,6,r),n.isEmpty(t.get(6,e))&&t.setNumber(6,e,r)}},n.embedDarkDotAtLeftBottomCorner=function(t){if(t.get(8,t.getHeight()-8)===0)throw new Ze;t.setNumber(8,t.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(t,e,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(t+i,e)))throw new Ze;r.setNumber(t+i,e,0)}},n.embedVerticalSeparationPattern=function(t,e,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(t,e+i)))throw new Ze;r.setNumber(t,e+i,0)}},n.embedPositionAdjustmentPattern=function(t,e,r){for(var i=0;i<5;++i)for(var s=n.POSITION_ADJUSTMENT_PATTERN[i],a=0;a<5;++a)r.setNumber(t+a,e+i,s[a])},n.embedPositionDetectionPattern=function(t,e,r){for(var i=0;i<7;++i)for(var s=n.POSITION_DETECTION_PATTERN[i],a=0;a<7;++a)r.setNumber(t+a,e+i,s[a])},n.embedPositionDetectionPatternsAndSeparators=function(t){var e=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,t),n.embedPositionDetectionPattern(t.getWidth()-e,0,t),n.embedPositionDetectionPattern(0,t.getWidth()-e,t);var r=8;n.embedHorizontalSeparationPattern(0,r-1,t),n.embedHorizontalSeparationPattern(t.getWidth()-r,r-1,t),n.embedHorizontalSeparationPattern(0,t.getWidth()-r,t);var i=7;n.embedVerticalSeparationPattern(i,0,t),n.embedVerticalSeparationPattern(t.getHeight()-i-1,0,t),n.embedVerticalSeparationPattern(i,t.getHeight()-i,t)},n.maybeEmbedPositionAdjustmentPatterns=function(t,e){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],s=0,a=i.length;s!==a;s++){var o=i[s];if(o>=0)for(var l=0;l!==a;l++){var h=i[l];h>=0&&n.isEmpty(e.get(h,o))&&n.embedPositionAdjustmentPattern(h-2,o-2,e)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),Ost=function(){function n(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),YO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(t){return Ld.applyMaskPenaltyRule1(t)+Ld.applyMaskPenaltyRule2(t)+Ld.applyMaskPenaltyRule3(t)+Ld.applyMaskPenaltyRule4(t)},n.encode=function(t,e,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,s=r!==null&&r.get(n1.CHARACTER_SET)!==void 0;s&&(i=r.get(n1.CHARACTER_SET).toString());var a=this.chooseMode(t,i),o=new ur;if(a===Je.BYTE&&(s||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=Yn.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,o)}this.appendModeInfo(a,o);var h=new ur;this.appendBytes(t,a,h,i);var d;if(r!==null&&r.get(n1.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(n1.QR_VERSION).toString(),10);d=yl.getVersionForNumber(g);var m=this.calculateBitsNeeded(a,o,h,d);if(!this.willFit(m,d,e))throw new Ze("Data too big for requested version")}else d=this.recommendVersion(e,a,o,h);var y=new ur;y.appendBitArray(o);var x=a===Je.BYTE?h.getSizeInBytes():t.length;this.appendLengthInfo(x,d,a,y),y.appendBitArray(h);var b=d.getECBlocksForLevel(e),E=d.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(E,y);var S=this.interleaveWithECBytes(y,d.getTotalCodewords(),E,b.getNumBlocks()),T=new Iw;T.setECLevel(e),T.setMode(a),T.setVersion(d);var R=d.getDimensionForVersion(),k=new Rst(R,R),N=this.chooseMaskPattern(S,e,d,k);return T.setMaskPattern(N),qO.buildMatrix(S,e,d,N,k),T.setMatrix(k),T},n.recommendVersion=function(t,e,r,i){var s=this.calculateBitsNeeded(e,r,i,yl.getVersionForNumber(1)),a=this.chooseVersion(s,t),o=this.calculateBitsNeeded(e,r,i,a);return this.chooseVersion(o,t)},n.calculateBitsNeeded=function(t,e,r,i){return e.getSize()+t.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(t){return t<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[t]:-1},n.chooseMode=function(t,e){if(e===void 0&&(e=null),Yn.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return Je.KANJI;for(var r=!1,i=!1,s=0,a=t.length;s<a;++s){var o=t.charAt(s);if(n.isDigit(o))r=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)i=!0;else return Je.BYTE}return i?Je.ALPHANUMERIC:r?Je.NUMERIC:Je.BYTE},n.isOnlyDoubleByteKanji=function(t){var e;try{e=Ui.encode(t,Yn.SJIS)}catch{return!1}var r=e.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var s=e[i]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},n.chooseMaskPattern=function(t,e,r,i){for(var s=Number.MAX_SAFE_INTEGER,a=-1,o=0;o<Iw.NUM_MASK_PATTERNS;o++){qO.buildMatrix(t,e,r,o,i);var l=this.calculateMaskPenalty(i);l<s&&(s=l,a=o)}return a},n.chooseVersion=function(t,e){for(var r=1;r<=40;r++){var i=yl.getVersionForNumber(r);if(n.willFit(t,i,e))return i}throw new Ze("Data too big")},n.willFit=function(t,e,r){var i=e.getTotalCodewords(),s=e.getECBlocksForLevel(r),a=s.getTotalECCodewords(),o=i-a,l=(t+7)/8;return o>=l},n.terminateBits=function(t,e){var r=t*8;if(e.getSize()>r)throw new Ze("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(var i=0;i<4&&e.getSize()<r;++i)e.appendBit(!1);var s=e.getSize()&7;if(s>0)for(var i=s;i<8;i++)e.appendBit(!1);for(var a=t-e.getSizeInBytes(),i=0;i<a;++i)e.appendBits((i&1)===0?236:17,8);if(e.getSize()!==r)throw new Ze("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(t,e,r,i,s,a){if(i>=r)throw new Ze("Block ID too large");var o=t%r,l=r-o,h=Math.floor(t/r),d=h+1,g=Math.floor(e/r),m=g+1,y=h-g,x=d-m;if(y!==x)throw new Ze("EC bytes mismatch");if(r!==l+o)throw new Ze("RS blocks mismatch");if(t!==(g+y)*l+(m+x)*o)throw new Ze("Total bytes mismatch");i<l?(s[0]=g,a[0]=y):(s[0]=m,a[0]=x)},n.interleaveWithECBytes=function(t,e,r,i){var s,a,o,l;if(t.getSizeInBytes()!==r)throw new Ze("Number of bits and data bytes does not match");for(var h=0,d=0,g=0,m=new Array,y=0;y<i;++y){var x=new Int32Array(1),b=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(e,r,i,y,x,b);var E=x[0],S=new Uint8Array(E);t.toBytes(8*h,S,0,E);var T=n.generateECBytes(S,b[0]);m.push(new Ost(S,T)),d=Math.max(d,E),g=Math.max(g,T.length),h+=x[0]}if(r!==h)throw new Ze("Data bytes does not match offset");for(var R=new ur,y=0;y<d;++y)try{for(var k=(s=void 0,YO(m)),N=k.next();!N.done;N=k.next()){var j=N.value,S=j.getDataBytes();y<S.length&&R.appendBits(S[y],8)}}catch(B){s={error:B}}finally{try{N&&!N.done&&(a=k.return)&&a.call(k)}finally{if(s)throw s.error}}for(var y=0;y<g;++y)try{for(var O=(o=void 0,YO(m)),C=O.next();!C.done;C=O.next()){var j=C.value,T=j.getErrorCorrectionBytes();y<T.length&&R.appendBits(T[y],8)}}catch(B){o={error:B}}finally{try{C&&!C.done&&(l=O.return)&&l.call(O)}finally{if(o)throw o.error}}if(e!==R.getSizeInBytes())throw new Ze("Interleaving error: "+e+" and "+R.getSizeInBytes()+" differ.");return R},n.generateECBytes=function(t,e){for(var r=t.length,i=new Int32Array(r+e),s=0;s<r;s++)i[s]=t[s]&255;new Ck($r.QR_CODE_FIELD_256).encode(i,e);for(var a=new Uint8Array(e),s=0;s<e;s++)a[s]=i[r+s];return a},n.appendModeInfo=function(t,e){e.appendBits(t.getBits(),4)},n.appendLengthInfo=function(t,e,r,i){var s=r.getCharacterCountBits(e);if(t>=1<<s)throw new Ze(t+" is bigger than "+((1<<s)-1));i.appendBits(t,s)},n.appendBytes=function(t,e,r,i){switch(e){case Je.NUMERIC:n.appendNumericBytes(t,r);break;case Je.ALPHANUMERIC:n.appendAlphanumericBytes(t,r);break;case Je.BYTE:n.append8BitBytes(t,r,i);break;case Je.KANJI:n.appendKanjiBytes(t,r);break;default:throw new Ze("Invalid mode: "+e)}},n.getDigit=function(t){return t.charCodeAt(0)-48},n.isDigit=function(t){var e=n.getDigit(t);return e>=0&&e<=9},n.appendNumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var s=n.getDigit(t.charAt(i));if(i+2<r){var a=n.getDigit(t.charAt(i+1)),o=n.getDigit(t.charAt(i+2));e.appendBits(s*100+a*10+o,10),i+=3}else if(i+1<r){var a=n.getDigit(t.charAt(i+1));e.appendBits(s*10+a,7),i+=2}else e.appendBits(s,4),i++}},n.appendAlphanumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var s=n.getAlphanumericCode(t.charCodeAt(i));if(s===-1)throw new Ze;if(i+1<r){var a=n.getAlphanumericCode(t.charCodeAt(i+1));if(a===-1)throw new Ze;e.appendBits(s*45+a,11),i+=2}else e.appendBits(s,6),i++}},n.append8BitBytes=function(t,e,r){var i;try{i=Ui.encode(t,r)}catch(l){throw new Ze(l)}for(var s=0,a=i.length;s!==a;s++){var o=i[s];e.appendBits(o,8)}},n.appendKanjiBytes=function(t,e){var r;try{r=Ui.encode(t,Yn.SJIS)}catch(g){throw new Ze(g)}for(var i=r.length,s=0;s<i;s+=2){var a=r[s]&255,o=r[s+1]&255,l=a<<8&4294967295|o,h=-1;if(l>=33088&&l<=40956?h=l-33088:l>=57408&&l<=60351&&(h=l-49472),h===-1)throw new Ze("Invalid byte sequence");var d=(h>>8)*192+(h&255);e.appendBits(d,13)}},n.appendECI=function(t,e){e.appendBits(Je.ECI.getBits(),4),e.appendBits(t.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Yn.UTF8.getName(),n})();var Mst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Mst(t,n);function t(e,r,i,s,a,o,l,h){var d=n.call(this,o,l)||this;if(d.yuvData=e,d.dataWidth=r,d.dataHeight=i,d.left=s,d.top=a,s+o>r||a+l>i)throw new jt("Crop rectangle does not fit within image data.");return h&&d.reverseHorizontal(o,l),d}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new jt("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var s=(e+this.top)*this.dataWidth+this.left;return Ke.arraycopy(this.yuvData,s,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=e*r,s=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Ke.arraycopy(this.yuvData,a,s,0,i),s;for(var o=0;o<r;o++){var l=o*e;Ke.arraycopy(this.yuvData,a,s,l,e),a+=this.dataWidth}return s},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,s){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,i,s,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*r),s=this.yuvData,a=this.top*this.dataWidth+this.left,o=0;o<r;o++){for(var l=o*e,h=0;h<e;h++){var d=s[a+h*t.THUMBNAIL_SCALE_FACTOR]&255;i[l+h]=4278190080|d*65793}a+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return i},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,r){for(var i=this.yuvData,s=0,a=this.top*this.dataWidth+this.left;s<r;s++,a+=this.dataWidth)for(var o=a+e/2,l=a,h=a+e-1;l<o;l++,h--){var d=i[l];i[l]=i[h],i[h]=d}},t.prototype.invert=function(){return new ZE(this)},t.THUMBNAIL_SCALE_FACTOR=2,t})(yy);var Nst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Nst(t,n);function t(e,r,i,s,a,o,l){var h=n.call(this,r,i)||this;if(h.dataWidth=s,h.dataHeight=a,h.left=o,h.top=l,e.BYTES_PER_ELEMENT===4){for(var d=r*i,g=new Uint8ClampedArray(d),m=0;m<d;m++){var y=e[m],x=y>>16&255,b=y>>7&510,E=y&255;g[m]=(x+b+E)/4&255}h.luminances=g}else h.luminances=e;if(s===void 0&&(h.dataWidth=r),a===void 0&&(h.dataHeight=i),o===void 0&&(h.left=0),l===void 0&&(h.top=0),h.left+r>h.dataWidth||h.top+i>h.dataHeight)throw new jt("Crop rectangle does not fit within image data.");return h}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new jt("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var s=(e+this.top)*this.dataWidth+this.left;return Ke.arraycopy(this.luminances,s,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=e*r,s=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Ke.arraycopy(this.luminances,a,s,0,i),s;for(var o=0;o<r;o++){var l=o*e;Ke.arraycopy(this.luminances,a,s,l,e),a+=this.dataWidth}return s},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,s){return new t(this.luminances,i,s,this.dataWidth,this.dataHeight,this.left+e,this.top+r)},t.prototype.invert=function(){return new ZE(this)},t})(yy);var Pst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),kst=function(n){Pst(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.forName=function(e){return this.getCharacterSetECIByName(e)},t}(Yn),Lst=function(){function n(){}return n.ISO_8859_1=Yn.ISO8859_1,n}(),Rw,Vst=301,Bst=function(n,t){for(var e=1,r=0;r<255;r++)t[r]=e,n[e]=r,e*=2,e>=256&&(e^=Vst);return{LOG:n,ALOG:t}};Rw=Bst([],[]),Rw.LOG;Rw.ALOG;var XO;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(XO||(XO={}));var KO=129,Ik=230,Fst=231,Ust=235,jst=236,zst=237,Hst=238,Gst=239,Wst=240,Sx=254,qst=254,$O="[)>05",QO="[)>06",ZO="",Ne=0,yr=1,jr=2,Wn=3,ar=4,Sr=5,Yst=function(){function n(){}return n.prototype.getEncodingMode=function(){return Ne},n.prototype.encode=function(t){var e=es.determineConsecutiveDigitCount(t.getMessage(),t.pos);if(e>=2)t.writeCodeword(this.encodeASCIIDigits(t.getMessage().charCodeAt(t.pos),t.getMessage().charCodeAt(t.pos+1))),t.pos+=2;else{var r=t.getCurrentChar(),i=es.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Sr:t.writeCodeword(Fst),t.signalEncoderChange(Sr);return;case yr:t.writeCodeword(Ik),t.signalEncoderChange(yr);return;case Wn:t.writeCodeword(Hst),t.signalEncoderChange(Wn);break;case jr:t.writeCodeword(Gst),t.signalEncoderChange(jr);break;case ar:t.writeCodeword(Wst),t.signalEncoderChange(ar);break;default:throw new Error("Illegal mode: "+i)}else es.isExtendedASCII(r)?(t.writeCodeword(Ust),t.writeCodeword(r-128+1),t.pos++):(t.writeCodeword(r+1),t.pos++)}},n.prototype.encodeASCIIDigits=function(t,e){if(es.isDigit(t)&&es.isDigit(e)){var r=(t-48)*10+(e-48);return r+130}throw new Error("not digits: "+t+e)},n}(),Xst=function(){function n(){}return n.prototype.getEncodingMode=function(){return Sr},n.prototype.encode=function(t){var e=new ne;for(e.append(0);t.hasMoreCharacters();){var r=t.getCurrentChar();e.append(r),t.pos++;var i=es.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){t.signalEncoderChange(Ne);break}}var s=e.length()-1,a=1,o=t.getCodewordCount()+s+a;t.updateSymbolInfo(o);var l=t.getSymbolInfo().getDataCapacity()-o>0;if(t.hasMoreCharacters()||l)if(s<=249)e.setCharAt(0,me.getCharAt(s));else if(s<=1555)e.setCharAt(0,me.getCharAt(Math.floor(s/250)+249)),e.insert(1,me.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var h=0,r=e.length();h<r;h++)t.writeCodeword(this.randomize255State(e.charAt(h).charCodeAt(0),t.getCodewordCount()+1))},n.prototype.randomize255State=function(t,e){var r=149*e%255+1,i=t+r;return i<=255?i:i-256},n}(),rA=function(){function n(){}return n.prototype.getEncodingMode=function(){return yr},n.prototype.encodeMaximal=function(t){for(var e=new ne,r=0,i=t.pos,s=0;t.hasMoreCharacters();){var a=t.getCurrentChar();t.pos++,r=this.encodeChar(a,e),e.length()%3===0&&(i=t.pos,s=e.length())}if(s!==e.length()){var o=Math.floor(e.length()/3*2),l=Math.floor(t.getCodewordCount()+o+1);t.updateSymbolInfo(l);var h=t.getSymbolInfo().getDataCapacity()-l,d=Math.floor(e.length()%3);(d===2&&h!==2||d===1&&(r>3||h!==1))&&(t.pos=i)}e.length()>0&&t.writeCodeword(Ik),this.handleEOD(t,e)},n.prototype.encode=function(t){for(var e=new ne;t.hasMoreCharacters();){var r=t.getCurrentChar();t.pos++;var i=this.encodeChar(r,e),s=Math.floor(e.length()/3)*2,a=t.getCodewordCount()+s;t.updateSymbolInfo(a);var o=t.getSymbolInfo().getDataCapacity()-a;if(!t.hasMoreCharacters()){var l=new ne;for(e.length()%3===2&&o!==2&&(i=this.backtrackOneCharacter(t,e,l,i));e.length()%3===1&&(i>3||o!==1);)i=this.backtrackOneCharacter(t,e,l,i);break}var h=e.length();if(h%3===0){var d=es.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){t.signalEncoderChange(Ne);break}}}this.handleEOD(t,e)},n.prototype.backtrackOneCharacter=function(t,e,r,i){var s=e.length(),a=e.toString().substring(0,s-i);e.setLengthToZero(),e.append(a),t.pos--;var o=t.getCurrentChar();return i=this.encodeChar(o,r),t.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(t,e){t.writeCodewords(this.encodeToCodewords(e.toString()));var r=e.toString().substring(3);e.setLengthToZero(),e.append(r)},n.prototype.handleEOD=function(t,e){var r=Math.floor(e.length()/3*2),i=e.length()%3,s=t.getCodewordCount()+r;t.updateSymbolInfo(s);var a=t.getSymbolInfo().getDataCapacity()-s;if(i===2){for(e.append("\0");e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(Sx)}else if(a===1&&i===1){for(;e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(Sx),t.pos--}else if(i===0){for(;e.length()>=3;)this.writeNextTriplet(t,e);(a>0||t.hasMoreCharacters())&&t.writeCodeword(Sx)}else throw new Error("Unexpected case. Please report!");t.signalEncoderChange(Ne)},n.prototype.encodeChar=function(t,e){if(t===32)return e.append(3),1;if(t>=48&&t<=57)return e.append(t-48+4),1;if(t>=65&&t<=90)return e.append(t-65+14),1;if(t<32)return e.append(0),e.append(t),2;if(t<=47)return e.append(1),e.append(t-33),2;if(t<=64)return e.append(1),e.append(t-58+15),2;if(t<=95)return e.append(1),e.append(t-91+22),2;if(t<=127)return e.append(2),e.append(t-96),2;e.append("1");var r=2;return r+=this.encodeChar(t-128,e),r},n.prototype.encodeToCodewords=function(t){var e=1600*t.charCodeAt(0)+40*t.charCodeAt(1)+t.charCodeAt(2)+1,r=e/256,i=e%256,s=new ne;return s.append(r),s.append(i),s.toString()},n}(),Kst=function(){function n(){}return n.prototype.getEncodingMode=function(){return ar},n.prototype.encode=function(t){for(var e=new ne;t.hasMoreCharacters();){var r=t.getCurrentChar();this.encodeChar(r,e),t.pos++;var i=e.length();if(i>=4){t.writeCodewords(this.encodeToCodewords(e.toString()));var s=e.toString().substring(4);e.setLengthToZero(),e.append(s);var a=es.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){t.signalEncoderChange(Ne);break}}}e.append(me.getCharAt(31)),this.handleEOD(t,e)},n.prototype.handleEOD=function(t,e){try{var r=e.length();if(r===0)return;if(r===1){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),s=t.getRemainingCharacters();if(s>i&&(t.updateSymbolInfo(t.getCodewordCount()+1),i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount()),s<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var a=r-1,o=this.encodeToCodewords(e.toString()),l=!t.hasMoreCharacters(),h=l&&a<=2;if(a<=2){t.updateSymbolInfo(t.getCodewordCount()+a);var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount();i>=3&&(h=!1,t.updateSymbolInfo(t.getCodewordCount()+o.length))}h?(t.resetSymbolInfo(),t.pos-=a):t.writeCodewords(o)}finally{t.signalEncoderChange(Ne)}},n.prototype.encodeChar=function(t,e){t>=32&&t<=63?e.append(t):t>=64&&t<=94?e.append(me.getCharAt(t-64)):es.illegalCharacter(me.getCharAt(t))},n.prototype.encodeToCodewords=function(t){var e=t.length;if(e===0)throw new Error("StringBuilder must not be empty");var r=t.charAt(0).charCodeAt(0),i=e>=2?t.charAt(1).charCodeAt(0):0,s=e>=3?t.charAt(2).charCodeAt(0):0,a=e>=4?t.charAt(3).charCodeAt(0):0,o=(r<<18)+(i<<12)+(s<<6)+a,l=o>>16&255,h=o>>8&255,d=o&255,g=new ne;return g.append(l),e>=2&&g.append(h),e>=3&&g.append(d),g.toString()},n}(),$st=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qst=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ae=function(){function n(t,e,r,i,s,a,o,l){o===void 0&&(o=0),l===void 0&&(l=0),this.rectangular=t,this.dataCapacity=e,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=s,this.dataRegions=a,this.rsBlockData=o,this.rsBlockError=l}return n.lookup=function(t,e,r,i,s){var a,o;e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=!0);try{for(var l=Qst(Jst),h=l.next();!h.done;h=l.next()){var d=h.value;if(!(e===1&&d.rectangular)&&!(e===2&&!d.rectangular)&&!(r!=null&&(d.getSymbolWidth()<r.getWidth()||d.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&t<=d.dataCapacity)return d}}catch(g){a={error:g}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+t);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(t){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(t){return this.rsBlockError},n}(),Zst=function(n){$st(t,n);function t(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return t.prototype.getInterleavedBlockCount=function(){return 10},t.prototype.getDataLengthForInterleavedBlock=function(e){return e<=8?156:155},t}(Ae),Jst=[new Ae(!1,3,5,8,8,1),new Ae(!1,5,7,10,10,1),new Ae(!0,5,7,16,6,1),new Ae(!1,8,10,12,12,1),new Ae(!0,10,11,14,6,2),new Ae(!1,12,12,14,14,1),new Ae(!0,16,14,24,10,1),new Ae(!1,18,14,16,16,1),new Ae(!1,22,18,18,18,1),new Ae(!0,22,18,16,10,2),new Ae(!1,30,20,20,20,1),new Ae(!0,32,24,16,14,2),new Ae(!1,36,24,22,22,1),new Ae(!1,44,28,24,24,1),new Ae(!0,49,28,22,14,2),new Ae(!1,62,36,14,14,4),new Ae(!1,86,42,16,16,4),new Ae(!1,114,48,18,18,4),new Ae(!1,144,56,20,20,4),new Ae(!1,174,68,22,22,4),new Ae(!1,204,84,24,24,4,102,42),new Ae(!1,280,112,14,14,16,140,56),new Ae(!1,368,144,16,16,16,92,36),new Ae(!1,456,192,18,18,16,114,48),new Ae(!1,576,224,20,20,16,144,56),new Ae(!1,696,272,22,22,16,174,68),new Ae(!1,816,336,24,24,16,136,56),new Ae(!1,1050,408,18,18,36,175,68),new Ae(!1,1304,496,20,20,36,163,62),new Zst],tat=function(){function n(t){this.msg=t,this.pos=0,this.skipAtEnd=0;for(var e=t.split("").map(function(o){return o.charCodeAt(0)}),r=new ne,i=0,s=e.length;i<s;i++){var a=String.fromCharCode(e[i]&255);if(a==="?"&&t.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(a)}this.msg=r.toString(),this.shape=0,this.codewords=new ne,this.newEncoding=-1}return n.prototype.setSymbolShape=function(t){this.shape=t},n.prototype.setSizeConstraints=function(t,e){this.minSize=t,this.maxSize=e},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(t){this.skipAtEnd=t},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(t){this.codewords.append(t)},n.prototype.writeCodeword=function(t){this.codewords.append(t)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(t){this.newEncoding=t},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(t){t===void 0&&(t=this.getCodewordCount()),(this.symbolInfo==null||t>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Ae.lookup(t,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),eat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),nat=function(n){eat(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return Wn},t.prototype.encode=function(e){for(var r=new ne;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,this.encodeChar(i,r);var s=r.length();if(s%3===0){this.writeNextTriplet(e,r);var a=es.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Ne);break}}}this.handleEOD(e,r)},t.prototype.encodeChar=function(e,r){switch(e){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:e>=48&&e<=57?r.append(e-48+4):e>=65&&e<=90?r.append(e-65+14):es.illegalCharacter(me.getCharAt(e));break}return 1},t.prototype.handleEOD=function(e,r){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=r.length();e.pos-=s,(e.getRemainingCharacters()>1||i>1||e.getRemainingCharacters()!==i)&&e.writeCodeword(qst),e.getNewEncoding()<0&&e.signalEncoderChange(Ne)},t}(rA),rat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),iat=function(n){rat(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return jr},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=97&&e<=122)return r.append(e-97+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e>=91&&e<=95)return r.append(1),r.append(e-91+22),2;if(e===96)return r.append(2),r.append(0),2;if(e<=90)return r.append(2),r.append(e-65+1),2;if(e<=127)return r.append(2),r.append(e-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(e-128,r),i},t}(rA),es=function(){function n(){}return n.randomize253State=function(t){var e=149*t%253+1,r=KO+e;return r<=254?r:r-254},n.encodeHighLevel=function(t,e,r,i,s){e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=!1);var a=new rA,o=[new Yst,a,new iat,new nat,new Kst,new Xst],l=new tat(t);l.setSymbolShape(e),l.setSizeConstraints(r,i),t.startsWith($O)&&t.endsWith(ZO)?(l.writeCodeword(jst),l.setSkipAtEnd(2),l.pos+=$O.length):t.startsWith(QO)&&t.endsWith(ZO)&&(l.writeCodeword(zst),l.setSkipAtEnd(2),l.pos+=QO.length);var h=Ne;for(s&&(a.encodeMaximal(l),h=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)o[h].encode(l),l.getNewEncoding()>=0&&(h=l.getNewEncoding(),l.resetEncoderSignal());var d=l.getCodewordCount();l.updateSymbolInfo();var g=l.getSymbolInfo().getDataCapacity();d<g&&h!==Ne&&h!==Sr&&h!==ar&&l.writeCodeword("þ");var m=l.getCodewords();for(m.length()<g&&m.append(KO);m.length()<g;)m.append(this.randomize253State(m.length()+1));return l.getCodewords().toString()},n.lookAheadTest=function(t,e,r){var i=this.lookAheadTestIntern(t,e,r);if(r===Wn&&i===Wn){for(var s=Math.min(e+3,t.length),a=e;a<s;a++)if(!this.isNativeX12(t.charCodeAt(a)))return Ne}else if(r===ar&&i===ar){for(var s=Math.min(e+4,t.length),a=e;a<s;a++)if(!this.isNativeEDIFACT(t.charCodeAt(a)))return Ne}return i},n.lookAheadTestIntern=function(t,e,r){if(e>=t.length)return r;var i;r===Ne?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var s=0,a=new Uint8Array(6),o=[];;){if(e+s===t.length){Xn.fill(a,0),Xn.fill(o,0);var l=this.findMinimums(i,o,ae.MAX_VALUE,a),h=this.getMinimumCount(a);if(o[Ne]===l)return Ne;if(h===1){if(a[Sr]>0)return Sr;if(a[ar]>0)return ar;if(a[jr]>0)return jr;if(a[Wn]>0)return Wn}return yr}var d=t.charCodeAt(e+s);if(s++,this.isDigit(d)?i[Ne]+=.5:this.isExtendedASCII(d)?(i[Ne]=Math.ceil(i[Ne]),i[Ne]+=2):(i[Ne]=Math.ceil(i[Ne]),i[Ne]++),this.isNativeC40(d)?i[yr]+=2/3:this.isExtendedASCII(d)?i[yr]+=8/3:i[yr]+=4/3,this.isNativeText(d)?i[jr]+=2/3:this.isExtendedASCII(d)?i[jr]+=8/3:i[jr]+=4/3,this.isNativeX12(d)?i[Wn]+=2/3:this.isExtendedASCII(d)?i[Wn]+=13/3:i[Wn]+=10/3,this.isNativeEDIFACT(d)?i[ar]+=3/4:this.isExtendedASCII(d)?i[ar]+=17/4:i[ar]+=13/4,this.isSpecialB256(d)?i[Sr]+=4:i[Sr]++,s>=4){if(Xn.fill(a,0),Xn.fill(o,0),this.findMinimums(i,o,ae.MAX_VALUE,a),o[Ne]<this.min(o[Sr],o[yr],o[jr],o[Wn],o[ar]))return Ne;if(o[Sr]<o[Ne]||o[Sr]+1<this.min(o[yr],o[jr],o[Wn],o[ar]))return Sr;if(o[ar]+1<this.min(o[Sr],o[yr],o[jr],o[Wn],o[Ne]))return ar;if(o[jr]+1<this.min(o[Sr],o[yr],o[ar],o[Wn],o[Ne]))return jr;if(o[Wn]+1<this.min(o[Sr],o[yr],o[ar],o[jr],o[Ne]))return Wn;if(o[yr]+1<this.min(o[Ne],o[Sr],o[ar],o[jr])){if(o[yr]<o[Wn])return yr;if(o[yr]===o[Wn]){for(var g=e+s+1;g<t.length;){var m=t.charCodeAt(g);if(this.isX12TermSep(m))return Wn;if(!this.isNativeX12(m))break;g++}return yr}}}}},n.min=function(t,e,r,i,s){var a=Math.min(t,Math.min(e,Math.min(r,i)));return s===void 0?a:Math.min(a,s)},n.findMinimums=function(t,e,r,i){for(var s=0;s<6;s++){var a=e[s]=Math.ceil(t[s]);r>a&&(r=a,Xn.fill(i,0)),r===a&&(i[s]=i[s]+1)}return r},n.getMinimumCount=function(t){for(var e=0,r=0;r<6;r++)e+=t[r];return e||0},n.isDigit=function(t){return t>=48&&t<=57},n.isExtendedASCII=function(t){return t>=128&&t<=255},n.isNativeC40=function(t){return t===32||t>=48&&t<=57||t>=65&&t<=90},n.isNativeText=function(t){return t===32||t>=48&&t<=57||t>=97&&t<=122},n.isNativeX12=function(t){return this.isX12TermSep(t)||t===32||t>=48&&t<=57||t>=65&&t<=90},n.isX12TermSep=function(t){return t===13||t===42||t===62},n.isNativeEDIFACT=function(t){return t>=32&&t<=94},n.isSpecialB256=function(t){return!1},n.determineConsecutiveDigitCount=function(t,e){e===void 0&&(e=0);for(var r=t.length,i=e;i<r&&this.isDigit(t.charCodeAt(i));)i++;return i-e},n.illegalCharacter=function(t){var e=ae.toHexString(t.charCodeAt(0));throw e="0000".substring(0,4-e.length)+e,new Error("Illegal character: "+t+" (0x"+e+")")},n}(),Cx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JO=function(){function n(t){this.charset=t,this.name=t.name}return n.prototype.canEncode=function(t){try{return Ui.encode(t,this.charset)!=null}catch{return!1}},n}(),sat=function(){function n(t,e,r){var i,s,a,o,l,h;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(M){return new JO(kst.forName(M))}),this.encoders=[];var d=[];d.push(new JO(Lst.ISO_8859_1));for(var g=e!=null&&e.name.startsWith("UTF"),m=0;m<t.length;m++){var y=!1;try{for(var x=(i=void 0,Cx(d)),b=x.next();!b.done;b=x.next()){var E=b.value,S=t.charAt(m),T=S.charCodeAt(0);if(T===r||E.canEncode(S)){y=!0;break}}}catch(M){i={error:M}}finally{try{b&&!b.done&&(s=x.return)&&s.call(x)}finally{if(i)throw i.error}}if(!y)try{for(var R=(a=void 0,Cx(this.ENCODERS)),k=R.next();!k.done;k=R.next()){var E=k.value;if(E.canEncode(t.charAt(m))){d.push(E),y=!0;break}}}catch(M){a={error:M}}finally{try{k&&!k.done&&(o=R.return)&&o.call(R)}finally{if(a)throw a.error}}y||(g=!0)}if(d.length===1&&!g)this.encoders=[d[0]];else{this.encoders=[];var N=0;try{for(var j=Cx(d),O=j.next();!O.done;O=j.next()){var E=O.value;this.encoders[N++]=E}}catch(M){l={error:M}}finally{try{O&&!O.done&&(h=j.return)&&h.call(j)}finally{if(l)throw l.error}}}var C=-1;if(e!=null){for(var m=0;m<this.encoders.length;m++)if(this.encoders[m]!=null&&e.name===this.encoders[m].name){C=m;break}}this.priorityEncoderIndex=C}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].name},n.prototype.getCharset=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].charset},n.prototype.getECIValue=function(t){return this.encoders[t].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return Ui.encode(me.getCharAt(t),this.encoders[e].name)},n}(),aat=3,oat=function(){function n(t,e,r){this.fnc1=r;var i=new sat(t,e,r);if(i.length()===1)for(var s=0;s<this.bytes.length;s++){var a=t.charAt(s).charCodeAt(0);this.bytes[s]=a===r?1e3:a}else this.bytes=this.encodeMinimally(t,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(t,e){if(t+e-1>=this.bytes.length)return!1;for(var r=0;r<e;r++)if(this.isECI(t+r))return!1;return!0},n.prototype.charAt=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(this.isECI(t))throw new Error("value at "+t+" is not a character but an ECI");return this.isFNC1(t)?this.fnc1:this.bytes[t]},n.prototype.subSequence=function(t,e){if(t<0||t>e||e>this.length())throw new Error(""+t);for(var r=new ne,i=t;i<e;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]>255&&this.bytes[t]<=999},n.prototype.isFNC1=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]===1e3},n.prototype.getECIValue=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(!this.isECI(t))throw new Error("value at "+t+" is not an ECI but a character");return this.bytes[t]-256},n.prototype.addEdge=function(t,e,r){(t[e][r.encoderIndex]==null||t[e][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(t[e][r.encoderIndex]=r)},n.prototype.addEdges=function(t,e,r,i,s,a){var o=t.charAt(i).charCodeAt(0),l=0,h=e.length();e.getPriorityEncoderIndex()>=0&&(o===a||e.canEncode(o,e.getPriorityEncoderIndex()))&&(l=e.getPriorityEncoderIndex(),h=l+1);for(var d=l;d<h;d++)(o===a||e.canEncode(o,d))&&this.addEdge(r,i+1,new t4(o,e,d,s,a))},n.prototype.encodeMinimally=function(t,e,r){var i=t.length,s=new t4[i+1][e.length()];this.addEdges(t,e,s,0,null,r);for(var a=1;a<=i;a++){for(var o=0;o<e.length();o++)s[a][o]!=null&&a<i&&this.addEdges(t,e,s,a,s[a][o],r);for(var o=0;o<e.length();o++)s[a-1][o]=null}for(var l=-1,h=ae.MAX_VALUE,o=0;o<e.length();o++)if(s[i][o]!=null){var d=s[i][o];d.cachedTotalSize<h&&(h=d.cachedTotalSize,l=o)}if(l<0)throw new Error('Failed to encode "'+t+'"');for(var g=[],m=s[i][l];m!=null;){if(m.isFNC1())g.unshift(1e3);else for(var y=e.encode(m.c,m.encoderIndex),a=y.length-1;a>=0;a--)g.unshift(y[a]&255);var x=m.previous===null?0:m.previous.encoderIndex;x!==m.encoderIndex&&g.unshift(256+e.getECIValue(m.encoderIndex)),m=m.previous}for(var b=[],a=0;a<b.length;a++)b[a]=g[a];return b},n}(),t4=function(){function n(t,e,r,i,s){this.c=t,this.encoderSet=e,this.encoderIndex=r,this.previous=i,this.fnc1=s,this.c=t===s?1e3:t;var a=this.isFNC1()?1:e.encode(t,r).length,o=i===null?0:i.encoderIndex;o!==r&&(a+=aat),i!=null&&(a+=i.cachedTotalSize),this.cachedTotalSize=a}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),cat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();var e4;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(e4||(e4={}));(function(n){cat(t,n);function t(e,r,i,s,a){var o=n.call(this,e,r,i)||this;return o.shape=s,o.macroId=a,o}return t.prototype.getMacroId=function(){return this.macroId},t.prototype.getShapeHint=function(){return this.shape},t})(oat);var lat=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(t){this.compact=t},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(t){this.size=t},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(t){this.layers=t},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(t){this.codeWords=t},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(t){this.matrix=t},n}(),n4=function(){function n(){}return n.singletonList=function(t){return[t]},n.min=function(t,e){return t.sort(e)[0]},n}(),uat=function(){function n(t){this.previous=t}return n.prototype.getPrevious=function(){return this.previous},n}(),hat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),iA=function(n){hat(t,n);function t(e,r,i){var s=n.call(this,e)||this;return s.value=r,s.bitCount=i,s}return t.prototype.appendTo=function(e,r){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,r){return new t(this,e,r)},t.prototype.addBinaryShift=function(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,r)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+ae.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t}(uat),fat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dat=function(n){fat(t,n);function t(e,r,i){var s=n.call(this,e,0,0)||this;return s.binaryShiftStart=r,s.binaryShiftByteCount=i,s}return t.prototype.appendTo=function(e,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+i],8)},t.prototype.addBinaryShift=function(e,r){return new t(this,e,r)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t}(iA);function gat(n,t,e){return new dat(n,t,e)}function vd(n,t,e){return new iA(n,t,e)}var pat=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],jo=0,Im=1,Vi=2,Rk=3,Ns=4,mat=new iA(null,0,0),Ix=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],yat=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function vat(n){var t,e;try{for(var r=yat(n),i=r.next();!i.done;i=r.next()){var s=i.value;Xn.fill(s,-1)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n[jo][Ns]=0,n[Im][Ns]=0,n[Im][jo]=28,n[Rk][Ns]=0,n[Vi][Ns]=0,n[Vi][jo]=15,n}var Dk=vat(Xn.createInt32Array(6,6)),_at=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xat=function(){function n(t,e,r,i){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(t,e){var r=this.bitCount,i=this.token;if(t!==this.mode){var s=Ix[this.mode][t];i=vd(i,s&65535,s>>16),r+=s>>16}var a=t===Vi?4:5;return i=vd(i,e,a),new n(i,t,0,r+a)},n.prototype.shiftAndAppend=function(t,e){var r=this.token,i=this.mode===Vi?4:5;return r=vd(r,Dk[this.mode][t],i),r=vd(r,e,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(t){var e=this.token,r=this.mode,i=this.bitCount;if(this.mode===Ns||this.mode===Vi){var s=Ix[r][jo];e=vd(e,s&65535,s>>16),i+=s>>16,r=jo}var a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new n(e,r,this.binaryShiftByteCount+1,i+a);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(t+1)),o},n.prototype.endBinaryShift=function(t){if(this.binaryShiftByteCount===0)return this;var e=this.token;return e=gat(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(e,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(t){var e=this.bitCount+(Ix[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=n.calculateBinaryShiftCost(t)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount},n.prototype.toBitArray=function(t){for(var e,r,i=[],s=this.endBinaryShift(t.length).token;s!==null;s=s.getPrevious())i.unshift(s);var a=new ur;try{for(var o=_at(i),l=o.next();!l.done;l=o.next()){var h=l.value;h.appendTo(a,t)}}catch(d){e={error:d}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return a},n.prototype.toString=function(){return me.format("%s bits=%d bytes=%d",pat[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(mat,jo,0,0),n}();function wat(n){var t=me.getCharCode(" "),e=me.getCharCode("."),r=me.getCharCode(",");n[jo][t]=1;for(var i=me.getCharCode("Z"),s=me.getCharCode("A"),a=s;a<=i;a++)n[jo][a]=a-s+2;n[Im][t]=1;for(var o=me.getCharCode("z"),l=me.getCharCode("a"),a=l;a<=o;a++)n[Im][a]=a-l+2;n[Vi][t]=1;for(var h=me.getCharCode("9"),d=me.getCharCode("0"),a=d;a<=h;a++)n[Vi][a]=a-d+2;n[Vi][r]=12,n[Vi][e]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],m=0;m<g.length;m++)n[Rk][me.getCharCode(g[m])]=m;for(var y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],m=0;m<y.length;m++)me.getCharCode(y[m])>0&&(n[Ns][me.getCharCode(y[m])]=m);return n}var Rx=wat(Xn.createInt32Array(5,256)),r1=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bat=function(){function n(t){this.text=t}return n.prototype.encode=function(){for(var t=me.getCharCode(" "),e=me.getCharCode(`
`),r=n4.singletonList(xat.INITIAL_STATE),i=0;i<this.text.length;i++){var s=void 0,a=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case me.getCharCode("\r"):s=a===e?2:0;break;case me.getCharCode("."):s=a===t?3:0;break;case me.getCharCode(","):s=a===t?4:0;break;case me.getCharCode(":"):s=a===t?5:0;break;default:s=0}s>0?(r=n.updateStateListForPair(r,i,s),i++):r=this.updateStateListForChar(r,i)}var o=n4.min(r,function(l,h){return l.getBitCount()-h.getBitCount()});return o.toBitArray(this.text)},n.prototype.updateStateListForChar=function(t,e){var r,i,s=[];try{for(var a=r1(t),o=a.next();!o.done;o=a.next()){var l=o.value;this.updateStateForChar(l,e,s)}}catch(h){r={error:h}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return n.simplifyStates(s)},n.prototype.updateStateForChar=function(t,e,r){for(var i=this.text[e]&255,s=Rx[t.getMode()][i]>0,a=null,o=0;o<=Ns;o++){var l=Rx[o][i];if(l>0){if(a==null&&(a=t.endBinaryShift(e)),!s||o===t.getMode()||o===Vi){var h=a.latchAndAppend(o,l);r.push(h)}if(!s&&Dk[t.getMode()][o]>=0){var d=a.shiftAndAppend(o,l);r.push(d)}}}if(t.getBinaryShiftByteCount()>0||Rx[t.getMode()][i]===0){var g=t.addBinaryShiftChar(e);r.push(g)}},n.updateStateListForPair=function(t,e,r){var i,s,a=[];try{for(var o=r1(t),l=o.next();!l.done;l=o.next()){var h=l.value;this.updateStateForPair(h,e,r,a)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}return this.simplifyStates(a)},n.updateStateForPair=function(t,e,r,i){var s=t.endBinaryShift(e);if(i.push(s.latchAndAppend(Ns,r)),t.getMode()!==Ns&&i.push(s.shiftAndAppend(Ns,r)),r===3||r===4){var a=s.latchAndAppend(Vi,16-r).latchAndAppend(Vi,1);i.push(a)}if(t.getBinaryShiftByteCount()>0){var o=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);i.push(o)}},n.simplifyStates=function(t){var e,r,i,s,a=[];try{for(var o=r1(t),l=o.next();!l.done;l=o.next()){var h=l.value,d=!0,g=function(E){if(E.isBetterThanOrEqualTo(h))return d=!1,"break";h.isBetterThanOrEqualTo(E)&&(a=a.filter(function(S){return S!==E}))};try{for(var m=(i=void 0,r1(a)),y=m.next();!y.done;y=m.next()){var x=y.value,b=g(x);if(b==="break")break}}catch(E){i={error:E}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}d&&a.push(h)}}catch(E){e={error:E}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return a},n}(),Eat=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(t){return n.encode(t,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(t,e,r){var i=new bat(t).encode(),s=ae.truncDivision(i.getSize()*e,100)+11,a=i.getSize()+s,o,l,h,d,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(o=r<0,l=Math.abs(r),l>(o?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new jt(me.format("Illegal value %s for layers",r));h=n.totalBitsInLayer(l,o),d=n.WORD_SIZE[l];var m=h-h%d;if(g=n.stuffBits(i,d),g.getSize()+s>m)throw new jt("Data to large for user specified layer");if(o&&g.getSize()>d*64)throw new jt("Data to large for user specified layer")}else{d=0,g=null;for(var y=0;;y++){if(y>n.MAX_NB_BITS)throw new jt("Data too large for an Aztec code");if(o=y<=3,l=o?y+1:y,h=n.totalBitsInLayer(l,o),!(a>h)){(g==null||d!==n.WORD_SIZE[l])&&(d=n.WORD_SIZE[l],g=n.stuffBits(i,d));var m=h-h%d;if(!(o&&g.getSize()>d*64)&&g.getSize()+s<=m)break}}}var x=n.generateCheckWords(g,h,d),b=g.getSize()/d,E=n.generateModeMessage(o,l,b),S=(o?11:14)+l*4,T=new Int32Array(S),R;if(o){R=S;for(var y=0;y<T.length;y++)T[y]=y}else{R=S+1+2*ae.truncDivision(ae.truncDivision(S,2)-1,15);for(var k=ae.truncDivision(S,2),N=ae.truncDivision(R,2),y=0;y<k;y++){var j=y+ae.truncDivision(y,15);T[k-y-1]=N-j-1,T[k+y]=N+j+1}}for(var O=new Xs(R),y=0,C=0;y<l;y++){for(var M=(l-y)*4+(o?9:12),B=0;B<M;B++)for(var H=B*2,G=0;G<2;G++)x.get(C+H+G)&&O.set(T[y*2+G],T[y*2+B]),x.get(C+M*2+H+G)&&O.set(T[y*2+B],T[S-1-y*2-G]),x.get(C+M*4+H+G)&&O.set(T[S-1-y*2-G],T[S-1-y*2-B]),x.get(C+M*6+H+G)&&O.set(T[S-1-y*2-B],T[y*2+G]);C+=M*8}if(n.drawModeMessage(O,o,R,E),o)n.drawBullsEye(O,ae.truncDivision(R,2),5);else{n.drawBullsEye(O,ae.truncDivision(R,2),7);for(var y=0,B=0;y<ae.truncDivision(S,2)-1;y+=15,B+=16)for(var G=ae.truncDivision(R,2)&1;G<R;G+=2)O.set(ae.truncDivision(R,2)-B,G),O.set(ae.truncDivision(R,2)+B,G),O.set(G,ae.truncDivision(R,2)-B),O.set(G,ae.truncDivision(R,2)+B)}var U=new lat;return U.setCompact(o),U.setSize(R),U.setLayers(l),U.setCodeWords(b),U.setMatrix(O),U},n.drawBullsEye=function(t,e,r){for(var i=0;i<r;i+=2)for(var s=e-i;s<=e+i;s++)t.set(s,e-i),t.set(s,e+i),t.set(e-i,s),t.set(e+i,s);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)},n.generateModeMessage=function(t,e,r){var i=new ur;return t?(i.appendBits(e-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(e-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(t,e,r,i){var s=ae.truncDivision(r,2);if(e)for(var a=0;a<7;a++){var o=s-3+a;i.get(a)&&t.set(o,s-5),i.get(a+7)&&t.set(s+5,o),i.get(20-a)&&t.set(o,s+5),i.get(27-a)&&t.set(s-5,o)}else for(var a=0;a<10;a++){var o=s-5+a+ae.truncDivision(a,5);i.get(a)&&t.set(o,s-7),i.get(a+10)&&t.set(s+7,o),i.get(29-a)&&t.set(o,s+7),i.get(39-a)&&t.set(s-7,o)}},n.generateCheckWords=function(t,e,r){var i,s,a=t.getSize()/r,o=new Ck(n.getGF(r)),l=ae.truncDivision(e,r),h=n.bitsToWords(t,r,l);o.encode(h,l-a);var d=e%r,g=new ur;g.appendBits(0,d);try{for(var m=Eat(Array.from(h)),y=m.next();!y.done;y=m.next()){var x=y.value;g.appendBits(x,r)}}catch(b){i={error:b}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(t,e,r){var i=new Int32Array(r),s,a;for(s=0,a=t.getSize()/e;s<a;s++){for(var o=0,l=0;l<e;l++)o|=t.get(s*e+l)?1<<e-l-1:0;i[s]=o}return i},n.getGF=function(t){switch(t){case 4:return $r.AZTEC_PARAM;case 6:return $r.AZTEC_DATA_6;case 8:return $r.AZTEC_DATA_8;case 10:return $r.AZTEC_DATA_10;case 12:return $r.AZTEC_DATA_12;default:throw new jt("Unsupported word size "+t)}},n.stuffBits=function(t,e){for(var r=new ur,i=t.getSize(),s=(1<<e)-2,a=0;a<i;a+=e){for(var o=0,l=0;l<e;l++)(a+l>=i||t.get(a+l))&&(o|=1<<e-1-l);(o&s)===s?(r.appendBits(o&s,e),a--):(o&s)===0?(r.appendBits(o|1,e),a--):r.appendBits(o,e)}return r},n.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const Ok=rt.createContext(),Aat=({children:n})=>{const[t,e]=rt.useState({message:"",type:"",visible:!1}),r=rt.useCallback((i,s="info")=>{e({message:i,type:s,visible:!0}),setTimeout(()=>e({...t,visible:!1}),4e3)},[]);return P.jsxs(Ok.Provider,{value:{showToast:r},children:[n,t.visible&&P.jsx("div",{className:"toast-container position-fixed top-0 start-50 translate-middle-x p-3",style:{zIndex:9999},children:P.jsx("div",{className:`toast show text-white bg-${t.type}`,children:P.jsx("div",{className:"toast-body fw-bold text-center",children:t.message})})})]})},Tat=()=>rt.useContext(Ok);var Dx={exports:{}},r4;function Sat(){return r4||(r4=1,function(n){var t=function(e){var r=Object.prototype,i=r.hasOwnProperty,s=Object.defineProperty||function(et,V,q){et[V]=q.value},a,o=typeof Symbol=="function"?Symbol:{},l=o.iterator||"@@iterator",h=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function g(et,V,q){return Object.defineProperty(et,V,{value:q,enumerable:!0,configurable:!0,writable:!0}),et[V]}try{g({},"")}catch{g=function(V,q,ot){return V[q]=ot}}function m(et,V,q,ot){var nt=V&&V.prototype instanceof R?V:R,pt=Object.create(nt.prototype),Tt=new K(ot||[]);return s(pt,"_invoke",{value:G(et,q,Tt)}),pt}e.wrap=m;function y(et,V,q){try{return{type:"normal",arg:et.call(V,q)}}catch(ot){return{type:"throw",arg:ot}}}var x="suspendedStart",b="suspendedYield",E="executing",S="completed",T={};function R(){}function k(){}function N(){}var j={};g(j,l,function(){return this});var O=Object.getPrototypeOf,C=O&&O(O(ct([])));C&&C!==r&&i.call(C,l)&&(j=C);var M=N.prototype=R.prototype=Object.create(j);k.prototype=N,s(M,"constructor",{value:N,configurable:!0}),s(N,"constructor",{value:k,configurable:!0}),k.displayName=g(N,d,"GeneratorFunction");function B(et){["next","throw","return"].forEach(function(V){g(et,V,function(q){return this._invoke(V,q)})})}e.isGeneratorFunction=function(et){var V=typeof et=="function"&&et.constructor;return V?V===k||(V.displayName||V.name)==="GeneratorFunction":!1},e.mark=function(et){return Object.setPrototypeOf?Object.setPrototypeOf(et,N):(et.__proto__=N,g(et,d,"GeneratorFunction")),et.prototype=Object.create(M),et},e.awrap=function(et){return{__await:et}};function H(et,V){function q(pt,Tt,At,Jt){var Bt=y(et[pt],et,Tt);if(Bt.type==="throw")Jt(Bt.arg);else{var Pt=Bt.arg,zt=Pt.value;return zt&&typeof zt=="object"&&i.call(zt,"__await")?V.resolve(zt.__await).then(function(Zt){q("next",Zt,At,Jt)},function(Zt){q("throw",Zt,At,Jt)}):V.resolve(zt).then(function(Zt){Pt.value=Zt,At(Pt)},function(Zt){return q("throw",Zt,At,Jt)})}}var ot;function nt(pt,Tt){function At(){return new V(function(Jt,Bt){q(pt,Tt,Jt,Bt)})}return ot=ot?ot.then(At,At):At()}s(this,"_invoke",{value:nt})}B(H.prototype),g(H.prototype,h,function(){return this}),e.AsyncIterator=H,e.async=function(et,V,q,ot,nt){nt===void 0&&(nt=Promise);var pt=new H(m(et,V,q,ot),nt);return e.isGeneratorFunction(V)?pt:pt.next().then(function(Tt){return Tt.done?Tt.value:pt.next()})};function G(et,V,q){var ot=x;return function(pt,Tt){if(ot===E)throw new Error("Generator is already running");if(ot===S){if(pt==="throw")throw Tt;return yt()}for(q.method=pt,q.arg=Tt;;){var At=q.delegate;if(At){var Jt=U(At,q);if(Jt){if(Jt===T)continue;return Jt}}if(q.method==="next")q.sent=q._sent=q.arg;else if(q.method==="throw"){if(ot===x)throw ot=S,q.arg;q.dispatchException(q.arg)}else q.method==="return"&&q.abrupt("return",q.arg);ot=E;var Bt=y(et,V,q);if(Bt.type==="normal"){if(ot=q.done?S:b,Bt.arg===T)continue;return{value:Bt.arg,done:q.done}}else Bt.type==="throw"&&(ot=S,q.method="throw",q.arg=Bt.arg)}}}function U(et,V){var q=V.method,ot=et.iterator[q];if(ot===a)return V.delegate=null,q==="throw"&&et.iterator.return&&(V.method="return",V.arg=a,U(et,V),V.method==="throw")||q!=="return"&&(V.method="throw",V.arg=new TypeError("The iterator does not provide a '"+q+"' method")),T;var nt=y(ot,et.iterator,V.arg);if(nt.type==="throw")return V.method="throw",V.arg=nt.arg,V.delegate=null,T;var pt=nt.arg;if(!pt)return V.method="throw",V.arg=new TypeError("iterator result is not an object"),V.delegate=null,T;if(pt.done)V[et.resultName]=pt.value,V.next=et.nextLoc,V.method!=="return"&&(V.method="next",V.arg=a);else return pt;return V.delegate=null,T}B(M),g(M,d,"Generator"),g(M,l,function(){return this}),g(M,"toString",function(){return"[object Generator]"});function _t(et){var V={tryLoc:et[0]};1 in et&&(V.catchLoc=et[1]),2 in et&&(V.finallyLoc=et[2],V.afterLoc=et[3]),this.tryEntries.push(V)}function xt(et){var V=et.completion||{};V.type="normal",delete V.arg,et.completion=V}function K(et){this.tryEntries=[{tryLoc:"root"}],et.forEach(_t,this),this.reset(!0)}e.keys=function(et){var V=Object(et),q=[];for(var ot in V)q.push(ot);return q.reverse(),function nt(){for(;q.length;){var pt=q.pop();if(pt in V)return nt.value=pt,nt.done=!1,nt}return nt.done=!0,nt}};function ct(et){if(et){var V=et[l];if(V)return V.call(et);if(typeof et.next=="function")return et;if(!isNaN(et.length)){var q=-1,ot=function nt(){for(;++q<et.length;)if(i.call(et,q))return nt.value=et[q],nt.done=!1,nt;return nt.value=a,nt.done=!0,nt};return ot.next=ot}}return{next:yt}}e.values=ct;function yt(){return{value:a,done:!0}}return K.prototype={constructor:K,reset:function(et){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(xt),!et)for(var V in this)V.charAt(0)==="t"&&i.call(this,V)&&!isNaN(+V.slice(1))&&(this[V]=a)},stop:function(){this.done=!0;var et=this.tryEntries[0],V=et.completion;if(V.type==="throw")throw V.arg;return this.rval},dispatchException:function(et){if(this.done)throw et;var V=this;function q(Jt,Bt){return pt.type="throw",pt.arg=et,V.next=Jt,Bt&&(V.method="next",V.arg=a),!!Bt}for(var ot=this.tryEntries.length-1;ot>=0;--ot){var nt=this.tryEntries[ot],pt=nt.completion;if(nt.tryLoc==="root")return q("end");if(nt.tryLoc<=this.prev){var Tt=i.call(nt,"catchLoc"),At=i.call(nt,"finallyLoc");if(Tt&&At){if(this.prev<nt.catchLoc)return q(nt.catchLoc,!0);if(this.prev<nt.finallyLoc)return q(nt.finallyLoc)}else if(Tt){if(this.prev<nt.catchLoc)return q(nt.catchLoc,!0)}else if(At){if(this.prev<nt.finallyLoc)return q(nt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(et,V){for(var q=this.tryEntries.length-1;q>=0;--q){var ot=this.tryEntries[q];if(ot.tryLoc<=this.prev&&i.call(ot,"finallyLoc")&&this.prev<ot.finallyLoc){var nt=ot;break}}nt&&(et==="break"||et==="continue")&&nt.tryLoc<=V&&V<=nt.finallyLoc&&(nt=null);var pt=nt?nt.completion:{};return pt.type=et,pt.arg=V,nt?(this.method="next",this.next=nt.finallyLoc,T):this.complete(pt)},complete:function(et,V){if(et.type==="throw")throw et.arg;return et.type==="break"||et.type==="continue"?this.next=et.arg:et.type==="return"?(this.rval=this.arg=et.arg,this.method="return",this.next="end"):et.type==="normal"&&V&&(this.next=V),T},finish:function(et){for(var V=this.tryEntries.length-1;V>=0;--V){var q=this.tryEntries[V];if(q.finallyLoc===et)return this.complete(q.completion,q.afterLoc),xt(q),T}},catch:function(et){for(var V=this.tryEntries.length-1;V>=0;--V){var q=this.tryEntries[V];if(q.tryLoc===et){var ot=q.completion;if(ot.type==="throw"){var nt=ot.arg;xt(q)}return nt}}throw new Error("illegal catch attempt")},delegateYield:function(et,V,q){return this.delegate={iterator:ct(et),resultName:V,nextLoc:q},this.method==="next"&&(this.arg=a),T}},e}(n.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(Dx)),Dx.exports}var Ox,i4;function sA(){return i4||(i4=1,Ox=(n,t)=>`${n}-${t}-${Math.random().toString(16).slice(3,8)}`),Ox}var Mx,s4;function Mk(){if(s4)return Mx;s4=1;const n=sA();let t=0;return Mx=({id:e,action:r,payload:i={}})=>{let s=e;return typeof s>"u"&&(s=n("Job",t),t+=1),{id:s,action:r,payload:i}},Mx}var _d={},a4;function aA(){if(a4)return _d;a4=1;let n=!1;return _d.logging=n,_d.setLogging=t=>{n=t},_d.log=(...t)=>n?console.log.apply(this,t):null,_d}var Nx,o4;function Cat(){if(o4)return Nx;o4=1;const n=Mk(),{log:t}=aA(),e=sA();let r=0;return Nx=()=>{const i=e("Scheduler",r),s={},a={};let o=[];r+=1;const l=()=>o.length,h=()=>Object.keys(s).length,d=()=>{if(o.length!==0){const b=Object.keys(s);for(let E=0;E<b.length;E+=1)if(typeof a[b[E]]>"u"){o[0](s[b[E]]);break}}},g=(b,E)=>new Promise((S,T)=>{const R=n({action:b,payload:E});o.push(async k=>{o.shift(),a[k.id]=R;try{S(await k[b].apply(this,[...E,R.id]))}catch(N){T(N)}finally{delete a[k.id],d()}}),t(`[${i}]: Add ${R.id} to JobQueue`),t(`[${i}]: JobQueue length=${o.length}`),d()});return{addWorker:b=>(s[b.id]=b,t(`[${i}]: Add ${b.id}`),t(`[${i}]: Number of workers=${h()}`),d(),b.id),addJob:async(b,...E)=>{if(h()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return g(b,E)},terminate:async()=>{Object.keys(s).forEach(async b=>{await s[b].terminate()}),o=[]},getQueueLen:l,getNumWorkers:h}},Nx}function Iat(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Px,c4;function Rat(){return c4||(c4=1,Px=n=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof Iat=="function"&&(t.type="node"),typeof n>"u"?t:t[n]}),Px}var kx,l4;function Dat(){if(l4)return kx;l4=1;const t=Rat()("type")==="browser"?e=>new URL(e,window.location.href).href:e=>e;return kx=e=>{const r={...e};return["corePath","workerPath","langPath"].forEach(i=>{e[i]&&(r[i]=t(r[i]))}),r},kx}var Lx,u4;function Nk(){return u4||(u4=1,Lx={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),Lx}const Oat="6.0.1",Mat={version:Oat};var Vx,h4;function Nat(){return h4||(h4=1,Vx={workerBlobURL:!0,logger:()=>{}}),Vx}var Bx,f4;function Pat(){if(f4)return Bx;f4=1;const n=Mat.version;return Bx={...Nat(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${n}/dist/worker.min.js`},Bx}var Fx,d4;function kat(){return d4||(d4=1,Fx=({workerPath:n,workerBlobURL:t})=>{let e;if(Blob&&URL&&t){const r=new Blob([`importScripts("${n}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(r))}else e=new Worker(n);return e}),Fx}var Ux,g4;function Lat(){return g4||(g4=1,Ux=n=>{n.terminate()}),Ux}var jx,p4;function Vat(){return p4||(p4=1,jx=(n,t)=>{n.onmessage=({data:e})=>{t(e)}}),jx}var zx,m4;function Bat(){return m4||(m4=1,zx=async(n,t)=>{n.postMessage(t)}),zx}var Hx,y4;function Fat(){if(y4)return Hx;y4=1;const n=e=>new Promise((r,i)=>{const s=new FileReader;s.onload=()=>{r(s.result)},s.onerror=({target:{error:{code:a}}})=>{i(Error(`File could not be read! Code=${a}`))},s.readAsArrayBuffer(e)}),t=async e=>{let r=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?r=atob(e.split(",")[1]).split("").map(i=>i.charCodeAt(0)):r=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(r=await t(e.src)),e.tagName==="VIDEO"&&(r=await t(e.poster)),e.tagName==="CANVAS"&&await new Promise(i=>{e.toBlob(async s=>{r=await n(s),i()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const i=await e.convertToBlob();r=await n(i)}else(e instanceof File||e instanceof Blob)&&(r=await n(e));return new Uint8Array(r)};return Hx=t,Hx}var Gx,v4;function Uat(){if(v4)return Gx;v4=1;const n=Pat(),t=kat(),e=Lat(),r=Vat(),i=Bat(),s=Fat();return Gx={defaultOptions:n,spawnWorker:t,terminateWorker:e,onMessage:r,send:i,loadImage:s},Gx}var Wx,_4;function Pk(){if(_4)return Wx;_4=1;const n=Dat(),t=Mk(),{log:e}=aA(),r=sA(),i=Nk(),{defaultOptions:s,spawnWorker:a,terminateWorker:o,onMessage:l,loadImage:h,send:d}=Uat();let g=0;return Wx=async(m="eng",y=i.LSTM_ONLY,x={},b={})=>{const E=r("Worker",g),{logger:S,errorHandler:T,...R}=n({...s,...x}),k={},N=typeof m=="string"?m.split("+"):m;let j=y,O=b;const C=[i.DEFAULT,i.LSTM_ONLY].includes(y)&&!R.legacyCore;let M,B;const H=new Promise((Pt,zt)=>{B=Pt,M=zt}),G=Pt=>{M(Pt.message)};let U=a(R);U.onerror=G,g+=1;const _t=({id:Pt,action:zt,payload:Zt})=>new Promise((Ge,Ye)=>{e(`[${E}]: Start ${Pt}, action=${zt}`);const en=`${zt}-${Pt}`;k[en]={resolve:Ge,reject:Ye},d(U,{workerId:E,jobId:Pt,action:zt,payload:Zt})}),xt=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),K=Pt=>_t(t({id:Pt,action:"load",payload:{options:{lstmOnly:C,corePath:R.corePath,logging:R.logging}}})),ct=(Pt,zt,Zt)=>_t(t({id:Zt,action:"FS",payload:{method:"writeFile",args:[Pt,zt]}})),yt=(Pt,zt)=>_t(t({id:zt,action:"FS",payload:{method:"readFile",args:[Pt,{encoding:"utf8"}]}})),et=(Pt,zt)=>_t(t({id:zt,action:"FS",payload:{method:"unlink",args:[Pt]}})),V=(Pt,zt,Zt)=>_t(t({id:Zt,action:"FS",payload:{method:Pt,args:zt}})),q=(Pt,zt)=>_t(t({id:zt,action:"loadLanguage",payload:{langs:Pt,options:{langPath:R.langPath,dataPath:R.dataPath,cachePath:R.cachePath,cacheMethod:R.cacheMethod,gzip:R.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(j)&&!R.legacyLang}}})),ot=(Pt,zt,Zt,Ge)=>_t(t({id:Ge,action:"initialize",payload:{langs:Pt,oem:zt,config:Zt}})),nt=(Pt="eng",zt,Zt,Ge)=>{if(C&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(zt))throw Error("Legacy model requested but code missing.");const Ye=zt||j;j=Ye;const en=Zt||O;O=en;const Rt=(typeof Pt=="string"?Pt.split("+"):Pt).filter(Ot=>!N.includes(Ot));return N.push(...Rt),Rt.length>0?q(Rt,Ge).then(()=>ot(Pt,Ye,en,Ge)):ot(Pt,Ye,en,Ge)},pt=(Pt={},zt)=>_t(t({id:zt,action:"setParameters",payload:{params:Pt}})),Tt=async(Pt,zt={},Zt={text:!0},Ge)=>_t(t({id:Ge,action:"recognize",payload:{image:await h(Pt),options:zt,output:Zt}})),At=async(Pt,zt)=>{if(C)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return _t(t({id:zt,action:"detect",payload:{image:await h(Pt)}}))},Jt=async()=>(U!==null&&(o(U),U=null),Promise.resolve());l(U,({workerId:Pt,jobId:zt,status:Zt,action:Ge,data:Ye})=>{const en=`${Ge}-${zt}`;if(Zt==="resolve")e(`[${Pt}]: Complete ${zt}`),k[en].resolve({jobId:zt,data:Ye}),delete k[en];else if(Zt==="reject")if(k[en].reject(Ye),delete k[en],Ge==="load"&&M(Ye),T)T(Ye);else throw Error(Ye);else Zt==="progress"&&S({...Ye,userJobId:zt})});const Bt={id:E,worker:U,load:xt,writeText:ct,readText:yt,removeFile:et,FS:V,reinitialize:nt,setParameters:pt,recognize:Tt,detect:At,terminate:Jt};return K().then(()=>q(m)).then(()=>ot(m,y,b)).then(()=>B(Bt)).catch(()=>{}),H},Wx}var qx,x4;function jat(){if(x4)return qx;x4=1;const n=Pk();return qx={recognize:async(r,i,s)=>{const a=await n(i,1,s);return a.recognize(r).finally(async()=>{await a.terminate()})},detect:async(r,i)=>{const s=await n("osd",0,i);return s.detect(r).finally(async()=>{await s.terminate()})}},qx}var Yx,w4;function zat(){return w4||(w4=1,Yx={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Yx}var Xx,b4;function Hat(){return b4||(b4=1,Xx={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),Xx}var Kx,E4;function Gat(){if(E4)return Kx;E4=1,Sat();const n=Cat(),t=Pk(),e=jat(),r=zat(),i=Nk(),s=Hat(),{setLogging:a}=aA();return Kx={languages:r,OEM:i,PSM:s,createScheduler:n,createWorker:t,setLogging:a,...e},Kx}var Wat=Gat();const A4=Nw(Wat),qat={Fat:["fat","saturates","of which saturates"],Carbohydrate:["carbohydrate","carb"],Sugar:["sugar","sugars","of which sugars"],Fibre:["fibre","fiber"],Protein:["protein","protien"],Salt:["salt","sodium"]};function Yat(n){const t=n.match(/([\d.]+)\s*(g|mg)?/i);if(t){const e=parseFloat(t[1]);if(!isNaN(e)&&e<1e3)return e}return null}function T4(n){const t=n.split(`
`).map(r=>r.trim()).filter(Boolean),e=[];for(const r of t)for(const i of Object.keys(qat))if(r.toLowerCase().includes(i.toLowerCase())){const s=Yat(r);s!==null&&!e.find(a=>a.type===i)&&e.push({type:i,count:s.toFixed(2),serving:"1",total:s.toFixed(2)})}return e}function Xat({isOpen:n,onClose:t,onSave:e,editMeal:r,user:i}){const[s,a]=rt.useState("Breakfast"),[o,l]=rt.useState(new Date),[h,d]=rt.useState([""]),[g,m]=rt.useState([[{type:"Protein",count:"",serving:"1",total:""}]]),[y,x]=rt.useState(!1),[b,E]=rt.useState(!1),[S,T]=rt.useState(!1),R=rt.useRef(null),[k,N]=rt.useState(null),[j,O]=rt.useState(null),{showToast:C}=Tat(),[M,B]=rt.useState(!1),H=[{label:"100 g",value:100},{label:"slice (30 g)",value:30},{label:"cup (200 ml)",value:200},{label:"package (250 g)",value:250}],[G,U]=rt.useState(1),[_t,xt]=rt.useState(H[0].value),[K,ct]=rt.useState(0);rt.useEffect(()=>{r&&(Bt(),N(null),a(r.mealType),l(new Date(r.timestamp)),d(r.foodItems.map(Rt=>Rt.name)),m(r.foodItems.map(Rt=>Rt.nutrients)),x(!0),T(!1),E(!1))},[r]);const yt=["Protein","Fat","Carbohydrate","Sugar","Sugars","Fibre","Fiber","Salt","Caffeine"],et=(Rt="")=>{const Ot=Rt.toLowerCase();return Ot==="sugars"?"Sugar":Ot==="fiber"?"Fibre":Ot==="proteins"?"Protein":Ot==="carbohydrates"?"Carbohydrate":Ot==="saturated fat"?"Fat":Rt},V=()=>{Bt(),N(null),m([[{type:"Protein",count:"",serving:"1",total:""}]]),d([""]),l(new Date),x(!1),T(!1),E(!1),O(null)},q=Rt=>{Bt(),x(Rt==="manual"),T(Rt==="auto"),E(Rt==="scan")},ot=()=>{m([...g,[{type:"Protein",count:"",serving:"1",total:""}]]),d([...h,""])},nt=Rt=>{const Ot=[...g];Ot[Rt].push({type:"Protein",count:"",serving:"1",total:""}),m(Ot)},pt=(Rt,Ot)=>{const wt=[...g];wt[Rt].splice(Ot,1),m(wt)},Tt=g.every(Rt=>Rt.every(Ot=>!Ot.count||parseFloat(Ot.count)===0)),At=(Rt,Ot,wt,kt)=>{const vt=[...g],Wt=vt[Rt];if(wt==="serving")Wt.forEach(Qt=>{Qt.serving=kt;const Qe=parseFloat(Qt.count)||0,cn=parseFloat(kt)||1;Qt.total=(Qe*cn).toFixed(2)});else{const Qt=Wt[Ot];Qt[wt]=kt;const Qe=parseFloat(Qt.count)||0,cn=parseFloat(Qt.serving)||1;Qt.total=(Qe*cn).toFixed(2)}m(vt)},Jt=()=>{const Rt=g.map((wt,kt)=>({name:h[kt]||`Food ${kt+1}`,nutrients:wt})),Ot={mealType:s,date:o.toISOString().split("T")[0],timestamp:o.toISOString(),foodItems:Rt,kcal:j||en(Rt)};e(Ot),V(),t()},Bt=()=>{const Rt=R.current;Rt&&Rt.srcObject&&(Rt.srcObject.getTracks().forEach(Ot=>Ot.stop()),Rt.srcObject=null),E(!1)},Pt=()=>{const Rt=R.current;if(!Rt||Rt.videoWidth===0){C("Camera not ready yet. Wait a moment.");return}const Ot=document.createElement("canvas");Ot.width=Rt.videoWidth,Ot.height=Rt.videoHeight;const wt=Ot.getContext("2d");wt.drawImage(Rt,0,0);const kt=wt.getImageData(0,0,Ot.width,Ot.height),vt=kt.data;for(let Wt=0;Wt<vt.length;Wt+=4){const Qt=(vt[Wt]+vt[Wt+1]+vt[Wt+2])/3;vt[Wt]=Qt,vt[Wt+1]=Qt,vt[Wt+2]=Qt}wt.putImageData(kt,0,0),A4.recognize(Ot,"eng").then(({data:{text:Wt}})=>{const Qt=T4(Wt);Qt.length>0?(m([Qt]),q("manual")):C("No nutritional values detected. Try again or enter manually."),Bt()})},zt=async(Rt,Ot)=>{var wt;try{const Wt=(wt=(await(await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Rt)}&search_simple=1&action=process&json=1`)).json()).products)==null?void 0:wt.find(ye=>ye.nutriments&&ye.nutriments["energy-kcal_100g"]&&ye.nutriments.proteins_100g);if(!Wt||!Wt.nutriments)throw new Error("No valid nutrition info found.");const Qt=Wt.nutriments,Qe={Protein:Qt.proteins_100g,Fat:Qt.fat_100g,Carbohydrate:Qt.carbohydrates_100g,Sugar:Qt.sugars_100g,Fibre:Qt.fiber_100g,Salt:Qt.salt_100g,Caffeine:Qt.caffeine_100g},cn=Object.entries(Qe).filter(([ye,oe])=>yt.includes(ye)&&oe!==void 0).map(([ye,oe])=>({type:ye,count:parseFloat(oe).toFixed(2),serving:"1",total:parseFloat(oe).toFixed(2)})),Jn=[...g];Jn[Ot]=cn,m(Jn),q("auto")}catch{C("⚠️ Could not fetch nutrition info. Try a more specific food name.")}},Zt=async Rt=>{const Ot=Rt.target.files[0];if(!Ot)return;const wt=new Image;wt.src=URL.createObjectURL(Ot),wt.onload=async()=>{const kt=new Tst;try{const vt=await kt.decodeFromImageElement(wt);await Ge(vt.getText())}catch{B(!0)}}},Ge=async Rt=>{try{const wt=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${Rt}.json`)).json();if(wt.status===0){C("❌ Product not found.");return}const kt=wt.product.nutriments,vt=wt.product.product_name||"Scanned Product",Wt={Fat:kt.fat_100g,Carbohydrate:kt.carbohydrates_100g,Protein:kt.proteins_100g,Sugar:kt.sugars_100g,Fibre:kt.fiber_100g,Salt:kt.salt_100g,Caffeine:kt.caffeine_100g},Qt=parseFloat(kt["energy-kcal_100g"])||0;O(Qt);const Qe=Object.entries(Wt).filter(([cn,Jn])=>yt.includes(cn)&&Jn!==void 0).map(([cn,Jn])=>({type:cn,count:parseFloat(Jn).toFixed(2),serving:"1",total:parseFloat(Jn).toFixed(2)}));d([vt]),m([Qe]),q("manual")}catch(Ot){C("⚠️ Nutrition fetch failed."),console.error(Ot)}},Ye=async Rt=>{const Ot=Rt.target.files[0];if(!Ot)return;const wt=new Image;wt.src=URL.createObjectURL(Ot),wt.onload=()=>{const kt=document.createElement("canvas");kt.width=wt.width,kt.height=wt.height,kt.getContext("2d").drawImage(wt,0,0),A4.recognize(kt,"eng").then(({data:{text:Wt}})=>{const Qt=T4(Wt);Qt.length>0?(m([Qt]),x(!0),C("✅ Nutrients extracted from label","success")):C("⚠️ Could not detect nutrients. Try again or enter manually.","warning")})}},en=Rt=>{let Ot=0;return Rt.forEach(wt=>{wt.nutrients.forEach(kt=>{(kt.type.toLowerCase().includes("calorie")||kt.type.toLowerCase().includes("kcal"))&&(Ot+=parseFloat(kt.total||0))})}),Ot};if(!n)return null;if(k===null)return P.jsx("div",{className:"modal-backdrop",children:P.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[P.jsx("h5",{className:"mb-3",children:"What would you like to log?"}),P.jsxs("div",{className:"d-flex flex-column gap-2",children:[P.jsx("button",{className:"btn btn-primary",onClick:()=>N("meal"),children:"Log Meal"}),P.jsx("button",{className:"btn btn-outline-light",onClick:()=>N("weight"),children:"Log Weight"}),P.jsx("button",{className:"btn btn-danger mt-2",onClick:()=>{V(),t()},children:"Cancel"})]})]})});return P.jsxs(P.Fragment,{children:[k===null&&P.jsx("div",{className:"modal-backdrop",children:P.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[P.jsx("h5",{className:"mb-3",children:"What would you like to log?"}),P.jsxs("div",{className:"d-flex flex-column gap-2",children:[P.jsx("button",{className:"btn btn-primary",onClick:()=>N("meal"),children:"➕ Log Meal"}),P.jsx("button",{className:"btn btn-outline-light",onClick:()=>N("weight"),children:"⚖️ Log Weight"}),P.jsx("button",{className:"btn btn-secondary mt-2",onClick:()=>{V(),t()},children:"Cancel"})]})]})}),k==="meal"&&P.jsx("div",{className:"modal-backdrop",children:P.jsxs("div",{className:"modal-container bg-dark",children:[P.jsxs("div",{className:"modal-header col-md-12 mb-2",style:{display:"flex"},children:[P.jsxs("div",{style:{display:"flex",width:"100%",marginRight:"5%",alignItems:"center"},children:[P.jsx("p",{className:"ModelTitleName",children:"Select Meal"}),P.jsxs("select",{className:"DropDownMeal",value:s,onChange:Rt=>a(Rt.target.value),children:[P.jsx("option",{children:"Breakfast"}),P.jsx("option",{children:"Lunch"}),P.jsx("option",{children:"Dinner"})]})]}),P.jsx("input",{type:"date",className:"form-control",value:o.toISOString().split("T")[0],onChange:Rt=>l(new Date(Rt.target.value)),max:new Date().toISOString().split("T")[0],style:{width:"30%"}})]}),P.jsxs("div",{className:"manual-scan-buttons mb-2",children:[P.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>q("manual"),children:"Manual Entry"}),P.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>q("auto"),children:"Auto Fill"}),P.jsxs("label",{className:"btn btn-primary btn-sm",children:["Scan Barcode",P.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:Zt,style:{display:"none"}})]})]}),M&&P.jsx("div",{className:"modal-backdrop",children:P.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[P.jsx("h5",{className:"mb-3",children:"Barcode not recognized"}),P.jsx("p",{children:"Would you like to try scanning the nutrition label instead?"}),P.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[P.jsx("button",{className:"btn btn-secondary",onClick:()=>B(!1),children:"Cancel"}),P.jsxs("label",{className:"btn btn-primary",children:["📷 Scan Label",P.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:Rt=>{Ye(Rt),B(!1)},style:{display:"none"}})]})]})]})}),b&&P.jsxs("div",{className:"scan-box text-center",children:[P.jsx("video",{ref:R,style:{width:"100%",maxHeight:"200px"}}),P.jsx("button",{className:"btn btn-primary mt-2",onClick:Pt,children:"Capture"}),P.jsx("button",{className:"btn btn-danger mt-2 ms-2",onClick:Bt,children:"Cancel"})]}),y&&ri(),S&&ri(!0),P.jsxs("div",{className:"modal-footer mt-3",children:[P.jsx("button",{className:"btn btn-save btn-primary",onClick:Jt,disabled:Tt,children:"Save"}),P.jsx("button",{className:"btn btn-exit btn-danger",onClick:()=>{V(),t()},children:"Exit"})]})]})}),k==="weight"&&P.jsx("div",{className:"modal-backdrop",children:P.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[P.jsx(XJ,{user:i}),P.jsx("div",{className:"d-flex justify-content-end",children:P.jsx("button",{className:"btn btn-danger mt-2",onClick:()=>{V(),t()},children:"Close"})})]})})]});function ri(Rt=!1){return P.jsxs("div",{className:"TotalFoodSection",children:[g.map((Ot,wt)=>P.jsxs("div",{className:"food-section",children:[P.jsxs("div",{className:"FoodNameSection d-flex align-items-center gap-2",children:[P.jsx("textarea",{className:"FoodNameTextArea",value:h[wt],style:{width:"100%"},onChange:kt=>{const vt=[...h];vt[wt]=kt.target.value,d(vt)},placeholder:"Enter food name (e.g., boiled egg)"}),Rt&&P.jsx("button",{className:"btn btn-sm btn-info",style:{fontSize:"12px",width:"35%"},onClick:()=>zt(h[wt],wt),children:"🔍 Auto-Fill"})]}),P.jsxs("div",{className:"d-flex align-items-center mb-3 mt-2",children:[P.jsx("input",{type:"number",min:"0.1",step:"0.1",value:G,onChange:kt=>U(parseFloat(kt.target.value)||0),className:"form-control me-2",style:{width:"80px"}}),P.jsx("select",{className:"form-select",value:_t,onChange:kt=>xt(kt.target.value),style:{flex:1},children:H.map((kt,vt)=>P.jsx("option",{value:kt.value,children:kt.label},vt))})]}),P.jsxs("div",{className:"row fw-bold mb-2 text-white",style:{fontSize:"12px",padding:"0 10px"},children:[P.jsx("div",{className:"col",children:"Type"}),P.jsx("div",{className:"col",children:"Count (per 100g)"}),P.jsx("div",{className:"col",children:"Total"}),P.jsx("div",{className:"col",children:"Remove"})]}),P.jsx("div",{className:"SplitTable",children:Ot.map((kt,vt)=>{const Wt=_t==="custom"?K:_t,Qt=Wt>0?G*Wt/100:1;return P.jsxs("div",{className:"row mb-1",children:[P.jsxs("div",{className:"col",children:[P.jsx("input",{list:`nutrient-options-${wt}-${vt}`,className:"form-control",value:kt.type,onChange:Qe=>{const cn=et(Qe.target.value);At(wt,vt,"type",cn)}}),P.jsx("datalist",{id:`nutrient-options-${wt}-${vt}`,children:yt.map(Qe=>P.jsx("option",{value:Qe},Qe))})]}),P.jsx("div",{className:"col",children:P.jsx("input",{type:"number",className:"form-control",value:kt.count,onChange:Qe=>At(wt,vt,"count",Qe.target.value)})}),P.jsx("div",{className:"col",children:P.jsx("input",{type:"number",className:"form-control",value:(parseFloat(kt.count||0)*Qt).toFixed(2),disabled:!0})}),P.jsx("div",{className:"col text-center",children:P.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>pt(wt,vt),children:"×"})})]},vt)})}),P.jsx("button",{className:"AddItemButton mt-1",onClick:()=>nt(wt),children:"Add Nutrient"})]},wt)),P.jsx("button",{className:"AddItemButton mt-3",onClick:ot,children:"Add Food Item"})]})}}const Dw="/knowurfood/assets/Logo-L9hp3FVR.png";function Kat({onLoginSuccess:n}){const[t,e]=rt.useState("login"),[r,i]=rt.useState(1),[s,a]=rt.useState(""),[o,l]=rt.useState(""),[h,d]=rt.useState(""),[g,m]=rt.useState(""),[y,x]=rt.useState(""),[b,E]=rt.useState(2e3),[S,T]=rt.useState("Breakfast,Lunch,Dinner"),[R,k]=rt.useState("g"),[N,j]=rt.useState(""),[O,C]=rt.useState(""),[M,B]=rt.useState(""),[H,G]=rt.useState(""),[U,_t]=rt.useState("08:00"),[xt,K]=rt.useState("13:00"),[ct,yt]=rt.useState("19:00"),[et,V]=rt.useState(""),[q,ot]=rt.useState("male"),[nt,pt]=rt.useState(""),[Tt,At]=rt.useState({}),[Jt,Bt]=rt.useState(!1),[Pt,zt]=rt.useState(!1),[Zt,Ge]=rt.useState(!1);rt.useEffect(()=>{if(N&&O&&M&&H&&et&&q){const wt=Math.max(1,Math.ceil((new Date(H)-new Date)/864e5)),vt=(M-N)*7700/wt,Wt=q==="male"?10*N+6.25*O-5*et+5:10*N+6.25*O-5*et-161,Qt=Math.round(Wt+vt);isNaN(Qt)||E(Qt)}},[N,O,M,H,et,q]);const Ye=()=>{a(""),l(""),d(""),m(""),x(""),E(2e3),T("Breakfast,Lunch,Dinner"),k("g"),j(""),C(""),B(""),G(""),_t("08:00"),K("13:00"),yt("19:00"),V(""),ot("male"),pt(""),At({}),i(1),Ge(!1)},en=()=>{e(wt=>wt==="login"?"register":"login"),Ye()},ri=()=>{const wt={};if(r===1&&(s||(wt.username="Email is required"),o||(wt.password="Password is required"),h||(wt.confirmPassword="Please confirm your password"),o&&h&&o!==h&&(wt.confirmPassword="Passwords do not match")),r===2&&(g||(wt.firstName="First name is required"),y||(wt.lastName="Last name is required"),et||(wt.age="Age is required"),N||(wt.currentWeight="Current weight is required"),O||(wt.height="Height is required"),M||(wt.goalWeight="Goal weight is required"),H||(wt.goalDate="Goal date is required")),Object.keys(wt).length>0){At(wt);return}At({}),pt(""),i(r+1)},Rt=async wt=>{wt.preventDefault(),pt(""),At({}),Bt(!0);try{let kt;if(t==="register")kt=await WJ({email:s,password:o,firstName:g,lastName:y,calorieGoal:Number(b),mealOrder:S.split(","),unit:R,currentWeight:parseFloat(N),height:parseFloat(O),goalWeight:parseFloat(M),goalDate:H,breakfastTime:U,lunchTime:xt,dinnerTime:ct,age:parseInt(et),gender:q});else{const vt=Kb();await qX(vt,Zt?m8:qb);const Qt=await HX(vt,s,o);Zt?localStorage.setItem("rememberMe","true"):localStorage.removeItem("rememberMe"),kt=Qt.user}n(kt)}catch(kt){pt(kt.message)}finally{Bt(!1)}},Ot=()=>{switch(r){case 1:return P.jsxs(P.Fragment,{children:[P.jsxs("div",{className:"form-row",children:[P.jsx("label",{children:"Email"}),P.jsx("input",{type:"email",className:`form-control ${Tt.username?"is-invalid":""}`,value:s,onChange:wt=>a(wt.target.value)}),Tt.username&&P.jsx("div",{className:"text-danger",children:Tt.username})]}),P.jsxs("div",{className:"form-row",children:[P.jsx("label",{children:"Password"}),P.jsx("input",{type:Pt?"text":"password",className:`form-control ${Tt.password?"is-invalid":""}`,value:o,onChange:wt=>l(wt.target.value)}),Tt.password&&P.jsx("div",{className:"text-danger",children:Tt.password})]}),P.jsxs("div",{className:"form-row",children:[P.jsx("label",{children:"Confirm Password"}),P.jsx("input",{type:Pt?"text":"password",className:`form-control ${Tt.confirmPassword?"is-invalid":""}`,value:h,onChange:wt=>d(wt.target.value)}),Tt.confirmPassword&&P.jsx("div",{className:"text-danger",children:Tt.confirmPassword})]})]});case 2:return P.jsx(P.Fragment,{});case 3:return P.jsx(P.Fragment,{});default:return null}};return P.jsxs("div",{className:"auth-container fade-slide-in",children:[P.jsx("div",{className:"text-center",children:P.jsx("img",{src:Dw,alt:"KnowUrFood Logo",style:{width:"200px"}})}),P.jsxs("div",{className:"auth-box shadow rounded",children:[P.jsx("h2",{className:"auth-title",children:t==="login"?"LOGIN":"REGISTER"}),P.jsx("form",{onSubmit:wt=>wt.preventDefault(),className:"auth-form",children:t==="login"?P.jsxs(P.Fragment,{children:[P.jsxs("div",{className:"form-row",children:[P.jsx("label",{children:"Email"}),P.jsx("input",{type:"email",className:"form-control",value:s,onChange:wt=>a(wt.target.value),required:!0})]}),P.jsxs("div",{className:"form-row",children:[P.jsx("label",{children:"Password"}),P.jsx("input",{type:Pt?"text":"password",className:"form-control",value:o,onChange:wt=>l(wt.target.value),required:!0})]}),P.jsxs("div",{className:"form-check",children:[P.jsx("input",{type:"checkbox",className:"form-check-input",id:"rememberMe",checked:Zt,onChange:wt=>Ge(wt.target.checked)}),P.jsx("label",{className:"form-check-label",htmlFor:"rememberMe",children:"Remember Me"})]}),P.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3 mb-2",onClick:Rt,disabled:Jt,children:Jt?P.jsxs(P.Fragment,{children:[P.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Logging in..."]}):"Login"})]}):P.jsxs("div",{className:`fade-step step-${r}`,children:[Ot(),P.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[r>1&&P.jsx("button",{type:"button",className:"btn btn-outline-light",onClick:()=>i(r-1),children:"← Back"}),r<3?P.jsx("button",{type:"button",className:"btn btn-primary ms-auto",onClick:ri,children:"Next →"}):P.jsx("button",{type:"submit",onClick:Rt,className:"btn btn-success ms-auto",disabled:Jt,children:Jt?P.jsxs(P.Fragment,{children:[P.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Registering..."]}):"Register"})]})]})}),P.jsxs("p",{className:"text-white text-center mt-3",children:[t==="login"?"Don't have an account?":"Already have an account?"," ",P.jsx("span",{className:"text-link",onClick:en,children:t==="login"?"Register":"Login"})]}),nt&&P.jsx("p",{className:"text-danger text-center mt-2",children:nt})]})]})}function $at({user:n,meals:t,onLogout:e,clearAllMeals:r}){const[i,s]=rt.useState(""),[a,o]=rt.useState(""),[l,h]=rt.useState(25),[d,g]=rt.useState("male"),[m,y]=rt.useState(""),[x,b]=rt.useState(""),[E,S]=rt.useState(""),[T,R]=rt.useState(""),[k,N]=rt.useState("Breakfast-Lunch-Dinner"),[j,O]=rt.useState("g"),[C,M]=rt.useState(!1),[B,H]=rt.useState(!1),[G,U]=rt.useState("08:00"),[_t,xt]=rt.useState("13:00"),[K,ct]=rt.useState("19:00"),[yt,et]=rt.useState(""),[V,q]=rt.useState(""),[ot,nt]=rt.useState(""),[pt,Tt]=rt.useState(!1),At=n.level||1,Bt=(n.xp||0)%100,Pt=100,zt=Bt/Pt*100,Zt=n.badges||[];rt.useEffect(()=>{var vt;n&&(s(n.firstName||""),o(n.lastName||""),h(n.age||25),g(n.gender||"male"),y(n.height||""),b(n.currentWeight||""),S(n.goalWeight||""),R(n.goalDate||""),N(((vt=n.mealOrder)==null?void 0:vt.join("-"))||"Breakfast-Lunch-Dinner"),O(n.unit||"g"),M(n.darkMode??!1),U(n.breakfastTime||"08:00"),xt(n.lunchTime||"13:00"),ct(n.dinnerTime||"19:00"))},[n]);const Ge=async()=>{const vt={firstName:i,lastName:a,age:l,gender:d,height:m,currentWeight:x,goalWeight:E,goalDate:T,mealOrder:k.split("-"),unit:j,darkMode:C,breakfastTime:G,lunchTime:_t,dinnerTime:K};await gO(n.uid,vt),alert("✅ Preferences updated successfully!")},Ye=()=>{const vt=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),Wt=document.createElement("a");Wt.href=URL.createObjectURL(vt),Wt.download="meals.json",Wt.click()},en=()=>{if(!t||t.length===0){alert("No meals to export.");return}const vt=[["Date","Meal Type","Food Name","Fat (g)","Carbs (g)","Protein (g)","Quantity","Unit"]];t.forEach(cn=>{cn.foodItems.forEach(Jn=>{var ye,oe,wr;vt.push([cn.date,cn.mealType,Jn.name,((ye=Jn.nutrients)==null?void 0:ye.fat)||"",((oe=Jn.nutrients)==null?void 0:oe.carbs)||"",((wr=Jn.nutrients)==null?void 0:wr.protein)||"",Jn.quantity||"",j])})});const Wt=vt.map(cn=>cn.join(",")).join(`
`),Qt=new Blob([Wt],{type:"text/csv"}),Qe=document.createElement("a");Qe.href=URL.createObjectURL(Qt),Qe.download="meals.csv",Qe.click()},ri=async()=>{window.confirm("⚠️ Are you sure you want to clear all meal data?")&&(H(!0),await r(),H(!1),alert("✅ All meals deleted."))},Rt=async()=>{if(!yt&&!V){alert("Please enter a new email or password.");return}try{Tt(!0);const Wt=Kb().currentUser,Qt=Ll.credential(Wt.email,ot);await jX(Wt,Qt),yt&&(await GX(Wt,yt),await gO(Wt.uid,{email:yt}),alert("✅ Email updated.")),V&&(await WX(Wt,V),alert("✅ Password updated.")),et(""),q(""),nt("")}catch(vt){console.error(vt),alert(`❌ ${vt.message}`)}finally{Tt(!1)}},Ot=(t==null?void 0:t.length)||0,wt=[...new Set(t==null?void 0:t.map(vt=>vt.date))],kt=wt.length>0?(Ot/wt.length).toFixed(1):0;return P.jsxs("div",{className:"home-container",children:[P.jsxs("div",{className:"text-center mb-4",children:[P.jsx("i",{className:"bi bi-person-circle TitleName",style:{fontSize:"3rem"}}),P.jsx("h4",{className:"mt-2 fw-bold TitleName",children:i}),P.jsx("small",{className:"text-white",children:"Profile"})]}),P.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[P.jsx("h6",{className:"fw-bold",children:"Usage Summary"}),P.jsxs("p",{children:["📅 Days Tracked: ",wt.length]}),P.jsxs("p",{children:["🍽️ Meals Logged: ",Ot]}),P.jsxs("p",{children:["📊 Avg Meals/Day: ",kt]})]}),P.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[P.jsx("h6",{className:"fw-bold",children:"Your Rewards"}),P.jsxs("p",{children:["🎮 Level ",At]}),P.jsx("div",{className:"progress mb-2",style:{height:"6px",background:"#444"},children:P.jsx("div",{className:"progress-bar bg-success",style:{width:`${zt}%`},title:`${Bt}/${Pt} XP`})}),P.jsx("p",{children:"🏅 Badges Unlocked:"}),Zt.length===0?P.jsx("p",{className:"text-muted small",children:"No badges yet."}):P.jsx("div",{className:"d-flex flex-wrap gap-2",children:Zt.map((vt,Wt)=>P.jsx("span",{className:"badge rounded-pill bg-info text-dark p-2",children:vt},Wt))})]}),P.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[P.jsx("h6",{className:"fw-bold",children:"Personal Info"}),P.jsxs("div",{className:"row g-2",children:[P.jsx("div",{className:"col",children:P.jsx("input",{className:"form-control form-control-sm",placeholder:"First Name",value:i,onChange:vt=>s(vt.target.value)})}),P.jsx("div",{className:"col",children:P.jsx("input",{className:"form-control form-control-sm",placeholder:"Last Name",value:a,onChange:vt=>o(vt.target.value)})})]}),P.jsxs("div",{className:"row g-2 mt-2",children:[P.jsx("div",{className:"col",children:P.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Age",value:l,onChange:vt=>h(vt.target.value)})}),P.jsx("div",{className:"col",children:P.jsxs("select",{className:"form-select form-select-sm",value:d,onChange:vt=>g(vt.target.value),children:[P.jsx("option",{value:"male",children:"Male"}),P.jsx("option",{value:"female",children:"Female"})]})})]}),P.jsxs("div",{className:"row g-2 mt-2",children:[P.jsx("div",{className:"col",children:P.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Height (cm)",value:m,onChange:vt=>y(vt.target.value)})}),P.jsx("div",{className:"col",children:P.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Current Weight",value:x,onChange:vt=>b(vt.target.value)})})]}),P.jsxs("div",{className:"row g-2 mt-2",children:[P.jsx("div",{className:"col",children:P.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Goal Weight",value:E,onChange:vt=>S(vt.target.value)})}),P.jsx("div",{className:"col",children:P.jsx("input",{type:"date",className:"form-control form-control-sm",value:T,onChange:vt=>R(vt.target.value)})})]})]}),P.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[P.jsx("h6",{className:"fw-bold",children:"Preferences"}),P.jsxs("div",{className:"mb-2",children:[P.jsx("label",{className:"form-label small",children:"Meal Order"}),P.jsxs("select",{className:"form-select form-select-sm",value:k,onChange:vt=>N(vt.target.value),children:[P.jsx("option",{children:"Breakfast-Lunch-Dinner"}),P.jsx("option",{children:"Lunch-Dinner-Breakfast"}),P.jsx("option",{children:"Dinner-Breakfast-Lunch"})]})]}),P.jsxs("div",{className:"mb-2",children:[P.jsx("label",{className:"form-label small",children:"Units"}),P.jsxs("select",{className:"form-select form-select-sm",value:j,onChange:vt=>O(vt.target.value),children:[P.jsx("option",{children:"g"}),P.jsx("option",{children:"mg"}),P.jsx("option",{children:"kcal"})]})]}),P.jsxs("div",{className:"form-check form-switch mb-2",children:[P.jsx("input",{className:"form-check-input",type:"checkbox",checked:C,onChange:vt=>M(vt.target.checked)}),P.jsx("label",{className:"form-check-label",children:"Enable Dark Mode"})]})]}),P.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[P.jsx("h6",{className:"fw-bold",children:"Reminder Times"}),P.jsxs("div",{className:"row g-2 mb-2",children:[P.jsx("div",{className:"col",children:P.jsx("input",{type:"time",className:"form-control form-control-sm",value:G,onChange:vt=>U(vt.target.value)})}),P.jsx("div",{className:"col",children:P.jsx("input",{type:"time",className:"form-control form-control-sm",value:_t,onChange:vt=>xt(vt.target.value)})}),P.jsx("div",{className:"col",children:P.jsx("input",{type:"time",className:"form-control form-control-sm",value:K,onChange:vt=>ct(vt.target.value)})})]})]}),P.jsx("button",{className:"btn btn-primary btn-sm w-100 mb-3",onClick:Ge,children:"💾 Save All Changes"}),P.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[P.jsx("h6",{className:"fw-bold",children:"Update Email / Password"}),P.jsx("input",{type:"password",className:"form-control form-control-sm mb-2",placeholder:"Current Password",value:ot,onChange:vt=>nt(vt.target.value)}),P.jsx("input",{type:"email",className:"form-control form-control-sm mb-2",placeholder:"New Email",value:yt,onChange:vt=>et(vt.target.value)}),P.jsx("input",{type:"password",className:"form-control form-control-sm mb-2",placeholder:"New Password",value:V,onChange:vt=>q(vt.target.value)}),P.jsx("button",{className:"btn btn-outline-light btn-sm w-100",onClick:Rt,disabled:pt,children:pt?"Updating...":"Update Email / Password"})]}),P.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[P.jsx("h6",{className:"fw-bold",children:"Data Management"}),P.jsx("button",{className:"btn btn-outline-light btn-sm w-100 mb-2",onClick:Ye,children:"📤 Export JSON"}),P.jsx("button",{className:"btn btn-outline-light btn-sm w-100 mb-2",onClick:en,children:"📊 Export CSV"}),P.jsx("button",{className:"btn btn-outline-danger btn-sm w-100",onClick:ri,disabled:B,children:B?"Clearing...":"🗑 Clear All Meals"})]}),P.jsxs("div",{className:"card bg-dark border-0 p-3 text-white",children:[P.jsx("h6",{className:"fw-bold",children:"Account"}),P.jsx("button",{className:"btn btn-danger w-100 mt-2",onClick:e,children:"🚪 Logout"})]})]})}function Qat({meals:n,user:t}){const[e,r]=rt.useState({}),[i,s]=rt.useState({}),[a,o]=rt.useState(!1),l=new Date;l.setDate(l.getDate()-6);const h={Protein:50*7,Carbohydrate:260*7,Fat:70*7,"Carbs as Sugar":30*7,Fibre:30*7,Salt:6*7},d=(y=0)=>{const x=new Date,b=new Date(x.setDate(x.getDate()-y)),E=new Date(b);E.setDate(b.getDate()-6);const S=[];for(let T=0;T<7;T++){const R=new Date(E);R.setDate(E.getDate()+T),S.push(R.toISOString().split("T")[0])}return S},g=y=>{const x={};let b=0;y.forEach(S=>{const T=n.filter(R=>R.date===S);T.length>0&&(b++,T.forEach(R=>{R.foodItems.forEach(k=>{k.nutrients.forEach(N=>{const j=parseFloat(N.total)||0;x[N.type]=(x[N.type]||0)+j})})}))});const E={};return Object.keys(x).forEach(S=>{E[S]=x[S]/b}),E};rt.useEffect(()=>{const y=d(0),x=d(7);r(g(y)),s(g(x))},[n]),rt.useEffect(()=>{(async()=>{if(!(t!=null&&t.goalDate)||!(t!=null&&t.goalWeight)||!(t!=null&&t.currentWeight))return;const x=await Mh(t.uid);if(x.length===0)return;const b=new Date(t.createdAt||x[0].date),E=new Date,S=new Date(t.goalDate),T=Math.max(1,(S-b)/864e5),R=Math.max(1,(E-b)/864e5),k=t.goalWeight-t.currentWeight,N=k/T*R,j=t.currentWeight+N,O=x.reduce((C,M)=>C.date>M.date?C:M).weight;(k>0&&O<j-.5||k<0&&O>j+.5)&&o(!0)})()},[t]);const m=[];return Object.keys(h).forEach(y=>{const x=e[y]||0,b=(e[y]||0)-(i[y]||0);x<.6*h[y]?m.push(`⬇️ Your ${y} intake is quite low this week. Consider improving it.`):x>1.2*h[y]?m.push(`⚠️ You're exceeding recommended ${y} levels.`):b>5?m.push(`🔺 ${y} increased significantly this week.`):b<-5&&m.push(`🔻 ${y} dropped since last week.`)}),P.jsxs("div",{className:"home-container",children:[P.jsx("p",{className:"TitleName",children:"Suggestions"}),a&&P.jsx("div",{className:"CalBarCharSection text-white fw-bold small mb-2 bg-dark",children:"⚠️ You're behind your weight goal progress. Try adjusting your intake!"}),P.jsxs("div",{className:"CalBarCharSection bg-dark mb-2",children:[P.jsx("p",{className:"SubTitleName mb-2",children:"Weekly Calorie Trend"}),P.jsx(xM,{meals:n,startOfWeek:l})]}),P.jsxs("div",{className:"NutritionProgressSection mb-2 bg-dark list-group",style:{padding:"5%"},children:[P.jsx("p",{className:"SubTitleName",children:"This Week's Nutrient Averages"}),Object.keys(h).map(y=>{const x=e[y]||0,b=h[y],E=(e[y]||0)-(i[y]||0),S=Math.min(x/b*100,150),T=x>b,R=E>1?"▲":E<-1?"▼":"•",k=E?`${R} ${Math.abs(E).toFixed(1)}g from last week`:"";return P.jsxs("div",{className:"mb-3",children:[P.jsxs("div",{className:"d-flex justify-content-between small",children:[P.jsx("span",{className:"text-white",children:y}),P.jsxs("span",{className:"text-white",children:[x.toFixed(1)," / ",b,"g"]})]}),P.jsx("div",{className:"progress",style:{height:"8px"},children:P.jsx("div",{className:`progress-bar ${T?"bg-danger":"bg-success"} progress-bar-striped progress-bar-animated`,style:{width:`${S}%`}})}),P.jsx("div",{className:"small text-white",children:k})]},y)})]}),P.jsx("div",{className:"SuggestionsBox",children:m.length>0?P.jsxs("ul",{className:"list-group bg-dark",style:{padding:"5%"},children:[P.jsx("p",{className:"SubTitleName",children:"Suggestions"}),m.map((y,x)=>P.jsx("li",{className:"list-group-item small bg-dark text-white border-0 ps-0",children:y},x))]}):P.jsx("p",{className:"text-success",children:"✅ You're on track this week!"})})]})}function Ow(){return Ow=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)({}).hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Ow.apply(null,arguments)}function kk(n,t){if(n==null)return{};var e={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(t.indexOf(r)!==-1)continue;e[r]=n[r]}return e}function Mw(n,t){return Mw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},Mw(n,t)}function oA(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,Mw(n,t)}function Zat(n,t){return n.classList?!!t&&n.classList.contains(t):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+t+" ")!==-1}function Jat(n,t){n.classList?n.classList.add(t):Zat(n,t)||(typeof n.className=="string"?n.className=n.className+" "+t:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+t))}function S4(n,t){return n.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function tot(n,t){n.classList?n.classList.remove(t):typeof n.className=="string"?n.className=S4(n.className,t):n.setAttribute("class",S4(n.className&&n.className.baseVal||"",t))}var eot=I4();const i1=Nw(eot),C4={disabled:!1},cA=un.createContext(null);var Lk=function(t){return t.scrollTop},Vd="unmounted",Zc="exited",ki="entering",Ds="entered",Lg="exiting",Va=function(n){oA(t,n);function t(r,i){var s;s=n.call(this,r,i)||this;var a=i,o=a&&!a.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?o?(l=Zc,s.appearStatus=ki):l=Ds:r.unmountOnExit||r.mountOnEnter?l=Vd:l=Zc,s.state={status:l},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var a=i.in;return a&&s.status===Vd?{status:Zc}:null};var e=t.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(i){var s=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==ki&&a!==Ds&&(s=ki):(a===ki||a===Ds)&&(s=Lg)}this.updateStatus(!1,s)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var i=this.props.timeout,s,a,o;return s=a=o=i,i!=null&&typeof i!="number"&&(s=i.exit,a=i.enter,o=i.appear!==void 0?i.appear:a),{exit:s,enter:a,appear:o}},e.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===ki){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:i1.findDOMNode(this);a&&Lk(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Zc&&this.setState({status:Vd})},e.performEnter=function(i){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:i,l=this.props.nodeRef?[o]:[i1.findDOMNode(this),o],h=l[0],d=l[1],g=this.getTimeouts(),m=o?g.appear:g.enter;if(!i&&!a||C4.disabled){this.safeSetState({status:Ds},function(){s.props.onEntered(h)});return}this.props.onEnter(h,d),this.safeSetState({status:ki},function(){s.props.onEntering(h,d),s.onTransitionEnd(m,function(){s.safeSetState({status:Ds},function(){s.props.onEntered(h,d)})})})},e.performExit=function(){var i=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:i1.findDOMNode(this);if(!s||C4.disabled){this.safeSetState({status:Zc},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:Lg},function(){i.props.onExiting(o),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:Zc},function(){i.props.onExited(o)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},e.setNextCallback=function(i){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,i(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},e.onTransitionEnd=function(i,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:i1.findDOMNode(this),o=i==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],h=l[0],d=l[1];this.props.addEndListener(h,d)}i!=null&&setTimeout(this.nextCallback,i)},e.render=function(){var i=this.state.status;if(i===Vd)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=kk(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return un.createElement(cA.Provider,{value:null},typeof a=="function"?a(i,o):un.cloneElement(un.Children.only(a),o))},t}(un.Component);Va.contextType=cA;Va.propTypes={};function ju(){}Va.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ju,onEntering:ju,onEntered:ju,onExit:ju,onExiting:ju,onExited:ju};Va.UNMOUNTED=Vd;Va.EXITED=Zc;Va.ENTERING=ki;Va.ENTERED=Ds;Va.EXITING=Lg;var not=function(t,e){return t&&e&&e.split(" ").forEach(function(r){return Jat(t,r)})},$x=function(t,e){return t&&e&&e.split(" ").forEach(function(r){return tot(t,r)})},lA=function(n){oA(t,n);function t(){for(var r,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=n.call.apply(n,[this].concat(s))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(o,l){var h=r.resolveArguments(o,l),d=h[0],g=h[1];r.removeClasses(d,"exit"),r.addClass(d,g?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(o,l)},r.onEntering=function(o,l){var h=r.resolveArguments(o,l),d=h[0],g=h[1],m=g?"appear":"enter";r.addClass(d,m,"active"),r.props.onEntering&&r.props.onEntering(o,l)},r.onEntered=function(o,l){var h=r.resolveArguments(o,l),d=h[0],g=h[1],m=g?"appear":"enter";r.removeClasses(d,m),r.addClass(d,m,"done"),r.props.onEntered&&r.props.onEntered(o,l)},r.onExit=function(o){var l=r.resolveArguments(o),h=l[0];r.removeClasses(h,"appear"),r.removeClasses(h,"enter"),r.addClass(h,"exit","base"),r.props.onExit&&r.props.onExit(o)},r.onExiting=function(o){var l=r.resolveArguments(o),h=l[0];r.addClass(h,"exit","active"),r.props.onExiting&&r.props.onExiting(o)},r.onExited=function(o){var l=r.resolveArguments(o),h=l[0];r.removeClasses(h,"exit"),r.addClass(h,"exit","done"),r.props.onExited&&r.props.onExited(o)},r.resolveArguments=function(o,l){return r.props.nodeRef?[r.props.nodeRef.current,o]:[o,l]},r.getClassNames=function(o){var l=r.props.classNames,h=typeof l=="string",d=h&&l?l+"-":"",g=h?""+d+o:l[o],m=h?g+"-active":l[o+"Active"],y=h?g+"-done":l[o+"Done"];return{baseClassName:g,activeClassName:m,doneClassName:y}},r}var e=t.prototype;return e.addClass=function(i,s,a){var o=this.getClassNames(s)[a+"ClassName"],l=this.getClassNames("enter"),h=l.doneClassName;s==="appear"&&a==="done"&&h&&(o+=" "+h),a==="active"&&i&&Lk(i),o&&(this.appliedClasses[s][a]=o,not(i,o))},e.removeClasses=function(i,s){var a=this.appliedClasses[s],o=a.base,l=a.active,h=a.done;this.appliedClasses[s]={},o&&$x(i,o),l&&$x(i,l),h&&$x(i,h)},e.render=function(){var i=this.props;i.classNames;var s=kk(i,["classNames"]);return un.createElement(Va,Ow({},s,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(un.Component);lA.defaultProps={classNames:""};lA.propTypes={};var s1,a1;function rot(n,t){return!(n===t||un.isValidElement(n)&&un.isValidElement(t)&&n.key!=null&&n.key===t.key)}var kh={out:"out-in",in:"in-out"},Rm=function(t,e,r){return function(){var i;t.props[e]&&(i=t.props)[e].apply(i,arguments),r()}},iot=(s1={},s1[kh.out]=function(n){var t=n.current,e=n.changeState;return un.cloneElement(t,{in:!1,onExited:Rm(t,"onExited",function(){e(ki,null)})})},s1[kh.in]=function(n){var t=n.current,e=n.changeState,r=n.children;return[t,un.cloneElement(r,{in:!0,onEntered:Rm(r,"onEntered",function(){e(ki)})})]},s1),sot=(a1={},a1[kh.out]=function(n){var t=n.children,e=n.changeState;return un.cloneElement(t,{in:!0,onEntered:Rm(t,"onEntered",function(){e(Ds,un.cloneElement(t,{in:!0}))})})},a1[kh.in]=function(n){var t=n.current,e=n.children,r=n.changeState;return[un.cloneElement(t,{in:!1,onExited:Rm(t,"onExited",function(){r(Ds,un.cloneElement(e,{in:!0}))})}),un.cloneElement(e,{in:!0})]},a1),uA=function(n){oA(t,n);function t(){for(var r,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=n.call.apply(n,[this].concat(s))||this,r.state={status:Ds,current:null},r.appeared=!1,r.changeState=function(o,l){l===void 0&&(l=r.state.current),r.setState({status:o,current:l})},r}var e=t.prototype;return e.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(i,s){return i.children==null?{current:null}:s.status===ki&&i.mode===kh.in?{status:ki}:s.current&&rot(s.current,i.children)?{status:Lg}:{current:un.cloneElement(i.children,{in:!0})}},e.render=function(){var i=this.props,s=i.children,a=i.mode,o=this.state,l=o.status,h=o.current,d={children:s,current:h,changeState:this.changeState,status:l},g;switch(l){case ki:g=sot[a](d);break;case Lg:g=iot[a](d);break;case Ds:g=h}return un.createElement(cA.Provider,{value:{isMounting:!this.appeared}},g)},t}(un.Component);uA.propTypes={};uA.defaultProps={mode:kh.out};function aot(){const[n,t]=rt.useState(null),[e,r]=rt.useState([]),[i,s]=rt.useState("dashboard"),[a,o]=rt.useState(!1),[l,h]=rt.useState(null),[d,g]=rt.useState(!1),[m,y]=rt.useState(null),[x,b]=rt.useState(""),[E,S]=rt.useState(!1),[T,R]=rt.useState(!0),k=rt.useRef(!1),N=rt.useRef(null),[j,O]=rt.useState(!1);rt.useEffect(()=>{const U=async()=>{const _t=await pO();if(t(_t||null),O(!0),_t){t(_t);const xt=await vx(_t.uid);r(xt)}};k.current?R(!1):setTimeout(()=>{R(!1),k.current=!0},1500),U()},[]),rt.useEffect(()=>{"Notification"in window&&n&&Notification.requestPermission().then(U=>{U==="granted"&&G(n)})},[n]);const C=async U=>{t(U);const _t=await vx(U.uid);r(_t)},M=async U=>{if(!n)return;const _t={...U,userId:n.uid};if(l){await jJ({..._t,id:l.id},n.uid);const xt=e.map(K=>K.id===l.id?{..._t,id:l.id}:K);r(xt),h(null)}else{await UJ(_t,n.uid),b("+10 XP! 🎉"),S(!0),setTimeout(()=>S(!1),3e3);const xt=await vx(n.uid),K=await pO();r(xt),t(K)}o(!1)},B=async U=>{await zJ(U,n.uid);const _t=e.filter(xt=>xt.id!==U);r(_t)},H=async()=>{await qJ(),t(null),r([])};function G(U){[{label:"Breakfast",time:U.breakfastTime||"08:00"},{label:"Lunch",time:U.lunchTime||"13:00"},{label:"Dinner",time:U.dinnerTime||"19:00"}].forEach(({label:xt,time:K})=>{const[ct,yt]=K.split(":").map(Number),et=new Date,V=new Date;V.setHours(ct,yt,0,0),V<=et&&V.setDate(V.getDate()+1);const q=V.getTime()-et.getTime();setTimeout(()=>{new Notification(`${xt} Reminder 🍽️`,{body:`It's time to log your ${xt.toLowerCase()}!`})},q)})}return!j||T?P.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:P.jsx("img",{src:Dw,alt:"Logo",style:{width:"150px",height:"150px"}})}):n?T?P.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:P.jsx("img",{src:Dw,alt:"Logo",style:{width:"150px",height:"150px"}})}):P.jsx(uA,{mode:"out-in",children:P.jsx(lA,{timeout:300,classNames:"tab-transition",unmountOnExit:!0,nodeRef:N,children:P.jsxs("div",{style:{height:"100%"},ref:N,children:[i==="dashboard"&&P.jsx(Vnt,{user:n,meals:e,onEditMeal:U=>{h(U),o(!0)},onDeleteMeal:U=>{y(U),g(!0)}}),i==="history"&&P.jsx(Bnt,{user:n,meals:e,onEditMeal:U=>{h(U),o(!0)},onDeleteMeal:U=>{y(U),g(!0)}}),i==="suggestions"&&P.jsx(Qat,{meals:e,user:n}),i==="profile"&&P.jsx($at,{user:n,meals:e,onLogout:H,clearAllMeals:async()=>{await HJ(n.uid),r([])}}),P.jsx(v7,{onAddClick:()=>o(!0),onLogout:H,onTabChange:U=>s(U),currentTab:i}),P.jsx(Xat,{isOpen:a,onClose:()=>{o(!1),h(null)},onSave:M,user:n,editMeal:l}),d&&P.jsx("div",{className:"modal-backdrop",children:P.jsxs("div",{className:"modal-container p-4 text-center",children:[P.jsx("p",{className:"text-white fw-bold",children:"Are you sure you want to delete this meal?"}),P.jsxs("div",{className:"d-flex justify-content-center gap-3 mt-3",children:[P.jsx("button",{className:"btn btn-secondary",onClick:()=>g(!1),children:"Cancel"}),P.jsx("button",{className:"btn btn-danger",onClick:async()=>{m!==null&&(await B(m),g(!1),y(null))},children:"Delete"})]})]})}),E&&P.jsx("div",{className:"toast-container position-fixed top-0 start-50 translate-middle-x p-3",style:{zIndex:9999},children:P.jsx("div",{className:"toast show bg-success text-white",children:P.jsx("div",{className:"toast-body fw-bold text-center",children:x})})})]})},i)}):P.jsx(Kat,{onLoginSuccess:C})}y7.createRoot(document.getElementById("root")).render(P.jsx(un.StrictMode,{children:P.jsx(Aat,{children:P.jsx(aot,{})})}));serviceWorkerRegistration.register();
